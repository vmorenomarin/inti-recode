/*! For license information please see jlab_core.fc632a0f38747f007842.js.LICENSE.txt */
(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[3472],{23891:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DEFAULT_CONTEXT_ITEM_RANK:()=>S,default:()=>K});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(69442);var l=n.n(a);var c=n(3540);var d=n.n(c);var u=n(42014);var h=n.n(u);var p=n(42573);var m=n.n(p);var g=n(59768);var f=n.n(g);var A=n(25903);var v=n.n(A);var C=n(54522);var b=n.n(C);var _=n(91100);var y=n.n(_);var E=n(64782);var w=n.n(E);var x=n(700);var j=n.n(x);var k=n(77865);var B=n.n(k);const S=100;var D;(function(e){e.activateNextTab="application:activate-next-tab";e.activatePreviousTab="application:activate-previous-tab";e.activateNextTabBar="application:activate-next-tab-bar";e.activatePreviousTabBar="application:activate-previous-tab-bar";e.close="application:close";e.closeOtherTabs="application:close-other-tabs";e.closeRightTabs="application:close-right-tabs";e.closeAll="application:close-all";e.setMode="application:set-mode";e.toggleMode="application:toggle-mode";e.toggleLeftArea="application:toggle-left-area";e.toggleRightArea="application:toggle-right-area";e.togglePresentationMode="application:toggle-presentation-mode";e.tree="router:tree";e.switchSidebar="sidebar:switch"})(D||(D={}));const M={id:"@jupyterlab/application-extension:commands",autoStart:true,requires:[g.ITranslator],optional:[r.ILabShell,i.ICommandPalette],activate:(e,t,n,o)=>{const{commands:i,shell:s}=e;const l=t.load("jupyterlab");const c=l.__("Main Area");i.addCommand(r.JupyterFrontEndContextMenu.contextMenu,{label:l.__("Shift+Right Click for Browser Menu"),isEnabled:()=>false,execute:()=>void 0});const d=()=>{const t=e=>!!e.dataset.id;const n=e.contextMenuHitTest(t);if(!n){return s.currentWidget}const r=(0,C.toArray)(s.widgets("main")).filter((e=>e.id===n.dataset.id));if(r.length<1){return s.currentWidget}return r[0]};const u=e=>{e.forEach((e=>e.close()))};const h=(e,t)=>{switch(e.type){case"split-area":{const n=(0,C.iter)(e.children);let r=null;let o;do{o=n.next();if(o){r=h(o,t)}}while(!r&&o);return r}case"tab-area":{const{id:n}=t;return e.widgets.some((e=>e.id===n))?e:null}default:return null}};const p=e=>{var t;const r=n===null||n===void 0?void 0:n.saveLayout();const o=r===null||r===void 0?void 0:r.mainArea;if(!o||a.PageConfig.getOption("mode")!=="multiple-document"){return null}const i=(t=o.dock)===null||t===void 0?void 0:t.main;if(!i){return null}return h(i,e)};const m=e=>{const{id:t}=e;const n=p(e);const r=n?n.widgets||[]:[];const o=r.findIndex((e=>e.id===t));if(o<0){return[]}return r.slice(o+1)};i.addCommand(D.close,{label:()=>l.__("Close Tab"),isEnabled:()=>{const e=d();return!!e&&e.title.closable},execute:()=>{const e=d();if(e){e.close()}}});i.addCommand(D.closeOtherTabs,{label:()=>l.__("Close All Other Tabs"),isEnabled:()=>{const e=s.widgets("main");return!!e.next()&&!!e.next()},execute:()=>{const e=d();if(!e){return}const{id:t}=e;const n=(0,C.toArray)(s.widgets("main")).filter((e=>e.id!==t));u(n)}});i.addCommand(D.closeRightTabs,{label:()=>l.__("Close Tabs to Right"),isEnabled:()=>!!d()&&m(d()).length>0,execute:()=>{const e=d();if(!e){return}u(m(e))}});if(n){i.addCommand(D.activateNextTab,{label:l.__("Activate Next Tab"),execute:()=>{n.activateNextTab()}});i.addCommand(D.activatePreviousTab,{label:l.__("Activate Previous Tab"),execute:()=>{n.activatePreviousTab()}});i.addCommand(D.activateNextTabBar,{label:l.__("Activate Next Tab Bar"),execute:()=>{n.activateNextTabBar()}});i.addCommand(D.activatePreviousTabBar,{label:l.__("Activate Previous Tab Bar"),execute:()=>{n.activatePreviousTabBar()}});i.addCommand(D.closeAll,{label:l.__("Close All Tabs"),execute:()=>{n.closeAll()}});i.addCommand(D.toggleLeftArea,{label:()=>l.__("Show Left Sidebar"),execute:()=>{if(n.leftCollapsed){n.expandLeft()}else{n.collapseLeft();if(n.currentWidget){n.activateById(n.currentWidget.id)}}},isToggled:()=>!n.leftCollapsed,isVisible:()=>!n.isEmpty("left")});i.addCommand(D.toggleRightArea,{label:()=>l.__("Show Right Sidebar"),execute:()=>{if(n.rightCollapsed){n.expandRight()}else{n.collapseRight();if(n.currentWidget){n.activateById(n.currentWidget.id)}}},isToggled:()=>!n.rightCollapsed,isVisible:()=>!n.isEmpty("right")});i.addCommand(D.togglePresentationMode,{label:()=>l.__("Presentation Mode"),execute:()=>{n.presentationMode=!n.presentationMode},isToggled:()=>n.presentationMode,isVisible:()=>true});i.addCommand(D.setMode,{isVisible:e=>{const t=e["mode"];return t==="single-document"||t==="multiple-document"},execute:e=>{const t=e["mode"];if(t==="single-document"||t==="multiple-document"){n.mode=t;return}throw new Error(`Unsupported application shell mode: ${t}`)}});i.addCommand(D.toggleMode,{label:l.__("Simple Interface"),isToggled:()=>n.mode==="single-document",execute:()=>{const e=n.mode==="multiple-document"?{mode:"single-document"}:{mode:"multiple-document"};return i.execute(D.setMode,e)}})}if(o){[D.activateNextTab,D.activatePreviousTab,D.activateNextTabBar,D.activatePreviousTabBar,D.close,D.closeAll,D.closeOtherTabs,D.closeRightTabs,D.toggleLeftArea,D.toggleRightArea,D.togglePresentationMode,D.toggleMode].forEach((e=>o.addItem({command:e,category:c})))}}};const T={id:"@jupyterlab/application-extension:main",requires:[r.IRouter,i.IWindowResolver,g.ITranslator,r.JupyterFrontEnd.ITreeResolver],optional:[r.IConnectionLost],provides:r.ITreePathUpdater,activate:(e,t,n,o,s,l)=>{const c=o.load("jupyterlab");if(!(e instanceof r.JupyterLab)){throw new Error(`${T.id} must be activated in JupyterLab.`)}let d="";let u="";function h(e){void s.paths.then((()=>{u=e;if(!d){const n=a.PageConfig.getUrl({treePath:e});const r=a.URLExt.parse(n).pathname;t.navigate(r,{skipRouting:true});a.PageConfig.setOption("treePath",e)}}))}const p=n.name;console.debug(`Starting application in workspace: "${p}"`);if(e.registerPluginErrors.length!==0){const t=k.createElement("pre",null,e.registerPluginErrors.map((e=>e.message)).join("\n"));void(0,i.showErrorMessage)(c.__("Error Registering Plugins"),{message:t})}e.shell.layoutModified.connect((()=>{e.commands.notifyCommandChanged()}));e.shell.modeChanged.connect(((e,n)=>{const r=a.PageConfig.getUrl({mode:n});const o=a.URLExt.parse(r).pathname;t.navigate(o,{skipRouting:true});a.PageConfig.setOption("mode",n)}));void s.paths.then((()=>{e.shell.currentPathChanged.connect(((e,n)=>{const r=n.newValue;const o=r||u;const i=a.PageConfig.getUrl({treePath:o});const s=a.URLExt.parse(i).pathname;t.navigate(s,{skipRouting:true});a.PageConfig.setOption("treePath",o);d=r}))}));l=l||r.ConnectionLost;e.serviceManager.connectionFailure.connect(((e,t)=>l(e,t,o)));const m=e.serviceManager.builder;const g=()=>m.build().then((()=>(0,i.showDialog)({title:c.__("Build Complete"),body:k.createElement("div",null,c.__("Build successfully completed, reload page?"),k.createElement("br",null),c.__("You will lose any unsaved changes.")),buttons:[i.Dialog.cancelButton({label:c.__("Reload Without Saving"),actions:["reload"]}),i.Dialog.okButton({label:c.__("Save and Reload")})],hasClose:true}))).then((({button:{accept:n,actions:r}})=>{if(n){void e.commands.execute("docmanager:save").then((()=>{t.reload()})).catch((e=>{void(0,i.showErrorMessage)(c.__("Save Failed"),{message:k.createElement("pre",null,e.message)})}))}else if(r.includes("reload")){t.reload()}})).catch((e=>{void(0,i.showErrorMessage)(c.__("Build Failed"),{message:k.createElement("pre",null,e.message)})}));if(m.isAvailable&&m.shouldCheck){void m.getStatus().then((e=>{if(e.status==="building"){return g()}if(e.status!=="needed"){return}const t=k.createElement("div",null,c.__("JupyterLab build is suggested:"),k.createElement("br",null),k.createElement("pre",null,e.message));void(0,i.showDialog)({title:c.__("Build Recommended"),body:t,buttons:[i.Dialog.cancelButton(),i.Dialog.okButton({label:c.__("Build")})]}).then((e=>e.button.accept?g():undefined))}))}return h},autoStart:true};const I={id:"@jupyterlab/application-extension:context-menu",autoStart:true,requires:[u.ISettingRegistry,g.ITranslator],activate:(e,t,n)=>{const r=n.load("jupyterlab");function o(t){const n=new A.RankedMenu(Object.assign(Object.assign({},t),{commands:e.commands}));if(t.label){n.title.label=r.__(t.label)}return n}e.started.then((()=>Y.loadSettingsContextMenu(e.contextMenu,t,o,n))).catch((e=>{console.error("Failed to load context menu items from settings registry.",e)}))}};const P={id:"@jupyterlab/application-extension:dirty",autoStart:true,requires:[g.ITranslator],activate:(e,t)=>{if(!(e instanceof r.JupyterLab)){throw new Error(`${P.id} must be activated in JupyterLab.`)}const n=t.load("jupyterlab");const o=n.__("Are you sure you want to exit JupyterLab?\n\nAny unsaved changes will be lost.");window.addEventListener("beforeunload",(t=>{if(e.status.isDirty){return t.returnValue=o}}))}};const R={id:"@jupyterlab/application-extension:layout",requires:[p.IStateDB,r.ILabShell,u.ISettingRegistry,g.ITranslator],activate:(e,t,n,o,i)=>{const s=e.started;const l=e.commands;const c=new r.LayoutRestorer({connector:t,first:s,registry:l});void c.fetch().then((t=>{n.restoreLayout(a.PageConfig.getOption("mode"),t);n.layoutModified.connect((()=>{void c.save(n.saveLayout())}));Y.activateSidebarSwitcher(e,n,o,i,t)}));return c},autoStart:true,provides:r.ILayoutRestorer};const L={id:"@jupyterlab/application-extension:router",requires:[r.JupyterFrontEnd.IPaths],activate:(e,t)=>{const{commands:n}=e;const o=t.urls.base;const i=new r.Router({base:o,commands:n});void e.started.then((()=>{void i.route();window.addEventListener("popstate",(()=>{void i.route()}))}));return i},autoStart:true,provides:r.IRouter};const O={id:"@jupyterlab/application-extension:tree-resolver",autoStart:true,requires:[r.IRouter],provides:r.JupyterFrontEnd.ITreeResolver,activate:(e,t)=>{const{commands:n}=e;const r=new E.DisposableSet;const o=new _.PromiseDelegate;const i=new RegExp("/(lab|doc)(/workspaces/[a-zA-Z0-9-_]+)?(/tree/.*)?");r.add(n.addCommand(D.tree,{execute:async e=>{var t;if(r.isDisposed){return}const n=a.URLExt.queryStringToObject((t=e.search)!==null&&t!==void 0?t:"");const i=n["file-browser-path"]||"";delete n["file-browser-path"];r.dispose();o.resolve({browser:i,file:a.PageConfig.getOption("treePath")})}}));r.add(t.register({command:D.tree,pattern:i}));const s=()=>{if(r.isDisposed){return}r.dispose();o.resolve(null)};t.routed.connect(s);r.add(new E.DisposableDelegate((()=>{t.routed.disconnect(s)})));return{paths:o.promise}}};const z={id:"@jupyterlab/application-extension:notfound",requires:[r.JupyterFrontEnd.IPaths,r.IRouter,g.ITranslator],activate:(e,t,n,r)=>{const o=r.load("jupyterlab");const s=t.urls.notFound;if(!s){return}const a=n.base;const l=o.__("The path: %1 was not found. JupyterLab redirected to: %2",s,a);n.navigate("");void(0,i.showErrorMessage)(o.__("Path Not Found"),{message:l})},autoStart:true};const N={id:"@jupyterlab/application-extension:faviconbusy",requires:[r.ILabStatus],activate:async(e,t)=>{t.busySignal.connect(((e,t)=>{const n=document.querySelector(`link[rel="icon"]${t?".idle.favicon":".busy.favicon"}`);if(!n){return}const r=document.querySelector(`link${t?".busy.favicon":".idle.favicon"}`);if(!r){return}if(n!==r){n.rel="";r.rel="icon";r.parentNode.replaceChild(r,r)}}))},autoStart:true};const F={id:"@jupyterlab/application-extension:shell",optional:[u.ISettingRegistry],activate:(e,t)=>{if(!(e.shell instanceof r.LabShell)){throw new Error(`${F.id} did not find a LabShell instance.`)}if(t){t.load(F.id).then((t=>{e.shell.updateConfig(t.composite);t.changed.connect((()=>{e.shell.updateConfig(t.composite)}))})).catch((e=>{console.error("Failed to load shell settings.",e)}))}return e.shell},autoStart:true,provides:r.ILabShell};const H={id:"@jupyterlab/application-extension:status",activate:e=>{if(!(e instanceof r.JupyterLab)){throw new Error(`${H.id} must be activated in JupyterLab.`)}return e.status},autoStart:true,provides:r.ILabStatus};const W={id:"@jupyterlab/application-extension:info",activate:e=>{if(!(e instanceof r.JupyterLab)){throw new Error(`${W.id} must be activated in JupyterLab.`)}return e.info},autoStart:true,provides:r.JupyterLab.IInfo};const V={id:"@jupyterlab/apputils-extension:paths",activate:e=>{if(!(e instanceof r.JupyterLab)){throw new Error(`${V.id} must be activated in JupyterLab.`)}return e.paths},autoStart:true,provides:r.JupyterFrontEnd.IPaths};const q={id:"@jupyterlab/application-extension:property-inspector",autoStart:true,requires:[r.ILabShell,g.ITranslator],optional:[r.ILayoutRestorer],provides:c.IPropertyInspectorProvider,activate:(e,t,n,r)=>{const o=n.load("jupyterlab");const i=new c.SideBarPropertyInspectorProvider(t,undefined,n);i.title.icon=A.buildIcon;i.title.caption=o.__("Property Inspector");i.id="jp-property-inspector";t.add(i,"right",{rank:100});if(r){r.add(i,"jp-property-inspector")}return i}};const U={id:"@jupyterlab/application-extension:logo",autoStart:true,requires:[r.ILabShell],activate:(e,t)=>{const n=new x.Widget;A.jupyterIcon.element({container:n.node,elementPosition:"center",margin:"2px 2px 2px 8px",height:"auto",width:"16px"});n.id="jp-MainLogo";t.add(n,"top",{rank:0})}};const $=[I,P,T,M,R,L,O,z,N,F,H,W,V,q,U];const K=$;var Y;(function(e){async function t(e){const t=await(0,i.showDialog)({title:e.__("Information"),body:e.__("Context menu customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[i.Dialog.cancelButton(),i.Dialog.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function n(e,n,r,o){var s;const a=o.load("jupyterlab");const l=I.id;let c=null;let d={};function h(e){var t,r;d={};const o=Object.keys(n.plugins).map((e=>{var t,r;const o=(r=(t=n.plugins[e].schema["jupyter.lab.menus"])===null||t===void 0?void 0:t.context)!==null&&r!==void 0?r:[];d[e]=o;return o})).concat([(r=(t=e["jupyter.lab.menus"])===null||t===void 0?void 0:t.context)!==null&&r!==void 0?r:[]]).reduceRight(((e,t)=>u.SettingRegistry.reconcileItems(e,t,true)),[]);e.properties.contextMenu.default=u.SettingRegistry.reconcileItems(o,e.properties.contextMenu.default,true).sort(((e,t)=>{var n,r;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((r=t.rank)!==null&&r!==void 0?r:Infinity)}))}n.transform(l,{compose:e=>{var t,n,r,o;if(!c){c=_.JSONExt.deepCopy(e.schema);h(c)}const i=(r=(n=(t=c.properties)===null||t===void 0?void 0:t.contextMenu)===null||n===void 0?void 0:n.default)!==null&&r!==void 0?r:[];const s=Object.assign(Object.assign({},e.data.user),{contextMenu:(o=e.data.user.contextMenu)!==null&&o!==void 0?o:[]});const a=Object.assign(Object.assign({},e.data.composite),{contextMenu:u.SettingRegistry.reconcileItems(i,s.contextMenu,false)});e.data={composite:a,user:s};return e},fetch:e=>{if(!c){c=_.JSONExt.deepCopy(e.schema);h(c)}return{data:e.data,id:e.id,raw:e.raw,schema:c,version:e.version}}});const p=await n.load(l);const m=(s=p.composite.contextMenu)!==null&&s!==void 0?s:[];u.SettingRegistry.filterDisabledItems(m).forEach((t=>{i.MenuFactory.addContextItem(Object.assign({rank:S},t),e,r)}));p.changed.connect((()=>{var e;const n=(e=p.composite.contextMenu)!==null&&e!==void 0?e:[];if(!_.JSONExt.deepEqual(m,n)){void t(a)}}));n.pluginChanged.connect((async(o,s)=>{var c,h,p,g;if(s!==l){const o=(c=d[s])!==null&&c!==void 0?c:[];const l=(p=(h=n.plugins[s].schema["jupyter.lab.menus"])===null||h===void 0?void 0:h.context)!==null&&p!==void 0?p:[];if(!_.JSONExt.deepEqual(o,l)){if(d[s]){await t(a)}else{d[s]=_.JSONExt.deepCopy(l);const t=(g=u.SettingRegistry.reconcileItems(l,m,false,false))!==null&&g!==void 0?g:[];u.SettingRegistry.filterDisabledItems(t).forEach((t=>{i.MenuFactory.addContextItem(Object.assign({rank:S},t),e,r)}))}}}}))}e.loadSettingsContextMenu=n;function r(e,t,n,r,o){const i="@jupyterlab/application-extension:sidebar";const s=r.load("jupyterlab");let a={};const l=(e,n)=>{(0,C.each)(t.widgets("left"),(e=>{var r;if(a[e.id]&&a[e.id]==="right"){t.add(e,"right");if(n&&((r=n.rightArea)===null||r===void 0?void 0:r.currentWidget)===e){t.activateById(e.id)}}}));(0,C.each)(t.widgets("right"),(e=>{var r;if(a[e.id]&&a[e.id]==="left"){t.add(e,"left");if(n&&((r=n.leftArea)===null||r===void 0?void 0:r.currentWidget)===e){t.activateById(e.id)}}}))};void Promise.all([n.load(i),e.restored]).then((([e])=>{a=e.get("overrides").composite||{};e.changed.connect((e=>{a=e.get("overrides").composite||{};l(t)}));t.layoutModified.connect(l);l(t,o)}));e.commands.addCommand(D.switchSidebar,{label:s.__("Switch Sidebar Side"),execute:()=>{const t=e.contextMenuHitTest((e=>!!e.dataset.id));if(!t){return}const r=t.dataset["id"];const o=document.getElementById("jp-left-stack");const s=document.getElementById(r);let l;if(o&&s&&o.contains(s)){l="right"}else{l="left"}return n.set(i,"overrides",Object.assign(Object.assign({},a),{[r]:l}))}})}e.activateSidebarSwitcher=r})(Y||(Y={}))},95171:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(90516);var s=n(9469);var a=n(93379);var l=n.n(a);var c=n(38994);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{}},40915:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ConnectionLost:()=>i,IConnectionLost:()=>q,ILabShell:()=>L,ILabStatus:()=>F,ILayoutRestorer:()=>v,IMimeDocumentTracker:()=>y,IRouter:()=>U,ITreePathUpdater:()=>$,JupyterFrontEnd:()=>h,JupyterFrontEndContextMenu:()=>m,JupyterLab:()=>W,LabShell:()=>O,LayoutRestorer:()=>b,Router:()=>V,createRendermimePlugin:()=>w,createRendermimePlugins:()=>E});var r=n(3378);var o=n(59768);const i=async function(e,t,n){n=n||o.nullTranslator;const i=n.load("jupyterlab");const s=i.__("Server Connection Error");const a=i.__("A connection to the Jupyter server could not be established.\n"+"JupyterLab will continue trying to reconnect.\n"+"Check your network connection or Jupyter server configuration.\n");return(0,r.showErrorMessage)(s,{message:a})};var s=n(34576);var a=n(22248);var l=n(25903);var c=n(96430);var d=n(91100);var u=n(18987);class h extends c.Application{constructor(e){super(e);this._formatChanged=new u.Signal(this);this.contextMenu=new l.ContextMenuSvg({commands:this.commands,renderer:e.contextMenuRenderer,groupByTarget:false,sortBySelector:false});const t=new Promise((e=>{requestAnimationFrame((()=>{e()}))}));this.commandLinker=e.commandLinker||new r.CommandLinker({commands:this.commands});this.docRegistry=e.docRegistry||new s.DocumentRegistry;this.restored=e.restored||this.started.then((()=>t)).catch((()=>t));this.serviceManager=e.serviceManager||new a.ServiceManager}get format(){return this._format}set format(e){if(this._format!==e){this._format=e;document.body.dataset["format"]=e;this._formatChanged.emit(e)}}get formatChanged(){return this._formatChanged}contextMenuHitTest(e){if(!this._contextMenuEvent||!(this._contextMenuEvent.target instanceof Node)){return undefined}let t=this._contextMenuEvent.target;do{if(t instanceof HTMLElement&&e(t)){return t}t=t.parentNode}while(t&&t.parentNode&&t!==t.parentNode);return undefined}evtContextMenu(e){this._contextMenuEvent=e;if(e.shiftKey||p.suppressContextMenu(e.target)){return}const t=this.contextMenu.open(e);if(t){const t=this.contextMenu.menu.items;if(t.length===1&&t[0].command===m.contextMenu){this.contextMenu.menu.close();return}e.preventDefault();e.stopPropagation()}}}(function(e){function t(e,t){const n=new RegExp(`^${t.urls.doc}`);const r=e.match(n);if(r){return true}else{return false}}e.inDocMode=t;e.IPaths=new d.Token("@jupyterlab/application:IPaths");e.ITreeResolver=new d.Token("@jupyterlab/application:ITreeResolver")})(h||(h={}));var p;(function(e){function t(e){return e.closest("[data-jp-suppress-context-menu]")!==null}e.suppressContextMenu=t})(p||(p={}));var m;(function(e){e.contextMenu="__internal:context-menu-info"})(m||(m={}));var g=n(69442);var f=n(63833);var A=n(63577);const v=new d.Token("@jupyterlab/application:ILayoutRestorer");const C="layout-restorer:data";class b{constructor(e){this._firstDone=false;this._promisesDone=false;this._promises=[];this._restored=new d.PromiseDelegate;this._trackers=new Set;this._widgets=new Map;this._connector=e.connector;this._first=e.first;this._registry=e.registry;void this._first.then((()=>{this._firstDone=true})).then((()=>Promise.all(this._promises))).then((()=>{this._promisesDone=true;this._trackers.clear()})).then((()=>{this._restored.resolve(void 0)}))}get restored(){return this._restored.promise}add(e,t){_.nameProperty.set(e,t);this._widgets.set(t,e);e.disposed.connect(this._onWidgetDisposed,this)}async fetch(){const e={fresh:true,mainArea:null,downArea:null,leftArea:null,rightArea:null,relativeSizes:null};const t=this._connector.fetch(C);try{const[n]=await Promise.all([t,this.restored]);if(!n){return e}const{main:r,down:o,left:i,right:s,relativeSizes:a}=n;const l=false;const c=this._rehydrateMainArea(r);const d=this._rehydrateDownArea(o);const u=this._rehydrateSideArea(i);const h=this._rehydrateSideArea(s);return{fresh:l,mainArea:c,downArea:d,leftArea:u,rightArea:h,relativeSizes:a||null}}catch(n){return e}}restore(e,t){const n="restore() can only be called before `first` has resolved.";if(this._firstDone){console.warn(n);return Promise.reject(n)}const{namespace:r}=e;if(this._trackers.has(r)){const e=`A tracker namespaced ${r} was already restored.`;console.warn(e);return Promise.reject(e)}const{args:o,command:i,name:s,when:a}=t;this._trackers.add(r);e.widgetAdded.connect(((e,t)=>{const n=s(t);if(n){this.add(t,`${r}:${n}`)}}),this);e.widgetUpdated.connect(((e,t)=>{const n=s(t);if(n){const e=`${r}:${n}`;_.nameProperty.set(t,e);this._widgets.set(e,t)}}));const l=this._first;const c=e.restore({args:o||(()=>d.JSONExt.emptyObject),command:i,connector:this._connector,name:s,registry:this._registry,when:a?[l].concat(a):l}).catch((e=>{console.error(e)}));this._promises.push(c);return c}save(e){if(!this._promisesDone){const e="save() was called prematurely.";console.warn(e);return Promise.reject(e)}const t={};t.main=this._dehydrateMainArea(e.mainArea);t.down=this._dehydrateDownArea(e.downArea);t.left=this._dehydrateSideArea(e.leftArea);t.right=this._dehydrateSideArea(e.rightArea);t.relativeSizes=e.relativeSizes;return this._connector.save(C,t)}_dehydrateMainArea(e){if(!e){return null}return _.serializeMain(e)}_rehydrateMainArea(e){if(!e){return null}return _.deserializeMain(e,this._widgets)}_dehydrateDownArea(e){if(!e){return null}const t={size:e.size};if(e.currentWidget){const n=_.nameProperty.get(e.currentWidget);if(n){t.current=n}}if(e.widgets){t.widgets=e.widgets.map((e=>_.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateDownArea(e){var t;if(!e){return{currentWidget:null,size:0,widgets:null}}const n=this._widgets;const r=e.current&&n.has(`${e.current}`)?n.get(`${e.current}`):null;const o=!Array.isArray(e.widgets)?null:e.widgets.map((e=>n.has(`${e}`)?n.get(`${e}`):null)).filter((e=>!!e));return{currentWidget:r,size:(t=e.size)!==null&&t!==void 0?t:0,widgets:o}}_dehydrateSideArea(e){if(!e){return null}const t={collapsed:e.collapsed};if(e.currentWidget){const n=_.nameProperty.get(e.currentWidget);if(n){t.current=n}}if(e.widgets){t.widgets=e.widgets.map((e=>_.nameProperty.get(e))).filter((e=>!!e))}return t}_rehydrateSideArea(e){var t;if(!e){return{collapsed:true,currentWidget:null,widgets:null}}const n=this._widgets;const r=(t=e.collapsed)!==null&&t!==void 0?t:false;const o=e.current&&n.has(`${e.current}`)?n.get(`${e.current}`):null;const i=!Array.isArray(e.widgets)?null:e.widgets.map((e=>n.has(`${e}`)?n.get(`${e}`):null)).filter((e=>!!e));return{collapsed:r,currentWidget:o,widgets:i}}_onWidgetDisposed(e){const t=_.nameProperty.get(e);this._widgets.delete(t)}}var _;(function(e){e.nameProperty=new A.AttachedProperty({name:"name",create:e=>""});function t(n){if(!n||!n.type){return null}if(n.type==="tab-area"){return{type:"tab-area",currentIndex:n.currentIndex,widgets:n.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}}return{type:"split-area",orientation:n.orientation,sizes:n.sizes,children:n.children.map(t).filter((e=>!!e))}}function n(n){const r={dock:n&&n.dock&&t(n.dock.main)||null};if(n){if(n.currentWidget){const t=e.nameProperty.get(n.currentWidget);if(t){r.current=t}}}return r}e.serializeMain=n;function r(e,t){if(!e){return null}const n=e.type||"unknown";if(n==="unknown"||n!=="tab-area"&&n!=="split-area"){console.warn(`Attempted to deserialize unknown type: ${n}`);return null}if(n==="tab-area"){const{currentIndex:n,widgets:r}=e;const o={type:"tab-area",currentIndex:n||0,widgets:r&&r.map((e=>t.get(e))).filter((e=>!!e))||[]};if(o.currentIndex>o.widgets.length-1){o.currentIndex=0}return o}const{orientation:o,sizes:i,children:s}=e;const a={type:"split-area",orientation:o,sizes:i||[],children:s&&s.map((e=>r(e,t))).filter((e=>!!e))||[]};return a}function o(e,t){if(!e){return null}const n=e.current||null;const o=e.dock||null;return{currentWidget:n&&t.has(n)&&t.get(n)||null,dock:o?{main:r(o,t)}:null}}e.deserializeMain=o})(_||(_={}));const y=new d.Token("@jupyterlab/application:IMimeDocumentTracker");function E(e){const t=[];const n="application-mimedocuments";const o=new r.WidgetTracker({namespace:n});e.forEach((e=>{let n=e.default;if(!e.hasOwnProperty("__esModule")){n=e}if(!Array.isArray(n)){n=[n]}n.forEach((e=>{t.push(w(o,e))}))}));t.push({id:"@jupyterlab/application:mimedocument",optional:[v],provides:y,autoStart:true,activate:(e,t)=>{if(t){void t.restore(o,{command:"docmanager:open",args:e=>({path:e.context.path,factory:x.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${x.factoryNameProperty.get(e)}`})}return o}});return t}function w(e,t){return{id:t.id,requires:[f.IRenderMimeRegistry,o.ITranslator],autoStart:true,activate:(n,r,o)=>{if(t.rank!==undefined){r.addFactory(t.rendererFactory,t.rank)}else{r.addFactory(t.rendererFactory)}if(!t.documentWidgetFactoryOptions){return}const i=n.docRegistry;let a=[];if(Array.isArray(t.documentWidgetFactoryOptions)){a=t.documentWidgetFactoryOptions}else{a=[t.documentWidgetFactoryOptions]}if(t.fileTypes){t.fileTypes.forEach((e=>{if(e.icon){e=Object.assign(Object.assign({},e),{icon:l.LabIcon.resolve({icon:e.icon})})}n.docRegistry.addFileType(e)}))}a.forEach((n=>{const a=n.toolbarFactory?e=>n.toolbarFactory(e.content.renderer):undefined;const l=new s.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:r,modelName:n.modelName,name:n.name,primaryFileType:i.getFileType(n.primaryFileType),fileTypes:n.fileTypes,defaultFor:n.defaultFor,defaultRendered:n.defaultRendered,toolbarFactory:a,translator:o,factory:t.rendererFactory});i.addWidgetFactory(l);l.widgetCreated.connect(((t,n)=>{x.factoryNameProperty.set(n,l.name);n.context.pathChanged.connect((()=>{void e.save(n)}));void e.add(n)}))}))}}}var x;(function(e){e.factoryNameProperty=new A.AttachedProperty({name:"factoryName",create:()=>undefined})})(x||(x={}));var j=n(54522);var k=n(46843);var B=n(6625);var S=n(700);const D="jp-LabShell";const M="jp-SideBar";const T="jp-mod-current";const I="jp-mod-active";const P=900;const R="jp-Activity";const L=new d.Token("@jupyterlab/application:ILabShell");class O extends S.Widget{constructor(e){super();this._dockChildHook=(e,t)=>{switch(t.type){case"child-added":t.child.addClass(R);this._tracker.add(t.child);break;case"child-removed":t.child.removeClass(R);this._tracker.remove(t.child);break;default:break}return true};this._activeChanged=new u.Signal(this);this._cachedLayout=null;this._currentChanged=new u.Signal(this);this._currentPath="";this._currentPathChanged=new u.Signal(this);this._modeChanged=new u.Signal(this);this._isRestored=false;this._layoutModified=new u.Signal(this);this._layoutDebouncer=new B.Debouncer((()=>{this._layoutModified.emit(undefined)}),0);this._restored=new d.PromiseDelegate;this._tracker=new S.FocusTracker;this._mainOptionsCache=new Map;this._sideOptionsCache=new Map;this.addClass(D);this.id="main";const t=(e&&e.translator||o.nullTranslator).load("jupyterlab");const n=this._headerPanel=new S.BoxPanel;const r=this._menuHandler=new z.PanelHandler;r.panel.node.setAttribute("role","navigation");r.panel.node.setAttribute("aria-label",t.__("main"));const i=this._topHandler=new z.PanelHandler;i.panel.node.setAttribute("role","banner");const a=this._bottomPanel=new S.BoxPanel;a.node.setAttribute("role","contentinfo");const c=new S.BoxPanel;const h=this._vsplitPanel=new z.RestorableSplitPanel;const p=this._dockPanel=new l.DockPanelSvg({hiddenMode:S.Widget.HiddenMode.Scale,translator:e===null||e===void 0?void 0:e.translator});k.MessageLoop.installMessageHook(p,this._dockChildHook);const m=this._hsplitPanel=new z.RestorableSplitPanel;const g=this._downPanel=new l.TabPanelSvg({tabsMovable:true});const f=this._leftHandler=new z.SideBarHandler;const A=this._rightHandler=new z.SideBarHandler;const v=new S.BoxLayout;n.id="jp-header-panel";r.panel.id="jp-menu-panel";i.panel.id="jp-top-panel";a.id="jp-bottom-panel";c.id="jp-main-content-panel";h.id="jp-main-vsplit-panel";p.id="jp-main-dock-panel";m.id="jp-main-split-panel";g.id="jp-down-stack";f.sideBar.addClass(M);f.sideBar.addClass("jp-mod-left");f.sideBar.node.setAttribute("aria-label",t.__("main sidebar"));f.sideBar.contentNode.setAttribute("aria-label",t.__("main sidebar"));f.sideBar.node.setAttribute("role","complementary");f.stackedPanel.id="jp-left-stack";A.sideBar.addClass(M);A.sideBar.addClass("jp-mod-right");A.sideBar.node.setAttribute("aria-label",t.__("alternate sidebar"));A.sideBar.contentNode.setAttribute("aria-label",t.__("alternate sidebar"));A.sideBar.node.setAttribute("role","complementary");A.stackedPanel.id="jp-right-stack";p.node.setAttribute("role","main");c.spacing=0;h.spacing=1;p.spacing=5;m.spacing=1;n.direction="top-to-bottom";h.orientation="vertical";c.direction="left-to-right";m.orientation="horizontal";a.direction="bottom-to-top";S.SplitPanel.setStretch(f.stackedPanel,0);S.SplitPanel.setStretch(g,0);S.SplitPanel.setStretch(p,1);S.SplitPanel.setStretch(A.stackedPanel,0);S.BoxPanel.setStretch(f.sideBar,0);S.BoxPanel.setStretch(m,1);S.BoxPanel.setStretch(A.sideBar,0);S.SplitPanel.setStretch(h,1);m.addWidget(f.stackedPanel);m.addWidget(p);m.addWidget(A.stackedPanel);h.addWidget(m);h.addWidget(g);c.addWidget(f.sideBar);c.addWidget(h);c.addWidget(A.sideBar);v.direction="top-to-bottom";v.spacing=0;h.setRelativeSizes([3,1]);m.setRelativeSizes([1,2.5,1]);S.BoxLayout.setStretch(n,0);S.BoxLayout.setStretch(r.panel,0);S.BoxLayout.setStretch(i.panel,0);S.BoxLayout.setStretch(c,1);S.BoxLayout.setStretch(a,0);v.addWidget(n);v.addWidget(i.panel);v.addWidget(c);v.addWidget(a);this._headerPanel.hide();this._bottomPanel.hide();this._downPanel.hide();this.layout=v;this._tracker.currentChanged.connect(this._onCurrentChanged,this);this._tracker.activeChanged.connect(this._onActiveChanged,this);this._dockPanel.layoutModified.connect(this._onLayoutModified,this);this._vsplitPanel.updated.connect(this._onLayoutModified,this);this._downPanel.currentChanged.connect(this._onLayoutModified,this);this._downPanel.tabBar.tabMoved.connect(this._onTabPanelChanged,this);this._downPanel.stackedPanel.widgetRemoved.connect(this._onTabPanelChanged,this);this._leftHandler.sideBar.currentChanged.connect(this._onLayoutModified,this);this._rightHandler.sideBar.currentChanged.connect(this._onLayoutModified,this);this._hsplitPanel.updated.connect(this._onLayoutModified,this);const C=this._titleHandler=new z.TitleHandler(this);this.add(C,"top",{rank:100});if(this._dockPanel.mode==="multiple-document"){this._topHandler.addWidget(this._menuHandler.panel,100);C.hide()}else{v.insertWidget(2,this._menuHandler.panel)}const b=this._skipLinkWidget=new z.SkipLinkWidget(this);this.add(b,"top",{rank:0});this._skipLinkWidget.show();this.currentChanged.connect(((e,t)=>{let n=t.newValue;let r=t.oldValue;if(r){r.title.changed.disconnect(this._updateTitlePanelTitle,this)}if(n){n.title.changed.connect(this._updateTitlePanelTitle,this);this._updateTitlePanelTitle()}if(n&&n instanceof s.DocumentWidget){n.context.pathChanged.connect(this._updateCurrentPath,this)}this._updateCurrentPath()}))}get activeChanged(){return this._activeChanged}get activeWidget(){return this._tracker.activeWidget}get currentChanged(){return this._currentChanged}get modeChanged(){return this._modeChanged}get currentPathChanged(){return this._currentPathChanged}get currentWidget(){return this._tracker.currentWidget}get layoutModified(){return this._layoutModified}get leftCollapsed(){return!this._leftHandler.sideBar.currentTitle}get rightCollapsed(){return!this._rightHandler.sideBar.currentTitle}get presentationMode(){return this.hasClass("jp-mod-presentationMode")}set presentationMode(e){this.toggleClass("jp-mod-presentationMode",e)}get mode(){return this._dockPanel.mode}set mode(e){const t=this._dockPanel;if(e===t.mode){return}const n=this.currentWidget;if(e==="single-document"){this._cachedLayout=t.saveLayout();t.mode=e;if(this.currentWidget){t.activateWidget(this.currentWidget)}this.layout.insertWidget(2,this._menuHandler.panel);this._titleHandler.show();this._updateTitlePanelTitle()}else{const r=(0,j.toArray)(t.widgets());t.mode=e;if(this._cachedLayout){z.normalizeAreaConfig(t,this._cachedLayout.main);t.restoreLayout(this._cachedLayout);this._cachedLayout=null}r.forEach((e=>{if(!e.parent){this._addToMainArea(e,Object.assign(Object.assign({},this._mainOptionsCache.get(e)),{activate:false}))}}));this._mainOptionsCache.clear();if(n){t.activateWidget(n)}this.add(this._menuHandler.panel,"top",{rank:100});this._titleHandler.hide()}this.node.dataset.shellMode=e;this._downPanel.fit();this._modeChanged.emit(e)}get restored(){return this._restored.promise}activateById(e){if(this._leftHandler.has(e)){this._leftHandler.activate(e);return}if(this._rightHandler.has(e)){this._rightHandler.activate(e);return}const t=this._downPanel.tabBar.titles.findIndex((t=>t.owner.id===e));if(t>=0){this._downPanel.currentIndex=t;return}const n=this._dockPanel;const r=(0,j.find)(n.widgets(),(t=>t.id===e));if(r){n.activateWidget(r)}}activateNextTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t<e.titles.length-1){e.currentIndex+=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===e.titles.length-1){const e=this._adjacentBar("next");if(e){e.currentIndex=0;if(e.currentTitle){e.currentTitle.owner.activate()}}}}get addButtonEnabled(){return this._dockPanel.addButtonEnabled}set addButtonEnabled(e){this._dockPanel.addButtonEnabled=e}get addRequested(){return this._dockPanel.addRequested}activatePreviousTab(){const e=this._currentTabBar();if(!e){return}const t=e.currentIndex;if(t===-1){return}if(t>0){e.currentIndex-=1;if(e.currentTitle){e.currentTitle.owner.activate()}return}if(t===0){const e=this._adjacentBar("previous");if(e){const t=e.titles.length;e.currentIndex=t-1;if(e.currentTitle){e.currentTitle.owner.activate()}}}}activateNextTabBar(){const e=this._adjacentBar("next");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}activatePreviousTabBar(){const e=this._adjacentBar("previous");if(e){if(e.currentTitle){e.currentTitle.owner.activate()}}}add(e,t="main",n){switch(t||"main"){case"bottom":return this._addToBottomArea(e,n);case"down":return this._addToDownArea(e,n);case"header":return this._addToHeaderArea(e,n);case"left":return this._addToLeftArea(e,n);case"main":return this._addToMainArea(e,n);case"menu":return this._addToMenuArea(e,n);case"right":return this._addToRightArea(e,n);case"top":return this._addToTopArea(e,n);default:throw new Error(`Invalid area: ${t}`)}}collapseLeft(){this._leftHandler.collapse();this._onLayoutModified()}collapseRight(){this._rightHandler.collapse();this._onLayoutModified()}dispose(){if(this.isDisposed){return}this._layoutDebouncer.dispose();super.dispose()}expandLeft(){this._leftHandler.expand();this._onLayoutModified()}expandRight(){this._rightHandler.expand();this._onLayoutModified()}closeAll(){(0,j.toArray)(this._dockPanel.widgets()).forEach((e=>e.close()));this._downPanel.stackedPanel.widgets.forEach((e=>e.close()))}isEmpty(e){switch(e){case"bottom":return this._bottomPanel.widgets.length===0;case"down":return this._downPanel.stackedPanel.widgets.length===0;case"header":return this._headerPanel.widgets.length===0;case"left":return this._leftHandler.stackedPanel.widgets.length===0;case"main":return this._dockPanel.isEmpty;case"menu":return this._menuHandler.panel.widgets.length===0;case"right":return this._rightHandler.stackedPanel.widgets.length===0;case"top":return this._topHandler.panel.widgets.length===0;default:return true}}restoreLayout(e,t){var n,r;const{mainArea:o,downArea:i,leftArea:s,rightArea:a,relativeSizes:l}=t;if(o){const{currentWidget:t,dock:n}=o;if(n){this._dockPanel.restoreLayout(n)}if(e){this.mode=e}if(t){this.activateById(t.id)}}else{if(e){this.mode=e}}if(i){const{currentWidget:e,widgets:t,size:o}=i;const s=(n=t===null||t===void 0?void 0:t.map((e=>e.id)))!==null&&n!==void 0?n:[];this._downPanel.tabBar.titles.filter((e=>!s.includes(e.owner.id))).map((e=>e.owner.close()));const a=this._downPanel.tabBar.titles.map((e=>e.owner.id));t===null||t===void 0?void 0:t.filter((e=>!a.includes(e.id))).map((e=>this._downPanel.addWidget(e)));while(!j.ArrayExt.shallowEqual(s,this._downPanel.tabBar.titles.map((e=>e.owner.id)))){this._downPanel.tabBar.titles.forEach(((e,t)=>{const n=s.findIndex((t=>e.owner.id==t));if(n>=0&&n!=t){this._downPanel.tabBar.insertTab(n,e)}}))}if(e){const t=this._downPanel.stackedPanel.widgets.findIndex((t=>t.id===e.id));if(t){this._downPanel.currentIndex=t;(r=this._downPanel.currentWidget)===null||r===void 0?void 0:r.activate()}}if(o&&o>0){this._vsplitPanel.setRelativeSizes([1-o,o])}else{this._downPanel.stackedPanel.widgets.forEach((e=>e.close()));this._downPanel.hide()}}if(s){this._leftHandler.rehydrate(s)}else{if(e==="single-document"){this.collapseLeft()}}if(a){this._rightHandler.rehydrate(a)}else{if(e==="single-document"){this.collapseRight()}}if(l){this._hsplitPanel.setRelativeSizes(l)}if(!this._isRestored){k.MessageLoop.flush();this._restored.resolve(t)}}saveLayout(){const e={mainArea:{currentWidget:this._tracker.currentWidget,dock:this.mode==="single-document"?this._cachedLayout||this._dockPanel.saveLayout():this._dockPanel.saveLayout()},downArea:{currentWidget:this._downPanel.currentWidget,widgets:(0,j.toArray)(this._downPanel.stackedPanel.widgets),size:this._vsplitPanel.relativeSizes()[1]},leftArea:this._leftHandler.dehydrate(),rightArea:this._rightHandler.dehydrate(),relativeSizes:this._hsplitPanel.relativeSizes()};return e}updateConfig(e){if(e.hiddenMode){this._dockPanel.hiddenMode=e.hiddenMode==="display"?S.Widget.HiddenMode.Display:S.Widget.HiddenMode.Scale}}widgets(e){switch(e!==null&&e!==void 0?e:"main"){case"main":return this._dockPanel.widgets();case"left":return(0,j.iter)(this._leftHandler.sideBar.titles.map((e=>e.owner)));case"right":return(0,j.iter)(this._rightHandler.sideBar.titles.map((e=>e.owner)));case"header":return this._headerPanel.children();case"top":return this._topHandler.panel.children();case"menu":return this._menuHandler.panel.children();case"bottom":return this._bottomPanel.children();default:throw new Error(`Invalid area: ${e}`)}}onAfterAttach(e){this.node.dataset.shellMode=this.mode}_updateTitlePanelTitle(){let e=this.currentWidget;const t=this._titleHandler.inputElement;t.value=e?e.title.label:"";t.title=e?e.title.caption:""}_updateCurrentPath(){let e=this.currentWidget;let t="";if(e&&e instanceof s.DocumentWidget){t=e.context.path}this._currentPathChanged.emit({newValue:t,oldValue:this._currentPath});this._currentPath=t}_addToLeftArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};this._sideOptionsCache.set(e,t);const n="rank"in t?t.rank:P;this._leftHandler.addWidget(e,n);this._onLayoutModified()}_addToMainArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const n=this._dockPanel;const r=t.mode||"tab-after";let o=this.currentWidget;if(t.ref){o=(0,j.find)(n.widgets(),(e=>e.id===t.ref))||null}const{title:i}=e;i.dataset=Object.assign(Object.assign({},i.dataset),{id:e.id});if(i.icon instanceof l.LabIcon){i.icon=i.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof i.icon==="string"||!i.icon){i.iconClass=(0,l.classes)(i.iconClass,"jp-Icon")}n.addWidget(e,{mode:r,ref:o});if(n.mode==="single-document"){this._mainOptionsCache.set(e,t)}if(t.activate!==false){n.activateWidget(e)}}_addToRightArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||this._sideOptionsCache.get(e)||{};const n="rank"in t?t.rank:P;this._sideOptionsCache.set(e,t);this._rightHandler.addWidget(e,n);this._onLayoutModified()}_addToTopArea(e,t){var n;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const r=(n=t.rank)!==null&&n!==void 0?n:P;this._topHandler.addWidget(e,r);this._onLayoutModified();if(this._topHandler.panel.isHidden){this._topHandler.panel.show()}}_addToMenuArea(e,t){var n;if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const r=(n=t.rank)!==null&&n!==void 0?n:P;this._menuHandler.addWidget(e,r);this._onLayoutModified();if(this._menuHandler.panel.isHidden){this._menuHandler.panel.show()}}_addToHeaderArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._headerPanel.addWidget(e);this._onLayoutModified();if(this._headerPanel.isHidden){this._headerPanel.show()}}_addToBottomArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}this._bottomPanel.addWidget(e);this._onLayoutModified();if(this._bottomPanel.isHidden){this._bottomPanel.show()}}_addToDownArea(e,t){if(!e.id){console.error("Widgets added to app shell must have unique id property.");return}t=t||{};const{title:n}=e;n.dataset=Object.assign(Object.assign({},n.dataset),{id:e.id});if(n.icon instanceof l.LabIcon){n.icon=n.icon.bindprops({stylesheet:"mainAreaTab"})}else if(typeof n.icon==="string"||!n.icon){n.iconClass=(0,l.classes)(n.iconClass,"jp-Icon")}this._downPanel.addWidget(e);this._onLayoutModified();if(this._downPanel.isHidden){this._downPanel.show()}}_adjacentBar(e){const t=this._currentTabBar();if(!t){return null}const n=(0,j.toArray)(this._dockPanel.tabBars());const r=n.length;const o=n.indexOf(t);if(e==="previous"){return o>0?n[o-1]:o===0?n[r-1]:null}return o<r-1?n[o+1]:o===r-1?n[0]:null}_currentTabBar(){const e=this._tracker.currentWidget;if(!e){return null}const t=e.title;const n=this._dockPanel.tabBars();return(0,j.find)(n,(e=>e.titles.indexOf(t)>-1))||null}_onActiveChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${I}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(I,"")}this._activeChanged.emit(t)}_onCurrentChanged(e,t){if(t.newValue){t.newValue.title.className+=` ${T}`}if(t.oldValue){t.oldValue.title.className=t.oldValue.title.className.replace(T,"")}this._currentChanged.emit(t);this._onLayoutModified()}_onTabPanelChanged(){if(this._downPanel.stackedPanel.widgets.length===0){this._downPanel.hide()}this._onLayoutModified()}_onLayoutModified(){void this._layoutDebouncer.invoke()}}var z;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t;function n(e,t){if(!t){return}if(t.type==="tab-area"){t.widgets=t.widgets.filter((t=>!t.isDisposed&&t.parent===e));return}t.children.forEach((t=>{n(e,t)}))}e.normalizeAreaConfig=n;class r{constructor(){this._panelChildHook=(e,t)=>{switch(t.type){case"child-added":{const e=t.child;if(this._items.find((t=>t.widget===e))){break}const n=this._items[this._items.length-1].rank;this._items.push({widget:e,rank:n})}break;case"child-removed":{const e=t.child;j.ArrayExt.removeFirstWhere(this._items,(t=>t.widget===e))}break;default:break}return true};this._items=new Array;this._panel=new S.Panel;k.MessageLoop.installMessageHook(this._panel,this._panelChildHook)}get panel(){return this._panel}addWidget(t,n){t.parent=null;const r={widget:t,rank:n};const o=j.ArrayExt.upperBound(this._items,r,e.itemCmp);j.ArrayExt.insert(this._items,o,r);this._panel.insertWidget(o,t)}}e.PanelHandler=r;class o{constructor(){this._items=new Array;this._sideBar=new S.TabBar({insertBehavior:"none",removeBehavior:"none",allowDeselect:true,orientation:"vertical"});this._stackedPanel=new S.StackedPanel;this._sideBar.hide();this._stackedPanel.hide();this._lastCurrent=null;this._sideBar.currentChanged.connect(this._onCurrentChanged,this);this._sideBar.tabActivateRequested.connect(this._onTabActivateRequested,this);this._stackedPanel.widgetRemoved.connect(this._onWidgetRemoved,this)}get sideBar(){return this._sideBar}get stackedPanel(){return this._stackedPanel}expand(){const e=this._lastCurrent||this._items.length>0&&this._items[0].widget;if(e){this.activate(e.id)}}activate(e){const t=this._findWidgetByID(e);if(t){this._sideBar.currentTitle=t.title;t.activate()}}has(e){return this._findWidgetByID(e)!==null}collapse(){this._sideBar.currentTitle=null}addWidget(e,t){e.parent=null;e.hide();const n={widget:e,rank:t};const r=this._findInsertIndex(n);j.ArrayExt.insert(this._items,r,n);this._stackedPanel.insertWidget(r,e);const o=this._sideBar.insertTab(r,e.title);o.dataset={id:e.id};if(o.icon instanceof l.LabIcon){o.icon=o.icon.bindprops({stylesheet:"sideBar"})}else if(typeof o.icon==="string"||!o.icon){o.iconClass=(0,l.classes)(o.iconClass,"jp-Icon","jp-Icon-20")}this._refreshVisibility()}dehydrate(){const e=this._sideBar.currentTitle===null;const t=(0,j.toArray)(this._stackedPanel.widgets);const n=t[this._sideBar.currentIndex];return{collapsed:e,currentWidget:n,widgets:t}}rehydrate(e){if(e.currentWidget){this.activate(e.currentWidget.id)}if(e.collapsed){this.collapse()}}_findInsertIndex(t){return j.ArrayExt.upperBound(this._items,t,e.itemCmp)}_findWidgetIndex(e){return j.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e))}_findWidgetByTitle(e){const t=(0,j.find)(this._items,(t=>t.widget.title===e));return t?t.widget:null}_findWidgetByID(e){const t=(0,j.find)(this._items,(t=>t.widget.id===e));return t?t.widget:null}_refreshVisibility(){this._sideBar.setHidden(this._sideBar.titles.length===0);this._stackedPanel.setHidden(this._sideBar.currentTitle===null)}_onCurrentChanged(e,t){const n=t.previousTitle?this._findWidgetByTitle(t.previousTitle):null;const r=t.currentTitle?this._findWidgetByTitle(t.currentTitle):null;if(n){n.hide()}if(r){r.show()}this._lastCurrent=r||n;this._refreshVisibility()}_onTabActivateRequested(e,t){t.title.owner.activate()}_onWidgetRemoved(e,t){if(t===this._lastCurrent){this._lastCurrent=null}j.ArrayExt.removeAt(this._items,this._findWidgetIndex(t));this._sideBar.removeTab(t.title);this._refreshVisibility()}}e.SideBarHandler=o;class i extends S.Widget{constructor(e){super();this.addClass("jp-skiplink");this.id="jp-skiplink";this._shell=e;this._createSkipLink("Skip to left side bar")}handleEvent(e){switch(e.type){case"click":this._focusLeftSideBar();break}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this);super.onBeforeDetach(e)}_focusLeftSideBar(){this._shell.expandLeft()}_createSkipLink(e){const t=document.createElement("a");t.href="#";t.tabIndex=1;t.text=e;t.className="skip-link";this.node.appendChild(t)}}e.SkipLinkWidget=i;class s extends S.Widget{constructor(e){super();this._selected=false;const t=document.createElement("input");t.type="text";this.node.appendChild(t);this._shell=e;this.id="jp-title-panel-title"}onAfterAttach(e){super.onAfterAttach(e);this.inputElement.addEventListener("keyup",this);this.inputElement.addEventListener("click",this);this.inputElement.addEventListener("blur",this)}onBeforeDetach(e){super.onBeforeDetach(e);this.inputElement.removeEventListener("keyup",this);this.inputElement.removeEventListener("click",this);this.inputElement.removeEventListener("blur",this)}handleEvent(e){switch(e.type){case"keyup":void this._evtKeyUp(e);break;case"click":this._evtClick(e);break;case"blur":this._selected=false;break}}async _evtKeyUp(e){if(e.key=="Enter"){const e=this._shell.currentWidget;if(e==null){return}const t=e.title.label;const n=this.inputElement;const r=n.value;n.blur();if(r!==t){e.title.label=r}else{n.value=t}}}_evtClick(e){if(e.button!==0||this._selected){return}const t=this.inputElement;e.preventDefault();e.stopPropagation();this._selected=true;const n=t.value.indexOf(".");if(n===-1){t.select()}else{t.setSelectionRange(0,n)}}get inputElement(){return this.node.children[0]}}e.TitleHandler=s;class a extends S.SplitPanel{constructor(e={}){super(e);this.updated=new u.Signal(this)}onUpdateRequest(e){super.onUpdateRequest(e);this.updated.emit()}}e.RestorableSplitPanel=a})(z||(z={}));var N=n(64782);const F=new d.Token("@jupyterlab/application:ILabStatus");class H{constructor(e){this._busyCount=0;this._dirtyCount=0;this._busySignal=new u.Signal(e);this._dirtySignal=new u.Signal(e)}get busySignal(){return this._busySignal}get dirtySignal(){return this._dirtySignal}get isBusy(){return this._busyCount>0}get isDirty(){return this._dirtyCount>0}setDirty(){const e=this.isDirty;this._dirtyCount++;if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}return new N.DisposableDelegate((()=>{const e=this.isDirty;this._dirtyCount=Math.max(0,this._dirtyCount-1);if(this.isDirty!==e){this._dirtySignal.emit(this.isDirty)}}))}setBusy(){const e=this.isBusy;this._busyCount++;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}return new N.DisposableDelegate((()=>{const e=this.isBusy;this._busyCount--;if(this.isBusy!==e){this._busySignal.emit(this.isBusy)}}))}}class W extends h{constructor(e={shell:new O}){super(Object.assign(Object.assign({},e),{shell:e.shell||new O}));this.name=g.PageConfig.getOption("appName")||"JupyterLab";this.namespace=g.PageConfig.getOption("appNamespace")||this.name;this.registerPluginErrors=[];this.status=new H(this);this.version=g.PageConfig.getOption("appVersion")||"unknown";this.restored=this.shell.restored.then((()=>undefined)).catch((()=>undefined));const t=Object.keys(W.defaultInfo).reduce(((t,n)=>{if(n in e){t[n]=JSON.parse(JSON.stringify(e[n]))}return t}),{});this._info=Object.assign(Object.assign({},W.defaultInfo),t);const n=W.defaultPaths.urls;const r=W.defaultPaths.directories;const o=e.paths&&e.paths.urls||{};const i=e.paths&&e.paths.directories||{};this._paths={urls:Object.keys(n).reduce(((e,t)=>{if(t in o){const n=o[t];e[t]=n}else{e[t]=n[t]}return e}),{}),directories:Object.keys(W.defaultPaths.directories).reduce(((e,t)=>{if(t in i){const n=i[t];e[t]=n}else{e[t]=r[t]}return e}),{})};if(this._info.devMode){this.shell.addClass("jp-mod-devMode")}this.docRegistry.addModelFactory(new s.Base64ModelFactory);if(e.mimeExtensions){for(const t of E(e.mimeExtensions)){this.registerPlugin(t)}}}get info(){return this._info}get paths(){return this._paths}registerPluginModule(e){let t=e.default;if(!e.hasOwnProperty("__esModule")){t=e}if(!Array.isArray(t)){t=[t]}t.forEach((e=>{try{this.registerPlugin(e)}catch(t){this.registerPluginErrors.push(t)}}))}registerPluginModules(e){e.forEach((e=>{this.registerPluginModule(e)}))}}(function(e){e.IInfo=new d.Token("@jupyterlab/application:IInfo");e.defaultInfo={devMode:g.PageConfig.getOption("devMode").toLowerCase()==="true",deferred:{patterns:[],matches:[]},disabled:{patterns:[],matches:[]},mimeExtensions:[],filesCached:g.PageConfig.getOption("cacheFiles").toLowerCase()==="true"};e.defaultPaths={urls:{base:g.PageConfig.getOption("baseUrl"),notFound:g.PageConfig.getOption("notFoundUrl"),app:g.PageConfig.getOption("appUrl"),doc:g.PageConfig.getOption("docUrl"),static:g.PageConfig.getOption("staticUrl"),settings:g.PageConfig.getOption("settingsUrl"),themes:g.PageConfig.getOption("themesUrl"),translations:g.PageConfig.getOption("translationsApiUrl"),hubHost:g.PageConfig.getOption("hubHost")||undefined,hubPrefix:g.PageConfig.getOption("hubPrefix")||undefined,hubUser:g.PageConfig.getOption("hubUser")||undefined,hubServerName:g.PageConfig.getOption("hubServerName")||undefined},directories:{appSettings:g.PageConfig.getOption("appSettingsDir"),schemas:g.PageConfig.getOption("schemasDir"),static:g.PageConfig.getOption("staticDir"),templates:g.PageConfig.getOption("templatesDir"),themes:g.PageConfig.getOption("themesDir"),userSettings:g.PageConfig.getOption("userSettingsDir"),serverRoot:g.PageConfig.getOption("serverRoot"),workspaces:g.PageConfig.getOption("workspacesDir")}}})(W||(W={}));class V{constructor(e){this.stop=new d.Token("@jupyterlab/application:Router#stop");this._routed=new u.Signal(this);this._rules=new Map;this.base=e.base;this.commands=e.commands}get current(){var e,t;const{base:n}=this;const r=g.URLExt.parse(window.location.href);const{search:o,hash:i}=r;const s=(t=(e=r.pathname)===null||e===void 0?void 0:e.replace(n,"/"))!==null&&t!==void 0?t:"";const a=s+o+i;return{hash:i,path:s,request:a,search:o}}get routed(){return this._routed}navigate(e,t={}){const{base:n}=this;const{history:r}=window;const{hard:o}=t;const i=document.location.href;const s=e&&e.indexOf(n)===0?e:g.URLExt.join(n,e);if(s===i){return o?this.reload():undefined}r.pushState({},"",s);if(o){return this.reload()}if(!t.skipRouting){requestAnimationFrame((()=>{void this.route()}))}}register(e){var t;const{command:n,pattern:r}=e;const o=(t=e.rank)!==null&&t!==void 0?t:100;const i=this._rules;i.set(r,{command:n,rank:o});return new N.DisposableDelegate((()=>{i.delete(r)}))}reload(){window.location.reload()}route(){const{commands:e,current:t,stop:n}=this;const{request:r}=t;const o=this._routed;const i=this._rules;const s=[];i.forEach(((e,t)=>{if(r===null||r===void 0?void 0:r.match(t)){s.push(e)}}));const a=s.sort(((e,t)=>t.rank-e.rank));const l=new d.PromiseDelegate;const c=async()=>{if(!a.length){o.emit(t);l.resolve(undefined);return}const{command:i}=a.pop();try{const r=this.current.request;const o=await e.execute(i,t);if(o===n){a.length=0;console.debug(`Routing ${r} was short-circuited by ${i}`)}}catch(s){console.warn(`Routing ${r} to ${i} failed`,s)}void c()};void c();return l.promise}}const q=new d.Token("@jupyterlab/apputils:IConnectionLost");const U=new d.Token("@jupyterlab/application:IRouter");const $=new d.Token("@jupyterlab/application:ITreePathUpdater")},90516:(e,t,n)=>{"use strict";var r=n(81802);var o=n(76126);var i=n(32902);var s=n(34849);var a=n(79536);var l=n(94683);var c=n(93379);var d=n.n(c);var u=n(14362);var h={};h.insert="head";h.singleton=false;var p=d()(u.Z,h);const m=u.Z.locals||{}},16743:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>Z,toggleHeader:()=>V});var r=n(97577);var o=n(3378);var i=n(69442);var s=n(42014);var a=n(42573);var l=n(59768);var c=n(25903);var d=n(91100);var u=n(64782);var h=n(6625);var p=n(54522);var m=n(47220);var g=n(700);var f;(function(e){e.activate="apputils:activate-command-palette"})(f||(f={}));const A="@jupyterlab/apputils-extension:palette";class v{constructor(e,t){this.translator=t||l.nullTranslator;const n=this.translator.load("jupyterlab");this._palette=e;this._palette.title.label="";this._palette.title.caption=n.__("Command Palette")}set placeholder(e){this._palette.inputNode.placeholder=e}get placeholder(){return this._palette.inputNode.placeholder}activate(){this._palette.activate()}addItem(e){const t=this._palette.addItem(e);return new u.DisposableDelegate((()=>{this._palette.removeItem(t)}))}}(function(e){function t(t,n,r){const{commands:i,shell:s}=t;const a=n.load("jupyterlab");const l=C.createPalette(t,n);const c=new o.ModalCommandPalette({commandPalette:l});let d=false;l.node.setAttribute("role","region");l.node.setAttribute("aria-label",a.__("Command Palette Section"));s.add(l,"left",{rank:300});if(r){const e=r.load(A);const n=e=>{const t=e.get("modal").composite;if(d&&!t){l.parent=null;c.detach();s.add(l,"left",{rank:300})}else if(!d&&t){l.parent=null;c.palette=l;l.show();c.attach()}d=t};Promise.all([e,t.restored]).then((([e])=>{n(e);e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const u=()=>{const e=(0,p.find)(t.commands.keyBindings,(e=>e.command===f.activate));if(e){const t=m.CommandRegistry.formatKeystroke(e.keys.join(" "));l.title.caption=a.__("Commands (%1)",t)}else{l.title.caption=a.__("Commands")}};u();t.commands.keyBindingChanged.connect((()=>{u()}));i.addCommand(f.activate,{execute:()=>{if(d){c.activate()}else{s.activateById(l.id)}},label:a.__("Activate Command Palette")});l.inputNode.placeholder=a.__("SEARCH");return new e(l,n)}e.activate=t;function n(e,t,n){const r=C.createPalette(e,n);t.add(r,"command-palette")}e.restore=n})(v||(v={}));var C;(function(e){let t;function n(e,n){if(!t){t=new g.CommandPalette({commands:e.commands,renderer:c.CommandPaletteSvg.defaultRenderer});t.id="command-palette";t.title.icon=c.paletteIcon;const r=n.load("jupyterlab");t.title.label=r.__("Commands")}return t}e.createPalette=n})(C||(C={}));class b extends a.DataConnector{constructor(e){super();this._throttlers=Object.create(null);this._connector=e}fetch(e){const t=this._throttlers;if(!(e in t)){t[e]=new h.Throttler((()=>this._connector.fetch(e)),100)}return t[e].invoke()}async list(e="all"){const{isDeferred:t,isDisabled:n}=i.PageConfig.Extension;const{ids:r,values:o}=await this._connector.list();if(e==="all"){return{ids:r,values:o}}return{ids:r.filter((e=>!t(e)&&!n(e))),values:o.filter((({id:e})=>!t(e)&&!n(e)))}}async save(e,t){await this._connector.save(e,t)}}const _={id:"@jupyterlab/apputils-extension:settings",activate:async e=>{const{isDisabled:t}=i.PageConfig.Extension;const n=new b(e.serviceManager.settings);const r=new s.SettingRegistry({connector:n,plugins:(await n.list("active")).values});void e.restored.then((async()=>{const e=await n.list("all");e.ids.forEach((async(n,o)=>{if(t(n)||n in r.plugins){return}try{await r.load(n)}catch(i){console.warn(`Settings failed to load for (${n})`,i);if(e.values[o].schema["jupyter.lab.transform"]){console.warn(`This may happen if {autoStart: false} in (${n}) `+`or if it is one of the deferredExtensions in page config.`)}}}))}));return r},autoStart:true,provides:s.ISettingRegistry};var y=n(73704);var E;(function(e){e.changeTheme="apputils:change-theme";e.themeScrollbars="apputils:theme-scrollbars";e.changeFont="apputils:change-font";e.incrFontSize="apputils:incr-font-size";e.decrFontSize="apputils:decr-font-size"})(E||(E={}));const w={id:"@jupyterlab/apputils-extension:themes",requires:[s.ISettingRegistry,r.JupyterFrontEnd.IPaths,l.ITranslator],optional:[o.ISplashScreen],activate:(e,t,n,r,s)=>{const a=r.load("jupyterlab");const l=e.shell;const c=e.commands;const d=i.URLExt.join(i.PageConfig.getBaseUrl(),n.urls.themes);const u=w.id;const h=new o.ThemeManager({key:u,host:l,settings:t,splash:s!==null&&s!==void 0?s:undefined,url:d});let p;h.themeChanged.connect(((e,t)=>{p=t.newValue;document.body.dataset.jpThemeLight=String(h.isLight(p));document.body.dataset.jpThemeName=p;if(document.body.dataset.jpThemeScrollbars!==String(h.themeScrollbars(p))){document.body.dataset.jpThemeScrollbars=String(h.themeScrollbars(p))}c.notifyCommandChanged(E.changeTheme)}));c.addCommand(E.changeTheme,{label:e=>{const t=e["theme"];const n=h.getDisplayName(t);return e["isPalette"]?a.__("Use Theme: %1",n):n},isToggled:e=>e["theme"]===p,execute:e=>{const t=e["theme"];if(t===h.theme){return}return h.setTheme(t)}});c.addCommand(E.themeScrollbars,{label:a.__("Theme Scrollbars"),isToggled:()=>h.isToggledThemeScrollbars(),execute:()=>h.toggleThemeScrollbars()});c.addCommand(E.changeFont,{label:e=>e["enabled"]?`${e["font"]}`:a.__("waiting for fonts"),isEnabled:e=>e["enabled"],isToggled:e=>h.getCSS(e["key"])===e["font"],execute:e=>h.setCSSOverride(e["key"],e["font"])});c.addCommand(E.incrFontSize,{label:e=>{switch(e.key){case"code-font-size":return a.__("Increase Code Font Size");case"content-font-size1":return a.__("Increase Content Font Size");case"ui-font-size1":return a.__("Increase UI Font Size");default:return a.__("Increase Font Size")}},execute:e=>h.incrFontSize(e["key"])});c.addCommand(E.decrFontSize,{label:e=>{switch(e.key){case"code-font-size":return a.__("Decrease Code Font Size");case"content-font-size1":return a.__("Decrease Content Font Size");case"ui-font-size1":return a.__("Decrease UI Font Size");default:return a.__("Decrease Font Size")}},execute:e=>h.decrFontSize(e["key"])});return h},autoStart:true,provides:o.IThemeManager};const x={id:"@jupyterlab/apputils-extension:themes-palette-menu",requires:[o.IThemeManager,l.ITranslator],optional:[o.ICommandPalette,y.IMainMenu],activate:(e,t,n,r,o)=>{const i=n.load("jupyterlab");if(o){void e.restored.then((()=>{var e;const n=false;const r=(e=o.settingsMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-settings-apputilstheme"})))===null||e===void 0?void 0:e.submenu;if(r){t.themes.forEach(((e,t)=>{r.insertItem(t,{command:E.changeTheme,args:{isPalette:n,theme:e}})}))}}))}if(r){void e.restored.then((()=>{const e=i.__("Theme");const n=E.changeTheme;const o=true;t.themes.forEach((t=>{r.addItem({command:n,args:{isPalette:o,theme:t},category:e})}));r.addItem({command:E.themeScrollbars,category:e});r.addItem({command:E.incrFontSize,args:{key:"code-font-size"},category:e});r.addItem({command:E.decrFontSize,args:{key:"code-font-size"},category:e});r.addItem({command:E.incrFontSize,args:{key:"content-font-size1"},category:e});r.addItem({command:E.decrFontSize,args:{key:"content-font-size1"},category:e});r.addItem({command:E.incrFontSize,args:{key:"ui-font-size1"},category:e});r.addItem({command:E.decrFontSize,args:{key:"ui-font-size1"},category:e})}))}},autoStart:true};const j={id:"@jupyterlab/apputils-extension:toolbar-registry",autoStart:true,provides:o.IToolbarWidgetRegistry,activate:e=>{const t=new o.ToolbarWidgetRegistry({defaultFactory:(0,o.createDefaultFactory)(e.commands)});return t}};var k=n(34576);var B=n(54917);var S;(function(e){e.saveWorkspace="workspace-ui:save";e.saveWorkspaceAs="workspace-ui:save-as"})(S||(S={}));const D="jupyterlab-workspace";const M="."+D;const T="workspace-ui:lastSave";const I="jp-JupyterIcon";const P={id:"@jupyterlab/apputils-extension:workspaces",autoStart:true,requires:[B.IFileBrowserFactory,o.IWindowResolver,a.IStateDB,l.ITranslator,r.JupyterFrontEnd.IPaths],optional:[r.IRouter],activate:(e,t,n,r,o,i,s)=>{const a=new R.WorkspaceFactory({workspaces:e.serviceManager.workspaces,router:s,state:r,translator:o,paths:i});const l=o.load("jupyterlab");e.docRegistry.addFileType({name:D,contentType:"file",fileFormat:"text",displayName:l.__("JupyterLab workspace File"),extensions:[M],mimeTypes:["text/json"],iconClass:I});e.docRegistry.addWidgetFactory(a);e.commands.addCommand(S.saveWorkspaceAs,{label:l.__("Save Current Workspace As"),execute:async()=>{const i=e.serviceManager.workspaces.fetch(n.name);await R.saveAs(t.defaultBrowser,e.serviceManager.contents,i,r,o)}});e.commands.addCommand(S.saveWorkspace,{label:l.__("Save Current Workspace"),execute:async()=>{const{contents:i}=e.serviceManager;const s=e.serviceManager.workspaces.fetch(n.name);const a=await r.fetch(T);if(a===undefined){await R.saveAs(t.defaultBrowser,i,s,r,o)}else{await R.save(a,i,s,r)}}})}};var R;(function(e){async function t(e,t,n,r){let o=e.split("/").pop();if(o!==undefined&&o.includes(".")){o=o.split(".")[0]}else{e=e+M}await r.save(T,e);const i=await n;i.metadata.id=`${o}`;await t.save(e,{type:"file",format:"text",content:JSON.stringify(i)})}e.save=t;async function n(e,n,r,o,i){var s;i=i||l.nullTranslator;const c=await o.fetch(T);let d;if(c===undefined){d="new-workspace"}else{d=(s=c.split("/").pop())===null||s===void 0?void 0:s.split(".")[0]}const u=e.model.path+"/"+d+M;const h=await a(u,i);if(h){await t(h,n,r,o)}}e.saveAs=n;class r extends k.ABCWidgetFactory{constructor(e){const t=(e.translator||l.nullTranslator).load("jupyterlab");super({name:t.__("Workspace loader"),fileTypes:[D],defaultFor:[D],readOnly:true});this._application=e.paths.urls.app;this._router=e.router;this._state=e.state;this._workspaces=e.workspaces}createNewWidget(e){void e.ready.then((async()=>{const t=e.model;const n=t.toJSON();const r=e.path;const o=n.metadata.id;await this._workspaces.save(o,n);await this._state.save(T,r);const s=i.URLExt.join(this._application,"workspaces",o);if(this._router){this._router.navigate(s,{hard:true})}else{document.location.href=s}}));return s(e)}}e.WorkspaceFactory=r;function s(e){const t=new k.DocumentWidget({content:new g.Widget,context:e});t.content.dispose();return t}async function a(e,t){t=t||l.nullTranslator;const n=t.load("jupyterlab");const r=o.Dialog.okButton({label:n.__("Save")});const i=await(0,o.showDialog)({title:n.__("Save Current Workspace As"),body:new c(e),buttons:[o.Dialog.cancelButton({label:n.__("Cancel")}),r]});if(i.button.label===n.__("Save")){return i.value}else{return null}}class c extends g.Widget{constructor(e){super({node:d(e)})}getValue(){return this.node.value}}function d(e){const t=document.createElement("input");t.value=e;return t}})(R||(R={}));const L=12e3;var O;(function(e){e.loadState="apputils:load-statedb";e.print="apputils:print";e.reset="apputils:reset";e.resetOnLoad="apputils:reset-on-load";e.runFirstEnabled="apputils:run-first-enabled";e.runAllEnabled="apputils:run-all-enabled";e.toggleHeader="apputils:toggle-header"})(O||(O={}));const z={id:"@jupyterlab/apputils-extension:palette",autoStart:true,requires:[l.ITranslator],provides:o.ICommandPalette,optional:[s.ISettingRegistry],activate:(e,t,n)=>v.activate(e,t,n)};const N={id:"@jupyterlab/apputils-extension:palette-restorer",autoStart:true,requires:[r.ILayoutRestorer,l.ITranslator],activate:(e,t,n)=>{v.restore(e,t,n)}};const F={id:"@jupyterlab/apputils-extension:resolver",autoStart:true,provides:o.IWindowResolver,requires:[r.JupyterFrontEnd.IPaths,r.IRouter],activate:async(e,t,n)=>{const{hash:r,search:s}=n.current;const a=i.URLExt.queryStringToObject(s||"");const l=new o.WindowResolver;const c=i.PageConfig.getOption("workspace");const d=i.PageConfig.getOption("treePath");const u=i.PageConfig.getOption("mode")==="multiple-document"?"lab":"doc";const h=c?c:i.PageConfig.defaultWorkspace;const p=d?i.URLExt.join("tree",d):"";try{await l.resolve(h);return l}catch(m){return new Promise((()=>{const{base:e}=t.urls;const o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";const s=o[Math.floor(Math.random()*o.length)];let l=i.URLExt.join(e,u,"workspaces",`auto-${s}`);l=p?i.URLExt.join(l,i.URLExt.encodeParts(p)):l;a["reset"]="";const c=l+i.URLExt.objectToQueryString(a)+(r||"");n.navigate(c,{hard:true})}))}}};const H={id:"@jupyterlab/apputils-extension:splash",autoStart:true,requires:[l.ITranslator],provides:o.ISplashScreen,activate:(e,t)=>{const n=t.load("jupyterlab");const{commands:r,restored:i}=e;const s=document.createElement("div");const a=document.createElement("div");const l=document.createElement("div");s.id="jupyterlab-splash";a.id="galaxy";l.id="main-logo";c.jupyterFaviconIcon.element({container:l,stylesheet:"splash"});a.appendChild(l);["1","2","3"].forEach((e=>{const t=document.createElement("div");const n=document.createElement("div");t.id=`moon${e}`;t.className="moon orbit";n.id=`planet${e}`;n.className="planet";t.appendChild(n);a.appendChild(t)}));s.appendChild(a);let d;const p=new h.Throttler((async()=>{if(d){return}d=new o.Dialog({title:n.__("Loading"),body:n.__(`The loading screen is taking a long time.\nWould you like to clear the workspace or keep waiting?`),buttons:[o.Dialog.cancelButton({label:n.__("Keep Waiting")}),o.Dialog.warnButton({label:n.__("Clear Workspace")})]});try{const e=await d.launch();d.dispose();d=null;if(e.button.accept&&r.hasCommand(O.reset)){return r.execute(O.reset)}requestAnimationFrame((()=>{void p.invoke().catch((e=>undefined))}))}catch(e){}}),{limit:L,edge:"trailing"});let m=0;return{show:(e=true)=>{s.classList.remove("splash-fade");s.classList.toggle("light",e);s.classList.toggle("dark",!e);m++;document.body.appendChild(s);void p.invoke().catch((e=>undefined));return new u.DisposableDelegate((async()=>{await i;if(--m===0){void p.stop();if(d){d.dispose();d=null}s.classList.add("splash-fade");window.setTimeout((()=>{document.body.removeChild(s)}),200)}}))}}}};const W={id:"@jupyterlab/apputils-extension:print",autoStart:true,requires:[l.ITranslator],activate:(e,t)=>{const n=t.load("jupyterlab");e.commands.addCommand(O.print,{label:n.__("Print"),isEnabled:()=>{const t=e.shell.currentWidget;return o.Printing.getPrintFunction(t)!==null},execute:async()=>{const t=e.shell.currentWidget;const n=o.Printing.getPrintFunction(t);if(n){await n()}}})}};const V={id:"@jupyterlab/apputils-extension:toggle-header",autoStart:true,requires:[l.ITranslator],optional:[o.ICommandPalette],activate:(e,t,n)=>{const r=t.load("jupyterlab");const i=r.__("Main Area");e.commands.addCommand(O.toggleHeader,{label:r.__("Show Header Above Content"),isEnabled:()=>e.shell.currentWidget instanceof o.MainAreaWidget&&e.shell.currentWidget.contentHeader.widgets.length>0,isToggled:()=>{const t=e.shell.currentWidget;return t instanceof o.MainAreaWidget?!t.contentHeader.isHidden:false},execute:async()=>{const t=e.shell.currentWidget;if(t instanceof o.MainAreaWidget){t.contentHeader.setHidden(!t.contentHeader.isHidden)}}});if(n){n.addItem({command:O.toggleHeader,category:i})}}};async function q(e,t,n){var r,o;const s=await t.toJSON();let a=(o=(r=s["layout-restorer:data"])===null||r===void 0?void 0:r.main)===null||o===void 0?void 0:o.current;if(a===undefined){document.title=`${i.PageConfig.getOption("appName")||"JupyterLab"}${e.startsWith("auto-")?` (${e})`:``}`}else{let t=i.PathExt.basename(a.split(":")[1]);t=t.length>15?t.slice(0,12).concat(``):t;const r=Object.keys(s).filter((e=>e.startsWith("notebook")||e.startsWith("editor"))).length;if(e.startsWith("auto-")){document.title=`${t} (${e}${r>1?` : ${r}`:``}) - ${n}`}else{document.title=`${t}${r>1?` (${r})`:``} - ${n}`}}}const U={id:"@jupyterlab/apputils-extension:state",autoStart:true,provides:a.IStateDB,requires:[r.JupyterFrontEnd.IPaths,r.IRouter,l.ITranslator],optional:[o.IWindowResolver],activate:(e,t,n,r,o)=>{const s=r.load("jupyterlab");if(o===null){return new a.StateDB}let l=false;const{commands:c,name:u,serviceManager:p}=e;const{workspaces:m}=p;const g=o.name;const f=new d.PromiseDelegate;const A=new a.StateDB({transform:f.promise});const v=new h.Debouncer((async()=>{const e=g;const t={id:e};const n=await A.toJSON();await m.save(e,{data:n,metadata:t})}));A.changed.connect((()=>void v.invoke()),A);A.changed.connect((()=>q(g,A,u)));c.addCommand(O.loadState,{execute:async e=>{if(l){return}const{hash:r,path:o,search:s}=e;const{urls:a}=t;const c=i.URLExt.queryStringToObject(s||"");const d=typeof c["clone"]==="string"?c["clone"]===""?i.URLExt.join(a.base,a.app):i.URLExt.join(a.base,a.app,"workspaces",c["clone"]):null;const u=d||g||null;if(u===null){console.error(`${O.loadState} cannot load null workspace.`);return}try{const e=await m.fetch(u);if(!l){l=true;f.resolve({type:"overwrite",contents:e.data})}}catch({message:h}){console.warn(`Fetching workspace "${g}" failed.`,h);if(!l){l=true;f.resolve({type:"cancel",contents:null})}}if(u===d){delete c["clone"];const e=o+i.URLExt.objectToQueryString(c)+r;const t=v.invoke().then((()=>n.stop));void t.then((()=>{n.navigate(e)}));return t}await v.invoke()}});c.addCommand(O.reset,{label:s.__("Reset Application State"),execute:async({reload:e})=>{await A.clear();await v.invoke();if(e){n.reload()}}});c.addCommand(O.resetOnLoad,{execute:e=>{const{hash:t,path:r,search:o}=e;const s=i.URLExt.queryStringToObject(o||"");const a="reset"in s;const c="clone"in s;if(!a){return}if(l){return n.reload()}l=true;f.resolve({type:"clear",contents:null});delete s["reset"];const d=r+i.URLExt.objectToQueryString(s)+t;const u=A.clear().then((()=>v.invoke()));if(c){void u.then((()=>{n.navigate(d,{hard:true})}))}else{void u.then((()=>{n.navigate(d)}))}return u}});n.register({command:O.loadState,pattern:/.?/,rank:30});n.register({command:O.resetOnLoad,pattern:/(\?reset|\&reset)($|&)/,rank:20});return A}};const $={id:"@jupyterlab/apputils-extension:sessionDialogs",provides:o.ISessionContextDialogs,autoStart:true,activate:()=>o.sessionContextDialogs};const K={id:"@jupyterlab/apputils-extension:utilityCommands",requires:[l.ITranslator],autoStart:true,activate:(e,t)=>{const n=t.load("jupyterlab");const{commands:r}=e;r.addCommand(O.runFirstEnabled,{label:n.__("Run First Enabled Command"),execute:t=>{const n=t.commands;const r=t.args;const o=Array.isArray(t);for(let i=0;i<n.length;i++){const t=n[i];const s=o?r[i]:r;if(e.commands.isEnabled(t,s)){return e.commands.execute(t,s)}}}});r.addCommand(O.runAllEnabled,{label:n.__("Run All Enabled Commands Passed as Args"),execute:async t=>{const n=t.commands;const r=t.args;const o=Array.isArray(t);const i=t.errorIfNotEnabled;for(let s=0;s<n.length;s++){const t=n[s];const a=o?r[s]:r;if(e.commands.isEnabled(t,a)){await e.commands.execute(t,a)}else{if(i){console.error(`${t} is not enabled.`)}}}}})}};const Y={id:"@jupyter/apputils-extension:sanitizer",autoStart:true,provides:o.ISanitizer,activate:()=>o.defaultSanitizer};const G=[z,N,W,F,Y,_,U,H,$,w,x,V,j,K,P];const Z=G},48435:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(94683);var a=n(90516);var l=n(59240);var c=n(74518);var d=n(93379);var u=n.n(d);var h=n(70785);var p={};p.insert="head";p.singleton=false;var m=u()(h.Z,p);const g=h.Z.locals||{}},28721:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Clipboard:()=>o,Collapse:()=>c,CommandLinker:()=>h,CommandToolbarButton:()=>_e,CommandToolbarButtonComponent:()=>Ce,DOMUtils:()=>P,Dialog:()=>M,FilenameSearcher:()=>Oe,FilterBox:()=>Le,HoverBox:()=>O,ICommandPalette:()=>p,IFrame:()=>z,ISanitizer:()=>$e,ISessionContextDialogs:()=>qe,ISplashScreen:()=>ze,IThemeManager:()=>Ue,IToolbarWidgetRegistry:()=>Ke,IWindowResolver:()=>ot,InputDialog:()=>W,MainAreaWidget:()=>je,MenuFactory:()=>Be,ModalCommandPalette:()=>g,Printing:()=>J,ReactWidget:()=>E,ReactiveToolbar:()=>ge,Sanitizer:()=>Te,SessionContext:()=>ne,Spinner:()=>X,Styling:()=>b,ThemeManager:()=>We,Toolbar:()=>me,ToolbarButton:()=>ve,ToolbarButtonComponent:()=>fe,ToolbarWidgetRegistry:()=>nt,UseSignal:()=>x,VDomModel:()=>j,VDomRenderer:()=>w,WidgetTracker:()=>B,WindowResolver:()=>it,addCommandToolbarButtonClass:()=>be,addToolbarButtonClass:()=>Ae,createDefaultFactory:()=>rt,createToolbarFactory:()=>et,defaultSanitizer:()=>Ie,fuzzySearch:()=>Pe,sessionContextDialogs:()=>re,setToolbar:()=>tt,showDialog:()=>S,showErrorMessage:()=>D,translateKernelStatuses:()=>ie,updateFilterFunction:()=>Re});var r=n(91100);var o;(function(e){function t(){return i.instance}e.getInstance=t;function n(e){i.instance=e}e.setInstance=n;function r(e){const t=document.body;const n=r=>{const o=r.clipboardData||window.clipboardData;if(typeof e==="string"){o.setData("text",e)}else{e.types().map((t=>{o.setData(t,e.getData(t))}))}r.preventDefault();t.removeEventListener("copy",n)};t.addEventListener("copy",n);o(t)}e.copyToSystem=r;function o(e,t="copy"){let n=window.getSelection();const r=[];for(let i=0,s=(n===null||n===void 0?void 0:n.rangeCount)||0;i<s;++i){r[i]=n.getRangeAt(i).cloneRange()}const o=document.createRange();o.selectNodeContents(e);if(n){n.removeAllRanges();n.addRange(o)}document.execCommand(t);n=window.getSelection();if(n){n.removeAllRanges();for(let e=0,t=r.length;e<t;++e){n.addRange(r[e])}}}e.generateEvent=o})(o||(o={}));var i;(function(e){e.instance=new r.MimeData})(i||(i={}));var s=n(25903);var a=n(18987);var l=n(700);class c extends l.Widget{constructor(e){super(e);this._collapseChanged=new a.Signal(this);const{widget:t,collapsed:n=true}=e;this.addClass("jp-Collapse");this._header=new l.Widget;this._header.addClass("jp-Collapse-header");this._content=new l.Panel;this._content.addClass("jp-Collapse-contents");const r=new l.PanelLayout;this.layout=r;r.addWidget(this._header);r.addWidget(this._content);this.widget=t;this.collapsed=n}get widget(){return this._widget}set widget(e){const t=this._widget;if(t){t.title.changed.disconnect(this._onTitleChanged,this);t.parent=null}this._widget=e;e.title.changed.connect(this._onTitleChanged,this);this._onTitleChanged(e.title);this._content.addWidget(e)}get collapsed(){return this._collapsed}set collapsed(e){if(e===this._collapsed){return}if(e){this._collapse()}else{this._uncollapse()}}get collapseChanged(){return this._collapseChanged}toggle(){this.collapsed=!this.collapsed}dispose(){if(this.isDisposed){return}this._header=null;this._widget=null;this._content=null;super.dispose()}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;default:break}}onAfterAttach(e){this._header.node.addEventListener("click",this)}onBeforeDetach(e){this._header.node.removeEventListener("click",this)}_collapse(){this._collapsed=true;if(this._content){this._content.hide()}this._setHeader();this._collapseChanged.emit(void 0)}_uncollapse(){this._collapsed=false;if(this._content){this._content.show()}this._setHeader();this._collapseChanged.emit(void 0)}_evtClick(e){this.toggle()}_onTitleChanged(e){this._setHeader()}_setHeader(){(this._collapsed?s.caretUpIcon:s.caretDownIcon).element({container:this._header.node,label:this._widget.title.label,elementPosition:"right",height:"28px"})}}const d="commandlinker-command";const u="commandlinker-args";class h{constructor(e){this._isDisposed=false;this._commands=e.commands;document.body.addEventListener("click",this)}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;document.body.removeEventListener("click",this)}connectNode(e,t,n){e.setAttribute(`data-${d}`,t);if(n!==void 0){e.setAttribute(`data-${u}`,JSON.stringify(n))}return e}disconnectNode(e){e.removeAttribute(`data-${d}`);e.removeAttribute(`data-${u}`);return e}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;default:return}}populateVNodeDataset(e,t){let n;if(t!==void 0){n={[u]:JSON.stringify(t),[d]:e}}else{n={[d]:e}}return n}_evtClick(e){let t=e.target;while(t&&t.parentElement){if(t.hasAttribute(`data-${d}`)){e.preventDefault();const n=t.getAttribute(`data-${d}`);if(!n){return}const o=t.getAttribute(`data-${u}`);let i=r.JSONExt.emptyObject;if(o){i=JSON.parse(o)}void this._commands.execute(n,i);return}t=t.parentElement}}}const p=new r.Token("@jupyterlab/apputils:ICommandPalette");const m="jp-SearchIconGroup";class g extends l.Panel{constructor(e){super();this.addClass("jp-ModalCommandPalette");this.id="modal-command-palette";this.palette=e.commandPalette;this._commandPalette.commands.commandExecuted.connect((()=>{if(this.isAttached&&this.isVisible){this.hideAndReset()}}));this.node.tabIndex=0}get palette(){return this._commandPalette}set palette(e){this._commandPalette=e;if(!this.searchIconGroup){this._commandPalette.inputNode.insertAdjacentElement("afterend",this.createSearchIconGroup())}this.addWidget(e);this.hideAndReset()}attach(){l.Widget.attach(this,document.body)}detach(){l.Widget.detach(this)}hideAndReset(){this.hide();this._commandPalette.inputNode.value="";this._commandPalette.refresh()}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"blur":{if(this.node.contains(e.target)&&!this.node.contains(e.relatedTarget)){e.stopPropagation();this.hideAndReset()}break}case"contextmenu":e.preventDefault();e.stopPropagation();break;default:break}}get searchIconGroup(){return this._commandPalette.node.getElementsByClassName(m)[0]}createSearchIconGroup(){const e=document.createElement("div");e.classList.add(m);s.searchIcon.render(e);return e}onAfterAttach(e){this.node.addEventListener("keydown",this,true);this.node.addEventListener("contextmenu",this,true)}onAfterDetach(e){this.node.removeEventListener("keydown",this,true);this.node.removeEventListener("contextmenu",this,true)}onBeforeHide(e){document.removeEventListener("blur",this,true)}onAfterShow(e){document.addEventListener("blur",this,true)}onActivateRequest(e){if(this.isAttached){this.show();this._commandPalette.activate()}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation();e.preventDefault();this.hideAndReset();break;default:break}}}var f=n(54522);var A=n(46843);var v=n(77865);var C=n.n(v);var b;(function(e){function t(e,t=""){n(e,"select",t);n(e,"textarea",t);n(e,"input",t);n(e,"button",t)}e.styleNode=t;function n(e,t,n=""){if(e.localName===t){e.classList.add("jp-mod-styled")}if(e.localName==="select"){r(e)}const o=e.getElementsByTagName(t);for(let i=0;i<o.length;i++){const e=o[i];e.classList.add("jp-mod-styled");if(n){e.classList.add(n)}if(t==="select"){r(e)}}}e.styleNodeByTag=n;function r(e){const t=document.createElement("div");t.classList.add("jp-select-wrapper");e.addEventListener("focus",_.onFocus);e.addEventListener("blur",_.onFocus);e.classList.add("jp-mod-styled");if(e.parentElement){e.parentElement.replaceChild(t,e)}t.appendChild(e);t.appendChild(s.caretDownEmptyIcon.element({tag:"span",stylesheet:"select",right:"8px",top:"5px",width:"18px"}));return t}e.wrapSelect=r})(b||(b={}));var _;(function(e){function t(e){const t=e.target;const n=t.parentElement;if(!n){return}if(e.type==="focus"){n.classList.add("jp-mod-focused")}else{n.classList.remove("jp-mod-focused")}}e.onFocus=t})(_||(_={}));var y=n(21704);class E extends l.Widget{static create(e){return new class extends E{render(){return e}}}onUpdateRequest(e){this.renderPromise=this.renderDOM()}onAfterAttach(e){A.MessageLoop.sendMessage(this,l.Widget.Msg.UpdateRequest)}onBeforeDetach(e){y.unmountComponentAtNode(this.node)}renderDOM(){return new Promise((e=>{const t=this.render();if(Array.isArray(t)){y.render(t,this.node,e)}else if(t){y.render(t,this.node,e)}}))}}class w extends E{constructor(e){super();this._modelChanged=new a.Signal(this);this.model=e!==null&&e!==void 0?e:null}get modelChanged(){return this._modelChanged}set model(e){if(this._model===e){return}if(this._model){this._model.stateChanged.disconnect(this.update,this)}this._model=e;if(e){e.stateChanged.connect(this.update,this)}this.update();this._modelChanged.emit(void 0)}get model(){return this._model}dispose(){if(this.isDisposed){return}this._model=null;super.dispose()}}class x extends v.Component{constructor(e){super(e);this.slot=(e,t)=>{if(this.props.shouldUpdate&&!this.props.shouldUpdate(e,t)){return}this.setState({value:[e,t]})};this.state={value:[this.props.initialSender,this.props.initialArgs]}}componentDidMount(){this.props.signal.connect(this.slot)}componentWillUnmount(){this.props.signal.disconnect(this.slot)}render(){return this.props.children(...this.state.value)}}class j{constructor(){this.stateChanged=new a.Signal(this);this._isDisposed=false}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;a.Signal.clearData(this)}}var k=n(42573);class B{constructor(e){this._currentChanged=new a.Signal(this);this._isDisposed=false;this._widgetAdded=new a.Signal(this);this._widgetUpdated=new a.Signal(this);const t=this._focusTracker=new l.FocusTracker;const n=this._pool=new k.RestorablePool(e);this.namespace=e.namespace;t.currentChanged.connect(((e,t)=>{if(t.newValue!==this.currentWidget){n.current=t.newValue}}),this);n.added.connect(((e,t)=>{this._widgetAdded.emit(t)}),this);n.currentChanged.connect(((e,r)=>{if(r===null&&t.currentWidget){n.current=t.currentWidget;return}this.onCurrentChanged(r);this._currentChanged.emit(r)}),this);n.updated.connect(((e,t)=>{this._widgetUpdated.emit(t)}),this)}get currentChanged(){return this._currentChanged}get currentWidget(){return this._pool.current||null}get restored(){return this._pool.restored}get size(){return this._pool.size}get widgetAdded(){return this._widgetAdded}get widgetUpdated(){return this._widgetUpdated}async add(e){this._focusTracker.add(e);await this._pool.add(e);if(!this._focusTracker.activeWidget){this._pool.current=e}}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._pool.dispose();this._focusTracker.dispose();a.Signal.clearData(this)}find(e){return this._pool.find(e)}forEach(e){return this._pool.forEach(e)}filter(e){return this._pool.filter(e)}inject(e){return this._pool.inject(e)}has(e){return this._pool.has(e)}async restore(e){return this._pool.restore(e)}async save(e){return this._pool.save(e)}onCurrentChanged(e){}}function S(e={}){const t=new M(e);return t.launch()}function D(e,t,n=[M.okButton({label:"Dismiss"})]){console.warn("Showing error:",t);const r=typeof t==="string"?t:t.message;const o=e+"----"+r;const i=T.errorMessagePromiseCache.get(o);if(i){return i}else{const t=S({title:e,body:r,buttons:n}).then((()=>{T.errorMessagePromiseCache.delete(o)}),(e=>{T.errorMessagePromiseCache.delete(o);throw e}));T.errorMessagePromiseCache.set(o,t);return t}}class M extends l.Widget{constructor(e={}){super();this._focusNodeSelector="";this.addClass("jp-Dialog");const t=T.handleOptions(e);const n=t.renderer;this._host=t.host;this._defaultButton=t.defaultButton;this._buttons=t.buttons;this._hasClose=t.hasClose;this._buttonNodes=(0,f.toArray)((0,f.map)(this._buttons,(e=>n.createButtonNode(e))));this._lastMouseDownInDialog=false;const r=this.layout=new l.PanelLayout;const o=new l.Panel;o.addClass("jp-Dialog-content");if(typeof e.body==="string"){o.addClass("jp-Dialog-content-small")}r.addWidget(o);this._body=t.body;const i=n.createHeader(t.title,(()=>this.reject()),e);const s=n.createBody(t.body);const a=n.createFooter(this._buttonNodes);o.addWidget(i);o.addWidget(s);o.addWidget(a);this._primary=this._buttonNodes[this._defaultButton];this._focusNodeSelector=e.focusNodeSelector;void M.tracker.add(this)}dispose(){const e=this._promise;if(e){this._promise=null;e.reject(void 0);f.ArrayExt.removeFirstOf(T.launchQueue,e.promise)}super.dispose()}launch(){if(this._promise){return this._promise.promise}const e=this._promise=new r.PromiseDelegate;const t=Promise.all(T.launchQueue);T.launchQueue.push(this._promise.promise);return t.then((()=>{if(!this._promise){return Promise.resolve({button:M.cancelButton(),value:null})}l.Widget.attach(this,this._host);return e.promise}))}resolve(e){if(!this._promise){return}if(e===undefined){e=this._defaultButton}this._resolve(this._buttons[e])}reject(){if(!this._promise){return}this._resolve(M.cancelButton())}handleEvent(e){switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMouseDown(e);break;case"click":this._evtClick(e);break;case"focus":this._evtFocus(e);break;case"contextmenu":e.preventDefault();e.stopPropagation();break;default:break}}onAfterAttach(e){var t;const n=this.node;n.addEventListener("keydown",this,true);n.addEventListener("contextmenu",this,true);n.addEventListener("click",this,true);document.addEventListener("mousedown",this,true);document.addEventListener("focus",this,true);this._first=T.findFirstFocusable(this.node);this._original=document.activeElement;if(this._focusNodeSelector){const e=this.node.querySelector(".jp-Dialog-body");const t=e===null||e===void 0?void 0:e.querySelector(this._focusNodeSelector);if(t){this._primary=t}}(t=this._primary)===null||t===void 0?void 0:t.focus()}onAfterDetach(e){const t=this.node;t.removeEventListener("keydown",this,true);t.removeEventListener("contextmenu",this,true);t.removeEventListener("click",this,true);document.removeEventListener("focus",this,true);document.removeEventListener("mousedown",this,true);this._original.focus()}onCloseRequest(e){if(this._promise){this.reject()}super.onCloseRequest(e)}_evtClick(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0];if(!t.contains(e.target)){e.stopPropagation();e.preventDefault();if(this._hasClose&&!this._lastMouseDownInDialog){this.reject()}return}for(const n of this._buttonNodes){if(n.contains(e.target)){const e=this._buttonNodes.indexOf(n);this.resolve(e)}}}_evtKeydown(e){switch(e.keyCode){case 27:e.stopPropagation();e.preventDefault();if(this._hasClose){this.reject()}break;case 37:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)-1;if(n<0){n=this._buttonNodes.length-1}const r=this._buttonNodes[n];e.stopPropagation();e.preventDefault();r.focus()}break}case 39:{const t=document.activeElement;if(t instanceof HTMLButtonElement){let n=this._buttonNodes.indexOf(t)+1;if(n==this._buttons.length){n=0}const r=this._buttonNodes[n];e.stopPropagation();e.preventDefault();r.focus()}break}case 9:{const t=this._buttonNodes[this._buttons.length-1];if(document.activeElement===t&&!e.shiftKey){e.stopPropagation();e.preventDefault();this._first.focus()}break}case 13:{e.stopPropagation();e.preventDefault();const t=document.activeElement;let n;if(t instanceof HTMLButtonElement){n=this._buttonNodes.indexOf(t)}this.resolve(n);break}default:break}}_evtFocus(e){var t;const n=e.target;if(!this.node.contains(n)){e.stopPropagation();(t=this._buttonNodes[this._defaultButton])===null||t===void 0?void 0:t.focus()}}_evtMouseDown(e){const t=this.node.getElementsByClassName("jp-Dialog-content")[0];const n=e.target;this._lastMouseDownInDialog=t.contains(n)}_resolve(e){const t=this._promise;if(!t){this.dispose();return}this._promise=null;f.ArrayExt.removeFirstOf(T.launchQueue,t.promise);const n=this._body;let r=null;if(e.accept&&n instanceof l.Widget&&typeof n.getValue==="function"){r=n.getValue()}this.dispose();t.resolve({button:e,value:r})}}(function(e){function t(e){e.accept=e.accept!==false;const t=e.accept?"OK":"Cancel";return{label:e.label||t,iconClass:e.iconClass||"",iconLabel:e.iconLabel||"",caption:e.caption||"",className:e.className||"",accept:e.accept,actions:e.actions||[],displayType:e.displayType||"default"}}e.createButton=t;function n(e={}){e.accept=false;return t(e)}e.cancelButton=n;function r(e={}){e.accept=true;return t(e)}e.okButton=r;function o(e={}){e.displayType="warn";return t(e)}e.warnButton=o;function i(){e.tracker.forEach((e=>{e.dispose()}))}e.flush=i;class a{createHeader(e,t=(()=>{}),n={}){let r;const o=e=>{if(e.button===0){e.preventDefault();t()}};const i=e=>{const{key:n}=e;if(n==="Enter"||n===" "){t()}};if(typeof e==="string"){r=E.create(v.createElement(v.Fragment,null,e,n.hasClose&&v.createElement(s.Button,{className:"jp-Dialog-close-button",onMouseDown:o,onKeyDown:i,title:"Cancel",minimal:true},v.createElement(s.LabIcon.resolveReact,{icon:s.closeIcon,iconClass:"jp-Icon",className:"jp-ToolbarButtonComponent-icon",tag:"span"}))))}else{r=E.create(e)}r.addClass("jp-Dialog-header");b.styleNode(r.node);return r}createBody(e){let t;if(typeof e==="string"){t=new l.Widget({node:document.createElement("span")});t.node.textContent=e}else if(e instanceof l.Widget){t=e}else{t=E.create(e);A.MessageLoop.sendMessage(t,l.Widget.Msg.UpdateRequest)}t.addClass("jp-Dialog-body");b.styleNode(t.node);return t}createFooter(e){const t=new l.Widget;t.addClass("jp-Dialog-footer");(0,f.each)(e,(e=>{t.node.appendChild(e)}));b.styleNode(t.node);return t}createButtonNode(e){const t=document.createElement("button");t.className=this.createItemClass(e);t.appendChild(this.renderIcon(e));t.appendChild(this.renderLabel(e));return t}createItemClass(e){let t="jp-Dialog-button";if(e.accept){t+=" jp-mod-accept"}else{t+=" jp-mod-reject"}if(e.displayType==="warn"){t+=" jp-mod-warn"}const n=e.className;if(n){t+=` ${n}`}return t}renderIcon(e){const t=document.createElement("div");t.className=this.createIconClass(e);t.appendChild(document.createTextNode(e.iconLabel));return t}createIconClass(e){const t="jp-Dialog-buttonIcon";const n=e.iconClass;return n?`${t} ${n}`:t}renderLabel(e){const t=document.createElement("div");t.className="jp-Dialog-buttonLabel";t.title=e.caption;t.appendChild(document.createTextNode(e.label));return t}}e.Renderer=a;e.defaultRenderer=new a;e.tracker=new B({namespace:"@jupyterlab/apputils:Dialog"})})(M||(M={}));var T;(function(e){e.launchQueue=[];e.errorMessagePromiseCache=new Map;function t(e={}){var t,n,r,o,i,s,a,l;const c=(t=e.buttons)!==null&&t!==void 0?t:[M.cancelButton(),M.okButton()];return{title:(n=e.title)!==null&&n!==void 0?n:"",body:(r=e.body)!==null&&r!==void 0?r:"",host:(o=e.host)!==null&&o!==void 0?o:document.body,buttons:c,defaultButton:(i=e.defaultButton)!==null&&i!==void 0?i:c.length-1,renderer:(s=e.renderer)!==null&&s!==void 0?s:M.defaultRenderer,focusNodeSelector:(a=e.focusNodeSelector)!==null&&a!==void 0?a:"",hasClose:(l=e.hasClose)!==null&&l!==void 0?l:true}}e.handleOptions=t;function n(e){const t=["input","select","a[href]","textarea","button","[tabindex]"].join(",");return e.querySelectorAll(t)[0]}e.findFirstFocusable=n})(T||(T={}));var I=n(45187);var P;(function(e){function t(e,t,n){return f.ArrayExt.findFirstIndex(e,(e=>I.ElementExt.hitTest(e,t,n)))}e.hitTestNodes=t;function n(e,t){return e.querySelector(`.${t}`)}e.findElement=n;function o(e,t){return e.getElementsByClassName(t)}e.findElements=o;function i(){return`id-${r.UUID.uuid4()}`}e.createDomID=i})(P||(P={}));const R="jp-HoverBox";const L="jp-mod-outofview";var O;(function(e){function t(e){const{anchor:t,host:n,node:r,privilege:o}=e;r.classList.add(R);r.classList.add(L);if(!n.contains(document.elementFromPoint(t.left,t.top))){return}r.style.maxHeight="";r.style.marginTop="";r.classList.remove(L);const i=e.style||window.getComputedStyle(r);const s=window.innerHeight;const a=t.top;const l=s-t.bottom;const c=parseInt(i.marginTop,10)||0;const d=parseInt(i.minHeight,10)||e.minHeight;let u=parseInt(i.maxHeight,10)||e.maxHeight;const h=o==="forceAbove"?false:o==="forceBelow"?true:o==="above"?a<u&&a<l:l>=u||l>=a;if(h){u=Math.min(l-c,u)}else{u=Math.min(a,u);r.style.marginTop="0px"}r.style.maxHeight=`${u}px`;const p=u>d&&(l>=d||a>=d);if(!p){r.classList.add(L);return}const m=e.offset&&e.offset.vertical&&e.offset.vertical.above||0;const g=e.offset&&e.offset.vertical&&e.offset.vertical.below||0;const f=h?s-l+g:a-r.getBoundingClientRect().height+m;r.style.top=`${Math.floor(f)}px`;const A=e.offset&&e.offset.horizontal||0;let v=t.left+A;r.style.left=`${Math.ceil(v)}px`;r.style.width="auto";if(r.scrollHeight>=u){r.style.width=`${2*r.offsetWidth-r.clientWidth}`;r.scrollTop=0}const C=r.getBoundingClientRect().right;if(C>window.innerWidth){v-=C-window.innerWidth;r.style.left=`${Math.ceil(v)}px`}}e.setGeometry=t})(O||(O={}));class z extends l.Widget{constructor(e={}){super({node:N.createNode()});this._sandbox=[];this.addClass("jp-IFrame");this.sandbox=e.sandbox||[];this.referrerPolicy=e.referrerPolicy||"no-referrer"}get referrerPolicy(){return this._referrerPolicy}set referrerPolicy(e){if(this._referrerPolicy===e){return}this._referrerPolicy=e;const t=this.node.querySelector("iframe");t.setAttribute("referrerpolicy",e)}get sandbox(){return this._sandbox.slice()}set sandbox(e){this._sandbox=e.slice();const t=this.node.querySelector("iframe");const n=e.length?e.join(" "):"";t.setAttribute("sandbox",n)}get url(){return this.node.querySelector("iframe").getAttribute("src")||""}set url(e){this.node.querySelector("iframe").setAttribute("src",e)}}var N;(function(e){function t(){const e=document.createElement("div");const t=document.createElement("iframe");t.setAttribute("sandbox","");t.style.height="100%";t.style.width="100%";e.appendChild(t);return e}e.createNode=t})(N||(N={}));const F="jp-Input-Dialog";const H="jp-Input-Boolean-Dialog";var W;(function(e){function t(e){return S(Object.assign(Object.assign({},e),{body:new q(e),buttons:[M.cancelButton({label:e.cancelLabel}),M.okButton({label:e.okLabel})],focusNodeSelector:"input"}))}e.getBoolean=t;function n(e){return S(Object.assign(Object.assign({},e),{body:new U(e),buttons:[M.cancelButton({label:e.cancelLabel}),M.okButton({label:e.okLabel})],focusNodeSelector:"input"}))}e.getNumber=n;function r(e){return S(Object.assign(Object.assign({},e),{body:new Y(e),buttons:[M.cancelButton({label:e.cancelLabel}),M.okButton({label:e.okLabel})],focusNodeSelector:e.editable?"input":"select"}))}e.getItem=r;function o(e){return S(Object.assign(Object.assign({},e),{body:new $(e),buttons:[M.cancelButton({label:e.cancelLabel}),M.okButton({label:e.okLabel})],focusNodeSelector:"input"}))}e.getText=o;function i(e){return S(Object.assign(Object.assign({},e),{body:new K(e),buttons:[M.cancelButton({label:e.cancelLabel}),M.okButton({label:e.okLabel})],focusNodeSelector:"input"}))}e.getPassword=i})(W||(W={}));class V extends l.Widget{constructor(e){super();this.addClass(F);this._input=document.createElement("input");this._input.classList.add("jp-mod-styled");this._input.id="jp-dialog-input-id";if(e!==undefined){const t=document.createElement("label");t.textContent=e;t.htmlFor=this._input.id;this.node.appendChild(t)}this.node.appendChild(this._input)}}class q extends V{constructor(e){super(e.label);this.addClass(H);this._input.type="checkbox";this._input.checked=e.value?true:false}getValue(){return this._input.checked}}class U extends V{constructor(e){super(e.label);this._input.type="number";this._input.value=e.value?e.value.toString():"0"}getValue(){if(this._input.value){return Number(this._input.value)}else{return Number.NaN}}}class $ extends V{constructor(e){super(e.label);this._input.type="text";this._input.value=e.text?e.text:"";if(e.placeholder){this._input.placeholder=e.placeholder}}getValue(){return this._input.value}}class K extends V{constructor(e){super(e.label);this._input.type="password";this._input.value=e.text?e.text:"";if(e.placeholder){this._input.placeholder=e.placeholder}}getValue(){return this._input.value}}class Y extends V{constructor(e){super(e.label);this._editable=e.editable||false;let t=e.current||0;let n;if(typeof t==="number"){n=Math.max(0,Math.min(t,e.items.length-1));t=""}this._list=document.createElement("select");e.items.forEach(((e,r)=>{const o=document.createElement("option");if(r===n){o.selected=true;t=e}o.value=e;o.textContent=e;this._list.appendChild(o)}));if(e.editable){const n=document.createElement("datalist");n.id="input-dialog-items";n.appendChild(this._list);this._input.type="list";this._input.value=t;this._input.setAttribute("list",n.id);if(e.placeholder){this._input.placeholder=e.placeholder}this.node.appendChild(n)}else{this._input.remove();this.node.appendChild(b.wrapSelect(this._list))}}getValue(){if(this._editable){return this._input.value}else{return this._list.value}}}var G=n(59768);var Z=n(22248);var J;(function(e){e.symbol=Symbol("printable");function t(t){if(typeof t!=="object"||!t){return false}return e.symbol in t}e.isPrintable=t;function n(n){if(t(n)){return n[e.symbol]()}return null}e.getPrintFunction=n;function r(e){return i(e.node)}e.printWidget=r;async function o(e){const t=Z.ServerConnection.makeSettings();const n=await(await Z.ServerConnection.makeRequest(e,{},t)).text();return i(n)}e.printURL=o;async function i(e){const t=typeof e==="string";const n=s();const r=window.document.body;r.appendChild(n);if(t){n.srcdoc=e;await l(n)}else{n.src="about:blank";await l(n);a(n,e)}const o=c();d(n.contentWindow);await o;r.removeChild(n)}function s(){const e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-modals allow-same-origin");const t="visibility:hidden;width:0;height:0;position:absolute;z-index:-9999;bottom:0;";e.setAttribute("style",t);e.setAttribute("width","0");e.setAttribute("height","0");return e}function a(e,t){e.contentDocument.body.appendChild(t.cloneNode(true));e.contentDocument.close()}function l(e){return new Promise((t=>{e.onload=()=>t()}))}function c(){return new Promise((e=>{const t=()=>{document.removeEventListener("mousemove",t,true);document.removeEventListener("mousedown",t,true);document.removeEventListener("keydown",t,true);e()};document.addEventListener("mousemove",t,true);document.addEventListener("mousedown",t,true);document.addEventListener("keydown",t,true)}))}function d(e){const t=e.document.execCommand("print",false);if(!t){e.print()}}})(J||(J={}));class X extends l.Widget{constructor(){super();this.addClass("jp-Spinner");this.node.tabIndex=-1;const e=document.createElement("div");e.className="jp-SpinnerContent";this.node.appendChild(e)}onActivateRequest(e){this.node.focus()}}var Q=n(47220);var ee=n(63577);var te=n(69442);class ne{constructor(e){var t,n,o,i;this._path="";this._name="";this._type="";this._prevKernelName="";this._isDisposed=false;this._disposed=new a.Signal(this);this._session=null;this._ready=new r.PromiseDelegate;this._initializing=false;this._initStarted=new r.PromiseDelegate;this._initPromise=new r.PromiseDelegate;this._isReady=false;this._isTerminating=false;this._isRestarting=false;this._kernelChanged=new a.Signal(this);this._sessionChanged=new a.Signal(this);this._statusChanged=new a.Signal(this);this._connectionStatusChanged=new a.Signal(this);this._pendingInput=false;this._iopubMessage=new a.Signal(this);this._unhandledMessage=new a.Signal(this);this._propertyChanged=new a.Signal(this);this._dialog=null;this._busyDisposable=null;this._pendingKernelName="";this._pendingSessionRequest="";this.sessionManager=e.sessionManager;this.specsManager=e.specsManager;this.translator=e.translator||G.nullTranslator;this._trans=this.translator.load("jupyterlab");this._path=(t=e.path)!==null&&t!==void 0?t:r.UUID.uuid4();this._type=(n=e.type)!==null&&n!==void 0?n:"";this._name=(o=e.name)!==null&&o!==void 0?o:"";this._setBusy=e.setBusy;this._kernelPreference=(i=e.kernelPreference)!==null&&i!==void 0?i:{}}get session(){var e;return(e=this._session)!==null&&e!==void 0?e:null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){this._kernelPreference=e}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){var e,t,n,r,o,i,s,a,l,c;const d=(e=this.session)===null||e===void 0?void 0:e.kernel;if(this._pendingKernelName===this.noKernelName){return this.noKernelName}if(!d&&!this.isReady&&this.kernelPreference.canStart!==false&&this.kernelPreference.shouldStart!==false){let e=this._pendingKernelName||ne.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:this.kernelPreference})||"";if(e){e=(r=(n=(t=this.specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[e])===null||n===void 0?void 0:n.display_name)!==null&&r!==void 0?r:e;return e}return this.noKernelName}if(this._pendingKernelName){return(s=(i=(o=this.specsManager.specs)===null||o===void 0?void 0:o.kernelspecs[this._pendingKernelName])===null||i===void 0?void 0:i.display_name)!==null&&s!==void 0?s:this._pendingKernelName}if(!d){return this.noKernelName}return(c=(l=(a=this.specsManager.specs)===null||a===void 0?void 0:a.kernelspecs[d.name])===null||l===void 0?void 0:l.display_name)!==null&&c!==void 0?c:d.name}get kernelDisplayStatus(){var e,t;const n=(e=this.session)===null||e===void 0?void 0:e.kernel;if(this._isTerminating){return"terminating"}if(this._isRestarting){return"restarting"}if(this._pendingKernelName===this.noKernelName){return"unknown"}if(!n&&this._pendingKernelName){return"initializing"}if(!n&&!this.isReady&&this.kernelPreference.canStart!==false&&this.kernelPreference.shouldStart!==false){return"initializing"}return(t=(n===null||n===void 0?void 0:n.connectionStatus)==="connected"?n===null||n===void 0?void 0:n.status:n===null||n===void 0?void 0:n.connectionStatus)!==null&&t!==void 0?t:"unknown"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();if(this._session){if(this.kernelPreference.shutdownOnDispose){this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)}))}this._session.dispose();this._session=null}if(this._dialog){this._dialog.dispose()}if(this._busyDisposable){this._busyDisposable.dispose();this._busyDisposable=null}a.Signal.clearData(this)}async restartKernel(){var e,t,n,r,o,i;const s=((e=this.session)===null||e===void 0?void 0:e.kernel)||null;if(this._isRestarting){return}this._isRestarting=true;this._isReady=false;this._statusChanged.emit("restarting");try{await((n=(t=this.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.restart());this._isReady=true}catch(a){console.error(a)}this._isRestarting=false;this._statusChanged.emit(((o=(r=this.session)===null||r===void 0?void 0:r.kernel)===null||o===void 0?void 0:o.status)||"unknown");this._kernelChanged.emit({name:"kernel",oldValue:s,newValue:((i=this.session)===null||i===void 0?void 0:i.kernel)||null})}async changeKernel(e={}){if(this.isDisposed){throw new Error("Disposed")}await this._initStarted.promise;return this._changeKernel(e)}async shutdown(){if(this.isDisposed||!this._initializing){return}await this._initStarted.promise;this._pendingSessionRequest="";this._pendingKernelName=this.noKernelName;return this._shutdownSession()}async initialize(){if(this._initializing){return this._initPromise.promise}this._initializing=true;const e=await this._initialize();if(!e){this._isReady=true;this._ready.resolve(undefined)}if(!this._pendingSessionRequest){this._initStarted.resolve(void 0)}this._initPromise.resolve(e);return e}async _initialize(){const e=this.sessionManager;await e.ready;await e.refreshRunning();const t=(0,f.find)(e.running(),(e=>e.path===this._path));if(t){try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(n){void this._handleSessionError(n);return Promise.reject(n)}}return await this._startIfNecessary()}async _shutdownSession(){var e;const t=this._session;const n=this._isTerminating;const r=this._isReady;this._isTerminating=true;this._isReady=false;this._statusChanged.emit("terminating");try{await(t===null||t===void 0?void 0:t.shutdown());this._isTerminating=false;t===null||t===void 0?void 0:t.dispose();this._session=null;const e=(t===null||t===void 0?void 0:t.kernel)||null;this._statusChanged.emit("unknown");this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:null});this._sessionChanged.emit({name:"session",oldValue:t,newValue:null})}catch(o){this._isTerminating=n;this._isReady=r;const i=(e=t===null||t===void 0?void 0:t.kernel)===null||e===void 0?void 0:e.status;if(i===undefined){this._statusChanged.emit("unknown")}else{this._statusChanged.emit(i)}throw o}return}async _startIfNecessary(){var e;const t=this.kernelPreference;if(this.isDisposed||((e=this.session)===null||e===void 0?void 0:e.kernel)||t.shouldStart===false||t.canStart===false){return false}let n;if(t.id){n={id:t.id}}else{const e=ne.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:t});if(e){n={name:e}}}if(n){try{await this._changeKernel(n);return false}catch(r){}}return true}async _changeKernel(e={},t=false){if(e.name){this._pendingKernelName=e.name}if(!this._session){this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null})}if(!this._pendingSessionRequest){this._initStarted.resolve(void 0)}if(this._session&&!this._isTerminating){try{await this._session.changeKernel(e);return this._session.kernel}catch(i){void this._handleSessionError(i);throw i}}const n=te.PathExt.dirname(this._path);const o=this._pendingSessionRequest=te.PathExt.join(n,r.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:o,type:this._type,name:this._name,kernel:e});if(this._pendingSessionRequest!==t.path){await t.shutdown();t.dispose();return null}await t.setPath(this._path);await t.setName(this._name);if(this._session&&!this._isTerminating){await this._shutdownSession()}return this._handleNewSession(t)}catch(i){void this._handleSessionError(i);throw i}}_handleNewSession(e){var t,n,r;if(this.isDisposed){throw Error("Disposed")}if(!this._isReady){this._isReady=true;this._ready.resolve(undefined)}if(this._session){this._session.dispose()}this._session=e;this._pendingKernelName="";if(e){this._prevKernelName=(n=(t=e.kernel)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:"";e.disposed.connect(this._onSessionDisposed,this);e.propertyChanged.connect(this._onPropertyChanged,this);e.kernelChanged.connect(this._onKernelChanged,this);e.statusChanged.connect(this._onStatusChanged,this);e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this);e.pendingInput.connect(this._onPendingInput,this);e.iopubMessage.connect(this._onIopubMessage,this);e.unhandledMessage.connect(this._onUnhandledMessage,this);if(e.path!==this._path){this._onPropertyChanged(e,"path")}if(e.name!==this._name){this._onPropertyChanged(e,"name")}if(e.type!==this._type){this._onPropertyChanged(e,"type")}}this._sessionChanged.emit({name:"session",oldValue:null,newValue:e});this._kernelChanged.emit({oldValue:null,newValue:(e===null||e===void 0?void 0:e.kernel)||null,name:"kernel"});this._statusChanged.emit(((r=e===null||e===void 0?void 0:e.kernel)===null||r===void 0?void 0:r.status)||"unknown");return(e===null||e===void 0?void 0:e.kernel)||null}async _handleSessionError(e){this._handleNewSession(null);let t="";let n="";try{t=e.traceback;n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=v.createElement("div",null,e&&v.createElement("pre",null,e),t&&v.createElement("details",{className:"jp-mod-wide"},v.createElement("pre",null,t)));const r=this._dialog=new M({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[M.okButton()]});await r.launch();this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){var n;if(t==="dead"){const t=(n=e.kernel)===null||n===void 0?void 0:n.model;if(t===null||t===void 0?void 0:t.reason){const e=t.traceback||"";void this._displayKernelError(t.reason,e)}}if(this._setBusy){if(t==="busy"){if(!this._busyDisposable){this._busyDisposable=this._setBusy()}}else{if(this._busyDisposable){this._busyDisposable.dispose();this._busyDisposable=null}}}this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){if(t.header.msg_type==="shutdown_reply"){this.session.kernel.removeInputGuard()}this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}(function(e){function t(e){return oe.getDefaultKernel(e)}e.getDefaultKernel=t})(ne||(ne={}));const re={async selectKernel(e,t){if(e.isDisposed){return Promise.resolve()}t=t||G.nullTranslator;const n=t.load("jupyterlab");let r=n.__("Cancel");if(e.hasNoKernel){r=e.kernelDisplayName}const o=[M.cancelButton({label:r}),M.okButton({label:n.__("Select")})];const i=new M({title:n.__("Select Kernel"),body:new oe.KernelSelector(e,t),buttons:o});const s=await i.launch();if(e.isDisposed||!s.button.accept){return}const a=s.value;if(a===null&&!e.hasNoKernel){return e.shutdown()}if(a){await e.changeKernel(a)}},async restart(e,t){var n;t=t||G.nullTranslator;const r=t.load("jupyterlab");await e.initialize();if(e.isDisposed){throw new Error("session already disposed")}const o=(n=e.session)===null||n===void 0?void 0:n.kernel;if(!o&&e.prevKernelName){await e.changeKernel({name:e.prevKernelName});return true}if(!o){throw new Error("No kernel to restart")}const i=M.warnButton({label:"Restart"});const s=await S({title:r.__("Restart Kernel?"),body:r.__("Do you want to restart the current kernel? All variables will be lost."),buttons:[M.cancelButton(),i]});if(o.isDisposed){return false}if(s.button.accept){await e.restartKernel();return true}return false}};var oe;(function(e){class t extends l.Widget{constructor(e,t){super({node:n(e,t)})}getValue(){const e=this.node.querySelector("select");return JSON.parse(e.value)}}e.KernelSelector=t;function n(e,t){t=t||G.nullTranslator;const n=t.load("jupyterlab");const r=document.createElement("div");const s=document.createElement("label");s.textContent=`${n.__("Select kernel for:")} "${e.name}"`;r.appendChild(s);const a=i(e);const l=document.createElement("select");o(l,a,t,!e.hasNoKernel?e.kernelDisplayName:null);r.appendChild(l);return r}function r(e){var t;const{specs:n,preference:r}=e;const{name:o,language:i,shouldStart:s,canStart:a,autoStartDefault:l}=r;if(!n||s===false||a===false){return null}const c=l?n.default:null;if(!o&&!i){return c}for(const u in n.kernelspecs){if(u===o){return o}}if(!i){return c}const d=[];for(const u in n.kernelspecs){const e=(t=n.kernelspecs[u])===null||t===void 0?void 0:t.language;if(i===e){d.push(u)}}if(d.length===1){const e=d[0];console.warn("No exact match found for "+e+", using kernel "+e+" that matches "+"language="+i);return e}return c}e.getDefaultKernel=r;function o(e,t,n,r=null){while(e.firstChild){e.removeChild(e.firstChild)}const{preference:o,sessions:i,specs:l}=t;const{name:d,id:u,language:h,canStart:p,shouldStart:m}=o;n=n||G.nullTranslator;const g=n.load("jupyterlab");if(!l||p===false){e.appendChild(a(n));e.value="null";e.disabled=true;return}e.disabled=false;const A=Object.create(null);const v=Object.create(null);for(const s in l.kernelspecs){const e=l.kernelspecs[s];A[s]=e.display_name;v[s]=e.language}const C=[];if(d&&d in l.kernelspecs){C.push(d)}if(h){for(const e in l.kernelspecs){if(d!==e&&v[e]===h){C.push(e)}}}if(!C.length){C.push(l.default)}const b=document.createElement("optgroup");b.label=g.__("Start Preferred Kernel");C.sort(((e,t)=>A[e].localeCompare(A[t])));for(const a of C){b.appendChild(s(a,A[a]))}if(b.firstChild){e.appendChild(b)}e.appendChild(a());const _=document.createElement("optgroup");_.label=g.__("Start Other Kernel");const y=[];for(const s in l.kernelspecs){if(C.indexOf(s)!==-1){continue}y.push(s)}y.sort(((e,t)=>A[e].localeCompare(A[t])));for(const a of y){_.appendChild(s(a,A[a]))}if(y.length){e.appendChild(_)}if(m===false){e.value="null"}else{let t=0;if(r){t=[...e.options].findIndex((e=>e.text===r));t=Math.max(t,0)}e.selectedIndex=t}if(!i){return}const E=[];const w=[];(0,f.each)(i,(e=>{var t;if(h&&e.kernel&&v[e.kernel.name]===h&&e.kernel.id!==u){E.push(e)}else if(((t=e.kernel)===null||t===void 0?void 0:t.id)!==u){w.push(e)}}));const x=document.createElement("optgroup");x.label=g.__("Use Kernel from Preferred Session");e.appendChild(x);if(E.length){E.sort(((e,t)=>e.path.localeCompare(t.path)));(0,f.each)(E,(e=>{const t=e.kernel?A[e.kernel.name]:"";x.appendChild(c(e,t,n))}))}const j=document.createElement("optgroup");j.label=g.__("Use Kernel from Other Session");e.appendChild(j);if(w.length){w.sort(((e,t)=>e.path.localeCompare(t.path)));(0,f.each)(w,(e=>{const t=e.kernel?A[e.kernel.name]||e.kernel.name:"";j.appendChild(c(e,t,n))}))}}e.populateKernelSelect=o;function i(e){return{specs:e.specsManager.specs,sessions:e.sessionManager.running(),preference:e.kernelPreference}}function s(e,t){const n=document.createElement("option");n.text=t;n.value=JSON.stringify({name:e});return n}function a(e){e=e||G.nullTranslator;const t=e.load("jupyterlab");const n=document.createElement("optgroup");n.label=t.__("Use No Kernel");const r=document.createElement("option");r.text=t.__("No Kernel");r.value="null";n.appendChild(r);return n}function c(e,t,n){var r,o;n=n||G.nullTranslator;const i=n.load("jupyterlab");const s=document.createElement("option");const a=e.name||te.PathExt.basename(e.path);s.text=a;s.value=JSON.stringify({id:(r=e.kernel)===null||r===void 0?void 0:r.id});s.title=`${i.__("Path:")} ${e.path}\n`+`${i.__("Name:")} ${a}\n`+`${i.__("Kernel Name:")} ${t}\n`+`${i.__("Kernel Id:")} ${(o=e.kernel)===null||o===void 0?void 0:o.id}`;return s}})(oe||(oe={}));function ie(e){e=e||G.nullTranslator;const t=e.load("jupyterlab");const n={unknown:t.__("Unknown"),starting:t.__("Starting"),idle:t.__("Idle"),busy:t.__("Busy"),terminating:t.__("Terminating"),restarting:t.__("Restarting"),autorestarting:t.__("Autorestarting"),dead:t.__("Dead"),connected:t.__("Connected"),connecting:t.__("Connecting"),disconnected:t.__("Disconnected"),initializing:t.__("Initializing"),"":""};return n}var se=n(6625);const ae="jp-Toolbar";const le="toolbar-popup-opener";const ce="jp-Toolbar-item";const de="jp-Toolbar-kernelName";const ue="jp-Toolbar-spacer";const he="jp-Toolbar-kernelStatus";class pe extends l.PanelLayout{constructor(){super(...arguments);this._dirty=false}onFitRequest(e){super.onFitRequest(e);if(this.parent.isAttached){if((0,f.some)(this.widgets,(e=>!e.isHidden))){this.parent.node.style.minHeight="var(--jp-private-toolbar-height)";this.parent.removeClass("jp-Toolbar-micro")}else{this.parent.node.style.minHeight="";this.parent.addClass("jp-Toolbar-micro")}}this._dirty=true;if(this.parent.parent){A.MessageLoop.sendMessage(this.parent.parent,l.Widget.Msg.FitRequest)}if(this._dirty){A.MessageLoop.sendMessage(this.parent,l.Widget.Msg.UpdateRequest)}}onUpdateRequest(e){super.onUpdateRequest(e);if(this.parent.isVisible){this._dirty=false}}onChildShown(e){super.onChildShown(e);this.parent.fit()}onChildHidden(e){super.onChildHidden(e);this.parent.fit()}onBeforeAttach(e){super.onBeforeAttach(e);this.parent.fit()}attachWidget(e,t){super.attachWidget(e,t);this.parent.fit()}detachWidget(e,t){super.detachWidget(e,t);this.parent.fit()}}class me extends l.Widget{constructor(e={}){var t;super();this.addClass(ae);this.layout=(t=e.layout)!==null&&t!==void 0?t:new pe}names(){const e=this.layout;return(0,f.map)(e.widgets,(e=>we.nameProperty.get(e)))}addItem(e,t){const n=this.layout;return this.insertItem(n.widgets.length,e,t)}insertItem(e,t,n){const r=(0,f.find)(this.names(),(e=>e===t));if(r){return false}n.addClass(ce);const o=this.layout;const i=Math.max(0,Math.min(e,o.widgets.length));o.insertWidget(i,n);we.nameProperty.set(n,t);return true}insertAfter(e,t,n){return this._insertRelative(e,1,t,n)}insertBefore(e,t,n){return this._insertRelative(e,0,t,n)}_insertRelative(e,t,n,r){const o=(0,f.map)(this.names(),((e,t)=>({name:e,index:t})));const i=(0,f.find)(o,(t=>t.name===e));if(i){return this.insertItem(i.index+t,n,r)}return false}handleEvent(e){switch(e.type){case"click":this.handleClick(e);break;default:break}}handleClick(e){e.stopPropagation();if(e.target instanceof HTMLLabelElement){const t=e.target.getAttribute("for");if(t&&this.node.querySelector(`#${t}`)){return}}if(this.node.contains(document.activeElement)){return}if(this.parent){this.parent.activate()}}onAfterAttach(e){this.node.addEventListener("click",this)}onBeforeDetach(e){this.node.removeEventListener("click",this)}}class ge extends me{constructor(){super();this.popupOpener=new Ee;this._widgetWidths={};this.insertItem(0,le,this.popupOpener);this.popupOpener.hide();this._resizer=new se.Throttler(this._onResize.bind(this),500)}dispose(){if(this.isDisposed){return}if(this._resizer){this._resizer.dispose()}super.dispose()}insertAfter(e,t,n){if(e===le){return false}return super.insertAfter(e,t,n)}insertItem(e,t,n){if(n instanceof Ee){return super.insertItem(e,t,n)}else{const r=Math.max(0,Math.min(e,this.layout.widgets.length-1));return super.insertItem(r,t,n)}}onBeforeHide(e){this.popupOpener.hidePopup();super.onBeforeHide(e)}onResize(e){super.onResize(e);if(e.width>0&&this._resizer){void this._resizer.invoke()}}_onResize(){if(this.parent&&this.parent.isAttached){const e=this.node.clientWidth;const t=this.popupOpener;const n=30;const r=2;const o=this.layout;let i=t.isHidden?r:r+n;let s=0;const a=[];const l=o.widgets.length-1;while(s<l){const r=o.widgets[s];this._saveWidgetWidth(r);i+=this._getWidgetWidth(r);if(a.length===0&&t.isHidden&&i+n>e){i+=n}if(i>e){a.push(r)}s++}while(a.length>0){const e=a.pop();i-=this._getWidgetWidth(e);t.addWidget(e)}if(t.widgetCount()>0){const r=[];let o=0;let s=t.widgetAt(o);const a=t.widgetCount();i+=this._getWidgetWidth(s);if(a===1&&i-n<=e){i-=n}while(i<e&&o<a){r.push(s);o++;s=t.widgetAt(o);if(s){i+=this._getWidgetWidth(s)}else{break}}while(r.length>0){const e=r.shift();this.addItem(we.nameProperty.get(e),e)}}if(t.widgetCount()>0){t.updatePopup();t.show()}else{t.hide()}}}_saveWidgetWidth(e){const t=we.nameProperty.get(e);this._widgetWidths[t]=e.hasClass(ue)?2:e.node.clientWidth}_getWidgetWidth(e){const t=we.nameProperty.get(e);return this._widgetWidths[t]}}(function(e){function t(e,t){t=t||G.nullTranslator;const n=t.load("jupyterlab");return new ve({icon:s.stopIcon,onClick:()=>{var t,n;void((n=(t=e.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.interrupt())},tooltip:n.__("Interrupt the kernel")})}e.createInterruptButton=t;function n(e,t,n){n=n||G.nullTranslator;const r=n.load("jupyterlab");return new ve({icon:s.refreshIcon,onClick:()=>{void(t!==null&&t!==void 0?t:re).restart(e,n)},tooltip:r.__("Restart the kernel")})}e.createRestartButton=n;function r(){return new we.Spacer}e.createSpacerItem=r;function o(e,t,n){const r=E.create(v.createElement(we.KernelNameComponent,{sessionContext:e,dialogs:t!==null&&t!==void 0?t:re,translator:n}));r.addClass("jp-KernelName");return r}e.createKernelNameItem=o;function i(e,t){return new we.KernelStatus(e,t)}e.createKernelStatusItem=i})(me||(me={}));function fe(e){var t,n;const r=t=>{var n;if(t.button===0){t.preventDefault();(n=e.onClick)===null||n===void 0?void 0:n.call(e)}};const o=t=>{var n;const{key:r}=t;if(r==="Enter"||r===" "){(n=e.onClick)===null||n===void 0?void 0:n.call(e)}};const i=t=>{var n;if(t.button===0){(n=e.onClick)===null||n===void 0?void 0:n.call(e)}};const a=()=>{if(e.enabled===false&&e.disabledTooltip){return e.disabledTooltip}else if(e.pressed&&e.pressedTooltip){return e.pressedTooltip}else{return e.tooltip||e.iconLabel}};return v.createElement(s.Button,Object.assign({className:e.className?e.className+" jp-ToolbarButtonComponent":"jp-ToolbarButtonComponent","aria-pressed":e.pressed,"aria-disabled":e.enabled===false},e.dataset,{disabled:e.enabled===false,onClick:((t=e.actualOnClick)!==null&&t!==void 0?t:false)?i:undefined,onMouseDown:!((n=e.actualOnClick)!==null&&n!==void 0?n:false)?r:undefined,onKeyDown:o,title:a(),minimal:true}),(e.icon||e.iconClass)&&v.createElement(s.LabIcon.resolveReact,{icon:e.pressed?e.pressedIcon:e.icon,iconClass:(0,s.classes)(e.iconClass,"jp-Icon"),className:"jp-ToolbarButtonComponent-icon",tag:"span",stylesheet:"toolbarButton"}),e.label&&v.createElement("span",{className:"jp-ToolbarButtonComponent-label"},e.label))}function Ae(e){e.addClass("jp-ToolbarButton");return e}class ve extends E{constructor(e={}){var t,n;super();this.props=e;Ae(this);this._enabled=(t=e.enabled)!==null&&t!==void 0?t:true;this._pressed=this._enabled&&((n=e.pressed)!==null&&n!==void 0?n:false);this._onClick=e.onClick}set pressed(e){if(this.enabled&&e!==this._pressed){this._pressed=e;this.update()}}get pressed(){return this._pressed}set enabled(e){if(e!=this._enabled){this._enabled=e;if(!this._enabled){this._pressed=false}this.update()}}get enabled(){return this._enabled}set onClick(e){if(e!==this._onClick){this._onClick=e;this.update()}}get onClick(){return this._onClick}render(){return v.createElement(fe,Object.assign({},this.props,{pressed:this.pressed,enabled:this.enabled,onClick:this.onClick}))}}function Ce(e){return v.createElement(x,{signal:e.commands.commandChanged,shouldUpdate:(t,n)=>n.id===e.id&&n.type==="changed"||n.type==="many-changed"},(()=>v.createElement(fe,Object.assign({},we.propsFromCommand(e)))))}function be(e){e.addClass("jp-CommandToolbarButton");return e}class _e extends E{constructor(e){super();this.props=e;be(this)}render(){return v.createElement(Ce,Object.assign({},this.props))}}class ye extends l.Widget{constructor(){super();this.width=0;this.addClass("jp-Toolbar-responsive-popup");this.layout=new l.PanelLayout;l.Widget.attach(this,document.body);this.hide()}updateWidth(e){if(e>0){this.width=e;this.node.style.width=`${e}px`}}alignTo(e){const{height:t,width:n,x:r,y:o}=e.node.getBoundingClientRect();const i=this.width;this.node.style.left=`${r+n-i+1}px`;this.node.style.top=`${o+t+1}px`}insertWidget(e,t){this.layout.insertWidget(0,t)}widgetCount(){return this.layout.widgets.length}widgetAt(e){return this.layout.widgets[e]}}class Ee extends ve{constructor(){super({icon:s.ellipsesIcon,onClick:()=>{this.handleClick()}});this.addClass("jp-Toolbar-responsive-opener");this.popup=new ye}addWidget(e){this.popup.insertWidget(0,e)}dispose(){if(this.isDisposed){return}this.popup.dispose();super.dispose()}hide(){super.hide();this.hidePopup()}hidePopup(){this.popup.hide()}updatePopup(){this.popup.updateWidth(this.parent.node.clientWidth);this.popup.alignTo(this.parent)}widgetAt(e){return this.popup.widgetAt(e)}widgetCount(){return this.popup.widgetCount()}handleClick(){this.updatePopup();this.popup.setHidden(!this.popup.isHidden)}}var we;(function(e){function t(e){var t,n;const{commands:r,id:o,args:i}=e;const s=r.iconClass(o,i);const a=r.iconLabel(o,i);const l=(t=e.icon)!==null&&t!==void 0?t:r.icon(o,i);const c=l===s?undefined:l;const d=r.label(o,i);let u=r.className(o,i);if(r.isToggled(o,i)){u+=" lm-mod-toggled"}if(!r.isVisible(o,i)){u+=" lm-mod-hidden"}let h=r.caption(o,i)||e.label||d||a;const p=r.keyBindings.find((e=>e.command===o));if(p){const e=Q.CommandRegistry.formatKeystroke(p.keys.join(" "));h=`${h} (${e})`}const m=()=>{void r.execute(o,i)};const g=r.isEnabled(o,i);return{className:u,dataset:{"data-command":e.id},icon:c,iconClass:s,tooltip:h,onClick:m,enabled:g,label:(n=e.label)!==null&&n!==void 0?n:d}}e.propsFromCommand=t;e.nameProperty=new ee.AttachedProperty({name:"name",create:()=>""});function n(){}e.noOp=n;class r extends l.Widget{constructor(){super();this.addClass(ue)}}e.Spacer=r;function o(e){const t=e.translator||G.nullTranslator;const n=t.load("jupyterlab");const r=()=>{void e.dialogs.selectKernel(e.sessionContext,t)};return v.createElement(x,{signal:e.sessionContext.kernelChanged,initialSender:e.sessionContext},(e=>v.createElement(fe,{className:de,onClick:r,tooltip:n.__("Switch kernel"),label:e===null||e===void 0?void 0:e.kernelDisplayName})))}e.KernelNameComponent=o;class i extends l.Widget{constructor(e,t){super();this.translator=t||G.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(he);this._statusNames=ie(this.translator);this._onStatusChanged(e);e.statusChanged.connect(this._onStatusChanged,this);e.connectionStatusChanged.connect(this._onStatusChanged,this)}_onStatusChanged(e){if(this.isDisposed){return}const t=e.kernelDisplayStatus;const n={container:this.node,title:this._trans.__("Kernel %1",this._statusNames[t]||t),stylesheet:"toolbarButton",alignSelf:"normal",height:"24px"};s.LabIcon.remove(this.node);if(t==="busy"||t==="starting"||t==="terminating"||t==="restarting"||t==="initializing"){s.circleIcon.element(n)}else if(t==="connecting"||t==="disconnected"||t==="unknown"){s.offlineBoltIcon.element(n)}else{s.circleEmptyIcon.element(n)}}}e.KernelStatus=i})(we||(we={}));const xe=true;class je extends l.Widget{constructor(e){super(e);this._changeGuard=false;this._spinner=new X;this._isRevealed=false;this._evtMouseDown=()=>{if(!this.node.contains(document.activeElement)){this._focusContent()}};this.addClass("jp-MainAreaWidget");this.addClass("jp-MainAreaWidget-ContainStrict");this.id=P.createDomID();const t=(e.translator||G.nullTranslator).load("jupyterlab");const n=this._content=e.content;n.node.setAttribute("role","region");n.node.setAttribute("aria-label",t.__("notebook content"));const r=this._toolbar=e.toolbar||new ge;r.node.setAttribute("role","navigation");r.node.setAttribute("aria-label",t.__("notebook actions"));const o=this._contentHeader=e.contentHeader||new l.BoxPanel({direction:"top-to-bottom",spacing:0});const i=this.layout=new l.BoxLayout({spacing:0});i.direction="top-to-bottom";l.BoxLayout.setStretch(r,0);l.BoxLayout.setStretch(o,0);l.BoxLayout.setStretch(n,1);i.addWidget(r);i.addWidget(o);i.addWidget(n);if(!n.id){n.id=P.createDomID()}n.node.tabIndex=0;this._updateTitle();n.title.changed.connect(this._updateTitle,this);this.title.closable=true;this.title.changed.connect(this._updateContentTitle,this);if(e.reveal){this.node.appendChild(this._spinner.node);this._revealed=e.reveal.then((()=>{if(n.isDisposed){this.dispose();return}n.disposed.connect((()=>this.dispose()));const e=document.activeElement===this._spinner.node;this._disposeSpinner();this._isRevealed=true;if(e){this._focusContent()}})).catch((e=>{const t=new l.Widget;t.addClass("jp-MainAreaWidget-error");const o=document.createElement("pre");o.textContent=String(e);t.node.appendChild(o);l.BoxLayout.setStretch(t,1);this._disposeSpinner();n.dispose();this._content=null;r.dispose();this._toolbar=null;i.addWidget(t);this._isRevealed=true;throw t}))}else{this._spinner.dispose();this.removeClass("jp-MainAreaWidget-ContainStrict");n.disposed.connect((()=>this.dispose()));this._isRevealed=true;this._revealed=Promise.resolve(undefined)}}[J.symbol](){if(!this._content){return null}return J.getPrintFunction(this._content)}get content(){return this._content}get toolbar(){return this._toolbar}get contentHeader(){return this._contentHeader}get isRevealed(){return this._isRevealed}get revealed(){return this._revealed}onActivateRequest(e){if(this._isRevealed){this._focusContent()}else{this._spinner.node.focus()}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("mousedown",this._evtMouseDown,xe)}onBeforeDetach(e){this.node.removeEventListener("mousedown",this._evtMouseDown,xe);super.onBeforeDetach(e)}onCloseRequest(e){this.dispose()}onUpdateRequest(e){if(this._content){A.MessageLoop.sendMessage(this._content,e)}}_disposeSpinner(){this.node.removeChild(this._spinner.node);this._spinner.dispose();this.removeClass("jp-MainAreaWidget-ContainStrict")}_updateTitle(){if(this._changeGuard||!this.content){return}this._changeGuard=true;const e=this.content;this.title.label=e.title.label;this.title.mnemonic=e.title.mnemonic;this.title.icon=e.title.icon;this.title.iconClass=e.title.iconClass;this.title.iconLabel=e.title.iconLabel;this.title.caption=e.title.caption;this.title.className=e.title.className;this.title.dataset=e.title.dataset;this._changeGuard=false}_updateContentTitle(){if(this._changeGuard||!this.content){return}this._changeGuard=true;const e=this.content;e.title.label=this.title.label;e.title.mnemonic=this.title.mnemonic;e.title.icon=this.title.icon;e.title.iconClass=this.title.iconClass;e.title.iconLabel=this.title.iconLabel;e.title.caption=this.title.caption;e.title.className=this.title.className;e.title.dataset=this.title.dataset;this._changeGuard=false}_focusContent(){if(!this.content){return}if(!this.content.node.contains(document.activeElement)){this.content.node.focus()}this.content.activate()}}var ke=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};var Be;(function(e){function t(e,t){return e.filter((e=>!e.disabled)).sort(((e,t)=>{var n,r;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((r=t.rank)!==null&&r!==void 0?r:Infinity)})).map((e=>n(e,t)))}e.createMenus=t;function n(e,t){var n,r;const o=t(e);o.id=e.id;if(!o.title.label){o.title.label=(n=e.label)!==null&&n!==void 0?n:te.Text.titleCase(o.id.trim())}if(e.icon){o.title.icon=s.LabIcon.resolve({icon:e.icon})}if(e.mnemonic!==undefined){o.title.mnemonic=e.mnemonic}(r=e.items)===null||r===void 0?void 0:r.filter((e=>!e.disabled)).sort(((e,t)=>{var n,r;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((r=t.rank)!==null&&r!==void 0?r:Infinity)})).map((e=>{i(e,o,t)}));return o}function o(e,t,r){const{submenu:o}=e,i=ke(e,["submenu"]);t.addItem(Object.assign(Object.assign({},i),{submenu:o?n(o,r):null}))}e.addContextItem=o;function i(e,t,r){const{submenu:o}=e,i=ke(e,["submenu"]);t.addItem(Object.assign(Object.assign({},i),{submenu:o?n(o,r):null}))}function a(e,t,r){const o=[];t.forEach((t=>{const i=e.find((e=>e.id===t.id));if(i){l(t,i,r)}else{if(!t.disabled){o.push(n(t,r))}}}));e.push(...o);return o}e.updateMenus=a;function l(e,t,n){var o;if(e.disabled){t.dispose()}else{(o=e.items)===null||o===void 0?void 0:o.forEach((e=>{var o,s;const a=t===null||t===void 0?void 0:t.items.find(((t,n)=>{var r,o,i;return t.type===e.type&&t.command===((r=e.command)!==null&&r!==void 0?r:"")&&((o=t.submenu)===null||o===void 0?void 0:o.id)===((i=e.submenu)===null||i===void 0?void 0:i.id)}));if(a&&e.type!=="separator"){if(e.disabled){t.removeItem(a)}else{switch((o=e.type)!==null&&o!==void 0?o:"command"){case"command":if(e.command){if(!r.JSONExt.deepEqual(a.args,(s=e.args)!==null&&s!==void 0?s:{})){i(e,t,n)}}break;case"submenu":if(e.submenu){l(e.submenu,a.submenu,n)}}}}else{i(e,t,n)}}))}}})(Be||(Be={}));var Se=n(91036);var De=n.n(Se);class Me{static reg(e){return new RegExp("^"+e+"$","i")}}Me.N={integer:`[+-]?[0-9]+`,integer_pos:`[+]?[0-9]+`,integer_zero_ff:`([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])`,number:`[+-]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?`,number_pos:`[+]?([0-9]*[.])?[0-9]+(e-?[0-9]*)?`,number_zero_hundred:`[+]?(([0-9]|[1-9][0-9])([.][0-9]+)?|100)`,number_zero_one:`[+]?(1([.][0]+)?|0?([.][0-9]+)?)`};Me.B={angle:`(${Me.N.number}(deg|rad|grad|turn)|0)`,frequency:`${Me.N.number}(Hz|kHz)`,ident:String.raw`-?([_a-z]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\xA0-\xFF]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*`,len_or_perc:`(0|${Me.N.number}(px|em|rem|ex|in|cm|mm|pt|pc|%))`,length:`(${Me.N.number}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,length_pos:`(${Me.N.number_pos}(px|em|rem|ex|in|cm|mm|pt|pc)|0)`,percentage:`${Me.N.number}%`,percentage_pos:`${Me.N.number_pos}%`,percentage_zero_hundred:`${Me.N.number_zero_hundred}%`,string:String.raw`(\"([^\n\r\f\\"]|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\")|(\'([^\n\r\f\\']|\\\n|\r\n|\r|\f|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*\')`,time:`${Me.N.number}(s|ms)`,url:`url\\(.*?\\)`,z_index:`[+-]?[0-9]{1,7}`};Me.A={absolute_size:`xx-small|x-small|small|medium|large|x-large|xx-large`,attachment:`scroll|fixed|local`,bg_origin:`border-box|padding-box|content-box`,border_style:`none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset`,box:`border-box|padding-box|content-box`,display_inside:`auto|block|table|flex|grid`,display_outside:`block-level|inline-level|none|table-row-group|table-header-group|table-footer-group|table-row|table-cell|table-column-group|table-column|table-caption`,ending_shape:`circle|ellipse`,generic_family:`serif|sans-serif|cursive|fantasy|monospace`,generic_voice:`male|female|child`,relative_size:`smaller|larger`,repeat_style:`repeat-x|repeat-y|((?:repeat|space|round|no-repeat)(?:\\s*(?:repeat|space|round|no-repeat))?)`,side_or_corner:`(left|right)?\\s*(top|bottom)?`,single_animation_direction:`normal|reverse|alternate|alternate-reverse`,single_animation_fill_mode:`none|forwards|backwards|both`,single_animation_play_state:`running|paused`};Me._COLOR={hex:`\\#(0x)?[0-9a-f]+`,name:`aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|transparent|violet|wheat|white|whitesmoke|yellow|yellowgreen`,rgb:String.raw`rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)`,rgba:String.raw`rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(${Me.N.integer_zero_ff}|${Me.N.number_zero_one}|${Me.B.percentage_zero_hundred})\s*\)`};Me._C={alpha:`${Me.N.integer_zero_ff}|${Me.N.number_zero_one}|${Me.B.percentage_zero_hundred}`,alphavalue:Me.N.number_zero_one,bg_position:`((${Me.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,bg_size:`(${Me.B.length_pos}|${Me.B.percentage}|auto){1,2}|cover|contain`,border_width:`thin|medium|thick|${Me.B.length}`,bottom:`${Me.B.length}|auto`,color:`${Me._COLOR.hex}|${Me._COLOR.rgb}|${Me._COLOR.rgba}|${Me._COLOR.name}`,color_stop_length:`(${Me.B.len_or_perc}\\s*){1,2}`,linear_color_hint:`${Me.B.len_or_perc}`,family_name:`${Me.B.string}|(${Me.B.ident}\\s*)+`,image_decl:Me.B.url,left:`${Me.B.length}|auto`,loose_quotable_words:`(${Me.B.ident})+`,margin_width:`${Me.B.len_or_perc}|auto`,padding_width:`${Me.B.length_pos}|${Me.B.percentage_pos}`,page_url:Me.B.url,position:`((${Me.B.len_or_perc}|left|center|right|top|bottom)\\s*){1,4}`,right:`${Me.B.length}|auto`,shadow:"",size:`closest-side|farthest-side|closest-corner|farthest-corner|${Me.B.length}|(${Me.B.len_or_perc})\\s+(${Me.B.len_or_perc})`,top:`${Me.B.length}|auto`};Me._C1={image_list:`image\\(\\s*(${Me.B.url})*\\s*(${Me.B.url}|${Me._C.color})\\s*\\)`,linear_color_stop:`(${Me._C.color})(\\s*${Me._C.color_stop_length})?`,shadow:`((${Me._C.color})\\s+((${Me.B.length})\\s*){2,4}(s+inset)?)|((inset\\s+)?((${Me.B.length})\\s*){2,4}\\s*(${Me._C.color})?)`};Me._C2={color_stop_list:`((${Me._C1.linear_color_stop})(\\s*(${Me._C.linear_color_hint}))?\\s*,\\s*)+(${Me._C1.linear_color_stop})`,shape:`rect\\(\\s*(${Me._C.top})\\s*,\\s*(${Me._C.right})\\s*,\\s*(${Me._C.bottom})\\s*,\\s*(${Me._C.left})\\s*\\)`};Me._C3={linear_gradient:`linear-gradient\\((((${Me.B.angle})|to\\s+(${Me.A.side_or_corner}))\\s*,\\s*)?\\s*(${Me._C2.color_stop_list})\\s*\\)`,radial_gradient:`radial-gradient\\(((((${Me.A.ending_shape})|(${Me._C.size}))\\s*)*\\s*(at\\s+${Me._C.position})?\\s*,\\s*)?\\s*(${Me._C2.color_stop_list})\\s*\\)`};Me._C4={image:`${Me.B.url}|${Me._C3.linear_gradient}|${Me._C3.radial_gradient}|${Me._C1.image_list}`,bg_image:`(${Me.B.url}|${Me._C3.linear_gradient}|${Me._C3.radial_gradient}|${Me._C1.image_list})|none`};Me.C=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Me._C),Me._C1),Me._C2),Me._C3),Me._C4);Me.AP={border_collapse:`collapse|separate`,box:`normal|none|contents`,box_sizing:`content-box|padding-box|border-box`,caption_side:`top|bottom`,clear:`none|left|right|both`,direction:`ltr|rtl`,empty_cells:`show|hide`,float:`left|right|none`,font_stretch:`normal|wider|narrower|ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded`,font_style:`normal|italic|oblique`,font_variant:`normal|small-caps`,font_weight:`normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900`,list_style_position:`inside|outside`,list_style_type:`disc|circle|square|decimal|decimal-leading-zero|lower-roman|upper-roman|lower-greek|lower-latin|upper-latin|armenian|georgian|lower-alpha|upper-alpha|none`,overflow:`visible|hidden|scroll|auto`,overflow_wrap:`normal|break-word`,overflow_x:`visible|hidden|scroll|auto|no-display|no-content`,page_break_after:`auto|always|avoid|left|right`,page_break_before:`auto|always|avoid|left|right`,page_break_inside:`avoid|auto`,position:`static|relative|absolute`,resize:`none|both|horizontal|vertical`,speak:`normal|none|spell-out`,speak_header:`once|always`,speak_numeral:`digits|continuous`,speak_punctuation:`code|none`,table_layout:`auto|fixed`,text_align:`left|right|center|justify`,text_decoration:`none|((underline|overline|line-through|blink)\\s*)+`,text_transform:`capitalize|uppercase|lowercase|none`,text_wrap:`normal|unrestricted|none|suppress`,unicode_bidi:`normal|embed|bidi-override`,visibility:`visible|hidden|collapse`,white_space:`normal|pre|nowrap|pre-wrap|pre-line`,word_break:`normal|keep-all|break-all`};Me._CP={background_attachment:`${Me.A.attachment}(,\\s*${Me.A.attachment})*`,background_color:Me.C.color,background_origin:`${Me.A.box}(,\\s*${Me.A.box})*`,background_repeat:`${Me.A.repeat_style}(,\\s*${Me.A.repeat_style})*`,border:`((${Me.C.border_width}|${Me.A.border_style}|${Me.C.color})\\s*){1,3}`,border_radius:`((${Me.B.len_or_perc})\\s*){1,4}(\\/\\s*((${Me.B.len_or_perc})\\s*){1,4})?`,border_spacing:`${Me.B.length}\\s*(${Me.B.length})?`,border_top_color:Me.C.color,border_top_style:Me.A.border_style,border_width:`((${Me.C.border_width})\\s*){1,4}`,color:Me.C.color,cursor:`(${Me.B.url}(\\s*,\\s*)?)*(auto|crosshair|default|pointer|move|e-resize|ne-resize|nw-resize|n-resize|se-resize|sw-resize|s-resize|w-resize|text|wait|help|progress|all-scroll|col-resize|hand|no-drop|not-allowed|row-resize|vertical-text)`,display:`inline|block|list-item|run-in|inline-list-item|inline-block|table|inline-table|table-cell|table-caption|flex|inline-flex|grid|inline-grid|${Me.A.display_inside}|${Me.A.display_outside}|inherit|inline-box|inline-stack`,display_outside:Me.A.display_outside,elevation:`${Me.B.angle}|below|level|above|higher|lower`,font_family:`(${Me.C.family_name}|${Me.A.generic_family})(,\\s*(${Me.C.family_name}|${Me.A.generic_family}))*`,height:`${Me.B.length}|${Me.B.percentage}|auto`,letter_spacing:`normal|${Me.B.length}`,list_style_image:`${Me.C.image}|none`,margin_right:Me.C.margin_width,max_height:`${Me.B.length_pos}|${Me.B.percentage_pos}|none|auto`,min_height:`${Me.B.length_pos}|${Me.B.percentage_pos}|auto`,opacity:Me.C.alphavalue,outline_color:`${Me.C.color}|invert`,outline_width:Me.C.border_width,padding:`((${Me.C.padding_width})\\s*){1,4}`,padding_top:Me.C.padding_width,pitch_range:Me.N.number,right:`${Me.B.length}|${Me.B.percentage}|auto`,stress:Me.N.number,text_indent:`${Me.B.length}|${Me.B.percentage}`,text_shadow:`none|${Me.C.shadow}(,\\s*(${Me.C.shadow}))*`,volume:`${Me.N.number_pos}|${Me.B.percentage_pos}|silent|x-soft|soft|medium|loud|x-loud`,word_wrap:Me.AP.overflow_wrap,zoom:`normal|${Me.N.number_pos}|${Me.B.percentage_pos}`,backface_visibility:Me.AP.visibility,background_clip:`${Me.A.box}(,\\s*(${Me.A.box}))*`,background_position:`${Me.C.bg_position}(,\\s*(${Me.C.bg_position}))*`,border_bottom_color:Me.C.color,border_bottom_style:Me.A.border_style,border_color:`((${Me.C.color})\\s*){1,4}`,border_left_color:Me.C.color,border_right_color:Me.C.color,border_style:`((${Me.A.border_style})\\s*){1,4}`,border_top_left_radius:`(${Me.B.length}|${Me.B.percentage})(\\s*(${Me.B.length}|${Me.B.percentage}))?`,border_top_width:Me.C.border_width,box_shadow:`none|${Me.C.shadow}(,\\s*(${Me.C.shadow}))*`,clip:`${Me.C.shape}|auto`,display_inside:Me.A.display_inside,font_size:`${Me.A.absolute_size}|${Me.A.relative_size}|${Me.B.length_pos}|${Me.B.percentage_pos}`,line_height:`normal|${Me.N.number_pos}|${Me.B.length_pos}|${Me.B.percentage_pos}`,margin_left:Me.C.margin_width,max_width:`${Me.B.length_pos}|${Me.B.percentage_pos}|none|auto`,outline_style:Me.A.border_style,padding_bottom:Me.C.padding_width,padding_right:Me.C.padding_width,perspective:`none|${Me.B.length}`,richness:Me.N.number,text_overflow:`((clip|ellipsis|${Me.B.string})\\s*){1,2}`,top:`${Me.B.length}|${Me.B.percentage}|auto`,width:`${Me.B.length_pos}|${Me.B.percentage_pos}|auto`,z_index:`auto|${Me.B.z_index}`,background:`(((${Me.C.bg_position}\\s*(\\/\\s*${Me.C.bg_size})?)|(${Me.A.repeat_style})|(${Me.A.attachment})|(${Me.A.bg_origin})|(${Me.C.bg_image})|(${Me.C.color}))\\s*)+`,background_size:`${Me.C.bg_size}(,\\s*${Me.C.bg_size})*`,border_bottom_left_radius:`(${Me.B.length}|${Me.B.percentage})(\\s*(${Me.B.length}|${Me.B.percentage}))?`,border_bottom_width:Me.C.border_width,border_left_style:Me.A.border_style,border_right_style:Me.A.border_style,border_top:`((${Me.C.border_width}|${Me.A.border_style}|${Me.C.color})\\s*){1,3}`,bottom:`${Me.B.len_or_perc}|auto`,list_style:`((${Me.AP.list_style_type}|${Me.AP.list_style_position}|${Me.C.image}|none})\\s*){1,3}`,margin_top:Me.C.margin_width,outline:`((${Me.C.color}|invert|${Me.A.border_style}|${Me.C.border_width})\\s*){1,3}`,overflow_y:Me.AP.overflow_x,pitch:`${Me.B.frequency}|x-low|low|medium|high|x-high`,vertical_align:`baseline|sub|super|top|text-top|middle|bottom|text-bottom|${Me.B.len_or_perc}`,word_spacing:`normal|${Me.B.length}`,background_image:`${Me.C.bg_image}(,\\s*${Me.C.bg_image})*`,border_bottom_right_radius:`(${Me.B.length}|${Me.B.percentage})(\\s*(${Me.B.length}|${Me.B.percentage}))?`,border_left_width:Me.C.border_width,border_right_width:Me.C.border_width,left:`${Me.B.len_or_perc}|auto`,margin_bottom:Me.C.margin_width,pause_after:`${Me.B.time}|${Me.B.percentage}`,speech_rate:`${Me.N.number}|x-slow|slow|medium|fast|x-fast|faster|slower`,transition_duration:`${Me.B.time}(,\\s*${Me.B.time})*`,border_bottom:`((${Me.C.border_width}|${Me.A.border_style}|${Me.C.color})\\s*){1,3}`,border_right:`((${Me.C.border_width}|${Me.A.border_style}|${Me.C.color})\\s*){1,3}`,margin:`((${Me.C.margin_width})\\s*){1,4}`,padding_left:Me.C.padding_width,border_left:`((${Me.C.border_width}|${Me.A.border_style}|${Me.C.color})\\s*){1,3}`,quotes:`(${Me.B.string}\\s*${Me.B.string})+|none`,border_top_right_radius:`(${Me.B.length}|${Me.B.percentage})(\\s*(${Me.B.length}|${Me.B.percentage}))?`,min_width:`${Me.B.length_pos}|${Me.B.percentage_pos}|auto`};Me._CP1={font:`(((((${Me.AP.font_style}|${Me.AP.font_variant}|${Me.AP.font_weight})\\s*){1,3})?\\s*(${Me._CP.font_size})\\s*(\\/\\s*(${Me._CP.line_height}))?\\s+(${Me._CP.font_family}))|caption|icon|menu|message-box|small-caption|status-bar)`};Me.CP=Object.assign(Object.assign({},Me._CP),Me._CP1);Me.BORDER_COLLAPSE=Me.reg(Me.AP.border_collapse);Me.BOX=Me.reg(Me.AP.box);Me.BOX_SIZING=Me.reg(Me.AP.box_sizing);Me.CAPTION_SIDE=Me.reg(Me.AP.caption_side);Me.CLEAR=Me.reg(Me.AP.clear);Me.DIRECTION=Me.reg(Me.AP.direction);Me.EMPTY_CELLS=Me.reg(Me.AP.empty_cells);Me.FLOAT=Me.reg(Me.AP.float);Me.FONT_STRETCH=Me.reg(Me.AP.font_stretch);Me.FONT_STYLE=Me.reg(Me.AP.font_style);Me.FONT_VARIANT=Me.reg(Me.AP.font_variant);Me.FONT_WEIGHT=Me.reg(Me.AP.font_weight);Me.LIST_STYLE_POSITION=Me.reg(Me.AP.list_style_position);Me.LIST_STYLE_TYPE=Me.reg(Me.AP.list_style_type);Me.OVERFLOW=Me.reg(Me.AP.overflow);Me.OVERFLOW_WRAP=Me.reg(Me.AP.overflow_wrap);Me.OVERFLOW_X=Me.reg(Me.AP.overflow_x);Me.PAGE_BREAK_AFTER=Me.reg(Me.AP.page_break_after);Me.PAGE_BREAK_BEFORE=Me.reg(Me.AP.page_break_before);Me.PAGE_BREAK_INSIDE=Me.reg(Me.AP.page_break_inside);Me.POSITION=Me.reg(Me.AP.position);Me.RESIZE=Me.reg(Me.AP.resize);Me.SPEAK=Me.reg(Me.AP.speak);Me.SPEAK_HEADER=Me.reg(Me.AP.speak_header);Me.SPEAK_NUMERAL=Me.reg(Me.AP.speak_numeral);Me.SPEAK_PUNCTUATION=Me.reg(Me.AP.speak_punctuation);Me.TABLE_LAYOUT=Me.reg(Me.AP.table_layout);Me.TEXT_ALIGN=Me.reg(Me.AP.text_align);Me.TEXT_DECORATION=Me.reg(Me.AP.text_decoration);Me.TEXT_TRANSFORM=Me.reg(Me.AP.text_transform);Me.TEXT_WRAP=Me.reg(Me.AP.text_wrap);Me.UNICODE_BIDI=Me.reg(Me.AP.unicode_bidi);Me.VISIBILITY=Me.reg(Me.AP.visibility);Me.WHITE_SPACE=Me.reg(Me.AP.white_space);Me.WORD_BREAK=Me.reg(Me.AP.word_break);Me.BACKGROUND_ATTACHMENT=Me.reg(Me.CP.background_attachment);Me.BACKGROUND_COLOR=Me.reg(Me.CP.background_color);Me.BACKGROUND_ORIGIN=Me.reg(Me.CP.background_origin);Me.BACKGROUND_REPEAT=Me.reg(Me.CP.background_repeat);Me.BORDER=Me.reg(Me.CP.border);Me.BORDER_RADIUS=Me.reg(Me.CP.border_radius);Me.BORDER_SPACING=Me.reg(Me.CP.border_spacing);Me.BORDER_TOP_COLOR=Me.reg(Me.CP.border_top_color);Me.BORDER_TOP_STYLE=Me.reg(Me.CP.border_top_style);Me.BORDER_WIDTH=Me.reg(Me.CP.border_width);Me.COLOR=Me.reg(Me.CP.color);Me.CURSOR=Me.reg(Me.CP.cursor);Me.DISPLAY=Me.reg(Me.CP.display);Me.DISPLAY_OUTSIDE=Me.reg(Me.CP.display_outside);Me.ELEVATION=Me.reg(Me.CP.elevation);Me.FONT_FAMILY=Me.reg(Me.CP.font_family);Me.HEIGHT=Me.reg(Me.CP.height);Me.LETTER_SPACING=Me.reg(Me.CP.letter_spacing);Me.LIST_STYLE_IMAGE=Me.reg(Me.CP.list_style_image);Me.MARGIN_RIGHT=Me.reg(Me.CP.margin_right);Me.MAX_HEIGHT=Me.reg(Me.CP.max_height);Me.MIN_HEIGHT=Me.reg(Me.CP.min_height);Me.OPACITY=Me.reg(Me.CP.opacity);Me.OUTLINE_COLOR=Me.reg(Me.CP.outline_color);Me.OUTLINE_WIDTH=Me.reg(Me.CP.outline_width);Me.PADDING=Me.reg(Me.CP.padding);Me.PADDING_TOP=Me.reg(Me.CP.padding_top);Me.PITCH_RANGE=Me.reg(Me.CP.pitch_range);Me.RIGHT=Me.reg(Me.CP.right);Me.STRESS=Me.reg(Me.CP.stress);Me.TEXT_INDENT=Me.reg(Me.CP.text_indent);Me.TEXT_SHADOW=Me.reg(Me.CP.text_shadow);Me.VOLUME=Me.reg(Me.CP.volume);Me.WORD_WRAP=Me.reg(Me.CP.word_wrap);Me.ZOOM=Me.reg(Me.CP.zoom);Me.BACKFACE_VISIBILITY=Me.reg(Me.CP.backface_visibility);Me.BACKGROUND_CLIP=Me.reg(Me.CP.background_clip);Me.BACKGROUND_POSITION=Me.reg(Me.CP.background_position);Me.BORDER_BOTTOM_COLOR=Me.reg(Me.CP.border_bottom_color);Me.BORDER_BOTTOM_STYLE=Me.reg(Me.CP.border_bottom_style);Me.BORDER_COLOR=Me.reg(Me.CP.border_color);Me.BORDER_LEFT_COLOR=Me.reg(Me.CP.border_left_color);Me.BORDER_RIGHT_COLOR=Me.reg(Me.CP.border_right_color);Me.BORDER_STYLE=Me.reg(Me.CP.border_style);Me.BORDER_TOP_LEFT_RADIUS=Me.reg(Me.CP.border_top_left_radius);Me.BORDER_TOP_WIDTH=Me.reg(Me.CP.border_top_width);Me.BOX_SHADOW=Me.reg(Me.CP.box_shadow);Me.CLIP=Me.reg(Me.CP.clip);Me.DISPLAY_INSIDE=Me.reg(Me.CP.display_inside);Me.FONT_SIZE=Me.reg(Me.CP.font_size);Me.LINE_HEIGHT=Me.reg(Me.CP.line_height);Me.MARGIN_LEFT=Me.reg(Me.CP.margin_left);Me.MAX_WIDTH=Me.reg(Me.CP.max_width);Me.OUTLINE_STYLE=Me.reg(Me.CP.outline_style);Me.PADDING_BOTTOM=Me.reg(Me.CP.padding_bottom);Me.PADDING_RIGHT=Me.reg(Me.CP.padding_right);Me.PERSPECTIVE=Me.reg(Me.CP.perspective);Me.RICHNESS=Me.reg(Me.CP.richness);Me.TEXT_OVERFLOW=Me.reg(Me.CP.text_overflow);Me.TOP=Me.reg(Me.CP.top);Me.WIDTH=Me.reg(Me.CP.width);Me.Z_INDEX=Me.reg(Me.CP.z_index);Me.BACKGROUND=Me.reg(Me.CP.background);Me.BACKGROUND_SIZE=Me.reg(Me.CP.background_size);Me.BORDER_BOTTOM_LEFT_RADIUS=Me.reg(Me.CP.border_bottom_left_radius);Me.BORDER_BOTTOM_WIDTH=Me.reg(Me.CP.border_bottom_width);Me.BORDER_LEFT_STYLE=Me.reg(Me.CP.border_left_style);Me.BORDER_RIGHT_STYLE=Me.reg(Me.CP.border_right_style);Me.BORDER_TOP=Me.reg(Me.CP.border_top);Me.BOTTOM=Me.reg(Me.CP.bottom);Me.LIST_STYLE=Me.reg(Me.CP.list_style);Me.MARGIN_TOP=Me.reg(Me.CP.margin_top);Me.OUTLINE=Me.reg(Me.CP.outline);Me.OVERFLOW_Y=Me.reg(Me.CP.overflow_y);Me.PITCH=Me.reg(Me.CP.pitch);Me.VERTICAL_ALIGN=Me.reg(Me.CP.vertical_align);Me.WORD_SPACING=Me.reg(Me.CP.word_spacing);Me.BACKGROUND_IMAGE=Me.reg(Me.CP.background_image);Me.BORDER_BOTTOM_RIGHT_RADIUS=Me.reg(Me.CP.border_bottom_right_radius);Me.BORDER_LEFT_WIDTH=Me.reg(Me.CP.border_left_width);Me.BORDER_RIGHT_WIDTH=Me.reg(Me.CP.border_right_width);Me.LEFT=Me.reg(Me.CP.left);Me.MARGIN_BOTTOM=Me.reg(Me.CP.margin_bottom);Me.PAUSE_AFTER=Me.reg(Me.CP.pause_after);Me.SPEECH_RATE=Me.reg(Me.CP.speech_rate);Me.TRANSITION_DURATION=Me.reg(Me.CP.transition_duration);Me.BORDER_BOTTOM=Me.reg(Me.CP.border_bottom);Me.BORDER_RIGHT=Me.reg(Me.CP.border_right);Me.MARGIN=Me.reg(Me.CP.margin);Me.PADDING_LEFT=Me.reg(Me.CP.padding_left);Me.BORDER_LEFT=Me.reg(Me.CP.border_left);Me.FONT=Me.reg(Me.CP.font);Me.QUOTES=Me.reg(Me.CP.quotes);Me.BORDER_TOP_RIGHT_RADIUS=Me.reg(Me.CP.border_top_right_radius);Me.MIN_WIDTH=Me.reg(Me.CP.min_width);class Te{constructor(){this._options={allowedTags:["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","colspan","command","data","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","label","legend","li","map","mark","menu","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rowspan","s","samp","section","select","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],allowedAttributes:{"*":["class","dir","draggable","hidden","id","inert","itemprop","itemref","itemscope","lang","spellcheck","style","title","translate"],a:["accesskey","coords","href","hreflang","name","rel","shape","tabindex","target","type"],area:["accesskey","alt","coords","href","nohref","shape","tabindex"],audio:["autoplay","controls","loop","mediagroup","muted","preload","src"],bdo:["dir"],blockquote:["cite"],br:["clear"],button:["accesskey","data-commandlinker-args","data-commandlinker-command","disabled","name","tabindex","type","value"],canvas:["height","width"],caption:["align"],col:["align","char","charoff","span","valign","width"],colgroup:["align","char","charoff","span","valign","width"],command:["checked","command","disabled","icon","label","radiogroup","type"],data:["value"],del:["cite","datetime"],details:["open"],dir:["compact"],div:["align"],dl:["compact"],fieldset:["disabled"],font:["color","face","size"],form:["accept","autocomplete","enctype","method","name","novalidate"],h1:["align"],h2:["align"],h3:["align"],h4:["align"],h5:["align"],h6:["align"],hr:["align","noshade","size","width"],iframe:["align","frameborder","height","marginheight","marginwidth","width"],img:["align","alt","border","height","hspace","ismap","name","src","usemap","vspace","width"],input:["accept","accesskey","align","alt","autocomplete","checked","disabled","inputmode","ismap","list","max","maxlength","min","multiple","name","placeholder","readonly","required","size","src","step","tabindex","type","usemap","value"],ins:["cite","datetime"],label:["accesskey","for"],legend:["accesskey","align"],li:["type","value"],map:["name"],menu:["compact","label","type"],meter:["high","low","max","min","value"],ol:["compact","reversed","start","type"],optgroup:["disabled","label"],option:["disabled","label","selected","value"],output:["for","name"],p:["align"],pre:["width"],progress:["max","min","value"],q:["cite"],select:["autocomplete","disabled","multiple","name","required","size","tabindex"],source:["type"],table:["align","bgcolor","border","cellpadding","cellspacing","frame","rules","summary","width"],tbody:["align","char","charoff","valign"],td:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],textarea:["accesskey","autocomplete","cols","disabled","inputmode","name","placeholder","readonly","required","rows","tabindex","wrap"],tfoot:["align","char","charoff","valign"],th:["abbr","align","axis","bgcolor","char","charoff","colspan","headers","height","nowrap","rowspan","scope","valign","width"],thead:["align","char","charoff","valign"],tr:["align","bgcolor","char","charoff","valign"],track:["default","kind","label","srclang"],ul:["compact","type"],video:["autoplay","controls","height","loop","mediagroup","muted","poster","preload","src","width"]},allowedStyles:{"*":{"backface-visibility":[Me.BACKFACE_VISIBILITY],background:[Me.BACKGROUND],"background-attachment":[Me.BACKGROUND_ATTACHMENT],"background-clip":[Me.BACKGROUND_CLIP],"background-color":[Me.BACKGROUND_COLOR],"background-image":[Me.BACKGROUND_IMAGE],"background-origin":[Me.BACKGROUND_ORIGIN],"background-position":[Me.BACKGROUND_POSITION],"background-repeat":[Me.BACKGROUND_REPEAT],"background-size":[Me.BACKGROUND_SIZE],border:[Me.BORDER],"border-bottom":[Me.BORDER_BOTTOM],"border-bottom-color":[Me.BORDER_BOTTOM_COLOR],"border-bottom-left-radius":[Me.BORDER_BOTTOM_LEFT_RADIUS],"border-bottom-right-radius":[Me.BORDER_BOTTOM_RIGHT_RADIUS],"border-bottom-style":[Me.BORDER_BOTTOM_STYLE],"border-bottom-width":[Me.BORDER_BOTTOM_WIDTH],"border-collapse":[Me.BORDER_COLLAPSE],"border-color":[Me.BORDER_COLOR],"border-left":[Me.BORDER_LEFT],"border-left-color":[Me.BORDER_LEFT_COLOR],"border-left-style":[Me.BORDER_LEFT_STYLE],"border-left-width":[Me.BORDER_LEFT_WIDTH],"border-radius":[Me.BORDER_RADIUS],"border-right":[Me.BORDER_RIGHT],"border-right-color":[Me.BORDER_RIGHT_COLOR],"border-right-style":[Me.BORDER_RIGHT_STYLE],"border-right-width":[Me.BORDER_RIGHT_WIDTH],"border-spacing":[Me.BORDER_SPACING],"border-style":[Me.BORDER_STYLE],"border-top":[Me.BORDER_TOP],"border-top-color":[Me.BORDER_TOP_COLOR],"border-top-left-radius":[Me.BORDER_TOP_LEFT_RADIUS],"border-top-right-radius":[Me.BORDER_TOP_RIGHT_RADIUS],"border-top-style":[Me.BORDER_TOP_STYLE],"border-top-width":[Me.BORDER_TOP_WIDTH],"border-width":[Me.BORDER_WIDTH],bottom:[Me.BOTTOM],box:[Me.BOX],"box-shadow":[Me.BOX_SHADOW],"box-sizing":[Me.BOX_SIZING],"caption-side":[Me.CAPTION_SIDE],clear:[Me.CLEAR],clip:[Me.CLIP],color:[Me.COLOR],cursor:[Me.CURSOR],direction:[Me.DIRECTION],display:[Me.DISPLAY],"display-inside":[Me.DISPLAY_INSIDE],"display-outside":[Me.DISPLAY_OUTSIDE],elevation:[Me.ELEVATION],"empty-cells":[Me.EMPTY_CELLS],float:[Me.FLOAT],font:[Me.FONT],"font-family":[Me.FONT_FAMILY],"font-size":[Me.FONT_SIZE],"font-stretch":[Me.FONT_STRETCH],"font-style":[Me.FONT_STYLE],"font-variant":[Me.FONT_VARIANT],"font-weight":[Me.FONT_WEIGHT],height:[Me.HEIGHT],left:[Me.LEFT],"letter-spacing":[Me.LETTER_SPACING],"line-height":[Me.LINE_HEIGHT],"list-style":[Me.LIST_STYLE],"list-style-image":[Me.LIST_STYLE_IMAGE],"list-style-position":[Me.LIST_STYLE_POSITION],"list-style-type":[Me.LIST_STYLE_TYPE],margin:[Me.MARGIN],"margin-bottom":[Me.MARGIN_BOTTOM],"margin-left":[Me.MARGIN_LEFT],"margin-right":[Me.MARGIN_RIGHT],"margin-top":[Me.MARGIN_TOP],"max-height":[Me.MAX_HEIGHT],"max-width":[Me.MAX_WIDTH],"min-height":[Me.MIN_HEIGHT],"min-width":[Me.MIN_WIDTH],opacity:[Me.OPACITY],outline:[Me.OUTLINE],"outline-color":[Me.OUTLINE_COLOR],"outline-style":[Me.OUTLINE_STYLE],"outline-width":[Me.OUTLINE_WIDTH],overflow:[Me.OVERFLOW],"overflow-wrap":[Me.OVERFLOW_WRAP],"overflow-x":[Me.OVERFLOW_X],"overflow-y":[Me.OVERFLOW_Y],padding:[Me.PADDING],"padding-bottom":[Me.PADDING_BOTTOM],"padding-left":[Me.PADDING_LEFT],"padding-right":[Me.PADDING_RIGHT],"padding-top":[Me.PADDING_TOP],"page-break-after":[Me.PAGE_BREAK_AFTER],"page-break-before":[Me.PAGE_BREAK_BEFORE],"page-break-inside":[Me.PAGE_BREAK_INSIDE],"pause-after":[Me.PAUSE_AFTER],perspective:[Me.PERSPECTIVE],pitch:[Me.PITCH],"pitch-range":[Me.PITCH_RANGE],position:[Me.POSITION],quotes:[Me.QUOTES],resize:[Me.RESIZE],richness:[Me.RICHNESS],right:[Me.RIGHT],speak:[Me.SPEAK],"speak-header":[Me.SPEAK_HEADER],"speak-numeral":[Me.SPEAK_NUMERAL],"speak-punctuation":[Me.SPEAK_PUNCTUATION],"speech-rate":[Me.SPEECH_RATE],stress:[Me.STRESS],"table-layout":[Me.TABLE_LAYOUT],"text-align":[Me.TEXT_ALIGN],"text-decoration":[Me.TEXT_DECORATION],"text-indent":[Me.TEXT_INDENT],"text-overflow":[Me.TEXT_OVERFLOW],"text-shadow":[Me.TEXT_SHADOW],"text-transform":[Me.TEXT_TRANSFORM],"text-wrap":[Me.TEXT_WRAP],top:[Me.TOP],"unicode-bidi":[Me.UNICODE_BIDI],"vertical-align":[Me.VERTICAL_ALIGN],visibility:[Me.VISIBILITY],volume:[Me.VOLUME],"white-space":[Me.WHITE_SPACE],width:[Me.WIDTH],"word-break":[Me.WORD_BREAK],"word-spacing":[Me.WORD_SPACING],"word-wrap":[Me.WORD_WRAP],"z-index":[Me.Z_INDEX],zoom:[Me.ZOOM]}},transformTags:{a:De().simpleTransform("a",{rel:"nofollow"}),input:De().simpleTransform("input",{disabled:"disabled"})},allowedSchemesByTag:{img:De().defaults.allowedSchemes.concat(["attachment"])},allowedSchemesAppliedToAttributes:["href","cite"]}}sanitize(e,t){return De()(e,Object.assign(Object.assign({},this._options),t||{}))}}const Ie=new Te;function Pe(e,t){let n=Infinity;let r=null;const o=/\b\w/g;let i=true;while(i){let i=o.exec(e);if(!i){break}let s=f.StringExt.matchSumOfDeltas(e,t,i.index);if(!s){break}if(s&&s.score<=n){n=s.score;r=s.indices}}if(!r||n===Infinity){return null}return{score:n,indices:r}}const Re=(e,t,n)=>r=>{if(t){const t=e.toLowerCase();return Pe(r,t)}if(!n){r=r.toLocaleLowerCase();e=e.toLocaleLowerCase()}const o=r.indexOf(e);if(o===-1){return null}return{indices:[...Array(r.length).keys()].map((e=>e+1))}};const Le=e=>{var t;const[n,r]=(0,v.useState)((t=e.initialQuery)!==null&&t!==void 0?t:"");if(e.forceRefresh){(0,v.useEffect)((()=>{e.updateFilter((e=>({})))}),[])}(0,v.useEffect)((()=>{if(e.initialQuery!==undefined){e.updateFilter(Re(e.initialQuery,e.useFuzzyFilter,e.caseSensitive),e.initialQuery)}}),[]);const o=t=>{const n=t.target;r(n.value);e.updateFilter(Re(n.value,e.useFuzzyFilter,e.caseSensitive),n.value)};return C().createElement(s.InputGroup,{type:"text",rightIcon:"ui-components:search",placeholder:e.placeholder,onChange:o,className:"jp-FilterBox",value:n})};const Oe=e=>E.create(C().createElement(Le,{updateFilter:e.updateFilter,useFuzzyFilter:e.useFuzzyFilter,placeholder:e.placeholder,forceRefresh:e.forceRefresh,caseSensitive:e.caseSensitive}));const ze=new r.Token("@jupyterlab/apputils:ISplashScreen");var Ne=n(64782);const Fe=75;const He=20;class We{constructor(e){this._current=null;this._links=[];this._overrides={};this._overrideProps={};this._outstanding=null;this._pending=0;this._requests={};this._themes={};this._themeChanged=new a.Signal(this);const{host:t,key:n,splash:r,url:o}=e;this.translator=e.translator||G.nullTranslator;this._trans=this.translator.load("jupyterlab");const i=e.settings;this._base=o;this._host=t;this._splash=r||null;void i.load(n).then((e=>{this._settings=e;this._initOverrideProps();this._settings.changed.connect(this._loadSettings,this);this._loadSettings()}))}get theme(){return this._current}get themes(){return Object.keys(this._themes)}get themeChanged(){return this._themeChanged}getCSS(e){var t;return(t=this._overrides[e])!==null&&t!==void 0?t:getComputedStyle(document.documentElement).getPropertyValue(`--jp-${e}`)}loadCSS(e){const t=this._base;const n=te.URLExt.isLocal(e)?te.URLExt.join(t,e):e;const r=this._links;return new Promise(((e,t)=>{const o=document.createElement("link");o.setAttribute("rel","stylesheet");o.setAttribute("type","text/css");o.setAttribute("href",n);o.addEventListener("load",(()=>{e(undefined)}));o.addEventListener("error",(()=>{t(`Stylesheet failed to load: ${n}`)}));document.body.appendChild(o);r.push(o);this.loadCSSOverrides()}))}loadCSSOverrides(){var e;const t=(e=this._settings.user["overrides"])!==null&&e!==void 0?e:{};Object.keys(Object.assign(Object.assign({},this._overrides),t)).forEach((e=>{const n=t[e];if(n&&this.validateCSS(e,n)){document.documentElement.style.setProperty(`--jp-${e}`,n)}else{delete t[e];document.documentElement.style.removeProperty(`--jp-${e}`)}}));this._overrides=t}validateCSS(e,t){const n=this._overrideProps[e];if(!n){console.warn("CSS validation failed: could not find property corresponding to key.\n"+`key: '${e}', val: '${t}'`);return false}if(CSS.supports(n,t)){return true}else{console.warn("CSS validation failed: invalid value.\n"+`key: '${e}', val: '${t}', prop: '${n}'`);return false}}register(e){const{name:t}=e;const n=this._themes;if(n[t]){throw new Error(`Theme already registered for ${t}`)}n[t]=e;return new Ne.DisposableDelegate((()=>{delete n[t]}))}setCSSOverride(e,t){return this._settings.set("overrides",Object.assign(Object.assign({},this._overrides),{[e]:t}))}setTheme(e){return this._settings.set("theme",e)}isLight(e){return this._themes[e].isLight}incrFontSize(e){return this._incrFontSize(e,true)}decrFontSize(e){return this._incrFontSize(e,false)}themeScrollbars(e){return!!this._settings.composite["theme-scrollbars"]&&!!this._themes[e].themeScrollbars}isToggledThemeScrollbars(){return!!this._settings.composite["theme-scrollbars"]}toggleThemeScrollbars(){return this._settings.set("theme-scrollbars",!this._settings.composite["theme-scrollbars"])}getDisplayName(e){var t,n;return(n=(t=this._themes[e])===null||t===void 0?void 0:t.displayName)!==null&&n!==void 0?n:e}_incrFontSize(e,t=true){var n;const r=((n=this.getCSS(e))!==null&&n!==void 0?n:"13px").split(/([a-zA-Z]+)/);const o=(t?1:-1)*(r[1]==="em"?.1:1);return this.setCSSOverride(e,`${Number(r[0])+o}${r[1]}`)}_initOverrideProps(){const e=this._settings.schema.definitions;const t=e.cssOverrides.properties;Object.keys(t).forEach((e=>{this._overrideProps[e]=t[e].description}))}_loadSettings(){const e=this._outstanding;const t=this._pending;const n=this._requests;if(t){window.clearTimeout(t);this._pending=0}const r=this._settings;const o=this._themes;const i=r.composite["theme"];if(e){e.then((()=>{this._loadSettings()})).catch((()=>{this._loadSettings()}));this._outstanding=null;return}n[i]=n[i]?n[i]+1:1;if(o[i]){this._outstanding=this._loadTheme(i);delete n[i];return}if(n[i]>He){const e=r.default("theme");delete n[i];if(!o[e]){this._onError(this._trans.__("Neither theme %1 nor default %2 loaded.",i,e));return}console.warn(`Could not load theme ${i}, using default ${e}.`);this._outstanding=this._loadTheme(e);return}this._pending=window.setTimeout((()=>{this._loadSettings()}),Fe)}_loadTheme(e){var t;const n=this._current;const r=this._links;const o=this._themes;const i=this._splash?this._splash.show(o[e].isLight):new Ne.DisposableDelegate((()=>undefined));r.forEach((e=>{if(e.parentElement){e.parentElement.removeChild(e)}}));r.length=0;const s=(t=this._settings.schema.properties)===null||t===void 0?void 0:t.theme;if(s){s.enum=Object.keys(o).map((e=>{var t;return(t=o[e].displayName)!==null&&t!==void 0?t:e}))}const a=n?o[n].unload():Promise.resolve();return Promise.all([a,o[e].load()]).then((()=>{this._current=e;this._themeChanged.emit({name:"theme",oldValue:n,newValue:e});this._host.hide();requestAnimationFrame((()=>{this._host.show();Ve.fitAll(this._host);i.dispose()}))})).catch((e=>{this._onError(e);i.dispose()}))}_onError(e){void S({title:this._trans.__("Error Loading Theme"),body:String(e),buttons:[M.okButton({label:this._trans.__("OK")})]})}}var Ve;(function(e){function t(e){(0,f.each)(e.children(),t);e.fit()}e.fitAll=t})(Ve||(Ve={}));const qe=new r.Token("@jupyterlab/apputils:ISessionContextDialogs");const Ue=new r.Token("@jupyterlab/apputils:IThemeManager");const $e=new r.Token("@jupyterlab/apputils:ISanitizer");const Ke=new r.Token("@jupyterlab/apputils:IToolbarWidgetRegistry");var Ye=n(82714);var Ge=n(42014);const Ze=50;const Je="jupyter.lab.toolbars";async function Xe(e){const t=await S({title:e.__("Information"),body:e.__("Toolbar customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[M.cancelButton(),M.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function Qe(e,t,n,o,i,s="toolbar"){var a;const l=i.load("jupyterlab");let c=null;let d={};let u=true;try{function e(e){var r,i;d={};const a=Object.keys(t.plugins).filter((e=>e!==o)).map((e=>{var r,o;const i=(o=((r=t.plugins[e].schema[Je])!==null&&r!==void 0?r:{})[n])!==null&&o!==void 0?o:[];d[e]=i;return i})).concat([(i=((r=e[Je])!==null&&r!==void 0?r:{})[n])!==null&&i!==void 0?i:[]]).reduceRight(((e,t)=>Ge.SettingRegistry.reconcileToolbarItems(e,t,true)),[]);e.properties[s].default=Ge.SettingRegistry.reconcileToolbarItems(a,e.properties[s].default,true).sort(((e,t)=>{var n,r;return((n=e.rank)!==null&&n!==void 0?n:Ze)-((r=t.rank)!==null&&r!==void 0?r:Ze)}))}t.transform(o,{compose:t=>{var n,o,i,a,l;if(!c){c=r.JSONExt.deepCopy(t.schema);e(c)}const d=(i=((o=((n=c.properties)!==null&&n!==void 0?n:{})[s])!==null&&o!==void 0?o:{}).default)!==null&&i!==void 0?i:[];const u=t.data.user;const h=t.data.composite;u[s]=(a=t.data.user[s])!==null&&a!==void 0?a:[];h[s]=((l=Ge.SettingRegistry.reconcileToolbarItems(d,u[s],false))!==null&&l!==void 0?l:[]).sort(((e,t)=>{var n,r;return((n=e.rank)!==null&&n!==void 0?n:Ze)-((r=t.rank)!==null&&r!==void 0?r:Ze)}));t.data={composite:h,user:u};return t},fetch:t=>{if(!c){c=r.JSONExt.deepCopy(t.schema);e(c)}return{data:t.data,id:t.id,raw:t.raw,schema:c,version:t.version}}})}catch(m){if(m.name==="TransformError"){u=false}else{throw m}}const h=await t.load(o);h.changed.connect((()=>{var e;const t=(e=h.composite[s])!==null&&e!==void 0?e:[];p(t)}));const p=t=>{e.clear();e.pushAll(t.filter((e=>!e.disabled)))};p((a=h.composite[s])!==null&&a!==void 0?a:[]);if(!u){return}t.pluginChanged.connect((async(e,i)=>{var s,a,u;if(i===o){return}const h=(s=d[i])!==null&&s!==void 0?s:[];const p=(u=((a=t.plugins[i].schema[Je])!==null&&a!==void 0?a:{})[n])!==null&&u!==void 0?u:[];if(!r.JSONExt.deepEqual(h,p)){if(d[i]){await Xe(l)}else{if(p.length>0){c=null;await t.reload(o)}}}}))}function et(e,t,n,o,i,s="toolbar"){const a=new Ye.ObservableList({itemCmp:(e,t)=>r.JSONExt.deepEqual(e,t)});Qe(a,t,n,o,i,s).catch((e=>{console.error(`Failed to load toolbar items for factory ${n} from ${o}`,e)}));return t=>{const r=(r,i)=>{switch(i.type){case"move":o.move(i.oldIndex,i.newIndex);break;case"add":i.newValues.forEach((r=>o.push({name:r.name,widget:e.createWidget(n,t,r)})));break;case"remove":i.oldValues.forEach((()=>o.remove(i.oldIndex)));break;case"set":i.newValues.forEach((r=>o.set(i.newIndex,{name:r.name,widget:e.createWidget(n,t,r)})));break}};const o=new Ye.ObservableList({values:(0,f.toArray)(a).map((r=>({name:r.name,widget:e.createWidget(n,t,r)})))});a.changed.connect(r);t.disposed.connect((()=>{a.changed.disconnect(r)}));return o}}function tt(e,t){if(!e.toolbar){console.log(`Widget ${e.id} has no 'toolbar'.`);return}const n=t(e);if(Array.isArray(n)){n.forEach((({name:t,widget:n})=>{e.toolbar.addItem(t,n)}))}else{const t=(t,n)=>{switch(n.type){case"add":n.newValues.forEach(((t,r)=>{e.toolbar.insertItem(n.newIndex+r,t.name,t.widget)}));break;case"move":n.oldValues.forEach((e=>{e.widget.parent=null}));n.newValues.forEach(((t,r)=>{e.toolbar.insertItem(n.newIndex+r,t.name,t.widget)}));break;case"remove":n.oldValues.forEach((e=>{e.widget.parent=null}));break;case"set":n.oldValues.forEach((e=>{e.widget.parent=null}));n.newValues.forEach(((t,r)=>{const o=(0,f.findIndex)(e.toolbar.names(),(e=>t.name===e));if(o>=0){(0,f.toArray)(e.toolbar.children())[o].parent=null}e.toolbar.insertItem(n.newIndex+r,t.name,t.widget)}));break}};t(n,{newIndex:0,newValues:(0,f.toArray)(n),oldIndex:0,oldValues:[],type:"add"});n.changed.connect(t);e.disposed.connect((()=>{n.changed.disconnect(t)}))}}class nt{constructor(e){this._widgets=new Map;this._defaultFactory=e.defaultFactory}get defaultFactory(){return this._defaultFactory}set defaultFactory(e){this._defaultFactory=e}createWidget(e,t,n){var r;const o=(r=this._widgets.get(e))===null||r===void 0?void 0:r.get(n.name);return o?o(t):this._defaultFactory(e,t,n)}registerFactory(e,t,n){let r=this._widgets.get(e);const o=r===null||r===void 0?void 0:r.get(t);if(!r){r=new Map;this._widgets.set(e,r)}r.set(t,n);return o}}function rt(e){return(t,n,r)=>{var o;switch((o=r.type)!==null&&o!==void 0?o:"command"){case"command":{const{command:t,args:n,label:o,icon:i}=r;const a=t!==null&&t!==void 0?t:"";const l=Object.assign({toolbar:true},n);const c=i?s.LabIcon.resolve({icon:i}):undefined;const d=(c!==null&&c!==void 0?c:e.icon(a,l))?o!==null&&o!==void 0?o:"":o;return new _e({commands:e,id:a,args:l,icon:c,label:d})}case"spacer":return me.createSpacerItem();default:return new l.Widget}}}const ot=new r.Token("@jupyterlab/apputils:IWindowResolver");class it{get name(){return this._name}resolve(e){return st.resolve(e).then((e=>{this._name=e}))}}var st;(function(e){const t="@jupyterlab/statedb:StateDB";const n=`${t}:beacon`;const o=Math.floor(200+Math.random()*300);const i=`${t}:window`;let s=null;let a=null;const l=new r.PromiseDelegate;const c={};let d=null;let u=false;function h(){window.addEventListener("storage",(e=>{const{key:t,newValue:r}=e;if(r===null){return}if(t===n&&r!==s&&a!==null){p(u?d:a);return}if(u||t!==i){return}const o=r.replace(/\-\d+$/,"");c[o]=null;if(!a||a in c){m()}}))}function p(e){if(e===null){return}const{localStorage:t}=window;t.setItem(i,`${e}-${(new Date).getTime()}`)}function m(){u=true;s=null;l.reject(`Window name candidate "${a}" already exists`)}function g(e){if(u){return l.promise}a=e;if(a in c){m();return l.promise}const{localStorage:t,setTimeout:r}=window;r((()=>{if(u){return}if(!a||a in c){return m()}u=true;s=null;l.resolve(d=a);p(d)}),o);s=`${Math.random()}-${(new Date).getTime()}`;t.setItem(n,s);return l.promise}e.resolve=g;(()=>{h()})()})(st||(st={}))},79536:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(93379);var s=n.n(i);var a=n(30399);var l={};l.insert="head";l.singleton=false;var c=s()(a.Z,l);const d=a.Z.locals||{}},4388:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentsModel:()=>s,AttachmentsResolver:()=>a});var r=n(82714);var o=n(63833);var i=n(18987);class s{constructor(e={}){this._map=new r.ObservableMap;this._isDisposed=false;this._stateChanged=new i.Signal(this);this._changed=new i.Signal(this);this._modelDB=null;this._serialized=null;this._changeGuard=false;this.contentFactory=e.contentFactory||s.defaultContentFactory;if(e.values){for(const t of Object.keys(e.values)){if(e.values[t]!==undefined){this.set(t,e.values[t])}}}this._map.changed.connect(this._onMapChanged,this);if(e.modelDB){this._modelDB=e.modelDB;this._serialized=this._modelDB.createValue("attachments");if(this._serialized.get()){this.fromJSON(this._serialized.get())}else{this._serialized.set(this.toJSON())}this._serialized.changed.connect(this._onSerializedChanged,this)}}get stateChanged(){return this._stateChanged}get changed(){return this._changed}get keys(){return this._map.keys()}get length(){return this._map.keys().length}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._map.dispose();i.Signal.clearData(this)}has(e){return this._map.has(e)}get(e){return this._map.get(e)}set(e,t){const n=this._createItem({value:t});this._map.set(e,n)}remove(e){this._map.delete(e)}clear(){this._map.values().forEach((e=>{e.dispose()}));this._map.clear()}fromJSON(e){this.clear();Object.keys(e).forEach((t=>{if(e[t]!==undefined){this.set(t,e[t])}}))}toJSON(){const e={};for(const t of this._map.keys()){e[t]=this._map.get(t).toJSON()}return e}_createItem(e){const t=this.contentFactory;const n=t.createAttachmentModel(e);n.changed.connect(this._onGenericChange,this);return n}_onMapChanged(e,t){if(this._serialized&&!this._changeGuard){this._changeGuard=true;this._serialized.set(this.toJSON());this._changeGuard=false}this._changed.emit(t);this._stateChanged.emit(void 0)}_onSerializedChanged(e,t){if(!this._changeGuard){this._changeGuard=true;this.fromJSON(t.newValue);this._changeGuard=false}}_onGenericChange(){this._stateChanged.emit(void 0)}}(function(e){class t{createAttachmentModel(e){return new o.AttachmentModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(s||(s={}));class a{constructor(e){this._parent=e.parent||null;this._model=e.model}async resolveUrl(e){if(this._parent&&!e.startsWith("attachment:")){return this._parent.resolveUrl(e)}return e}async getDownloadUrl(e){if(this._parent&&!e.startsWith("attachment:")){return this._parent.getDownloadUrl(e)}const t=e.slice("attachment:".length);const n=this._model.get(t);if(n===undefined){return e}const{data:r}=n;const i=Object.keys(r)[0];if(i===undefined||o.imageRendererFactory.mimeTypes.indexOf(i)===-1){throw new Error(`Cannot render unknown image mime type "${i}".`)}const s=`data:${i};base64,${r[i]}`;return s}isLocal(e){var t,n,r;if(this._parent&&!e.startsWith("attachment:")){return(r=(n=(t=this._parent).isLocal)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:true}return true}}},12650:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>h});var r=n(42014);var o=n.n(r);var i=n(53525);var s=n.n(i);var a=n(3378);var l=n.n(a);var c=n(59768);var d=n.n(c);const u={id:"@jupyterlab/cell-toolbar-extension:plugin",autoStart:true,activate:async(e,t,n,r)=>{const o=t&&n?(0,a.createToolbarFactory)(n,t,i.CellBarExtension.FACTORY_NAME,u.id,r!==null&&r!==void 0?r:c.nullTranslator):undefined;e.docRegistry.addWidgetExtension("Notebook",new i.CellBarExtension(e.commands,o))},optional:[r.ISettingRegistry,a.IToolbarWidgetRegistry,c.ITranslator]};const h=u},69858:(e,t,n)=>{"use strict";var r=n(79536);var o=n(90516);var i=n(32902);var s=n(94683);var a=n(5956);var l=n(88164);var c=n(93379);var d=n.n(c);var u=n(63775);var h={};h.insert="head";h.singleton=false;var p=d()(u.Z,h);const m=u.Z.locals||{}},70055:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CellBarExtension:()=>h,CellToolbarTracker:()=>d});var r=n(3378);var o=n(82714);var i=n(54522);var s=n(18987);const a="jp-cell-toolbar";const l="jp-cell-menu";const c="jp-toolbar-overlap";class d{constructor(e,t){this._isDisposed=false;this._panel=e;this._previousActiveCell=this._panel.content.activeCell;this._toolbar=t;this._onToolbarChanged();this._toolbar.changed.connect(this._onToolbarChanged,this);void e.revealed.then((()=>this._onActiveCellChanged(e.content)));e.content.activeCellChanged.connect(this._onActiveCellChanged,this)}_onActiveCellChanged(e){if(this._previousActiveCell){this._removeToolbar(this._previousActiveCell.model)}const t=e.activeCell;if(!t){return}this._addToolbar(t.model);this._previousActiveCell=t;this._updateCellForToolbarOverlap(t)}get isDisposed(){return this._isDisposed}dispose(){var e;if(this.isDisposed){return}this._isDisposed=true;this._toolbar.changed.disconnect(this._onToolbarChanged,this);const t=(e=this._panel)===null||e===void 0?void 0:e.context.model.cells;if(t){(0,i.each)(t.iter(),(e=>this._removeToolbar(e)))}this._panel=null;s.Signal.clearData(this)}_addToolbar(e){const t=this._getCell(e);if(t){const e=new r.Toolbar;e.addClass(l);(0,i.toArray)(this._toolbar).forEach((({name:t,widget:n})=>{e.addItem(t,n)}));e.addClass(a);t.layout.insertWidget(0,e);t.displayChanged.connect(this._resizeEventCallback,this);t.model.contentChanged.connect(this._changedEventCallback,this)}}_getCell(e){var t;return(t=this._panel)===null||t===void 0?void 0:t.content.widgets.find((t=>t.model===e))}_findToolbarWidgets(e){const t=e.layout.widgets;return t.filter((e=>e.hasClass(a)))||[]}_removeToolbar(e){const t=this._getCell(e);if(t){this._findToolbarWidgets(t).forEach((e=>e.dispose()));t.displayChanged.disconnect(this._resizeEventCallback,this);t.model.contentChanged.disconnect(this._changedEventCallback,this)}}_onToolbarChanged(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t){this._removeToolbar(t.model);this._addToolbar(t.model)}}_changedEventCallback(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t===null||t===undefined){return}this._updateCellForToolbarOverlap(t)}_resizeEventCallback(){var e;const t=(e=this._panel)===null||e===void 0?void 0:e.content.activeCell;if(t===null||t===undefined){return}this._updateCellForToolbarOverlap(t)}_updateCellForToolbarOverlap(e){const t=e.node;t.classList.remove(c);if(this._cellToolbarOverlapsContents(e)){t.classList.add(c)}}_cellToolbarOverlapsContents(e){const t=e.model.type;const n=this._cellEditorWidgetLeft(e);const r=this._cellEditorWidgetRight(e);const o=this._cellToolbarLeft(e);if(o===null){return false}if((n+r)/2>o){return true}if(t==="markdown"&&e.rendered){return this._markdownOverlapsToolbar(e)}return this._codeOverlapsToolbar(e)}_markdownOverlapsToolbar(e){const t=e.inputArea;const n=t.renderedInput;const r=n.node;const o=r.firstElementChild;if(o===null){return false}const i=o.style.maxWidth;o.style.maxWidth="max-content";const s=o.getBoundingClientRect().right;o.style.maxWidth=i;const a=this._cellToolbarLeft(e);return a===null?false:s>a}_codeOverlapsToolbar(e){const t=e.editorWidget;const n=e.editor;if(n.lineCount<1){return false}const r=t.node.getElementsByClassName("CodeMirror-line");if(r.length<1){return false}const o=r[0].children[0].getBoundingClientRect().right;const i=this._cellToolbarLeft(e);return i===null?false:o>i}_cellEditorWidgetLeft(e){return e.editorWidget.node.getBoundingClientRect().left}_cellEditorWidgetRight(e){return e.editorWidget.node.getBoundingClientRect().right}_cellToolbarLeft(e){const t=this._findToolbarWidgets(e);if(t.length<1){return null}const n=t[0].node;return n.getBoundingClientRect().left}}const u=[{command:"notebook:duplicate-below",name:"duplicate-cell"},{command:"notebook:move-cell-up",name:"move-cell-up"},{command:"notebook:move-cell-down",name:"move-cell-down"},{command:"notebook:insert-cell-above",name:"insert-cell-above"},{command:"notebook:insert-cell-below",name:"insert-cell-below"},{command:"notebook:delete-cell",name:"delete-cell"}];class h{constructor(e,t){this._commands=e;this._toolbarFactory=t!==null&&t!==void 0?t:this.defaultToolbarFactory}get defaultToolbarFactory(){const e=(0,r.createDefaultFactory)(this._commands);return t=>new o.ObservableList({values:u.map((n=>({name:n.name,widget:e(h.FACTORY_NAME,t,n)})))})}createNew(e){return new d(e,this._toolbarFactory(e))}}h.FACTORY_NAME="Cell"},84571:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentsCell:()=>Pt,AttachmentsCellModel:()=>$,Cell:()=>Tt,CellDragUtils:()=>u,CellFooter:()=>j,CellHeader:()=>x,CellModel:()=>U,CodeCell:()=>It,CodeCellModel:()=>G,Collapser:()=>C,InputArea:()=>I,InputCollapser:()=>b,InputPlaceholder:()=>ie,InputPrompt:()=>P,MARKDOWN_HEADING_COLLAPSED:()=>Et,MarkdownCell:()=>Rt,MarkdownCellModel:()=>Y,OutputCollapser:()=>_,OutputPlaceholder:()=>se,Placeholder:()=>oe,RawCell:()=>Lt,RawCellModel:()=>K,isCodeCellModel:()=>W,isMarkdownCellModel:()=>V,isRawCellModel:()=>q});var r=n(54522);var o=n(3967);const i=5;const s="jp-dragImage";const a="jp-dragImage-singlePrompt";const l="jp-dragImage-content";const c="jp-dragImage-prompt";const d="jp-dragImage-multipleBack";var u;(function(e){function t(e,t,n){let o=-1;while(e&&e.parentElement){if(n(e)){(0,r.each)(t,((t,n)=>{if(t.node===e){o=n;return false}}));break}e=e.parentElement}return o}e.findCell=t;function n(e,t){let n;if(e){if(e.editorWidget.node.contains(t)){n="input"}else if(e.promptNode.contains(t)){n="prompt"}else{n="cell"}}else{n="unknown"}return n}e.detectTargetArea=n;function u(e,t,n,r){const o=Math.abs(n-e);const s=Math.abs(r-t);return o>=i||s>=i}e.shouldStartDrag=u;function h(e,t){const n=t.length;let r;if(e.model.type==="code"){const t=e.model.executionCount;r=" ";if(t){r=t.toString()}}else{r=""}const i=e.model.value.text.split("\n")[0].slice(0,26);if(n>1){if(r!==""){return o.VirtualDOM.realize(o.h.div(o.h.div({className:s},o.h.span({className:c},"["+r+"]:"),o.h.span({className:l},i)),o.h.div({className:d},"")))}else{return o.VirtualDOM.realize(o.h.div(o.h.div({className:s},o.h.span({className:c}),o.h.span({className:l},i)),o.h.div({className:d},"")))}}else{if(r!==""){return o.VirtualDOM.realize(o.h.div(o.h.div({className:`${s} ${a}`},o.h.span({className:c},"["+r+"]:"),o.h.span({className:l},i))))}else{return o.VirtualDOM.realize(o.h.div(o.h.div({className:`${s} ${a}`},o.h.span({className:c}),o.h.span({className:l},i))))}}}e.createCellDragImage=h})(u||(u={}));var h=n(3378);var p=n(45187);var m=n(77865);const g="jp-Collapser";const f="jp-Collapser-child";const A="jp-InputCollapser";const v="jp-OutputCollapser";class C extends h.ReactWidget{constructor(){super();this.addClass(g)}get collapsed(){return false}render(){const e=f;return m.createElement("div",{className:e,onClick:e=>this.handleClick(e)})}}class b extends C{constructor(){super();this.addClass(A)}get collapsed(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.parent;if(t){return t.inputHidden}else{return false}}handleClick(e){var t;const n=(t=this.parent)===null||t===void 0?void 0:t.parent;if(n){n.inputHidden=!n.inputHidden}this.update()}}class _ extends C{constructor(){super();this.addClass(v)}get collapsed(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.parent;if(t){return t.outputHidden}else{return false}}handleClick(e){var t,n;const r=(t=this.parent)===null||t===void 0?void 0:t.parent;if(r){r.outputHidden=!r.outputHidden;if(r.outputHidden){let e=(n=r.parent)===null||n===void 0?void 0:n.node;if(e){p.ElementExt.scrollIntoViewIfNeeded(e,r.node)}}}this.update()}}var y=n(700);const E="jp-CellHeader";const w="jp-CellFooter";class x extends y.Widget{constructor(){super();this.addClass(E)}}class j extends y.Widget{constructor(){super();this.addClass(w)}}var k=n(66934);var B=n(41776);const S="jp-InputArea";const D="jp-InputArea-prompt";const M="jp-InputPrompt";const T="jp-InputArea-editor";class I extends y.Widget{constructor(e){super();this.addClass(S);const t=this.model=e.model;const n=this.contentFactory=e.contentFactory||I.defaultContentFactory;const r=this._prompt=n.createInputPrompt();r.addClass(D);const o={model:t,factory:n.editorFactory,updateOnShow:e.updateOnShow};const i=this._editor=new k.CodeEditorWrapper(o);i.addClass(T);const s=this.layout=new y.PanelLayout;s.addWidget(r);if(!e.placeholder){s.addWidget(i)}}get editorWidget(){return this._editor}get editor(){return this._editor.editor}get promptNode(){return this._prompt.node}get renderedInput(){return this._rendered}renderInput(e){const t=this.layout;if(this._rendered){this._rendered.parent=null}this._editor.hide();this._rendered=e;t.addWidget(e)}showEditor(){if(this._rendered){this._rendered.parent=null}this._editor.show()}setPrompt(e){this._prompt.executionCount=e}dispose(){if(this.isDisposed){return}this._prompt=null;this._editor=null;this._rendered=null;super.dispose()}}(function(e){class t{constructor(t={}){this._editor=t.editorFactory||e.defaultEditorFactory}get editorFactory(){return this._editor}createInputPrompt(){return new P}}e.ContentFactory=t;function n(){const e=new B.CodeMirrorEditorFactory;return e.newInlineEditor}e.defaultEditorFactory=n();e.defaultContentFactory=new t({})})(I||(I={}));class P extends y.Widget{constructor(){super();this._executionCount=null;this.addClass(M)}get executionCount(){return this._executionCount}set executionCount(e){this._executionCount=e;if(e===null){this.node.textContent=" "}else{this.node.textContent=`[${e||" "}]:`}}}var R=n(91100);var L=n(18987);var O=n(89522);var z=n(73967);var N=n(27119);var F=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};const H=z.createMutex();function W(e){return e.type==="code"}function V(e){return e.type==="markdown"}function q(e){return e.type==="raw"}class U extends k.CodeEditor.Model{constructor(e){var t;super({modelDB:e.modelDB,id:e.id||((t=e.cell)===null||t===void 0?void 0:t.id)||R.UUID.uuid4()});this.contentChanged=new L.Signal(this);this.stateChanged=new L.Signal(this);this.value.changed.connect(this.onGenericChange,this);const n=this.modelDB.createValue("type");n.set(this.type);const r=this.modelDB.createMap("metadata");r.changed.connect(this.onModelDBMetadataChange,this);r.changed.connect(this.onGenericChange,this);const o=e.cell;const i=this.modelDB.createValue("trusted");i.changed.connect(this.onTrustedChanged,this);if(!o){i.set(false);return}i.set(!!o.metadata["trusted"]);delete o.metadata["trusted"];if(Array.isArray(o.source)){this.value.text=o.source.map((e=>e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"))).join("")}else{this.value.text=o.source.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}const s=R.JSONExt.deepCopy(o.metadata);if(this.type!=="raw"){delete s["format"]}if(this.type!=="code"){delete s["collapsed"];delete s["scrolled"]}for(const a in s){r.set(a,s[a])}}get type(){return"raw"}get id(){return this.sharedModel.getId()}get metadata(){return this.modelDB.get("metadata")}get trusted(){return this.modelDB.getValue("trusted")}set trusted(e){const t=this.trusted;if(t===e){return}this.modelDB.setValue("trusted",e)}toJSON(){const e=Object.create(null);for(const t of this.metadata.keys()){const n=JSON.parse(JSON.stringify(this.metadata.get(t)));e[t]=n}if(this.trusted){e["trusted"]=true}return{cell_type:this.type,source:this.value.text,metadata:e}}onTrustedChanged(e,t){}switchSharedModel(e,t){if(t){const t=e.getMetadata();if(t){this._updateModelDBMetadata(t)}}super.switchSharedModel(e,t)}onModelDBMetadataChange(e,t){const n=this.sharedModel.getMetadata();H((()=>{switch(t.type){case"add":this._changeCellMetadata(n,t);break;case"change":this._changeCellMetadata(n,t);break;case"remove":delete n[t.key];break;default:throw new Error(`Invalid event type: ${t.type}`)}this.sharedModel.setMetadata(n)}))}_changeCellMetadata(e,t){switch(t.key){case"jupyter":e.jupyter=t.newValue;break;case"collapsed":e.collapsed=t.newValue;break;case"name":e.name=t.newValue;break;case"scrolled":e.scrolled=t.newValue;break;case"tags":e.tags=t.newValue;break;case"trusted":e.trusted=t.newValue;break;default:e[t.key]=t.newValue}}_onSharedModelChanged(e,t){super._onSharedModelChanged(e,t);H((()=>{var e;if(t.metadataChange){const n=(e=t.metadataChange)===null||e===void 0?void 0:e.newValue;if(n){this._updateModelDBMetadata(n)}}}))}_updateModelDBMetadata(e){Object.keys(e).map((t=>{switch(t){case"collapsed":this.metadata.set("collapsed",e.jupyter);break;case"jupyter":this.metadata.set("jupyter",e.jupyter);break;case"name":this.metadata.set("name",e.name);break;case"scrolled":this.metadata.set("scrolled",e.scrolled);break;case"tags":this.metadata.set("tags",e.tags);break;case"trusted":this.metadata.set("trusted",e.trusted);break;default:this.metadata.set(t,e[t])}}))}onGenericChange(){this.contentChanged.emit(void 0)}}class $ extends U{constructor(e){super(e);const t=e.contentFactory||$.defaultContentFactory;let n;const r=e.cell;if(r&&(r.cell_type==="raw"||r.cell_type==="markdown")){n=r.attachments}this._attachments=t.createAttachmentsModel({values:n,modelDB:this.modelDB});this._attachments.stateChanged.connect(this.onGenericChange,this)}get attachments(){return this._attachments}toJSON(){const e=super.toJSON();if(this.attachments.length){e.attachments=this.attachments.toJSON()}return e}}(function(e){class t{createAttachmentsModel(e){return new O.AttachmentsModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})($||($={}));class K extends ${get type(){return"raw"}toJSON(){const e=super.toJSON();e.id=this.id;return e}}class Y extends ${constructor(e){super(e);this.mimeType="text/x-ipythongfm"}get type(){return"markdown"}toJSON(){const e=super.toJSON();e.id=this.id;return e}}class G extends U{constructor(e){var t;super(e);this._executedCode="";this._isDirty=false;const n=e.contentFactory||G.defaultContentFactory;const r=this.trusted;const o=e.cell;let i=[];const s=this.modelDB.createValue("executionCount");if(!s.get()){if(o&&o.cell_type==="code"){s.set(o.execution_count||null);i=(t=o.outputs)!==null&&t!==void 0?t:[];if(o.execution_count!=null){this._executedCode=this.value.text.trim()}}else{s.set(null)}}this.value.changed.connect(this._onValueChanged,this);s.changed.connect(this._onExecutionCountChanged,this);H((()=>{const e=this.sharedModel;e.setOutputs(i)}));this._outputs=n.createOutputArea({trusted:r,values:i});this._outputs.changed.connect(this.onGenericChange,this);this._outputs.changed.connect(this.onModelDBOutputsChange,this);this.metadata.changed.connect(Z.collapseChanged,this);if(this.metadata.has("collapsed")){const e=this.metadata.get("collapsed");Z.collapseChanged(this.metadata,{type:"change",key:"collapsed",oldValue:e,newValue:e})}else if(this.metadata.has("jupyter")){const e=this.metadata.get("jupyter");if(e.hasOwnProperty("outputs_hidden")){Z.collapseChanged(this.metadata,{type:"change",key:"jupyter",oldValue:e,newValue:e})}}}switchSharedModel(e,t){if(t){this.clearExecution();e.getOutputs().forEach((e=>this._outputs.add(e)))}super.switchSharedModel(e,t)}get type(){return"code"}get executionCount(){return this.modelDB.has("executionCount")?this.modelDB.getValue("executionCount"):null}set executionCount(e){const t=this.executionCount;if(e===t){return}this.modelDB.setValue("executionCount",e||null)}get isDirty(){return this._isDirty}_setDirty(e){if(e!==this._isDirty){if(!e){this._executedCode=this.value.text.trim()}this._isDirty=e;this.stateChanged.emit({name:"isDirty",oldValue:!e,newValue:e})}}clearExecution(){this.outputs.clear();this.executionCount=null;this._setDirty(false);this.metadata.delete("execution")}get outputs(){return this._outputs}dispose(){if(this.isDisposed){return}this._outputs.dispose();this._outputs=null;super.dispose()}toJSON(){const e=super.toJSON();e.execution_count=this.executionCount||null;e.outputs=this.outputs.toJSON();e.id=this.id;return e}onTrustedChanged(e,t){if(this._outputs){this._outputs.trusted=t.newValue}this.stateChanged.emit({name:"trusted",oldValue:t.oldValue,newValue:t.newValue})}onModelDBOutputsChange(e,t){const n=this.sharedModel;H((()=>{switch(t.type){case"add":{const e=t.newValues.map((e=>e.toJSON()));n.updateOutputs(t.newIndex,t.newIndex+e.length,e);break}case"set":{const e=t.newValues.map((e=>e.toJSON()));n.updateOutputs(t.oldIndex,t.oldIndex+e.length,e);break}case"remove":n.updateOutputs(t.oldIndex,t.oldValues.length);break;default:throw new Error(`Invalid event type: ${t.type}`)}}))}_onValueChanged(){if(this.executionCount!==null){this._setDirty(this._executedCode!==this.value.text.trim())}}_onSharedModelChanged(e,t){super._onSharedModelChanged(e,t);H((()=>{if(t.outputsChange){this.clearExecution();e.getOutputs().forEach((e=>this._outputs.add(e)))}if(t.executionCountChange){this.executionCount=t.executionCountChange.newValue?t.executionCountChange.newValue:null}}))}_onExecutionCountChanged(e,t){const n=this.sharedModel;H((()=>{n.execution_count=t.newValue?t.newValue:null}));this.contentChanged.emit(void 0);this.stateChanged.emit({name:"executionCount",oldValue:t.oldValue,newValue:t.newValue});if(t.newValue&&this.isDirty){this._setDirty(false)}}}(function(e){class t{createOutputArea(e){return new N.OutputAreaModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(G||(G={}));var Z;(function(e){function t(e,t){if(t.key==="collapsed"){const n=e.get("jupyter")||{};const{outputs_hidden:r}=n,o=F(n,["outputs_hidden"]);if(r!==t.newValue){if(t.newValue!==undefined){o["outputs_hidden"]=t.newValue}if(Object.keys(o).length===0){e.delete("jupyter")}else{e.set("jupyter",o)}}}else if(t.key==="jupyter"){const n=t.newValue||{};if(n.hasOwnProperty("outputs_hidden")){e.set("collapsed",n.outputs_hidden)}else{e.delete("collapsed")}}}e.collapseChanged=t})(Z||(Z={}));var J=n(25903);const X="jp-Placeholder";const Q="jp-Placeholder-prompt jp-InputPrompt";const ee="jp-Placeholder-prompt jp-OutputPrompt";const te="jp-Placeholder-content";const ne="jp-InputPlaceholder";const re="jp-OutputPlaceholder";class oe extends h.ReactWidget{constructor(e){super();this.addClass(X);this._callback=e}handleClick(e){const t=this._callback;t(e)}}class ie extends oe{constructor(e){super(e);this.addClass(ne)}render(){return[m.createElement("div",{className:Q,key:"input"}),m.createElement("div",{className:te,onClick:e=>this.handleClick(e),key:"content"},m.createElement(J.ellipsesIcon.react,{className:"jp-MoreHorizIcon",elementPosition:"center",height:"auto",width:"32px"}))]}}class se extends oe{constructor(e){super(e);this.addClass(re)}render(){return[m.createElement("div",{className:ee,key:"output"}),m.createElement("div",{className:te,onClick:e=>this.handleClick(e),key:"content"},m.createElement(J.ellipsesIcon.react,{className:"jp-MoreHorizIcon",elementPosition:"center",height:"auto",width:"32px"}))]}}function ae(){return{baseUrl:null,breaks:false,extensions:null,gfm:true,headerIds:true,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:true,pedantic:false,renderer:null,sanitize:false,sanitizer:null,silent:false,smartLists:false,smartypants:false,tokenizer:null,walkTokens:null,xhtml:false}}let le=ae();function ce(e){le=e}const de=/[&<>"']/;const ue=/[&<>"']/g;const he=/[<>"']|&(?!#?\w+;)/;const pe=/[<>"']|&(?!#?\w+;)/g;const me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};const ge=e=>me[e];function fe(e,t){if(t){if(de.test(e)){return e.replace(ue,ge)}}else{if(he.test(e)){return e.replace(pe,ge)}}return e}const Ae=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function ve(e){return e.replace(Ae,((e,t)=>{t=t.toLowerCase();if(t==="colon")return":";if(t.charAt(0)==="#"){return t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1))}return""}))}const Ce=/(^|[^\[])\^/g;function be(e,t){e=typeof e==="string"?e:e.source;t=t||"";const n={replace:(t,r)=>{r=r.source||r;r=r.replace(Ce,"$1");e=e.replace(t,r);return n},getRegex:()=>new RegExp(e,t)};return n}const _e=/[^\w:]/g;const ye=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Ee(e,t,n){if(e){let e;try{e=decodeURIComponent(ve(n)).replace(_e,"").toLowerCase()}catch(r){return null}if(e.indexOf("javascript:")===0||e.indexOf("vbscript:")===0||e.indexOf("data:")===0){return null}}if(t&&!ye.test(n)){n=Be(t,n)}try{n=encodeURI(n).replace(/%25/g,"%")}catch(r){return null}return n}const we={};const xe=/^[^:]+:\/*[^/]*$/;const je=/^([^:]+:)[\s\S]*$/;const ke=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Be(e,t){if(!we[" "+e]){if(xe.test(e)){we[" "+e]=e+"/"}else{we[" "+e]=Te(e,"/",true)}}e=we[" "+e];const n=e.indexOf(":")===-1;if(t.substring(0,2)==="//"){if(n){return t}return e.replace(je,"$1")+t}else if(t.charAt(0)==="/"){if(n){return t}return e.replace(ke,"$1")+t}else{return e+t}}const Se={exec:function e(){}};function De(e){let t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e}function Me(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=false,o=t;while(--o>=0&&n[o]==="\\")r=!r;if(r){return"|"}else{return" |"}})),r=n.split(/ \|/);let o=0;if(!r[0].trim()){r.shift()}if(r.length>0&&!r[r.length-1].trim()){r.pop()}if(r.length>t){r.splice(t)}else{while(r.length<t)r.push("")}for(;o<r.length;o++){r[o]=r[o].trim().replace(/\\\|/g,"|")}return r}function Te(e,t,n){const r=e.length;if(r===0){return""}let o=0;while(o<r){const i=e.charAt(r-o-1);if(i===t&&!n){o++}else if(i!==t&&n){o++}else{break}}return e.slice(0,r-o)}function Ie(e,t){if(e.indexOf(t[1])===-1){return-1}const n=e.length;let r=0,o=0;for(;o<n;o++){if(e[o]==="\\"){o++}else if(e[o]===t[0]){r++}else if(e[o]===t[1]){r--;if(r<0){return o}}}return-1}function Pe(e){if(e&&e.sanitize&&!e.silent){console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}}function Re(e,t){if(t<1){return""}let n="";while(t>1){if(t&1){n+=e}t>>=1;e+=e}return n+e}function Le(e,t,n,r){const o=t.href;const i=t.title?fe(t.title):null;const s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=true;const e={type:"link",raw:n,href:o,title:i,text:s,tokens:r.inlineTokens(s,[])};r.state.inLink=false;return e}return{type:"image",raw:n,href:o,title:i,text:fe(s)}}function Oe(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null){return t}const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(t===null){return e}const[n]=t;if(n.length>=r.length){return e.slice(r.length)}return e})).join("\n")}class ze{constructor(e){this.options=e||le}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0){return{type:"space",raw:t[0]}}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:!this.options.pedantic?Te(e,"\n"):e}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0];const n=Oe(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=Te(e,"#");if(this.options.pedantic){e=t.trim()}else if(!t||/ $/.test(t)){e=t.trim()}}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};this.lexer.inline(n.text,n.tokens);return n}}hr(e){const t=this.rules.block.hr.exec(e);if(t){return{type:"hr",raw:t[0]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,o,i,s,a,l,c,d,u,h,p;let m=t[1].trim();const g=m.length>1;const f={type:"list",raw:"",ordered:g,start:g?+m.slice(0,-1):"",loose:false,items:[]};m=g?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`;if(this.options.pedantic){m=g?m:"[*+-]"}const A=new RegExp(`^( {0,3}${m})((?:[\t ][^\\n]*)?(?:\\n|$))`);while(e){p=false;if(!(t=A.exec(e))){break}if(this.rules.block.hr.test(e)){break}n=t[0];e=e.substring(n.length);c=t[2].split("\n",1)[0];d=e.split("\n",1)[0];if(this.options.pedantic){i=2;h=c.trimLeft()}else{i=t[2].search(/[^ ]/);i=i>4?1:i;h=c.slice(i);i+=t[1].length}a=false;if(!c&&/^ *$/.test(d)){n+=d+"\n";e=e.substring(d.length+1);p=true}if(!p){const t=new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`);const r=new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);while(e){u=e.split("\n",1)[0];c=u;if(this.options.pedantic){c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")}if(t.test(c)){break}if(r.test(e)){break}if(c.search(/[^ ]/)>=i||!c.trim()){h+="\n"+c.slice(i)}else if(!a){h+="\n"+c}else{break}if(!a&&!c.trim()){a=true}n+=u+"\n";e=e.substring(u.length+1)}}if(!f.loose){if(l){f.loose=true}else if(/\n *\n *$/.test(n)){l=true}}if(this.options.gfm){r=/^\[[ xX]\] /.exec(h);if(r){o=r[0]!=="[ ] ";h=h.replace(/^\[[ xX]\] +/,"")}}f.items.push({type:"list_item",raw:n,task:!!r,checked:o,loose:false,text:h});f.raw+=n}f.items[f.items.length-1].raw=n.trimRight();f.items[f.items.length-1].text=h.trimRight();f.raw=f.raw.trimRight();const v=f.items.length;for(s=0;s<v;s++){this.lexer.state.top=false;f.items[s].tokens=this.lexer.blockTokens(f.items[s].text,[]);const e=f.items[s].tokens.filter((e=>e.type==="space"));const t=e.every((e=>{const t=e.raw.split("");let n=0;for(const r of t){if(r==="\n"){n+=1}if(n>1){return true}}return false}));if(!f.loose&&e.length&&t){f.loose=true;f.items[s].loose=true}}return f}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){e.type="paragraph";e.text=this.options.sanitizer?this.options.sanitizer(t[0]):fe(t[0]);e.tokens=[];this.lexer.inline(e.text,e.tokens)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t){if(t[3])t[3]=t[3].substring(1,t[3].length-1);const e=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:e,raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:Me(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n=e.align.length;let r,o,i,s;for(r=0;r<n;r++){if(/^ *-+: *$/.test(e.align[r])){e.align[r]="right"}else if(/^ *:-+: *$/.test(e.align[r])){e.align[r]="center"}else if(/^ *:-+ *$/.test(e.align[r])){e.align[r]="left"}else{e.align[r]=null}}n=e.rows.length;for(r=0;r<n;r++){e.rows[r]=Me(e.rows[r],e.header.length).map((e=>({text:e})))}n=e.header.length;for(o=0;o<n;o++){e.header[o].tokens=[];this.lexer.inlineTokens(e.header[o].text,e.header[o].tokens)}n=e.rows.length;for(o=0;o<n;o++){s=e.rows[o];for(i=0;i<s.length;i++){s[i].tokens=[];this.lexer.inlineTokens(s[i].text,s[i].tokens)}}return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};this.lexer.inline(e.text,e.tokens);return e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)==="\n"?t[1].slice(0,-1):t[1],tokens:[]};this.lexer.inline(e.text,e.tokens);return e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};this.lexer.inline(e.text,e.tokens);return e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t){return{type:"escape",raw:t[0],text:fe(t[1])}}}tag(e){const t=this.rules.inline.tag.exec(e);if(t){if(!this.lexer.state.inLink&&/^<a /i.test(t[0])){this.lexer.state.inLink=true}else if(this.lexer.state.inLink&&/^<\/a>/i.test(t[0])){this.lexer.state.inLink=false}if(!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])){this.lexer.state.inRawBlock=true}else if(this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])){this.lexer.state.inRawBlock=false}return{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):fe(t[0]):t[0]}}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e)){return}const t=Te(e.slice(0,-1),"\\");if((e.length-t.length)%2===0){return}}else{const e=Ie(t[2],"()");if(e>-1){const n=t[0].indexOf("!")===0?5:4;const r=n+t[1].length+e;t[2]=t[2].substring(0,e);t[0]=t[0].substring(0,r).trim();t[3]=""}}let n=t[2];let r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);if(e){n=e[1];r=e[3]}}else{r=t[3]?t[3].slice(1,-1):""}n=n.trim();if(/^</.test(n)){if(this.options.pedantic&&!/>$/.test(e)){n=n.slice(1)}else{n=n.slice(1,-1)}}return Le(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");e=t[e.toLowerCase()];if(!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return Le(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(n===""||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let o,i,s=n,a=0;const l=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;l.lastIndex=0;t=t.slice(-1*e.length+n);while((r=l.exec(t))!=null){o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6];if(!o)continue;i=o.length;if(r[3]||r[4]){s+=i;continue}else if(r[5]||r[6]){if(n%3&&!((n+i)%3)){a+=i;continue}}s-=i;if(s>0)continue;i=Math.min(i,i+s+a);if(Math.min(n,i)%2){const t=e.slice(1,n+r.index+i);return{type:"em",raw:e.slice(0,n+r.index+i+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+i-1);return{type:"strong",raw:e.slice(0,n+r.index+i+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e);const r=/^ /.test(e)&&/ $/.test(e);if(n&&r){e=e.substring(1,e.length-1)}e=fe(e,true);return{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t){return{type:"br",raw:t[0]}}}del(e){const t=this.rules.inline.del.exec(e);if(t){return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;if(n[2]==="@"){e=fe(this.options.mangle?t(n[1]):n[1]);r="mailto:"+e}else{e=fe(n[1]);r=e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if(n[2]==="@"){e=fe(this.options.mangle?t(n[0]):n[0]);r="mailto:"+e}else{let t;do{t=n[0];n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=fe(n[0]);if(n[1]==="www."){r="http://"+e}else{r=e}}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;if(this.lexer.state.inRawBlock){e=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):fe(n[0]):n[0]}else{e=fe(this.options.smartypants?t(n[0]):n[0])}return{type:"text",raw:n[0],text:e}}}}const Ne={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:"+"<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)"+"|comment[^\\n]*(\\n+|$)"+"|<\\?[\\s\\S]*?(?:\\?>\\n*|$)"+"|<![A-Z][\\s\\S]*?(?:>\\n*|$)"+"|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)"+"|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)"+"|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)"+"|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)"+")",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Se,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ne._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ne._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ne.def=be(Ne.def).replace("label",Ne._label).replace("title",Ne._title).getRegex();Ne.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ne.listItemStart=be(/^( *)(bull) */).replace("bull",Ne.bullet).getRegex();Ne.list=be(Ne.list).replace(/bull/g,Ne.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ne.def.source+")").getRegex();Ne._tag="address|article|aside|base|basefont|blockquote|body|caption"+"|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption"+"|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe"+"|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option"+"|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr"+"|track|ul";Ne._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ne.html=be(Ne.html,"i").replace("comment",Ne._comment).replace("tag",Ne._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ne.paragraph=be(Ne._paragraph).replace("hr",Ne.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ne._tag).getRegex();Ne.blockquote=be(Ne.blockquote).replace("paragraph",Ne.paragraph).getRegex();Ne.normal=De({},Ne);Ne.gfm=De({},Ne.normal,{table:"^ *([^\\n ].*\\|.*)\\n"+" {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?"+"(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Ne.gfm.table=be(Ne.gfm.table).replace("hr",Ne.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ne._tag).getRegex();Ne.gfm.paragraph=be(Ne._paragraph).replace("hr",Ne.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ne.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ne._tag).getRegex();Ne.pedantic=De({},Ne.normal,{html:be("^ *(?:comment *(?:\\n|\\s*$)"+"|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)"+"|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",Ne._comment).replace(/tag/g,"(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub"+"|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)"+"\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Se,paragraph:be(Ne.normal._paragraph).replace("hr",Ne.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",Ne.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Fe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Se,tag:"^comment"+"|^</[a-zA-Z][\\w:-]*\\s*>"+"|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>"+"|^<\\?[\\s\\S]*?\\?>"+"|^<![a-zA-Z]+\\s[\\s\\S]*?>"+"|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Se,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Fe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Fe.punctuation=be(Fe.punctuation).replace(/punctuation/g,Fe._punctuation).getRegex();Fe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Fe.escapedEmSt=/\\\*|\\_/g;Fe._comment=be(Ne._comment).replace("(?:--\x3e|$)","--\x3e").getRegex();Fe.emStrong.lDelim=be(Fe.emStrong.lDelim).replace(/punct/g,Fe._punctuation).getRegex();Fe.emStrong.rDelimAst=be(Fe.emStrong.rDelimAst,"g").replace(/punct/g,Fe._punctuation).getRegex();Fe.emStrong.rDelimUnd=be(Fe.emStrong.rDelimUnd,"g").replace(/punct/g,Fe._punctuation).getRegex();Fe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Fe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Fe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Fe.autolink=be(Fe.autolink).replace("scheme",Fe._scheme).replace("email",Fe._email).getRegex();Fe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Fe.tag=be(Fe.tag).replace("comment",Fe._comment).replace("attribute",Fe._attribute).getRegex();Fe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Fe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Fe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Fe.link=be(Fe.link).replace("label",Fe._label).replace("href",Fe._href).replace("title",Fe._title).getRegex();Fe.reflink=be(Fe.reflink).replace("label",Fe._label).replace("ref",Ne._label).getRegex();Fe.nolink=be(Fe.nolink).replace("ref",Ne._label).getRegex();Fe.reflinkSearch=be(Fe.reflinkSearch,"g").replace("reflink",Fe.reflink).replace("nolink",Fe.nolink).getRegex();Fe.normal=De({},Fe);Fe.pedantic=De({},Fe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:be(/^!?\[(label)\]\((.*?)\)/).replace("label",Fe._label).getRegex(),reflink:be(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Fe._label).getRegex()});Fe.gfm=De({},Fe.normal,{escape:be(Fe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Fe.gfm.url=be(Fe.gfm.url,"i").replace("email",Fe.gfm._extended_email).getRegex();Fe.breaks=De({},Fe.gfm,{br:be(Fe.br).replace("{2,}","*").getRegex(),text:be(Fe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function He(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function We(e){let t="",n,r;const o=e.length;for(n=0;n<o;n++){r=e.charCodeAt(n);if(Math.random()>.5){r="x"+r.toString(16)}t+="&#"+r+";"}return t}class Ve{constructor(e){this.tokens=[];this.tokens.links=Object.create(null);this.options=e||le;this.options.tokenizer=this.options.tokenizer||new ze;this.tokenizer=this.options.tokenizer;this.tokenizer.options=this.options;this.tokenizer.lexer=this;this.inlineQueue=[];this.state={inLink:false,inRawBlock:false,top:true};const t={block:Ne.normal,inline:Fe.normal};if(this.options.pedantic){t.block=Ne.pedantic;t.inline=Fe.pedantic}else if(this.options.gfm){t.block=Ne.gfm;if(this.options.breaks){t.inline=Fe.breaks}else{t.inline=Fe.gfm}}this.tokenizer.rules=t}static get rules(){return{block:Ne,inline:Fe}}static lex(e,t){const n=new Ve(t);return n.lex(e)}static lexInline(e,t){const n=new Ve(t);return n.inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n");this.blockTokens(e,this.tokens);let t;while(t=this.inlineQueue.shift()){this.inlineTokens(t.src,t.tokens)}return this.tokens}blockTokens(e,t=[]){if(this.options.pedantic){e=e.replace(/\t/g,"    ").replace(/^ +$/gm,"")}else{e=e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)))}let n,r,o,i;while(e){if(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>{if(n=r.call({lexer:this},e,t)){e=e.substring(n.raw.length);t.push(n);return true}return false}))){continue}if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);if(n.raw.length===1&&t.length>0){t[t.length-1].raw+="\n"}else{t.push(n)}continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&(r.type==="paragraph"||r.type==="text")){r.raw+="\n"+n.raw;r.text+="\n"+n.text;this.inlineQueue[this.inlineQueue.length-1].src=r.text}else{t.push(n)}continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&(r.type==="paragraph"||r.type==="text")){r.raw+="\n"+n.raw;r.text+="\n"+n.raw;this.inlineQueue[this.inlineQueue.length-1].src=r.text}else if(!this.tokens.links[n.tag]){this.tokens.links[n.tag]={href:n.href,title:n.title}}continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length);t.push(n);continue}o=e;if(this.options.extensions&&this.options.extensions.startBlock){let t=Infinity;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n);if(typeof r==="number"&&r>=0){t=Math.min(t,r)}}));if(t<Infinity&&t>=0){o=e.substring(0,t+1)}}if(this.state.top&&(n=this.tokenizer.paragraph(o))){r=t[t.length-1];if(i&&r.type==="paragraph"){r.raw+="\n"+n.raw;r.text+="\n"+n.text;this.inlineQueue.pop();this.inlineQueue[this.inlineQueue.length-1].src=r.text}else{t.push(n)}i=o.length!==e.length;e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&r.type==="text"){r.raw+="\n"+n.raw;r.text+="\n"+n.text;this.inlineQueue.pop();this.inlineQueue[this.inlineQueue.length-1].src=r.text}else{t.push(n)}continue}if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}else{throw new Error(t)}}}this.state.top=true;return t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,o;let i=e;let s;let a,l;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0){while((s=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null){if(e.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))){i=i.slice(0,s.index)+"["+Re("a",s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}}}while((s=this.tokenizer.rules.inline.blockSkip.exec(i))!=null){i=i.slice(0,s.index)+"["+Re("a",s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex)}while((s=this.tokenizer.rules.inline.escapedEmSt.exec(i))!=null){i=i.slice(0,s.index)+"++"+i.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex)}while(e){if(!a){l=""}a=false;if(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>{if(n=r.call({lexer:this},e,t)){e=e.substring(n.raw.length);t.push(n);return true}return false}))){continue}if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&n.type==="text"&&r.type==="text"){r.raw+=n.raw;r.text+=n.text}else{t.push(n)}continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&n.type==="text"&&r.type==="text"){r.raw+=n.raw;r.text+=n.text}else{t.push(n)}continue}if(n=this.tokenizer.emStrong(e,i,l)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.autolink(e,We)){e=e.substring(n.raw.length);t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,We))){e=e.substring(n.raw.length);t.push(n);continue}o=e;if(this.options.extensions&&this.options.extensions.startInline){let t=Infinity;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n);if(typeof r==="number"&&r>=0){t=Math.min(t,r)}}));if(t<Infinity&&t>=0){o=e.substring(0,t+1)}}if(n=this.tokenizer.inlineText(o,He)){e=e.substring(n.raw.length);if(n.raw.slice(-1)!=="_"){l=n.raw.slice(-1)}a=true;r=t[t.length-1];if(r&&r.type==="text"){r.raw+=n.raw;r.text+=n.text}else{t.push(n)}continue}if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}else{throw new Error(t)}}}return t}}class qe{constructor(e){this.options=e||le}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);if(t!=null&&t!==e){n=true;e=t}}e=e.replace(/\n$/,"")+"\n";if(!r){return"<pre><code>"+(n?e:fe(e,true))+"</code></pre>\n"}return'<pre><code class="'+this.options.langPrefix+fe(r,true)+'">'+(n?e:fe(e,true))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,n,r){if(this.options.headerIds){const o=this.options.headerPrefix+r.slug(n);return`<h${t} id="${o}">${e}</h${t}>\n`}return`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul",o=t&&n!==1?' start="'+n+'"':"";return"<"+r+o+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){if(t)t=`<tbody>${t}</tbody>`;return"<table>\n"+"<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";const r=t.align?`<${n} align="${t.align}">`:`<${n}>`;return r+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){e=Ee(this.options.sanitize,this.options.baseUrl,e);if(e===null){return n}let r='<a href="'+fe(e)+'"';if(t){r+=' title="'+t+'"'}r+=">"+n+"</a>";return r}image(e,t,n){e=Ee(this.options.sanitize,this.options.baseUrl,e);if(e===null){return n}let r=`<img src="${e}" alt="${n}"`;if(t){r+=` title="${t}"`}r+=this.options.xhtml?"/>":">";return r}text(e){return e}}class Ue{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class $e{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e;let r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++;n=e+"-"+r}while(this.seen.hasOwnProperty(n))}if(!t){this.seen[e]=r;this.seen[n]=0}return n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class Ke{constructor(e){this.options=e||le;this.options.renderer=this.options.renderer||new qe;this.renderer=this.options.renderer;this.renderer.options=this.options;this.textRenderer=new Ue;this.slugger=new $e}static parse(e,t){const n=new Ke(t);return n.parse(e)}static parseInline(e,t){const n=new Ke(t);return n.parseInline(e)}parse(e,t=true){let n="",r,o,i,s,a,l,c,d,u,h,p,m,g,f,A,v,C,b,_;const y=e.length;for(r=0;r<y;r++){h=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]){_=this.options.extensions.renderers[h.type].call({parser:this},h);if(_!==false||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){n+=_||"";continue}}switch(h.type){case"space":{continue}case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(h.tokens),h.depth,ve(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{d="";c="";s=h.header.length;for(o=0;o<s;o++){c+=this.renderer.tablecell(this.parseInline(h.header[o].tokens),{header:true,align:h.align[o]})}d+=this.renderer.tablerow(c);u="";s=h.rows.length;for(o=0;o<s;o++){l=h.rows[o];c="";a=l.length;for(i=0;i<a;i++){c+=this.renderer.tablecell(this.parseInline(l[i].tokens),{header:false,align:h.align[i]})}u+=this.renderer.tablerow(c)}n+=this.renderer.table(d,u);continue}case"blockquote":{u=this.parse(h.tokens);n+=this.renderer.blockquote(u);continue}case"list":{p=h.ordered;m=h.start;g=h.loose;s=h.items.length;u="";for(o=0;o<s;o++){A=h.items[o];v=A.checked;C=A.task;f="";if(A.task){b=this.renderer.checkbox(v);if(g){if(A.tokens.length>0&&A.tokens[0].type==="paragraph"){A.tokens[0].text=b+" "+A.tokens[0].text;if(A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"){A.tokens[0].tokens[0].text=b+" "+A.tokens[0].tokens[0].text}}else{A.tokens.unshift({type:"text",text:b})}}else{f+=b}}f+=this.parse(A.tokens,g);u+=this.renderer.listitem(f,C,v)}n+=this.renderer.list(u,p,m);continue}case"html":{n+=this.renderer.html(h.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{u=h.tokens?this.parseInline(h.tokens):h.text;while(r+1<y&&e[r+1].type==="text"){h=e[++r];u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text)}n+=t?this.renderer.paragraph(u):u;continue}default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(e);return}else{throw new Error(e)}}}}return n}parseInline(e,t){t=t||this.renderer;let n="",r,o,i;const s=e.length;for(r=0;r<s;r++){o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==false||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{n+=t.text(o.text);break}case"html":{n+=t.html(o.text);break}case"link":{n+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{n+=t.image(o.href,o.title,o.text);break}case"strong":{n+=t.strong(this.parseInline(o.tokens,t));break}case"em":{n+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{n+=t.codespan(o.text);break}case"br":{n+=t.br();break}case"del":{n+=t.del(this.parseInline(o.tokens,t));break}case"text":{n+=t.text(o.text);break}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(e);return}else{throw new Error(e)}}}}return n}}function Ye(e,t,n){if(typeof e==="undefined"||e===null){throw new Error("marked(): input parameter is undefined or null")}if(typeof e!=="string"){throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected")}if(typeof t==="function"){n=t;t=null}t=De({},Ye.defaults,t||{});Pe(t);if(n){const o=t.highlight;let i;try{i=Ve.lex(e,t)}catch(r){return n(r)}const s=function(e){let s;if(!e){try{if(t.walkTokens){Ye.walkTokens(i,t.walkTokens)}s=Ke.parse(i,t)}catch(r){e=r}}t.highlight=o;return e?n(e):n(null,s)};if(!o||o.length<3){return s()}delete t.highlight;if(!i.length)return s();let a=0;Ye.walkTokens(i,(function(e){if(e.type==="code"){a++;setTimeout((()=>{o(e.text,e.lang,(function(t,n){if(t){return s(t)}if(n!=null&&n!==e.text){e.text=n;e.escaped=true}a--;if(a===0){s()}}))}),0)}}));if(a===0){s()}return}try{const n=Ve.lex(e,t);if(t.walkTokens){Ye.walkTokens(n,t.walkTokens)}return Ke.parse(n,t)}catch(r){r.message+="\nPlease report this to https://github.com/markedjs/marked.";if(t.silent){return"<p>An error occurred:</p><pre>"+fe(r.message+"",true)+"</pre>"}throw r}}Ye.options=Ye.setOptions=function(e){De(Ye.defaults,e);ce(Ye.defaults);return Ye};Ye.getDefaults=ae;Ye.defaults=le;Ye.use=function(...e){const t=De({},...e);const n=Ye.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions){r=true;e.extensions.forEach((e=>{if(!e.name){throw new Error("extension name required")}if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;if(t){n.renderers[e.name]=function(...n){let r=e.renderer.apply(this,n);if(r===false){r=t.apply(this,n)}return r}}else{n.renderers[e.name]=e.renderer}}if(e.tokenizer){if(!e.level||e.level!=="block"&&e.level!=="inline"){throw new Error("extension level must be 'block' or 'inline'")}if(n[e.level]){n[e.level].unshift(e.tokenizer)}else{n[e.level]=[e.tokenizer]}if(e.start){if(e.level==="block"){if(n.startBlock){n.startBlock.push(e.start)}else{n.startBlock=[e.start]}}else if(e.level==="inline"){if(n.startInline){n.startInline.push(e.start)}else{n.startInline=[e.start]}}}}if(e.childTokens){n.childTokens[e.name]=e.childTokens}}))}if(e.renderer){const n=Ye.defaults.renderer||new qe;for(const t in e.renderer){const r=n[t];n[t]=(...o)=>{let i=e.renderer[t].apply(n,o);if(i===false){i=r.apply(n,o)}return i}}t.renderer=n}if(e.tokenizer){const n=Ye.defaults.tokenizer||new ze;for(const t in e.tokenizer){const r=n[t];n[t]=(...o)=>{let i=e.tokenizer[t].apply(n,o);if(i===false){i=r.apply(n,o)}return i}}t.tokenizer=n}if(e.walkTokens){const n=Ye.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t);if(n){n.call(this,t)}}}if(r){t.extensions=n}Ye.setOptions(t)}))};Ye.walkTokens=function(e,t){for(const n of e){t.call(Ye,n);switch(n.type){case"table":{for(const e of n.header){Ye.walkTokens(e.tokens,t)}for(const e of n.rows){for(const n of e){Ye.walkTokens(n.tokens,t)}}break}case"list":{Ye.walkTokens(n.items,t);break}default:{if(Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[n.type]){Ye.defaults.extensions.childTokens[n.type].forEach((function(e){Ye.walkTokens(n[e],t)}))}else if(n.tokens){Ye.walkTokens(n.tokens,t)}}}}};Ye.parseInline=function(e,t){if(typeof e==="undefined"||e===null){throw new Error("marked.parseInline(): input parameter is undefined or null")}if(typeof e!=="string"){throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected")}t=De({},Ye.defaults,t||{});Pe(t);try{const n=Ve.lexInline(e,t);if(t.walkTokens){Ye.walkTokens(n,t.walkTokens)}return Ke.parseInline(n,t)}catch(n){n.message+="\nPlease report this to https://github.com/markedjs/marked.";if(t.silent){return"<p>An error occurred:</p><pre>"+fe(n.message+"",true)+"</pre>"}throw n}};Ye.Parser=Ke;Ye.parser=Ke.parse;Ye.Renderer=qe;Ye.TextRenderer=Ue;Ye.Lexer=Ve;Ye.lexer=Ve.lex;Ye.Tokenizer=ze;Ye.Slugger=$e;Ye.parse=Ye;const Ge=Ye.options;const Ze=Ye.setOptions;const Je=Ye.use;const Xe=Ye.walkTokens;const Qe=Ye.parseInline;const et=null&&Ye;const tt=Ke.parse;const nt=Ve.lex;var rt=n(69442);var ot=n(63833);var it=n(6625);const st="jp-CellResizeHandle";const at="jp-mod-resizedCell";class lt extends y.Widget{constructor(e){super();this.targetNode=e;this._isActive=false;this._isDragging=false;this._protectedWidth=10;this.addClass(st)}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("dblclick",this);this.node.addEventListener("mousedown",this)}onAfterDetach(e){super.onAfterAttach(e);this.node.removeEventListener("dblclick",this);this.node.removeEventListener("mousedown",this)}handleEvent(e){var t,n;switch(e.type){case"dblclick":(t=this.targetNode.parentNode)===null||t===void 0?void 0:t.childNodes.forEach((e=>{e.classList.remove(at)}));document.documentElement.style.setProperty("--jp-side-by-side-output-size","1fr");this._isActive=false;break;case"mousedown":this._isDragging=true;if(!this._isActive){(n=this.targetNode.parentNode)===null||n===void 0?void 0:n.childNodes.forEach((e=>{e.classList.add(at)}));this._isActive=true}window.addEventListener("mousemove",this);window.addEventListener("mouseup",this);break;case"mousemove":{if(!this._isActive||!this._isDragging){return}const t=this.targetNode.getBoundingClientRect();const n=t.width-this._protectedWidth*2;const r=e.clientX-t.x-this._protectedWidth;const o=n/r-1;document.documentElement.style.setProperty("--jp-side-by-side-output-size",`${o}fr`);break}case"mouseup":this._isDragging=false;window.removeEventListener("mousemove",this);window.removeEventListener("mouseup",this);break;default:break}}}const ct="jp-Cell";const dt="jp-Cell-header";const ut="jp-Cell-footer";const ht="jp-Cell-inputWrapper";const pt="jp-Cell-outputWrapper";const mt="jp-Cell-inputArea";const gt="jp-Cell-outputArea";const ft="jp-Cell-inputCollapser";const At="jp-Cell-outputCollapser";const vt="jp-mod-readOnly";const Ct="jp-mod-dirty";const bt="jp-CodeCell";const _t="jp-MarkdownCell";const yt="jp-MarkdownOutput";const Et="jp-MarkdownHeadingCollapsed";const wt="jp-collapseHeadingButton";const xt="jp-showHiddenCellsButton";const jt="jp-RawCell";const kt="jp-mod-rendered";const Bt="jp-mod-noOutputs";const St="Type Markdown and LaTeX: $ ^2 $";const Dt=1e3;const Mt="application/x-jupyter-icontentsrich";class Tt extends y.Widget{constructor(e){super();this._displayChanged=new L.Signal(this);this._readOnly=false;this._inputHidden=false;this._syncCollapse=false;this._syncEditable=false;this._resizeDebouncer=new it.Debouncer((()=>{this._displayChanged.emit()}),0);this.addClass(ct);const t=this._model=e.model;const n=this.contentFactory=e.contentFactory||Tt.defaultContentFactory;this.layout=new y.PanelLayout;const r=n.createCellHeader();r.addClass(dt);this.layout.addWidget(r);const o=this._inputWrapper=new y.Panel;o.addClass(ht);const i=new b;i.addClass(ft);const s=this._input=new I({model:t,contentFactory:n,updateOnShow:e.updateEditorOnShow,placeholder:e.placeholder});s.addClass(mt);o.addWidget(i);o.addWidget(s);this.layout.addWidget(o);this._inputPlaceholder=new ie((()=>{this.inputHidden=!this.inputHidden}));const a=this.contentFactory.createCellFooter();a.addClass(ut);this.layout.addWidget(a);if(e.editorConfig){this.editor.setOptions(Object.assign({},e.editorConfig))}t.metadata.changed.connect(this.onMetadataChanged,this)}initializeState(){this.loadCollapseState();this.loadEditableState();return this}get displayChanged(){return this._displayChanged}get promptNode(){if(!this._inputHidden){return this._input.promptNode}else{return this._inputPlaceholder.node.firstElementChild}}get editorWidget(){return this._input.editorWidget}get editor(){return this._input.editor}get model(){return this._model}get inputArea(){return this._input}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}this._readOnly=e;if(this.syncEditable){this.saveEditableState()}this.update()}saveEditableState(){const{metadata:e}=this.model;const t=e.get("editable");if(this.readOnly&&t===false||!this.readOnly&&t===undefined){return}if(this.readOnly){this.model.metadata.set("editable",false)}else{this.model.metadata.delete("editable")}}loadEditableState(){this.readOnly=this.model.metadata.get("editable")===false}get ready(){return Promise.resolve(undefined)}setPrompt(e){this._input.setPrompt(e)}get inputHidden(){return this._inputHidden}set inputHidden(e){if(this._inputHidden===e){return}const t=this._inputWrapper.layout;if(e){this._input.parent=null;t.addWidget(this._inputPlaceholder)}else{this._inputPlaceholder.parent=null;t.addWidget(this._input)}this._inputHidden=e;if(this.syncCollapse){this.saveCollapseState()}this.handleInputHidden(e)}saveCollapseState(){const e=Object.assign({},this.model.metadata.get("jupyter"));if(this.inputHidden&&e.source_hidden===true||!this.inputHidden&&e.source_hidden===undefined){return}if(this.inputHidden){e.source_hidden=true}else{delete e.source_hidden}if(Object.keys(e).length===0){this.model.metadata.delete("jupyter")}else{this.model.metadata.set("jupyter",e)}}loadCollapseState(){const e=this.model.metadata.get("jupyter")||{};this.inputHidden=!!e.source_hidden}handleInputHidden(e){return}get syncCollapse(){return this._syncCollapse}set syncCollapse(e){if(this._syncCollapse===e){return}this._syncCollapse=e;if(e){this.loadCollapseState()}}get syncEditable(){return this._syncEditable}set syncEditable(e){if(this._syncEditable===e){return}this._syncEditable=e;if(e){this.loadEditableState()}}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,placeholder:false})}dispose(){if(this.isDisposed){return}this._input=null;this._model=null;this._inputWrapper=null;this._inputPlaceholder=null;super.dispose()}onAfterAttach(e){this.update()}onActivateRequest(e){this.editor.focus()}onFitRequest(e){this.editor.refresh()}onResize(e){void this._resizeDebouncer.invoke()}onUpdateRequest(e){if(!this._model){return}if(this.editor.getOption("readOnly")!==this._readOnly){this.editor.setOption("readOnly",this._readOnly);this.toggleClass(vt,this._readOnly)}}onMetadataChanged(e,t){switch(t.key){case"jupyter":if(this.syncCollapse){this.loadCollapseState()}break;case"editable":if(this.syncEditable){this.loadEditableState()}break;default:break}}}(function(e){class t{constructor(e={}){this._editorFactory=e.editorFactory||I.defaultEditorFactory}get editorFactory(){return this._editorFactory}createCellHeader(){return new x}createCellFooter(){return new j}createInputPrompt(){return new P}createOutputPrompt(){return new N.OutputPrompt}createStdin(e){return new N.Stdin(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(Tt||(Tt={}));class It extends Tt{constructor(e){super(e);this._outputHidden=false;this._syncScrolled=false;this._savingMetadata=false;this.addClass(bt);const t=this._rendermime=e.rendermime;const n=this.contentFactory;const r=this.model;if(!e.placeholder){const o=this._outputWrapper=new y.Panel;o.addClass(pt);const i=new _;i.addClass(At);const s=this._output=new N.OutputArea({model:r.outputs,rendermime:t,contentFactory:n,maxNumberOutputs:e.maxNumberOutputs});s.addClass(gt);if(r.outputs.length===0){this.addClass(Bt)}s.outputLengthChanged.connect(this._outputLengthHandler,this);o.addWidget(i);o.addWidget(s);this.layout.insertWidget(2,new lt(this.node));this.layout.insertWidget(3,o);if(r.isDirty){this.addClass(Ct)}this._outputPlaceholder=new se((()=>{this.outputHidden=!this.outputHidden}))}r.stateChanged.connect(this.onStateChanged,this)}initializeState(){super.initializeState();this.loadScrolledState();this.setPrompt(`${this.model.executionCount||""}`);return this}get outputArea(){return this._output}get outputHidden(){return this._outputHidden}set outputHidden(e){if(this._outputHidden===e){return}const t=this._outputWrapper.layout;if(e){t.removeWidget(this._output);t.addWidget(this._outputPlaceholder);if(this.inputHidden&&!this._outputWrapper.isHidden){this._outputWrapper.hide()}}else{if(this._outputWrapper.isHidden){this._outputWrapper.show()}t.removeWidget(this._outputPlaceholder);t.addWidget(this._output)}this._outputHidden=e;if(this.syncCollapse){this.saveCollapseState()}}saveCollapseState(){this._savingMetadata=true;try{super.saveCollapseState();const e=this.model.metadata;const t=this.model.metadata.get("collapsed");if(this.outputHidden&&t===true||!this.outputHidden&&t===undefined){return}if(this.outputHidden){e.set("collapsed",true)}else{e.delete("collapsed")}}finally{this._savingMetadata=false}}loadCollapseState(){super.loadCollapseState();this.outputHidden=!!this.model.metadata.get("collapsed")}get outputsScrolled(){return this._outputsScrolled}set outputsScrolled(e){this.toggleClass("jp-mod-outputsScrolled",e);this._outputsScrolled=e;if(this.syncScrolled){this.saveScrolledState()}}saveScrolledState(){const{metadata:e}=this.model;const t=e.get("scrolled");if(this.outputsScrolled&&t===true||!this.outputsScrolled&&t===undefined){return}if(this.outputsScrolled){e.set("scrolled",true)}else{e.delete("scrolled")}}loadScrolledState(){const e=this.model.metadata;if(e.get("scrolled")==="auto"){this.outputsScrolled=false}else{this.outputsScrolled=!!e.get("scrolled")}}get syncScrolled(){return this._syncScrolled}set syncScrolled(e){if(this._syncScrolled===e){return}this._syncScrolled=e;if(e){this.loadScrolledState()}}handleInputHidden(e){if(!e&&this._outputWrapper.isHidden){this._outputWrapper.show()}else if(e&&!this._outputWrapper.isHidden&&this._outputHidden){this._outputWrapper.hide()}}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:false})}cloneOutputArea(){return new N.SimplifiedOutputArea({model:this.model.outputs,contentFactory:this.contentFactory,rendermime:this._rendermime})}dispose(){if(this.isDisposed){return}this._output.outputLengthChanged.disconnect(this._outputLengthHandler,this);this._rendermime=null;this._output=null;this._outputWrapper=null;this._outputPlaceholder=null;super.dispose()}onStateChanged(e,t){switch(t.name){case"executionCount":this.setPrompt(`${e.executionCount||""}`);break;case"isDirty":if(e.isDirty){this.addClass(Ct)}else{this.removeClass(Ct)}break;default:break}}onMetadataChanged(e,t){if(this._savingMetadata){return}switch(t.key){case"scrolled":if(this.syncScrolled){this.loadScrolledState()}break;case"collapsed":if(this.syncCollapse){this.loadCollapseState()}break;default:break}super.onMetadataChanged(e,t)}_outputLengthHandler(e,t){const n=t===0?true:false;this.toggleClass(Bt,n)}}(function(e){async function t(e,t,n){var r;const o=e.model;const i=o.value.text;if(!i.trim()||!((r=t.session)===null||r===void 0?void 0:r.kernel)){o.clearExecution();return}const s={cellId:o.id};n=Object.assign(Object.assign(Object.assign({},o.metadata.toJSON()),n),s);const{recordTiming:a}=n;o.clearExecution();e.outputHidden=false;e.setPrompt("*");o.trusted=true;let l;try{const r=N.OutputArea.execute(i,e.outputArea,t,n);if(a){const t=e=>{let t;switch(e.header.msg_type){case"status":t=`status.${e.content.execution_state}`;break;case"execute_input":t="execute_input";break;default:return true}const n=e.header.date||(new Date).toISOString();const r=Object.assign({},o.metadata.get("execution"));r[`iopub.${t}`]=n;o.metadata.set("execution",r);return true};e.outputArea.future.registerMessageHook(t)}else{o.metadata.delete("execution")}l=e.outputArea.future;const s=await r;o.executionCount=s.content.execution_count;if(a){const e=Object.assign({},o.metadata.get("execution"));const t=s.metadata.started;if(t){e["shell.execute_reply.started"]=t}const n=s.header.date;e["shell.execute_reply"]=n||(new Date).toISOString();o.metadata.set("execution",e)}return s}catch(c){if(l&&!e.isDisposed&&e.outputArea.future===l){e.setPrompt("")}throw c}}e.execute=t})(It||(It={}));class Pt extends Tt{handleEvent(e){switch(e.type){case"paste":this._evtPaste(e);break;case"dragenter":e.preventDefault();break;case"dragover":e.preventDefault();break;case"drop":this._evtNativeDrop(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this);t.addEventListener("dragenter",this);t.addEventListener("dragover",this);t.addEventListener("drop",this);t.addEventListener("paste",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("drop",this);t.removeEventListener("dragover",this);t.removeEventListener("dragenter",this);t.removeEventListener("paste",this);t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this)}_evtDragOver(e){const t=(0,r.some)(ot.imageRendererFactory.mimeTypes,(t=>{if(!e.mimeData.hasData(Mt)){return false}const n=e.mimeData.getData(Mt);return n.model.mimetype===t}));if(!t){return}e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction}_evtPaste(e){if(e.clipboardData){const t=e.clipboardData.items;for(let n=0;n<t.length;n++){if(t[n].type==="text/plain"){if(n<t.length-1&&t[n+1].kind==="file"){continue}t[n].getAsString((e=>{var t,n;(n=(t=this.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,e)}))}this._attachFiles(e.clipboardData.items)}}e.preventDefault()}_evtNativeDrop(e){if(e.dataTransfer){this._attachFiles(e.dataTransfer.items)}e.preventDefault()}_evtDrop(e){const t=(0,r.toArray)((0,r.filter)(e.mimeData.types(),(t=>{if(t===Mt){const t=e.mimeData.getData(Mt);return ot.imageRendererFactory.mimeTypes.indexOf(t.model.mimetype)!==-1}return ot.imageRendererFactory.mimeTypes.indexOf(t)!==-1})));if(t.length===0){return}e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}e.dropAction="copy";for(const n of t){if(n===Mt){const{model:t,withContent:n}=e.mimeData.getData(Mt);if(t.type==="file"){const e=this._generateURI(t.name);this.updateCellSourceWithAttachment(t.name,e);void n().then((t=>{this.model.attachments.set(e,{[t.mimetype]:t.content})}))}}else{const t=this._generateURI();this.model.attachments.set(t,{[n]:e.mimeData.getData(n)});this.updateCellSourceWithAttachment(t,t)}}}_attachFiles(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="file"){const e=n.getAsFile();if(e){this._attachFile(e)}}}}_attachFile(e){const t=new FileReader;t.onload=n=>{const{href:r,protocol:o}=rt.URLExt.parse(t.result);if(o!=="data:"){return}const i=/([\w+\/\+]+)?(?:;(charset=[\w\d-]*|base64))?,(.*)/;const s=i.exec(r);if(!s||s.length!==4){return}const a=s[1];const l=s[3];const c={[a]:l};const d=this._generateURI(e.name);if(a.startsWith("image/")){this.model.attachments.set(d,c);this.updateCellSourceWithAttachment(e.name,d)}};t.onerror=t=>{console.error(`Failed to attach ${e.name}`+t)};t.readAsDataURL(e)}_generateURI(e=""){const t=e.lastIndexOf(".");return t!==-1?R.UUID.uuid4().concat(e.substring(t)):R.UUID.uuid4()}}class Rt extends Pt{constructor(e){var t,n,r;super(e);this._toggleCollapsedSignal=new L.Signal(this);this._renderer=null;this._rendered=true;this._prevText="";this._ready=new R.PromiseDelegate;this._showEditorForReadOnlyMarkdown=true;this.addClass(_t);this._rendermime=e.rendermime.clone({resolver:new O.AttachmentsResolver({parent:(t=e.rendermime.resolver)!==null&&t!==void 0?t:undefined,model:this.model.attachments})});this.editor.setOption("handlePaste",false);this._headingCollapsed=(n=this.model.metadata.get(Et))!==null&&n!==void 0?n:false;this._monitor=new rt.ActivityMonitor({signal:this.model.contentChanged,timeout:Dt});this._monitor.activityStopped.connect((()=>{if(this._rendered){this.update()}}),this);void this._updateRenderedInput().then((()=>{this._ready.resolve(void 0)}));this.renderCollapseButtons(this._renderer);this.renderInput(this._renderer);this._showEditorForReadOnlyMarkdown=(r=e.showEditorForReadOnlyMarkdown)!==null&&r!==void 0?r:Rt.defaultShowEditorForReadOnlyMarkdown}get ready(){return this._ready.promise}get headingInfo(){let e=this.model.value.text;const t=Ye.lexer(e);let n;for(n of t){if(n.type==="heading"){return{text:n.text,level:n.depth}}else if(n.type==="html"){let e=n.raw.match(/<h([1-6])(.*?)>(.*?)<\/h\1>/);if(e===null||e===void 0?void 0:e[3]){return{text:e[3],level:parseInt(e[1])}}return{text:"",level:-1}}}return{text:"",level:-1}}get headingCollapsed(){return this._headingCollapsed}set headingCollapsed(e){this._headingCollapsed=e;if(e){this.model.metadata.set(Et,e)}else if(this.model.metadata.has(Et)){this.model.metadata.delete(Et)}const t=this.inputArea.promptNode.getElementsByClassName(wt)[0];if(t){if(e){t.classList.add("jp-mod-collapsed")}else{t.classList.remove("jp-mod-collapsed")}}this.renderCollapseButtons(this._renderer)}get numberChildNodes(){return this._numberChildNodes}set numberChildNodes(e){this._numberChildNodes=e;this.renderCollapseButtons(this._renderer)}get toggleCollapsedSignal(){return this._toggleCollapsedSignal}get rendered(){return this._rendered}set rendered(e){if(this.readOnly&&this._showEditorForReadOnlyMarkdown===false){e=true}if(e===this._rendered){return}this._rendered=e;this._handleRendered();if(!this._rendered){this.editor.refresh()}this._displayChanged.emit()}get showEditorForReadOnly(){return this._showEditorForReadOnlyMarkdown}set showEditorForReadOnly(e){this._showEditorForReadOnlyMarkdown=e;if(e===false){this.rendered=true}}maybeCreateCollapseButton(){if(this.headingInfo.level>0&&this.inputArea.promptNode.getElementsByClassName(wt).length==0){let e=this.inputArea.promptNode.appendChild(document.createElement("button"));e.className=`jp-Button ${wt}`;e.setAttribute("data-heading-level",this.headingInfo.level.toString());if(this._headingCollapsed){e.classList.add("jp-mod-collapsed")}else{e.classList.remove("jp-mod-collapsed")}e.onclick=e=>{this.headingCollapsed=!this.headingCollapsed;this._toggleCollapsedSignal.emit(this._headingCollapsed)}}}maybeCreateOrUpdateExpandButton(){var e,t;const n=this.node.getElementsByClassName(xt);if(this.headingCollapsed&&n.length===0&&this._numberChildNodes>0){const e=document.createElement("button");e.className=`bp3-button bp3-minimal jp-Button ${xt}`;J.addIcon.render(e);const t=document.createElement("div");t.nodeValue=`${this._numberChildNodes} cell${this._numberChildNodes>1?"s":""} hidden`;e.appendChild(t);e.onclick=()=>{this.headingCollapsed=false;this._toggleCollapsedSignal.emit(this._headingCollapsed)};this.node.appendChild(e)}else if(((t=(e=n===null||n===void 0?void 0:n[0])===null||e===void 0?void 0:e.childNodes)===null||t===void 0?void 0:t.length)>1){if(this._headingCollapsed){n[0].childNodes[1].textContent=`${this._numberChildNodes} cell${this._numberChildNodes>1?"s":""} hidden`}else{for(const e of n){this.node.removeChild(e)}}}}renderCollapseButtons(e){this.node.classList.toggle(Et,this._headingCollapsed);this.maybeCreateCollapseButton();this.maybeCreateOrUpdateExpandButton()}renderInput(e){this.addClass(kt);this.renderCollapseButtons(e);this.inputArea.renderInput(e)}showEditor(){this.removeClass(kt);this.inputArea.showEditor()}onUpdateRequest(e){this._handleRendered();super.onUpdateRequest(e)}updateCellSourceWithAttachment(e,t){var n,r;const o=`![${e}](attachment:${t!==null&&t!==void 0?t:e})`;(r=(n=this.editor).replaceSelection)===null||r===void 0?void 0:r.call(n,o)}_handleRendered(){if(!this._rendered){this.showEditor()}else{void this._updateRenderedInput();this.renderInput(this._renderer)}}_updateRenderedInput(){const e=this.model;const t=e&&e.value.text||St;if(t!==this._prevText){const e=new ot.MimeModel({data:{"text/markdown":t}});if(!this._renderer){this._renderer=this._rendermime.createRenderer("text/markdown");this._renderer.addClass(yt)}this._prevText=t;return this._renderer.renderModel(e)}return Promise.resolve(void 0)}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,rendermime:this._rendermime,placeholder:false})}}(function(e){e.defaultShowEditorForReadOnlyMarkdown=true})(Rt||(Rt={}));class Lt extends Tt{constructor(e){super(e);this.addClass(jt)}clone(){const e=this.constructor;return new e({model:this.model,contentFactory:this.contentFactory,placeholder:false})}}},5956:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(22748);var a=n(49914);var l=n(37935);var c=n(98896);var d=n(59240);var u=n(5333);var h=n(93379);var p=n.n(h);var m=n(90346);var g={};g.insert="head";g.singleton=false;var f=p()(m.Z,g);const A=m.Z.locals||{}},70439:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>d});var r=n(58267);var o=n.n(r);var i=n(22032);var s=n.n(i);var a=n(59768);var l=n.n(a);const c={id:"@jupyterlab/celltags",autoStart:true,requires:[r.INotebookTools,r.INotebookTracker,a.ITranslator],activate:(e,t,n,r)=>{const o=new i.TagTool(n,e,r);t.addItem({tool:o,rank:1.6})}};const d=c},89131:(e,t,n)=>{"use strict";var r=n(90516);var o=n(88164);var i=n(32902);var s=n(34849);var a=n(5956);var l=n(93379);var c=n.n(l);var d=n(96510);var u={};u.insert="head";u.singleton=false;var h=c()(d.Z,u);const p=d.Z.locals||{}},1061:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AddWidget:()=>s,TagTool:()=>d,TagWidget:()=>c});var r=n(59768);var o=n(25903);var i=n(700);class s extends i.Widget{constructor(e){super();this.parent=null;this.input=document.createElement("input");this.translator=e||r.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass("tag");this.editing=false;this.buildTag()}buildTag(){const e=this.input||document.createElement("input");e.value=this._trans.__("Add Tag");e.contentEditable="true";e.className="add-tag";e.style.width="49px";this.input=e;const t=document.createElement("div");t.className="tag-holder";t.appendChild(e);const n=o.addIcon.element({tag:"span",elementPosition:"center",height:"18px",width:"18px",marginLeft:"3px",marginRight:"-5px"});this.addClass("unapplied-tag");t.appendChild(n);this.node.appendChild(t)}onAfterAttach(){this.node.addEventListener("mousedown",this);this.input.addEventListener("keydown",this);this.input.addEventListener("focus",this);this.input.addEventListener("blur",this)}onBeforeDetach(){this.node.removeEventListener("mousedown",this);this.input.removeEventListener("keydown",this);this.input.removeEventListener("focus",this);this.input.removeEventListener("blur",this)}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"keydown":this._evtKeyDown(e);break;case"blur":this._evtBlur();break;case"focus":this._evtFocus();break;default:break}}_evtMouseDown(e){if(!this.editing){this.editing=true;this.input.value="";this.input.focus()}else if(e.target!==this.input){if(this.input.value!==""){const e=this.input.value;this.parent.addTag(e);this.input.blur();this._evtBlur()}}e.preventDefault()}_evtFocus(){if(!this.editing){this.input.blur()}}_evtKeyDown(e){const t=document.createElement("span");t.className="add-tag";t.innerHTML=this.input.value;document.body.appendChild(t);this.input.style.width=t.getBoundingClientRect().width+8+"px";document.body.removeChild(t);if(e.keyCode===13){const e=this.input.value;this.parent.addTag(e);this.input.blur();this._evtBlur()}}_evtBlur(){if(this.editing){this.editing=false;this.input.value=this._trans.__("Add Tag");this.input.style.width="49px"}}}var a=n(58267);var l=n(54522);class c extends i.Widget{constructor(e){super();this.parent=null;this.applied=true;this.name=e;this.addClass("tag");this.buildTag()}buildTag(){const e=document.createElement("span");e.textContent=this.name;e.style.textOverflow="ellipsis";const t=document.createElement("div");t.className="tag-holder";t.appendChild(e);const n=o.checkIcon.element({tag:"span",elementPosition:"center",height:"18px",width:"18px",marginLeft:"5px",marginRight:"-3px"});if(this.applied){this.addClass("applied-tag")}else{this.addClass("unapplied-tag");n.style.display="none"}t.appendChild(n);this.node.appendChild(t)}onAfterAttach(){this.node.addEventListener("mousedown",this);this.node.addEventListener("mouseover",this);this.node.addEventListener("mouseout",this)}onBeforeDetach(){this.node.removeEventListener("mousedown",this);this.node.removeEventListener("mouseover",this);this.node.removeEventListener("mouseout",this)}handleEvent(e){switch(e.type){case"mousedown":this._evtClick();break;case"mouseover":this._evtMouseOver();break;case"mouseout":this._evtMouseOut();break;default:break}}onUpdateRequest(){var e;const t=(e=this.parent)===null||e===void 0?void 0:e.checkApplied(this.name);if(t!==this.applied){this.toggleApplied()}}toggleApplied(){var e,t;if(this.applied){this.removeClass("applied-tag");((e=this.node.firstChild)===null||e===void 0?void 0:e.lastChild).style.display="none";this.addClass("unapplied-tag")}else{this.removeClass("unapplied-tag");((t=this.node.firstChild)===null||t===void 0?void 0:t.lastChild).style.display="inline-block";this.addClass("applied-tag")}this.applied=!this.applied}_evtClick(){var e,t;if(this.applied){(e=this.parent)===null||e===void 0?void 0:e.removeTag(this.name)}else{(t=this.parent)===null||t===void 0?void 0:t.addTag(this.name)}this.toggleApplied()}_evtMouseOver(){this.node.classList.add("tag-hover")}_evtMouseOut(){this.node.classList.remove("tag-hover")}}class d extends a.NotebookTools.Tool{constructor(e,t,n){super();this.tagList=[];this.label=false;t;this.translator=n||r.nullTranslator;this._trans=this.translator.load("jupyterlab");this.tracker=e;this.layout=new i.PanelLayout;this.createTagInput();this.addClass("jp-TagTool")}createTagInput(){const e=this.layout;const t=new s(this.translator);t.id="add-tag";e.insertWidget(0,t)}checkApplied(e){var t;const n=(t=this.tracker)===null||t===void 0?void 0:t.activeCell;if(n){const t=n.model.metadata.get("tags");if(t){return t.includes(e)}}return false}addTag(e){var t,n;const r=(t=this.tracker)===null||t===void 0?void 0:t.activeCell;if(r){const t=[...(n=r.model.metadata.get("tags"))!==null&&n!==void 0?n:[]];let o=e.split(/[,\s]+/);o=o.filter((e=>e!==""&&!t.includes(e)));r.model.metadata.set("tags",t.concat(o));this.refreshTags();this.loadActiveTags()}}removeTag(e){var t,n;const r=(t=this.tracker)===null||t===void 0?void 0:t.activeCell;if(r){const t=[...(n=r.model.metadata.get("tags"))!==null&&n!==void 0?n:[]];let o=t.filter((t=>t!==e));r.model.metadata.set("tags",o);if(o.length===0){r.model.metadata.delete("tags")}this.refreshTags();this.loadActiveTags()}}loadActiveTags(){const e=this.layout;for(const t of e.widgets){t.update()}}pullTags(){var e,t,n;const r=(e=this.tracker)===null||e===void 0?void 0:e.currentWidget;const o=(n=(t=r===null||r===void 0?void 0:r.model)===null||t===void 0?void 0:t.cells)!==null&&n!==void 0?n:[];const i=(0,l.reduce)(o,((e,t)=>{var n;const r=(n=t.metadata.get("tags"))!==null&&n!==void 0?n:[];return[...e,...r]}),[]);this.tagList=[...new Set(i)].filter((e=>e!==""))}refreshTags(){this.pullTags();const e=this.layout;const t=e.widgets.filter((e=>e.id!=="add-tag"));t.forEach((e=>{if(!this.tagList.includes(e.name)){e.dispose()}}));const n=t.map((e=>e.name));this.tagList.forEach((t=>{if(!n.includes(t)){const n=e.widgets.length-1;e.insertWidget(n,new c(t))}}))}validateTags(e,t){t=t.filter((e=>typeof e==="string"));t=(0,l.reduce)(t,((e,t)=>[...e,...t.split(/[,\s]+/)]),[]);const n=[...new Set(t)].filter((e=>e!==""));e.model.metadata.set("tags",n);this.refreshTags();this.loadActiveTags()}onActiveCellChanged(){this.loadActiveTags()}onAfterShow(){this.refreshTags();this.loadActiveTags()}onAfterAttach(){if(!this.label){const e=document.createElement("label");e.textContent=this._trans.__("Cell Tags");e.className="tag-label";this.parent.node.insertBefore(e,this.node);this.label=true}if(this.tracker.currentWidget){void this.tracker.currentWidget.context.ready.then((()=>{this.refreshTags();this.loadActiveTags()}));this.tracker.currentWidget.model.cells.changed.connect((()=>{this.refreshTags();this.loadActiveTags()}));this.tracker.currentWidget.content.activeCellChanged.connect((()=>{this.refreshTags();this.loadActiveTags()}))}this.tracker.currentChanged.connect((()=>{this.refreshTags();this.loadActiveTags()}))}onActiveCellMetadataChanged(){const e=this.tracker.activeCell.model.metadata.get("tags");let t=[];if(e){if(typeof e==="string"){t.push(e)}else{t=e}}this.validateTags(this.tracker.activeCell,t)}}},62821:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeEditor:()=>a,CodeEditorWrapper:()=>_,IEditorMimeTypeService:()=>E,IEditorServices:()=>w,JSONEditor:()=>f});var r=n(82714);var o=n(73967);var i=n(18987);const s=o.createMutex();var a;(function(e){e.defaultSelectionStyle={className:"",displayName:"",color:"black"};class t{constructor(e){this._isDisposed=false;this._mimeTypeChanged=new i.Signal(this);this._sharedModelSwitched=new i.Signal(this);e=e||{};if(e.modelDB){this.modelDB=e.modelDB}else{this.modelDB=new r.ModelDB}this.sharedModel=o.createStandaloneCell(this.type,e.id);this.sharedModel.changed.connect(this._onSharedModelChanged,this);const t=this.modelDB.createString("value");t.changed.connect(this._onModelDBValueChanged,this);t.text=t.text||e.value||"";const n=this.modelDB.createValue("mimeType");n.changed.connect(this._onModelDBMimeTypeChanged,this);n.set(e.mimeType||"text/plain");this.modelDB.createMap("selections")}switchSharedModel(e,t){if(t){this.value.text=e.getSource()}this.sharedModel.changed.disconnect(this._onSharedModelChanged,this);this.sharedModel=e;this.sharedModel.changed.connect(this._onSharedModelChanged,this);this._sharedModelSwitched.emit(true)}_onSharedModelChanged(e,t){s((()=>{if(t.sourceChange){const e=this.modelDB.get("value");let n=0;t.sourceChange.forEach((t=>{if(t.insert!=null){e.insert(n,t.insert);n+=t.insert.length}else if(t.delete!=null){e.remove(n,n+t.delete)}else if(t.retain!=null){n+=t.retain}}))}}))}_onModelDBValueChanged(e,t){s((()=>{this.sharedModel.transact((()=>{switch(t.type){case"insert":this.sharedModel.updateSource(t.start,t.start,t.value);break;case"remove":this.sharedModel.updateSource(t.start,t.end);break;default:this.sharedModel.setSource(e.text);break}}))}))}get type(){return"code"}get mimeTypeChanged(){return this._mimeTypeChanged}get sharedModelSwitched(){return this._sharedModelSwitched}get value(){return this.modelDB.get("value")}get selections(){return this.modelDB.get("selections")}get mimeType(){return this.modelDB.getValue("mimeType")}set mimeType(e){const t=this.mimeType;if(t===e){return}this.modelDB.setValue("mimeType",e)}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this)}_onModelDBMimeTypeChanged(e,t){this._mimeTypeChanged.emit({name:"mimeType",oldValue:t.oldValue,newValue:t.newValue})}}e.Model=t;e.defaultConfig={autoClosingBrackets:false,codeFolding:false,cursorBlinkRate:530,fontFamily:null,fontSize:null,handlePaste:true,insertSpaces:true,lineHeight:null,lineNumbers:false,lineWrap:"on",matchBrackets:true,readOnly:false,tabSize:4,rulers:[],showTrailingSpace:false,wordWrapColumn:80}})(a||(a={}));var l=n(59768);var c=n(25903);var d=n(91100);var u=n(700);const h="jp-JSONEditor";const p="jp-mod-error";const m="jp-JSONEditor-host";const g="jp-JSONEditor-header";class f extends u.Widget{constructor(e){super();this._dataDirty=false;this._inputDirty=false;this._source=null;this._originalValue=d.JSONExt.emptyObject;this._changeGuard=false;this.translator=e.translator||l.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(h);this.headerNode=document.createElement("div");this.headerNode.className=g;this.revertButtonNode=c.undoIcon.element({tag:"span",title:this._trans.__("Revert changes to data")});this.commitButtonNode=c.checkIcon.element({tag:"span",title:this._trans.__("Commit changes to data"),marginLeft:"8px"});this.editorHostNode=document.createElement("div");this.editorHostNode.className=m;this.headerNode.appendChild(this.revertButtonNode);this.headerNode.appendChild(this.commitButtonNode);this.node.appendChild(this.headerNode);this.node.appendChild(this.editorHostNode);const t=new a.Model;t.value.text=this._trans.__("No data!");t.mimeType="application/json";t.value.changed.connect(this._onValueChanged,this);this.model=t;this.editor=e.editorFactory({host:this.editorHostNode,model:t});this.editor.setOption("readOnly",true)}get source(){return this._source}set source(e){if(this._source===e){return}if(this._source){this._source.changed.disconnect(this._onSourceChanged,this)}this._source=e;this.editor.setOption("readOnly",e===null);if(e){e.changed.connect(this._onSourceChanged,this)}this._setValue()}get isDirty(){return this._dataDirty||this._inputDirty}handleEvent(e){switch(e.type){case"blur":this._evtBlur(e);break;case"click":this._evtClick(e);break;default:break}}onAfterAttach(e){const t=this.editorHostNode;t.addEventListener("blur",this,true);t.addEventListener("click",this,true);this.revertButtonNode.hidden=true;this.commitButtonNode.hidden=true;this.headerNode.addEventListener("click",this);if(this.isVisible){this.update()}}onAfterShow(e){this.update()}onUpdateRequest(e){this.editor.refresh()}onBeforeDetach(e){const t=this.editorHostNode;t.removeEventListener("blur",this,true);t.removeEventListener("click",this,true);this.headerNode.removeEventListener("click",this)}_onSourceChanged(e,t){if(this._changeGuard){return}if(this._inputDirty||this.editor.hasFocus()){this._dataDirty=true;return}this._setValue()}_onValueChanged(){let e=true;try{const e=JSON.parse(this.editor.model.value.text);this.removeClass(p);this._inputDirty=!this._changeGuard&&!d.JSONExt.deepEqual(e,this._originalValue)}catch(t){this.addClass(p);this._inputDirty=true;e=false}this.revertButtonNode.hidden=!this._inputDirty;this.commitButtonNode.hidden=!e||!this._inputDirty}_evtBlur(e){if(!this._inputDirty&&this._dataDirty){this._setValue()}}_evtClick(e){const t=e.target;if(this.revertButtonNode.contains(t)){this._setValue()}else if(this.commitButtonNode.contains(t)){if(!this.commitButtonNode.hidden&&!this.hasClass(p)){this._changeGuard=true;this._mergeContent();this._changeGuard=false;this._setValue()}}else if(this.editorHostNode.contains(t)){this.editor.focus()}}_mergeContent(){const e=this.editor.model;const t=this._originalValue;const n=JSON.parse(e.value.text);const r=this.source;if(!r){return}for(const o in n){if(!d.JSONExt.deepEqual(n[o],t[o]||null)){r.set(o,n[o])}}for(const o in t){if(!(o in n)){r.delete(o)}}}_setValue(){this._dataDirty=false;this._inputDirty=false;this.revertButtonNode.hidden=true;this.commitButtonNode.hidden=true;this.removeClass(p);const e=this.editor.model;const t=this._source?this._source.toJSON():{};this._changeGuard=true;if(t===void 0){e.value.text=this._trans.__("No data!");this._originalValue=d.JSONExt.emptyObject}else{const n=JSON.stringify(t,null,4);e.value.text=n;this._originalValue=t;if(n.length>1&&n[0]==="{"){this.editor.setCursorPosition({line:0,column:1})}}this.editor.refresh();this._changeGuard=false;this.commitButtonNode.hidden=true;this.revertButtonNode.hidden=true}}const A="jp-mod-has-primary-selection";const v="jp-mod-in-leading-whitespace";const C="jp-mod-dropTarget";const b=/^\s+$/;class _ extends u.Widget{constructor(e){super();this._hasRefreshedSinceAttach=false;const t=this.editor=e.factory({host:this.node,model:e.model,uuid:e.uuid,config:e.config,selectionStyle:e.selectionStyle});t.model.selections.changed.connect(this._onSelectionsChanged,this);this._updateOnShow=e.updateOnShow!==false}get model(){return this.editor.model}dispose(){if(this.isDisposed){return}super.dispose();this.editor.dispose()}handleEvent(e){switch(e.type){case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}onActivateRequest(e){this.editor.focus()}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("lm-dragenter",this);t.addEventListener("lm-dragleave",this);t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this);this._hasRefreshedSinceAttach=false;if(this.isVisible){this.update()}}onBeforeDetach(e){const t=this.node;t.removeEventListener("lm-dragenter",this);t.removeEventListener("lm-dragleave",this);t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this)}onAfterShow(e){if(this._updateOnShow||!this._hasRefreshedSinceAttach){this.update()}}onResize(e){if(e.width>=0&&e.height>=0){this.editor.setSize(e)}else if(this.isVisible){this.editor.resizeToFit()}}onUpdateRequest(e){if(this.isVisible){this._hasRefreshedSinceAttach=true;this.editor.refresh()}}_onSelectionsChanged(){const{start:e,end:t}=this.editor.getSelection();if(e.column!==t.column||e.line!==t.line){this.addClass(A);this.removeClass(v)}else{this.removeClass(A);if(this.editor.getLine(t.line).slice(0,t.column).match(b)){this.addClass(v)}else{this.removeClass(v)}}}_evtDragEnter(e){if(this.editor.getOption("readOnly")===true){return}const t=y.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation();this.addClass("jp-mod-dropTarget")}_evtDragLeave(e){this.removeClass(C);if(this.editor.getOption("readOnly")===true){return}const t=y.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation()}_evtDragOver(e){this.removeClass(C);if(this.editor.getOption("readOnly")===true){return}const t=y.findTextData(e.mimeData);if(t===undefined){return}e.preventDefault();e.stopPropagation();e.dropAction="copy";this.addClass(C)}_evtDrop(e){if(this.editor.getOption("readOnly")===true){return}const t=y.findTextData(e.mimeData);if(t===undefined){return}const n={top:e.y,bottom:e.y,left:e.x,right:e.x,x:e.x,y:e.y,width:0,height:0};const r=this.editor.getPositionForCoordinate(n);if(r===null){return}this.removeClass(C);e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}const o=this.editor.getOffsetAt(r);this.model.value.insert(o,t)}}var y;(function(e){function t(e){const t=e.types();const n=t.find((e=>e.indexOf("text")===0));if(n===undefined){return undefined}return e.getData(n)}e.findTextData=t})(y||(y={}));var E;(function(e){e.defaultMimeType="text/plain"})(E||(E={}));const w=new d.Token("@jupyterlab/codeeditor:IEditorServices")},49914:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(22748);var s=n(93379);var a=n.n(s);var l=n(46832);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},40725:(e,t,n)=>{"use strict";n.r(t);n.d(t,{editorSyntaxStatus:()=>x,default:()=>k});var r=n(97577);var o=n.n(r);var i=n(66934);var s=n.n(i);var a=n(41776);var l=n.n(a);var c=n(48767);var d=n.n(c);var u=n(73704);var h=n.n(u);var p=n(42014);var m=n.n(p);var g=n(85913);var f=n.n(g);var A=n(59768);var v=n.n(A);var C=n(57886);var b=n.n(C);var _;(function(e){e.changeKeyMap="codemirror:change-keymap";e.changeTheme="codemirror:change-theme";e.changeMode="codemirror:change-mode";e.find="codemirror:find";e.goToLine="codemirror:go-to-line"})(_||(_={}));const y={id:"@jupyterlab/codemirror-extension:codemirror",provides:a.ICodeMirror,activate:M};const E={id:"@jupyterlab/codemirror-extension:services",provides:i.IEditorServices,activate:S};const w={id:"@jupyterlab/codemirror-extension:commands",requires:[c.IEditorTracker,p.ISettingRegistry,A.ITranslator,a.ICodeMirror],optional:[u.IMainMenu],activate:T,autoStart:true};const x={id:"@jupyterlab/codemirror-extension:editor-syntax-status",autoStart:true,requires:[c.IEditorTracker,r.ILabShell,A.ITranslator],optional:[g.IStatusBar],activate:(e,t,n,r,o)=>{if(!o){return}const i=new a.EditorSyntaxStatus({commands:e.commands,translator:r});n.currentChanged.connect((()=>{const e=n.currentWidget;if(e&&t.has(e)&&i.model){i.model.editor=e.content.editor}}));o.registerStatusItem("@jupyterlab/codemirror-extension:editor-syntax-status",{item:i,align:"left",rank:0,isActive:()=>!!n.currentWidget&&!!t.currentWidget&&n.currentWidget===t.currentWidget})}};const j=[w,E,x,y];const k=j;const B=w.id;function S(e){b().prototype.save=()=>{void e.commands.execute("docmanager:save")};return a.editorServices}class D{get CodeMirror(){return b()}async ensureVimKeymap(){if(!("Vim"in b())){await Promise.all([n.e(4631),n.e(7755),n.e(2585)]).then(n.t.bind(n,82585,23))}}}function M(e){return new D}function T(e,t,r,o,i,s){var l;const c=o.load("jupyterlab");const{commands:d,restored:u}=e;let{theme:h,keyMap:p,scrollPastEnd:m,styleActiveLine:g,styleSelectedText:f,selectionPointer:A,lineWiseCopyCut:v}=a.CodeMirrorEditor.defaultConfig;async function C(e){var t,r,o,s,a;p=e.get("keyMap").composite||p;if(p==="vim"){await i.ensureVimKeymap()}h=e.get("theme").composite||h;if(h!=="jupyter"&&h!=="default"){const e=h==="solarized light"||h==="solarized dark"?"solarized":h;await n(23496)(`./${e}.css`)}m=(t=e.get("scrollPastEnd").composite)!==null&&t!==void 0?t:m;g=(r=e.get("styleActiveLine").composite)!==null&&r!==void 0?r:g;f=(o=e.get("styleSelectedText").composite)!==null&&o!==void 0?o:f;A=(s=e.get("selectionPointer").composite)!==null&&s!==void 0?s:A;v=(a=e.get("lineWiseCopyCut").composite)!==null&&a!==void 0?a:v}function b(){const e={keyMap:p,theme:h,scrollPastEnd:m,styleActiveLine:g,styleSelectedText:f,selectionPointer:A,lineWiseCopyCut:v};t.forEach((t=>{if(t.content.editor instanceof a.CodeMirrorEditor){t.content.editor.setOptions(e)}}))}Promise.all([r.load(B),u]).then((async([e])=>{await C(e);b();e.changed.connect((async()=>{await C(e);b()}))})).catch((e=>{console.error(e.message);b()}));t.widgetAdded.connect(((e,t)=>{const n={keyMap:p,theme:h,scrollPastEnd:m,styleActiveLine:g,styleSelectedText:f,selectionPointer:A,lineWiseCopyCut:v};if(t.content.editor instanceof a.CodeMirrorEditor){t.content.editor.setOptions(n)}}));function y(){return t.currentWidget!==null&&t.currentWidget===e.shell.currentWidget}d.addCommand(_.changeTheme,{label:e=>{var t;return e.theme==="default"?c.__("codemirror"):c.__((t=e.theme)!==null&&t!==void 0?t:h)},execute:e=>{var t;const n="theme";const o=h=(t=e["theme"])!==null&&t!==void 0?t:h;return r.set(B,n,o).catch((e=>{console.error(`Failed to set ${B}:${n} - ${e.message}`)}))},isToggled:e=>e["theme"]===h});d.addCommand(_.changeKeyMap,{label:e=>{var t;const n=(t=e["keyMap"])!==null&&t!==void 0?t:p;return n==="sublime"?c.__("Sublime Text"):c.__(n)},execute:e=>{var t;const n="keyMap";const o=p=(t=e["keyMap"])!==null&&t!==void 0?t:p;return r.set(B,n,o).catch((e=>{console.error(`Failed to set ${B}:${n} - ${e.message}`)}))},isToggled:e=>e["keyMap"]===p});d.addCommand(_.find,{label:c.__("Find"),execute:()=>{const e=t.currentWidget;if(!e){return}const n=e.content.editor;n.execCommand("find")},isEnabled:y});d.addCommand(_.goToLine,{label:c.__("Go to Line"),execute:e=>{const n=t.currentWidget;if(!n){return}const r=e["line"];const o=e["column"];const i=n.content.editor;if(r!==undefined||o!==undefined){i.setCursorPosition({line:(r!==null&&r!==void 0?r:1)-1,column:(o!==null&&o!==void 0?o:1)-1})}else{i.execCommand("jumpToLine")}i.focus()},isEnabled:y});d.addCommand(_.changeMode,{label:e=>e["name"],execute:e=>{const n=e["name"];const r=t.currentWidget;if(n&&r){const e=a.Mode.findByName(n);if(e){r.content.model.mimeType=e.mime}}},isEnabled:y,isToggled:e=>{const n=t.currentWidget;if(!n){return false}const r=n.content.model.mimeType;const o=a.Mode.findByMIME(r);const i=o&&o.name;return e["name"]===i}});if(s){const e=(l=s.viewMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-view-codemirror-theme"})))===null||l===void 0?void 0:l.submenu;if(e){a.Mode.getModeInfo().sort(((e,t)=>{const n=e.name||"";const r=t.name||"";return n.localeCompare(r)})).forEach((t=>{if(t.mode.indexOf("brainf")===0){return}e.addItem({command:_.changeMode,args:Object.assign({},t)})}))}s.editMenu.goToLiners.add({tracker:t,goToLine:e=>{const t=e.content.editor;t.execCommand("jumpToLine")}})}}},85745:(e,t,n)=>{"use strict";var r=n(49914);var o=n(98328);var i=n(37935);var s=n(94683);var a=n(90516);var l=n(33379);var c=n(74518)},59108:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeMirrorEditor:()=>ce,CodeMirrorEditorFactory:()=>ue,CodeMirrorMimeTypeService:()=>he,EditorSyntaxStatus:()=>ve,ICodeMirror:()=>Ce,Mode:()=>X,editorServices:()=>be});var r=n(59768);var o=n(3378);var i=n(66934);var s=n(54522);var a=n(91100);var l=n(64782);var c=n(6625);var d=n(18987);var u=n(57886);var h=n.n(u);var p=n(14504);var m=n(80511);var g=n(82801);var f=n(4328);var A=n(35688);var v=n(9898);var C=n(88657);var b=n(89700);var _=n(86808);var y=n(62764);var E=n(4786);var w=n(40790);var x=n(75615);var j=n(14568);var k=n(81699);var B=n(32095);var S=n(20017);var D=n(64020);var M=n(13656);var T=n(68216);var I=n(73986);var P=n(23412);var R=n(95191);var L=n(69442);var O=n(27165);var z=n(99762);var N=n(36629);var F=n(96876);var H=n(71548);var W=n(68059);var V=n(49047);var q=n(52539);var U=n(85420);var $=n(31149);var K=n(54086);var Y=n(5321);h().defineMode("ipython",((e,t)=>{const n={};for(const r in t){if(t.hasOwnProperty(r)){n[r]=t[r]}}n.name="python";n.singleOperators=new RegExp("^[\\+\\-\\*/%&|@\\^~<>!\\?]");n.identifiers=new RegExp("^[_A-Za-z-][_A-Za-z0-9-]*");return h().getMode(e,n)}),"python");h().defineMIME("text/x-ipython","ipython");h().modeInfo.push({ext:[],mime:"text/x-ipython",mode:"ipython",name:"ipython"});var G=n(87093);var Z=n(42425);var J=n(80785);h().defineMode("ipythongfm",((e,t)=>{const n=h().getMode(e,{name:"gfm",tokenTypeOverrides:{list3:"string-2"}});const r=h().getMode(e,{name:"stex",inMathMode:true});return h().multiplexingMode(n,{open:"<code>",close:"</code>",mode:n,parseDelimiters:true},{open:"<pre>",close:"</pre>",mode:n,parseDelimiters:true},{open:"```",close:"```",mode:n,parseDelimiters:true},{open:"`",close:"`",mode:n,parseDelimiters:true},{open:"$$",close:"$$",mode:r,delimStyle:"delimit"},{open:/\$(?=.*\$)/,close:"$",mode:r,delimStyle:"delimit"},{open:"\\(",close:"\\)",mode:r,delimStyle:"delimit"},{open:"\\[",close:"\\]",mode:r,delimStyle:"delimit"})}),"gfm");h().defineMIME("text/x-ipythongfm","ipythongfm");h().modeInfo.push({ext:[],mime:"text/x-ipythongfm",mode:"ipythongfm",name:"ipythongfm"});var X;(function(e){const t=[{loader:async e=>h().modes.hasOwnProperty(e.mode),rank:0},{loader:function(e){return new Promise(((t,r)=>{Promise.all([n.e(6064),n.e(3087)]).then((function(){var r=[n(83087)(`./${e.mode}/${e.mode}.js`)];(function(){t(true)}).apply(null,r)})).catch(n.oe)}))},rank:99}];function r(){return h().modeInfo}e.getModeInfo=r;function o(e,t,n){h().runMode(e,t,n)}e.run=o;async function a(e){const n=c(e);for(const r of t){if(await r.loader(n)){return n}}return null}e.ensure=a;function l(e,n){const r={loader:e,rank:n};const o=s.ArrayExt.upperBound(t,r,Q.itemCmp);s.ArrayExt.insert(t,o,r)}e.addSpecLoader=l;function c(e){var t;const n=typeof e==="string"?e:e.mode||e.name;const r=typeof e!=="string"?e.mime:n;const o=typeof e!=="string"?(t=e.ext)!==null&&t!==void 0?t:[]:[];return h().findModeByName(n||"")||h().findModeByMIME(r||"")||m(o)||h().findModeByMIME(i.IEditorMimeTypeService.defaultMimeType)||h().findModeByMIME("text/plain")}e.findBest=c;function d(e){return h().findModeByMIME(e)}e.findByMIME=d;function u(e){return h().findModeByName(e)}e.findByName=u;function p(e){const t=L.PathExt.basename(e);return h().findModeByFileName(t)}e.findByFileName=p;function m(e){if(typeof e==="string"){return h().findModeByExtension(e)}for(let t=0;t<e.length;t++){const n=h().findModeByExtension(e[t]);if(n){return n}}return null}e.findByExtension=m})(X||(X={}));var Q;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t})(Q||(Q={}));var ee=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};const te="jp-CodeMirrorEditor";const ne="jp-mod-readOnly";const re="jp-CollaboratorCursor";const oe="jp-CollaboratorCursor-hover";const ie=38;const se=40;const ae=1e3;const le=true;class ce{constructor(e){var t;this.edgeRequested=new d.Signal(this);this.selectionMarkers={};this._keydownHandlers=new Array;this._changeGuard=false;this._uuid="";this._needsRefresh=false;this._isDisposed=false;this._lastChange=null;const n=this.host=e.host;this.translator=e.translator||r.nullTranslator;this._trans=this.translator.load("jupyterlab");n.classList.add(te);n.classList.add("jp-Editor");n.addEventListener("focus",this,true);n.addEventListener("blur",this,true);n.addEventListener("scroll",this,true);this._uuid=e.uuid||a.UUID.uuid4();const o=e.selectionStyle||{};this._selectionStyle=Object.assign(Object.assign({},i.CodeEditor.defaultSelectionStyle),o);const l=this._model=e.model;const u=e.config||{};const p=this._config=Object.assign(Object.assign({},ce.defaultConfig),u);const m=this._editor=de.createEditor(n,p);this._initializeEditorBinding();this.model.sharedModelSwitched.connect(this._initializeEditorBinding,this);const g=m.getDoc();if(!le){g.setValue(l.value.text)}this._onMimeTypeChanged();this._onCursorActivity();this._poll=new c.Poll({factory:async()=>{this._checkSync()},frequency:{interval:3e3,backoff:false},standby:()=>this._lastChange?"when-hidden":true});if(!le){l.value.changed.connect(this._onValueChanged,this)}l.mimeTypeChanged.connect(this._onMimeTypeChanged,this);l.selections.changed.connect(this._onSelectionsChanged,this);h().on(m,"keydown",((e,t)=>{const n=s.ArrayExt.findFirstIndex(this._keydownHandlers,(e=>{if(e(this,t)===true){t.preventDefault();return true}return false}));if(n===-1){this.onKeydown(t)}}));if(le){(t=this._yeditorBinding)===null||t===void 0?void 0:t.on("cursorActivity",(()=>this._onCursorActivity()))}else{h().on(m,"cursorActivity",(()=>this._onCursorActivity()));h().on(m.getDoc(),"beforeChange",((e,t)=>{this._beforeDocChanged(e,t)}))}h().on(m.getDoc(),"change",((e,t)=>{if(t.origin==="setValue"&&this.hasFocus()){this.refresh()}this._lastChange=t}));m.on("paste",((e,t)=>{var n;const r=(n=this._config["handlePaste"])!==null&&n!==void 0?n:true;if(!r){t.codemirrorIgnore=true}}));m.getWrapperElement().addEventListener("paste",(()=>{if(this.hasFocus()){this.refresh()}}))}_initializeEditorBinding(){var e;if(!le){return}(e=this._yeditorBinding)===null||e===void 0?void 0:e.destroy();const t=this.model.sharedModel;const n=t.undoManager?{yUndoManager:t.undoManager}:{};const r=t.awareness;this._yeditorBinding=new R.z$(t.ysource,this.editor,r,n)}get uuid(){return this._uuid}set uuid(e){this._uuid=e}get selectionStyle(){return this._selectionStyle}set selectionStyle(e){this._selectionStyle=e}get editor(){return this._editor}get doc(){return this._editor.getDoc()}get lineCount(){return this.doc.lineCount()}get model(){return this._model}get lineHeight(){return this._editor.defaultTextHeight()}get charWidth(){return this._editor.defaultCharWidth()}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.host.removeEventListener("focus",this,true);this.host.removeEventListener("blur",this,true);this.host.removeEventListener("scroll",this,true);if(this._yeditorBinding){this._yeditorBinding.destroy()}this._keydownHandlers.length=0;this._poll.dispose();d.Signal.clearData(this)}getOption(e){return this._config[e]}setOption(e,t){if(this._config[e]!==t){this._config[e]=t;de.setOption(this.editor,e,t,this._config)}}setOptions(e){const t=this._editor;t.startOperation();for(const n in e){const r=n;t.operation((()=>{this.setOption(r,e[r])}))}t.endOperation()}getLine(e){return this.doc.getLine(e)}getOffsetAt(e){return this.doc.indexFromPos({ch:e.column,line:e.line})}getPositionAt(e){const{ch:t,line:n}=this.doc.posFromIndex(e);return{line:n,column:t}}undo(){this.model.sharedModel.undo()}redo(){this.model.sharedModel.redo()}clearHistory(){var e,t;(t=(e=this._yeditorBinding)===null||e===void 0?void 0:e.yUndoManager)===null||t===void 0?void 0:t.clear()}focus(){this._editor.focus()}hasFocus(){return this._editor.getWrapperElement().contains(document.activeElement)}blur(){this._editor.getInputField().blur()}refresh(){this._editor.refresh();this._needsRefresh=false}resizeToFit(){if(this.hasFocus()){this.refresh()}else{this._needsRefresh=true}this._clearHover()}addOverlay(e,t){this._editor.addOverlay(e,t)}removeOverlay(e){this._editor.removeOverlay(e)}getSearchCursor(e,t,n){return this._editor.getDoc().getSearchCursor(e,t,n)}getCursor(e){return this._editor.getDoc().getCursor(e)}get state(){return this._editor.state}operation(e){return this._editor.operation(e)}firstLine(){return this._editor.getDoc().firstLine()}lastLine(){return this._editor.getDoc().lastLine()}scrollIntoView(e,t){this._editor.scrollIntoView(e,t)}scrollIntoViewCentered(e){var t,n;const r=this._editor.charCoords(e,"local").top;const o=this._editor.getWrapperElement().offsetHeight;(n=(t=this.host).scrollIntoView)===null||n===void 0?void 0:n.call(t,{behavior:"auto",block:"center",inline:"center"});this._editor.scrollTo(null,r-o/2)}cursorCoords(e,t){return this._editor.cursorCoords(e,t)}getRange(e,t,n){return this._editor.getDoc().getRange(e,t,n)}addKeydownHandler(e){this._keydownHandlers.push(e);return new l.DisposableDelegate((()=>{s.ArrayExt.removeAllWhere(this._keydownHandlers,(t=>t===e))}))}setSize(e){if(e){this._editor.setSize(e.width,e.height)}else{this._editor.setSize(null,null)}this._needsRefresh=false}revealPosition(e){const t=this._toCodeMirrorPosition(e);this._editor.scrollIntoView(t)}revealSelection(e){const t={from:this._toCodeMirrorPosition(e.start),to:this._toCodeMirrorPosition(e.end)};this._editor.scrollIntoView(t)}getCoordinateForPosition(e){const t=this._toCodeMirrorPosition(e);const n=this.editor.charCoords(t,"page");return n}getPositionForCoordinate(e){return this._toPosition(this.editor.coordsChar(e))||null}getCursorPosition(){const e=this.doc.getCursor();return this._toPosition(e)}setCursorPosition(e,t){const n=this._toCodeMirrorPosition(e);this.doc.setCursor(n,undefined,t);if(!this.editor.hasFocus()){this.model.selections.set(this.uuid,this.getSelections())}}getSelection(){return this.getSelections()[0]}setSelection(e){this.setSelections([e])}getSelections(){const e=this.doc.listSelections();if(e.length>0){return e.map((e=>this._toSelection(e)))}const t=this.doc.getCursor();const n=this._toSelection({anchor:t,head:t});return[n]}setSelections(e){const t=this._toCodeMirrorSelections(e);this.doc.setSelections(t,0)}replaceSelection(e){this.doc.replaceSelection(e)}getTokens(){let e=[];for(let t=0;t<this.lineCount;++t){const n=this.editor.getLineTokens(t).map((e=>({offset:this.getOffsetAt({column:e.start,line:t}),value:e.string,type:e.type||""})));e=e.concat(n)}return e}getTokenForPosition(e){var t;const n=this._toCodeMirrorPosition(e);const r=this.editor.getTokenAt(n);return{offset:this.getOffsetAt({column:r.start,line:n.line}),value:r.string,type:(t=r.type)!==null&&t!==void 0?t:undefined}}newIndentedLine(){this.execCommand("newlineAndIndent")}execCommand(e){this._editor.execCommand(e)}onKeydown(e){const t=this.getCursorPosition();const{line:n,column:r}=t;if(n===0&&r===0&&e.keyCode===ie){if(!e.shiftKey){this.edgeRequested.emit("top")}return false}if(n===0&&e.keyCode===ie){if(!e.shiftKey){this.edgeRequested.emit("topLine")}return false}const o=this.lineCount-1;const i=this.getLine(o).length;if(n===o&&r===i&&e.keyCode===se){if(!e.shiftKey){this.edgeRequested.emit("bottom")}return false}return false}_toCodeMirrorSelections(e){if(e.length>0){return e.map((e=>this._toCodeMirrorSelection(e)))}const t={line:0,ch:0};return[{anchor:t,head:t}]}_onMimeTypeChanged(){const e=this._model.mimeType;const t=this._editor;const n=t.getOption("extraKeys")||{};const r=e!=="text/plain"&&e!=="text/x-ipythongfm";if(r){n["Backspace"]="delSpaceToPrevTabStop"}else{delete n["Backspace"]}this.setOption("extraKeys",n);void X.ensure(e).then((e=>{var t;this.setOption("mode",(t=e===null||e===void 0?void 0:e.mime)!==null&&t!==void 0?t:"null")}))}_onSelectionsChanged(e,t){const n=t.key;if(n!==this.uuid){this._cleanSelections(n);if(t.type!=="remove"&&t.newValue){this._markSelections(n,t.newValue)}}}_cleanSelections(e){const t=this.selectionMarkers[e];if(t){t.forEach((e=>{e.clear()}))}delete this.selectionMarkers[e]}_markSelections(e,t){const n=[];if(e===this._hoverId){this._clearHover()}let r;if(this._model.modelDB.collaborators){r=this._model.modelDB.collaborators.get(e)}t.forEach((e=>{if(!a.JSONExt.deepEqual(e.start,e.end)){const t=e.start.line<e.end.line||e.start.line===e.end.line&&e.start.column<=e.end.column;const o=this._toCodeMirrorPosition(t?e.start:e.end);const i=this._toCodeMirrorPosition(t?e.end:e.start);let s;if(r){s=this._toTextMarkerOptions(Object.assign(Object.assign({},e.style),{color:r.color}))}else{s=this._toTextMarkerOptions(e.style)}n.push(this.doc.markText(o,i,s))}else if(r){const t=this._getCaret(r);n.push(this.doc.setBookmark(this._toCodeMirrorPosition(e.end),{widget:t}))}}));this.selectionMarkers[e]=n}_onCursorActivity(){if(this._editor.hasFocus()){const e=this.getSelections();this.model.selections.set(this.uuid,e)}}_toSelection(e){return{uuid:this.uuid,start:this._toPosition(e.anchor),end:this._toPosition(e.head),style:this.selectionStyle}}_toTextMarkerOptions(e){const t=parseInt(e.color.slice(1,3),16);const n=parseInt(e.color.slice(3,5),16);const r=parseInt(e.color.slice(5,7),16);const o=`background-color: rgba( ${t}, ${n}, ${r}, 0.15)`;return{className:e.className,title:e.displayName,css:o}}_toCodeMirrorSelection(e){return{anchor:this._toCodeMirrorPosition(e.start),head:this._toCodeMirrorPosition(e.end)}}_toPosition(e){return{line:e.line,column:e.ch}}_toCodeMirrorPosition(e){return{line:e.line,ch:e.column}}_onValueChanged(e,t){if(this._changeGuard){return}this._changeGuard=true;const n=this.doc;switch(t.type){case"insert":{const e=n.posFromIndex(t.start);n.replaceRange(t.value,e,e,"+input");break}case"remove":{const e=n.posFromIndex(t.start);const r=n.posFromIndex(t.end);n.replaceRange("",e,r,"+input");break}case"set":n.setValue(t.value);break;default:break}this._changeGuard=false}_beforeDocChanged(e,t){if(this._changeGuard){return}this._changeGuard=true;const n=this._model.value;const r=e.indexFromPos(t.from);const o=e.indexFromPos(t.to);const i=t.text.join("\n");if(o!==r){n.remove(r,o)}if(i){n.insert(r,i)}this._changeGuard=false}handleEvent(e){switch(e.type){case"focus":this._evtFocus(e);break;case"blur":this._evtBlur(e);break;case"scroll":this._evtScroll();break;default:break}}_evtFocus(e){if(this._needsRefresh){this.refresh()}this.host.classList.add("jp-mod-focused");this._onCursorActivity()}_evtBlur(e){this.host.classList.remove("jp-mod-focused")}_evtScroll(){this._clearHover()}_clearHover(){if(this._caretHover){window.clearTimeout(this._hoverTimeout);document.body.removeChild(this._caretHover);this._caretHover=null}}_getCaret(e){const t=e?e.displayName:"Anonymous";const n=e?e.color:this._selectionStyle.color;const r=document.createElement("span");r.className=re;r.style.borderBottomColor=n;r.onmouseenter=()=>{this._clearHover();this._hoverId=e.sessionId;const o=r.getBoundingClientRect();const i=document.createElement("div");i.className=oe;i.style.left=String(o.left)+"px";i.style.top=String(o.bottom)+"px";i.textContent=t;i.style.backgroundColor=n;i.onmouseenter=()=>{window.clearTimeout(this._hoverTimeout)};i.onmouseleave=()=>{this._hoverTimeout=window.setTimeout((()=>{this._clearHover()}),ae)};this._caretHover=i;document.body.appendChild(i)};r.onmouseleave=()=>{this._hoverTimeout=window.setTimeout((()=>{this._clearHover()}),ae)};return r}_checkSync(){const e=this._lastChange;if(!e){return}this._lastChange=null;const t=this._editor;const n=t.getDoc();if(n.getValue()===this._model.value.text){return}void(0,o.showDialog)({title:this._trans.__("Code Editor out of Sync"),body:this._trans.__("Please open your browser JavaScript console for bug report instructions")});console.warn('If you are able and willing to publicly share the text or code in your editor, you can help us debug the "Code Editor out of Sync" message by pasting the following to the public issue at https://github.com/jupyterlab/jupyterlab/issues/2951. Please note that the data below includes the text/code in your editor.');console.warn(JSON.stringify({model:this._model.value.text,view:n.getValue(),selections:this.getSelections(),cursor:this.getCursorPosition(),lineSep:t.getOption("lineSeparator"),mode:t.getOption("mode"),change:e}))}}(function(e){e.defaultConfig=Object.assign(Object.assign({},i.CodeEditor.defaultConfig),{mode:"null",theme:"jupyter",smartIndent:true,electricChars:true,keyMap:"default",extraKeys:null,gutters:[],fixedGutter:true,showCursorWhenSelecting:false,coverGutterNextToScrollbar:false,dragDrop:true,lineSeparator:null,scrollbarStyle:"native",lineWiseCopyCut:true,scrollPastEnd:false,styleActiveLine:false,styleSelectedText:true,selectionPointer:false,rulers:[],foldGutter:false,handlePaste:true});function t(e,t){h().commands[e]=t}e.addCommand=t})(ce||(ce={}));var de;(function(e){function t(e,t){const{autoClosingBrackets:n,fontFamily:r,fontSize:o,insertSpaces:i,lineHeight:s,lineWrap:a,wordWrapColumn:l,tabSize:c,readOnly:d}=t,u=ee(t,["autoClosingBrackets","fontFamily","fontSize","insertSpaces","lineHeight","lineWrap","wordWrapColumn","tabSize","readOnly"]);const p=Object.assign({autoCloseBrackets:n?{}:false,indentUnit:c,indentWithTabs:!i,lineWrapping:a==="off"?false:true,readOnly:d},u);return h()((t=>{if(r){t.style.fontFamily=r}if(o){t.style.fontSize=o+"px"}if(s){t.style.lineHeight=s.toString()}if(d){t.classList.add(ne)}if(a==="wordWrapColumn"){const e=t.querySelector(".CodeMirror-lines");e.style.width=`${l}ch`}if(a==="bounded"){const e=t.querySelector(".CodeMirror-lines");e.style.maxWidth=`${l}ch`}e.appendChild(t)}),p)}e.createEditor=t;function n(e){const t=e.getDoc();const n=t.getCursor("from");const r=t.getCursor("to");const i=!o(n,r);if(i){h().commands.indentMore(e);return}const s=t.getLine(n.line);const a=s.slice(0,n.ch);if(/^\s*$/.test(a)){h().commands.indentMore(e)}else{if(e.getOption("indentWithTabs")){h().commands.insertTab(e)}else{h().commands.insertSoftTab(e)}}}e.indentMoreOrinsertTab=n;function r(e){var t;const n=e.getDoc();const r=(t=e.getOption("indentUnit"))!==null&&t!==void 0?t:2;const i=n.listSelections();for(let s=i.length-1;s>=0;s--){const t=i[s].head;const a=i[s].anchor;const l=!o(t,a);if(l){n.replaceRange("",a,t)}else{const o=n.getLine(t.line).substring(0,t.ch);if(o.match(/^\ +$/)!==null){const e=(Math.ceil(t.ch/r)-1)*r;const o=h().Pos(t.line,e);n.replaceRange("",o,t)}else{const r=e.findPosH(t,-1,"char",false);n.replaceRange("",r,t)}}}}e.delSpaceToPrevTabStop=r;function o(e,t){return e.line===t.line&&e.ch===t.ch}e.posEq=o;function i(e){const t={"CodeMirror-linenumbers":"lineNumbers","CodeMirror-foldgutter":"codeFolding"};return Object.keys(t).filter((n=>e[t[n]]))}function s(e,t,n,r){const o=e.getWrapperElement();switch(t){case"cursorBlinkRate":e.setOption(t,n);break;case"lineWrap":{const t=n==="off"?false:true;const i=o.querySelector(".CodeMirror-lines");const s=n==="bounded"?`${r.wordWrapColumn}ch`:null;const a=n==="wordWrapColumn"?`${r.wordWrapColumn}ch`:null;i.style.setProperty("max-width",s);i.style.setProperty("width",a);e.setOption("lineWrapping",t);break}case"wordWrapColumn":{const{lineWrap:e}=r;if(e==="wordWrapColumn"||e==="bounded"){const t=o.querySelector(".CodeMirror-lines");const r=e==="wordWrapColumn"?"width":"maxWidth";t.style[r]=`${n}ch`}break}case"tabSize":e.setOption("indentUnit",n);break;case"insertSpaces":e.setOption("indentWithTabs",!n);break;case"autoClosingBrackets":e.setOption("autoCloseBrackets",n);break;case"rulers":{const t=n;e.setOption("rulers",t.map((e=>({column:e,className:"jp-CodeMirror-ruler"}))));break}case"readOnly":o.classList.toggle(ne,n);e.setOption(t,n);break;case"fontFamily":o.style.fontFamily=n;break;case"fontSize":o.style.setProperty("font-size",n?n+"px":null);break;case"lineHeight":o.style.lineHeight=n?n.toString():null;break;case"gutters":e.setOption(t,i(r));break;case"lineNumbers":e.setOption(t,n);e.setOption("gutters",i(r));break;case"codeFolding":e.setOption("foldGutter",n);e.setOption("gutters",i(r));break;case"showTrailingSpace":e.setOption(t,n);break;default:e.setOption(t,n);break}}e.setOption=s})(de||(de={}));ce.addCommand("delSpaceToPrevTabStop",de.delSpaceToPrevTabStop);ce.addCommand("indentMoreOrinsertTab",de.indentMoreOrinsertTab);class ue{constructor(e={},t){this.newInlineEditor=e=>{e.host.dataset.type="inline";return new ce(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},this.inlineCodeMirrorConfig),e.config||{}),translator:this.translator}))};this.newDocumentEditor=e=>{e.host.dataset.type="document";return new ce(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},this.documentCodeMirrorConfig),e.config||{}),translator:this.translator}))};this.translator=t||r.nullTranslator;this.inlineCodeMirrorConfig=Object.assign(Object.assign(Object.assign({},ce.defaultConfig),{extraKeys:{"Cmd-Right":"goLineRight",End:"goLineRight","Cmd-Left":"goLineLeft",Tab:"indentMoreOrinsertTab","Shift-Tab":"indentLess","Cmd-/":e=>e.toggleComment({indent:true}),"Ctrl-/":e=>e.toggleComment({indent:true}),"Ctrl-G":"find","Cmd-G":"find"}}),e);this.documentCodeMirrorConfig=Object.assign(Object.assign(Object.assign({},ce.defaultConfig),{extraKeys:{Tab:"indentMoreOrinsertTab","Shift-Tab":"indentLess","Cmd-/":e=>e.toggleComment({indent:true}),"Ctrl-/":e=>e.toggleComment({indent:true}),"Shift-Enter":()=>{}},lineNumbers:true,scrollPastEnd:true}),e)}}class he{getMimeTypeByLanguage(e){const t=e.file_extension||"";return X.findBest(e.codemirror_mode||{mimetype:e.mimetype,name:e.name,ext:[t.split(".").slice(-1)[0]]}).mime}getMimeTypeByFilePath(e){const t=L.PathExt.extname(e);if(t===".ipy"){return"text/x-python"}else if(t===".md"){return"text/x-ipythongfm"}const n=X.findByFileName(e)||X.findBest("");return n.mime}}var pe=n(85913);var me=n(700);var ge=n(77865);var fe=n.n(ge);function Ae(e){return fe().createElement(pe.TextItem,{source:e.mode,onClick:e.handleClick})}class ve extends o.VDomRenderer{constructor(e){super(new ve.Model);this._handleClick=()=>{const e=new me.Menu({commands:this._commands});const t="codemirror:change-mode";if(this._popup){this._popup.dispose()}X.getModeInfo().sort(((e,t)=>{const n=e.name||"";const r=t.name||"";return n.localeCompare(r)})).forEach((n=>{if(n.mode.indexOf("brainf")===0){return}const r={insertSpaces:true,name:n.name};e.addItem({command:t,args:r})}));this._popup=(0,pe.showPopup)({body:e,anchor:this,align:"left"})};this._popup=null;this._commands=e.commands;this.translator=e.translator||r.nullTranslator;const t=this.translator.load("jupyterlab");this.addClass(pe.interactiveItem);this.title.caption=t.__("Change text editor syntax highlighting")}render(){if(!this.model){return null}return fe().createElement(Ae,{mode:this.model.mode,handleClick:this._handleClick})}}(function(e){class t extends o.VDomModel{constructor(){super(...arguments);this._onMIMETypeChange=(e,t)=>{const n=this._mode;const r=X.findByMIME(t.newValue);this._mode=r.name||r.mode;this._triggerChange(n,this._mode)};this._mode="";this._editor=null}get mode(){return this._mode}get editor(){return this._editor}set editor(e){const t=this._editor;if(t!==null){t.model.mimeTypeChanged.disconnect(this._onMIMETypeChange)}const n=this._mode;this._editor=e;if(this._editor===null){this._mode=""}else{const e=X.findByMIME(this._editor.model.mimeType);this._mode=e.name||e.mode;this._editor.model.mimeTypeChanged.connect(this._onMIMETypeChange)}this._triggerChange(n,this._mode)}_triggerChange(e,t){if(e!==t){this.stateChanged.emit(void 0)}}}e.Model=t})(ve||(ve={}));const Ce=new a.Token("@jupyterlab/codemirror:ICodeMirror");const be={factoryService:new ue,mimeTypeService:new he}},37935:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(49914);var s=n(98328);var a=n(91380);var l=n(97236);var c=n(72138);var d=n(93379);var u=n.n(d);var h=n(67657);var p={};p.insert="head";p.singleton=false;var m=u()(h.Z,p);const g=h.Z.locals||{}},39360:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var r=n(76190);var o=n.n(r);var i=n(20452);var s=n.n(i);var a=n(48767);var l=n.n(a);var c=n(58267);var d=n.n(c);var u=n(54522);var h=n.n(u);var p=n(700);var m=n.n(p);var g;(function(e){e.invoke="completer:invoke";e.invokeConsole="completer:invoke-console";e.invokeNotebook="completer:invoke-notebook";e.invokeFile="completer:invoke-file";e.select="completer:select";e.selectConsole="completer:select-console";e.selectNotebook="completer:select-notebook";e.selectFile="completer:select-file"})(g||(g={}));const f={id:"@jupyterlab/completer-extension:manager",autoStart:true,provides:r.ICompletionManager,activate:e=>{const t={};e.commands.addCommand(g.invoke,{execute:e=>{const n=e&&e["id"];if(!n){return}const r=t[n];if(r){r.invoke()}}});e.commands.addCommand(g.select,{execute:e=>{const n=e&&e["id"];if(!n){return}const r=t[n];if(r){r.completer.selectActive()}}});return{register:(e,n=r.Completer.defaultRenderer)=>{const{connector:o,editor:i,parent:s}=e;const a=new r.CompleterModel;const l=new r.Completer({editor:i,model:a,renderer:n});const c=new r.CompletionHandler({completer:l,connector:o});const d=s.id;l.hide();t[d]=c;c.editor=i;p.Widget.attach(l,document.body);s.disposed.connect((()=>{delete t[d];a.dispose();l.dispose();c.dispose()}));return c}}}};const A={id:"@jupyterlab/completer-extension:consoles",requires:[r.ICompletionManager,i.IConsoleTracker],autoStart:true,activate:(e,t,n)=>{n.widgetAdded.connect(((e,n)=>{var o,i;const s=n.console;const a=(i=(o=s.promptCell)===null||o===void 0?void 0:o.editor)!==null&&i!==void 0?i:null;const l=s.sessionContext.session;const c=new r.CompletionConnector({session:l,editor:a});const d=t.register({connector:c,editor:a,parent:n});const u=()=>{var e,t;const n=(t=(e=s.promptCell)===null||e===void 0?void 0:e.editor)!==null&&t!==void 0?t:null;const o=s.sessionContext.session;d.editor=n;d.connector=new r.CompletionConnector({session:o,editor:n})};s.promptCellCreated.connect(u);s.sessionContext.sessionChanged.connect(u)}));e.commands.addCommand(g.invokeConsole,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t){return e.commands.execute(g.invoke,{id:t})}}});e.commands.addCommand(g.selectConsole,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t){return e.commands.execute(g.select,{id:t})}}});e.commands.addKeyBinding({command:g.selectConsole,keys:["Enter"],selector:`.jp-ConsolePanel .jp-mod-completer-active`})}};const v={id:"@jupyterlab/completer-extension:notebooks",requires:[r.ICompletionManager,c.INotebookTracker],autoStart:true,activate:(e,t,n)=>{n.widgetAdded.connect(((e,n)=>{var o,i;const s=(i=(o=n.content.activeCell)===null||o===void 0?void 0:o.editor)!==null&&i!==void 0?i:null;const a=n.sessionContext.session;const l=new r.CompletionConnector({session:a,editor:s});const c=t.register({connector:l,editor:s,parent:n});const d=()=>{var e,t;const o=(t=(e=n.content.activeCell)===null||e===void 0?void 0:e.editor)!==null&&t!==void 0?t:null;const i=n.sessionContext.session;c.editor=o;c.connector=new r.CompletionConnector({session:i,editor:o})};n.content.activeCellChanged.connect(d);n.sessionContext.sessionChanged.connect(d)}));e.commands.addCommand(g.invokeNotebook,{execute:()=>{var t;const r=n.currentWidget;if(r&&((t=r.content.activeCell)===null||t===void 0?void 0:t.model.type)==="code"){return e.commands.execute(g.invoke,{id:r.id})}}});e.commands.addCommand(g.selectNotebook,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t){return e.commands.execute(g.select,{id:t})}}});e.commands.addKeyBinding({command:g.selectNotebook,keys:["Enter"],selector:`.jp-Notebook .jp-mod-completer-active`})}};const C={id:"@jupyterlab/completer-extension:files",requires:[r.ICompletionManager,a.IEditorTracker],autoStart:true,activate:(e,t,n)=>{const o={};n.widgetAdded.connect(((n,i)=>{const s=e.serviceManager.sessions;const a=i.content.editor;const l=new r.ContextConnector({editor:a});const c=t.register({connector:l,editor:a,parent:i});const d=(e,t)=>{const n=o[i.id];const d=(0,u.find)(t,(e=>e.path===i.context.path));if(d){if(n&&n.id===d.id){return}if(n){delete o[i.id];n.dispose()}const e=s.connectTo({model:d});c.connector=new r.CompletionConnector({session:e,editor:a});o[i.id]=e}else{c.connector=l;if(n){delete o[i.id];n.dispose()}}};d(s,(0,u.toArray)(s.running()));s.runningChanged.connect(d);i.disposed.connect((()=>{s.runningChanged.disconnect(d);const e=o[i.id];if(e){delete o[i.id];e.dispose()}}))}));e.commands.addCommand(g.invokeFile,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t){return e.commands.execute(g.invoke,{id:t})}}});e.commands.addCommand(g.selectFile,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t){return e.commands.execute(g.select,{id:t})}}});e.commands.addKeyBinding({command:g.selectFile,keys:["Enter"],selector:`.jp-FileEditor .jp-mod-completer-active`})}};const b=[f,A,v,C];const _=b},99093:(e,t,n)=>{"use strict";var r=n(32902);var o=n(90516);var i=n(34849);var s=n(79536);var a=n(93379);var l=n.n(a);var c=n(62173);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{};var p=n(42650);var m=n(33379);var g=n(88164)},77275:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Completer:()=>S,CompleterModel:()=>v,CompletionConnector:()=>m,CompletionHandler:()=>d,ContextConnector:()=>h,ICompletionManager:()=>M,KernelConnector:()=>u});var r=n(69442);var o=n(46843);var i=n(18987);var s=n(42573);class a extends s.DataConnector{fetch(e){return Promise.reject("Attempting to fetch with DummyConnector. Please ensure connector responseType is set.")}}const l="jp-mod-completer-enabled";const c="jp-mod-completer-active";class d{constructor(e){this._editor=null;this._enabled=false;this._pending=0;this._isDisposed=false;this.completer=e.completer;this.completer.selected.connect(this.onCompletionSelected,this);this.completer.visibilityChanged.connect(this.onVisibilityChanged,this);this._connector=e.connector}get connector(){if("responseType"in this._connector){return new a}return this._connector}set connector(e){this._connector=e}get editor(){return this._editor}set editor(e){if(e===this._editor){return}let t=this._editor;if(t&&!t.isDisposed){const e=t.model;t.host.classList.remove(l);t.host.classList.remove(c);e.selections.changed.disconnect(this.onSelectionsChanged,this);e.value.changed.disconnect(this.onTextChanged,this)}this.completer.reset();this.completer.editor=e;t=this._editor=e;if(t){const e=t.model;this._enabled=false;e.selections.changed.connect(this.onSelectionsChanged,this);e.value.changed.connect(this.onTextChanged,this);this.onSelectionsChanged()}}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;i.Signal.clearData(this)}invoke(){o.MessageLoop.sendMessage(this,d.Msg.InvokeRequest)}processMessage(e){switch(e.type){case d.Msg.InvokeRequest.type:this.onInvokeRequest(e);break;default:break}}getState(e,t){return{text:e.model.value.text,lineHeight:e.lineHeight,charWidth:e.charWidth,line:t.line,column:t.column}}onCompletionSelected(e,t){const n=e.model;const r=this._editor;if(!r||!n){return}const o=n.createPatch(t);if(!o){return}const{start:i,end:s,value:a}=o;const l=r.getOffsetAt(r.getCursorPosition());r.model.sharedModel.updateSource(i,s,a);if(l<=s&&l>=i){r.setCursorPosition(r.getPositionAt(i+a.length))}}onInvokeRequest(e){if(!this.completer.model){return}if(this.completer.model.original){return}const t=this._editor;if(t){this._makeRequest(t.getCursorPosition()).catch((e=>{console.warn("Invoke request bailed",e)}))}}onSelectionsChanged(){const e=this.completer.model;const t=this._editor;if(!t){return}const n=t.host;if(!e){this._enabled=false;n.classList.remove(l);return}if(e.subsetMatch){return}const r=t.getCursorPosition();const o=t.getLine(r.line);if(!o){this._enabled=false;e.reset(true);n.classList.remove(l);return}const{start:i,end:s}=t.getSelection();if(i.column!==s.column||i.line!==s.line){this._enabled=false;e.reset(true);n.classList.remove(l);return}if(o.slice(0,r.column).match(/^\s*$/)){this._enabled=false;e.reset(true);n.classList.remove(l);return}if(!this._enabled){this._enabled=true;n.classList.add(l)}e.handleCursorChange(this.getState(t,t.getCursorPosition()))}onTextChanged(){const e=this.completer.model;if(!e||!this._enabled){return}const t=this.editor;if(!t){return}const{start:n,end:r}=t.getSelection();if(n.column!==r.column||n.line!==r.line){return}e.handleTextChange(this.getState(t,t.getCursorPosition()))}onVisibilityChanged(e){if(e.isDisposed||e.isHidden){if(this._editor){this._editor.host.classList.remove(c);this._editor.focus()}return}if(this._editor){this._editor.host.classList.add(c)}}_makeRequest(e){const t=this.editor;if(!t){return Promise.reject(new Error("No active editor"))}const n=t.model.value.text;const o=r.Text.jsIndexToCharIndex(t.getOffsetAt(e),n);const i=++this._pending;const s=this.getState(t,e);const a={text:n,offset:o};if(this._isICompletionItemsConnector(this._connector)){return this._connector.fetch(a).then((e=>{this._validate(i,a);if(!e){throw new Error(`Invalid request: ${a}`)}this._onFetchItemsReply(s,e)})).catch((e=>{this._onFailure()}))}return this._connector.fetch(a).then((e=>{this._validate(i,a);if(!e){throw new Error(`Invalid request: ${a}`)}this._onReply(s,e)})).catch((e=>{this._onFailure()}))}_isICompletionItemsConnector(e){return e.responseType===d.ICompletionItemsResponseType}_validate(e,t){if(this.isDisposed){throw new Error("Handler is disposed")}if(e!==this._pending){throw new Error("A newer completion request is pending")}}_updateModel(e,t,n){const o=this.completer.model;const i=e.text;if(!o){return null}o.original=e;o.cursor={start:r.Text.charIndexToJsIndex(t,i),end:r.Text.charIndexToJsIndex(n,i)};return o}_onReply(e,t){const n=this._updateModel(e,t.start,t.end);if(!n){return}const r=[];const o=new Set(t.matches||[]);if(t.matches){o.forEach((e=>{r.push(e)}))}const i=t.metadata||{};const s=i._jupyter_types_experimental;const a={};if(s){s.forEach((e=>{const t=e.text;const n=e.type;if(o.has(t)&&n!=="<unknown>"){a[t]=n}}))}n.setOptions(r,a)}_onFetchItemsReply(e,t){const n=this._updateModel(e,t.start,t.end);if(!n){return}if(n.setCompletionItems){n.setCompletionItems(t.items)}}_onFailure(){const e=this.completer.model;if(e){e.reset(true)}}}(function(e){e.ICompletionItemsResponseType="ICompletionItemsReply";let t;(function(e){e.InvokeRequest=new o.Message("invoke-request")})(t=e.Msg||(e.Msg={}))})(d||(d={}));class u extends s.DataConnector{constructor(e){super();this._session=e.session}async fetch(e){var t;const n=(t=this._session)===null||t===void 0?void 0:t.kernel;if(!n){throw new Error("No kernel for completion request.")}const r={code:e.text,cursor_pos:e.offset};const o=await n.requestComplete(r);const i=o.content;if(i.status!=="ok"){throw new Error("Completion fetch failed to return successfully.")}return{start:i.cursor_start,end:i.cursor_end,matches:i.matches,metadata:i.metadata}}}class h extends s.DataConnector{constructor(e){super();this._editor=e.editor}fetch(e){if(!this._editor){return Promise.reject("No editor")}return new Promise((e=>{e(p.contextHint(this._editor))}))}}var p;(function(e){function t(e){const t=e.getCursorPosition();const r=e.getTokenForPosition(t);const o=n(r,e);const i=o.filter((e=>e.type)).map((e=>e.value));const s=Array.from(new Set(i));return{start:r.offset,end:r.offset+r.value.length,matches:s,metadata:{}}}e.contextHint=t;function n(e,t){const n=t.getTokens();return n.filter((t=>t.value.indexOf(e.value)===0&&t.value!==e.value))}})(p||(p={}));class m extends s.DataConnector{constructor(e){super();this._kernel=new u(e);this._context=new h(e)}fetch(e){return Promise.all([this._kernel.fetch(e),this._context.fetch(e)]).then((([e,t])=>g.mergeReplies(e,t)))}}var g;(function(e){function t(e,t){if(e.matches.length===0){return t}else if(t.matches.length===0){return e}const n=e.matches.slice();const r=n.reduce(((e,t)=>{e[t]=null;return e}),{});t.matches.forEach((e=>{if(!(e in r)){n.push(e)}}));return Object.assign(Object.assign({},e),{matches:n})}e.mergeReplies=t})(g||(g={}));var f=n(54522);var A=n(91100);class v{constructor(){this._current=null;this._cursor=null;this._isDisposed=false;this._completionItems=[];this._options=[];this._original=null;this._query="";this._subsetMatch=false;this._typeMap={};this._orderedTypes=[];this._stateChanged=new i.Signal(this)}get stateChanged(){return this._stateChanged}get original(){return this._original}set original(e){const t=this._original===e||this._original&&e&&A.JSONExt.deepEqual(e,this._original);if(t){return}this._reset();this._current=this._original=e;this._stateChanged.emit(undefined)}get current(){return this._current}set current(e){const t=this._current===e||this._current&&e&&A.JSONExt.deepEqual(e,this._current);if(t){return}const n=this._original;if(!n){return}const r=this._cursor;if(!r){return}const o=this._current=e;if(!o){this._stateChanged.emit(undefined);return}const i=n.text.split("\n")[n.line];const s=o.text.split("\n")[o.line];if(!this._subsetMatch&&s.length<i.length){this.reset(true);return}const{start:a,end:l}=r;let c=o.text.substring(a);const d=n.text.substring(l);c=c.substring(0,c.lastIndexOf(d));this._query=c;this._stateChanged.emit(undefined)}get cursor(){return this._cursor}set cursor(e){if(!this.original){return}this._cursor=e}get query(){return this._query}set query(e){this._query=e}get subsetMatch(){return this._subsetMatch}set subsetMatch(e){this._subsetMatch=e}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this)}completionItems(){let e=this._query;if(e){return this._markup(e)}return this._completionItems}setCompletionItems(e){if(A.JSONExt.deepEqual(e,this._completionItems)){return}this._completionItems=e;this._orderedTypes=C.findOrderedCompletionItemTypes(this._completionItems);this._stateChanged.emit(undefined)}items(){return this._filter()}options(){return(0,f.iter)(this._options)}typeMap(){return this._typeMap}orderedTypes(){return this._orderedTypes}setOptions(e,t){const n=(0,f.toArray)(e||[]);const r=t||{};if(A.JSONExt.deepEqual(n,this._options)&&A.JSONExt.deepEqual(r,this._typeMap)){return}if(n.length){this._options=n;this._typeMap=r;this._orderedTypes=C.findOrderedTypes(r)}else{this._options=[];this._typeMap={};this._orderedTypes=[]}this._stateChanged.emit(undefined)}handleCursorChange(e){if(!this._original){return}const{column:t,line:n}=e;const{current:r,original:o}=this;if(!o){return}if(n!==o.line){this.reset(true);return}if(t<o.column){this.reset(true);return}const{cursor:i}=this;if(!i||!r){return}const s=i.end-i.start;const a=o.text.split("\n")[o.line];const l=r.text.split("\n")[r.line];const c=l.length-a.length;if(t>o.column+s+c){this.reset(true);return}}handleTextChange(e){const t=this._original;if(!t){return}const{text:n,column:r,line:o}=e;const i=n.split("\n")[o][r-1];if(i&&i.match(/\S/)||e.column>=t.column){this.current=e;return}this.reset(false)}createPatch(e){const t=this._original;const n=this._cursor;const r=this._current;if(!t||!n||!r){return undefined}let{start:o,end:i}=n;i=i+(r.text.length-t.text.length);return{start:o,end:i,value:e}}reset(e=false){if(!e&&this._subsetMatch){return}this._reset();this._stateChanged.emit(undefined)}_markup(e){const t=this._completionItems;let n=[];for(let r of t){const t=r.label.indexOf("(");const o=t>-1?r.label.substring(0,t):r.label;let i=f.StringExt.matchSumOfSquares(o,e);if(i){let e=f.StringExt.highlight(r.label,i.indices,C.mark);n.push(Object.assign(Object.assign({},r),{documentation:r.documentation,label:e.join(""),insertText:r.insertText?r.insertText:r.label,score:i.score}))}}n.sort(C.scoreCmp2);n.forEach((e=>{delete e.score}));return n}_filter(){const e=this._options||[];const t=this._query;if(!t){return(0,f.map)(e,(e=>({raw:e,text:e})))}const n=[];for(const r of e){const e=f.StringExt.matchSumOfSquares(r,t);if(e){const t=f.StringExt.highlight(r,e.indices,C.mark);n.push({raw:r,score:e.score,text:t.join("")})}}return(0,f.map)(n.sort(C.scoreCmp),(e=>({text:e.text,raw:e.raw})))}_reset(){this._current=null;this._cursor=null;this._completionItems=[];this._options=[];this._original=null;this._query="";this._subsetMatch=false;this._typeMap={};this._orderedTypes=[]}}var C;(function(e){const t=["function","instance","class","module","keyword"];const n=t.reduce(((e,t)=>{e[t]=null;return e}),{});function r(e){return`<mark>${e}</mark>`}e.mark=r;function o(e,t){const n=e.score-t.score;if(n!==0){return n}return e.raw.localeCompare(t.raw)}e.scoreCmp=o;function i(e,t){var n,r,o;const i=e.score-t.score;if(i!==0){return i}return(o=(n=e.insertText)===null||n===void 0?void 0:n.localeCompare((r=t.insertText)!==null&&r!==void 0?r:""))!==null&&o!==void 0?o:0}e.scoreCmp2=i;function s(e){const n=new Set;e.forEach((e=>{if(e.type&&!t.includes(e.type)&&!n.has(e.type)){n.add(e.type)}}));const r=Array.from(n);r.sort(((e,t)=>e.localeCompare(t)));return t.concat(r)}e.findOrderedCompletionItemTypes=s;function a(e){const r=Object.keys(e).map((t=>e[t])).filter((e=>!!e&&!(e in n))).sort(((e,t)=>e.localeCompare(t)));return t.concat(r)}e.findOrderedTypes=a})(C||(C={}));var b=n(3378);var _=n(45187);var y=n(700);const E="jp-Completer-item";const w="jp-mod-active";const x=20;const j=300;const k=true;const B=10;class S extends y.Widget{constructor(e){super({node:document.createElement("div")});this._activeIndex=0;this._editor=null;this._model=null;this._resetFlag=false;this._selected=new i.Signal(this);this._visibilityChanged=new i.Signal(this);this._indexChanged=new i.Signal(this);this._lastSubsetMatch="";this._renderer=e.renderer||S.defaultRenderer;this.model=e.model||null;this.editor=e.editor||null;this.addClass("jp-Completer")}get activeIndex(){return this._activeIndex}get editor(){return this._editor}set editor(e){this._editor=e}get selected(){return this._selected}get visibilityChanged(){return this._visibilityChanged}get indexChanged(){return this._indexChanged}get model(){return this._model}set model(e){if(!e&&!this._model||e===this._model){return}if(this._model){this._model.stateChanged.disconnect(this.onModelStateChanged,this)}this._model=e;if(this._model){this._model.stateChanged.connect(this.onModelStateChanged,this)}}dispose(){this._model=null;super.dispose()}handleEvent(e){if(this.isHidden||!this._editor){return}switch(e.type){case"keydown":this._evtKeydown(e);break;case"mousedown":this._evtMousedown(e);break;case"scroll":this._evtScroll(e);break;default:break}}reset(){this._activeIndex=0;this._lastSubsetMatch="";if(this._model){this._model.reset(true)}}selectActive(){const e=this.node.querySelector(`.${w}`);if(!e){this.reset();return}this._selected.emit(e.getAttribute("data-value"));this.reset()}onAfterAttach(e){document.addEventListener("keydown",this,k);document.addEventListener("mousedown",this,k);document.addEventListener("scroll",this,k)}onBeforeDetach(e){document.removeEventListener("keydown",this,k);document.removeEventListener("mousedown",this,k);document.removeEventListener("scroll",this,k)}onModelStateChanged(){if(this.isAttached){this._activeIndex=0;this._indexChanged.emit(this._activeIndex);this.update()}}onUpdateRequest(e){const t=this._model;if(!t){return}if(this._resetFlag){this._resetFlag=false;if(!this.isHidden){this.hide();this._visibilityChanged.emit(undefined)}return}let n=null;let r=t.completionItems&&t.completionItems();if(r&&r.length){n=this._createCompletionItemNode(t,r)}else{n=this._createIItemNode(t)}if(!n){return}let o=n.querySelectorAll(`.${E}`)[this._activeIndex];o.classList.add(w);let i=document.createElement("div");i.className="jp-Completer-docpanel";n.appendChild(i);this._updateDocPanel();if(!t.query){const e=this._populateSubset();if(e){this.update();return}}if(this.isHidden){this.show();this._setGeometry();this._visibilityChanged.emit(undefined)}else{this._setGeometry()}}_createCompletionItemNode(e,t){if(!t.length){this._resetFlag=true;this.reset();if(!this.isHidden){this.hide();this._visibilityChanged.emit(undefined)}return null}let n=this.node;n.textContent="";let r=e.orderedTypes();let o=document.createElement("ul");o.className="jp-Completer-list";for(let i of t){if(!this._renderer.createCompletionItemNode){return null}let e=this._renderer.createCompletionItemNode(i,r);o.appendChild(e)}n.appendChild(o);return n}_createIItemNode(e){const t=(0,f.toArray)(e.items());if(!t||!t.length){this._resetFlag=true;this.reset();if(!this.isHidden){this.hide();this._visibilityChanged.emit(undefined)}return null}const n=(0,f.toArray)(e.options());if(n.length===1){this._selected.emit(n[0]);this.reset();return null}const r=this.node;r.textContent="";const o=e.orderedTypes();let i=document.createElement("ul");i.className="jp-Completer-list";for(const s of t){const t=this._renderer.createItemNode(s,e.typeMap(),o);i.appendChild(t)}r.appendChild(i);return r}_cycle(e){const t=this.node.querySelectorAll(`.${E}`);const n=this._activeIndex;let r=this.node.querySelector(`.${w}`);r.classList.remove(w);if(e==="up"){this._activeIndex=n===0?t.length-1:n-1}else if(e==="down"){this._activeIndex=n<t.length-1?n+1:0}else{const o=this.node.getBoundingClientRect().height;const i=r.getBoundingClientRect().height;const s=Math.floor(o/i);if(e==="pageUp"){this._activeIndex=n-s}else{this._activeIndex=n+s}this._activeIndex=Math.min(Math.max(0,this._activeIndex),t.length-1)}r=t[this._activeIndex];r.classList.add(w);let o=this.node.querySelector(".jp-Completer-list");_.ElementExt.scrollIntoViewIfNeeded(o,r);this._indexChanged.emit(this._activeIndex);this._updateDocPanel()}_evtKeydown(e){if(this.isHidden||!this._editor){return}if(!this._editor.host.contains(e.target)){this.reset();return}switch(e.keyCode){case 9:{e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();const t=this._model;if(!t){return}const n=t.completionItems&&t.completionItems();if(n&&n.length===1){this._selected.emit(n[0].insertText||n[0].label);this.reset();return}const r=this._populateSubset();if(t.query&&t.query!=this._lastSubsetMatch){t.subsetMatch=true;this._selected.emit(t.query);t.subsetMatch=false;this._lastSubsetMatch=t.query}if(r){this.update()}this._cycle(e.shiftKey?"up":"down");return}case 27:e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();this.reset();return;case 33:case 34:case 38:case 40:{e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();const t=D.keyCodeMap[e.keyCode];this._cycle(t);return}default:return}}_evtMousedown(e){if(this.isHidden||!this._editor){return}if(D.nonstandardClick(e)){this.reset();return}let t=e.target;while(t!==document.documentElement){if(t.classList.contains(E)){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();this._selected.emit(t.getAttribute("data-value"));this.reset();return}if(t===this.node){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();return}t=t.parentElement}this.reset()}_evtScroll(e){if(this.isHidden||!this._editor){return}const{node:t}=this;if(t.contains(e.target)){return}requestAnimationFrame((()=>{this._setGeometry()}))}_populateSubset(){const{model:e}=this;if(!e){return false}const t=this.node.querySelectorAll(`.${E}`);const n=D.commonSubset(D.itemValues(t));const{query:r}=e;if(n&&n!==r&&n.indexOf(r)===0){e.query=n;return true}return false}_setGeometry(){const{node:e}=this;const t=this._model;const n=this._editor;if(!n||!t||!t.original||!t.cursor){return}const r=t.cursor.start;const o=n.getPositionAt(r);const i=n.getCoordinateForPosition(o);const s=window.getComputedStyle(e);const a=parseInt(s.borderLeftWidth,10)||0;const l=parseInt(s.paddingLeft,10)||0;b.HoverBox.setGeometry({anchor:i,host:n.host,maxHeight:j,minHeight:x,node:e,offset:{horizontal:a+l},privilege:"below",style:s})}_updateDocPanel(){var e,t;let n=this.node.querySelector(".jp-Completer-docpanel");if(!n){return}if(!((e=this.model)===null||e===void 0?void 0:e.completionItems)){return}let r=(t=this.model)===null||t===void 0?void 0:t.completionItems();if(!r){n.setAttribute("style","display:none");return}let o=r[this._activeIndex];if(!o){n.setAttribute("style","display:none");return}n.textContent="";if(o.documentation){let e;if(!this._renderer.createDocumentationNode){e=S.defaultRenderer.createDocumentationNode(o)}else{e=this._renderer.createDocumentationNode(o)}n.appendChild(e);n.setAttribute("style","")}else{n.setAttribute("style","display:none")}}}(function(e){class t{createCompletionItemNode(e,t){let n=this._createBaseNode(e.insertText||e.label);if(e.deprecated){n.classList.add("jp-Completer-deprecated")}return this._constructNode(n,this._createMatchNode(e.label),!!e.type,e.type,t,e.icon)}createItemNode(e,t,n){return this._constructNode(this._createBaseNode(e.raw),this._createMatchNode(e.text),!A.JSONExt.deepEqual(t,{}),t[e.raw]||"",n)}createDocumentationNode(e){let t=document.createElement("pre");t.textContent=e.documentation||"";return t}_createBaseNode(e){const t=document.createElement("li");t.className=E;t.setAttribute("data-value",e);return t}_createMatchNode(e){const t=document.createElement("code");t.className="jp-Completer-match";t.innerHTML=b.defaultSanitizer.sanitize(e,{allowedTags:["mark"]});return t}_constructNode(e,t,n,r,o,i){if(i){const t=i.element({className:"jp-Completer-type jp-Completer-icon"});e.appendChild(t)}else if(n){const t=document.createElement("span");t.textContent=(r[0]||"").toLowerCase();const n=o.indexOf(r)%B+1;t.className="jp-Completer-type jp-Completer-monogram";t.setAttribute(`data-color-index`,n.toString());e.appendChild(t)}else{const t=document.createElement("span");t.className="jp-Completer-monogram";e.appendChild(t)}e.appendChild(t);if(n){e.title=r;const t=document.createElement("code");t.className="jp-Completer-typeExtended";t.textContent=r.toLocaleLowerCase();e.appendChild(t)}else{const t=document.createElement("span");t.className="jp-Completer-typeExtended";e.appendChild(t)}return e}}e.Renderer=t;e.defaultRenderer=new t})(S||(S={}));var D;(function(e){e.keyCodeMap={38:"up",40:"down",33:"pageUp",34:"pageDown"};function t(e){const t=e.length;let n="";if(t<2){return n}const r=e[0].length;for(let o=0;o<r;o++){const r=e[0][o];for(let i=1;i<t;i++){if(e[i][o]!==r){return n}}n+=r}return n}e.commonSubset=t;function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n].getAttribute("data-value");if(r){t.push(r)}}return t}e.itemValues=n;function r(e){return e.button!==0||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey}e.nonstandardClick=r})(D||(D={}));const M=new A.Token("@jupyterlab/completer:ICompletionManager")},39511:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>j});var r=n(97577);var o=n(3378);var i=n(66934);var s=n(20452);var a=n(54917);var l=n(62608);var c=n(73704);var d=n(63833);var u=n(42014);var h=n(59768);var p=n(25903);var m=n(54522);var g=n(91100);var f=n(64782);var A=n(63577);const v={id:"@jupyterlab/console-extension:foreign",requires:[s.IConsoleTracker,u.ISettingRegistry,h.ITranslator],optional:[o.ICommandPalette],activate:b,autoStart:true};const C=v;function b(e,t,n,r,o){const i=r.load("jupyterlab");const{shell:a}=e;t.widgetAdded.connect(((e,t)=>{const r=t.console;const o=new s.ForeignHandler({sessionContext:r.sessionContext,parent:r});_.foreignHandlerProperty.set(r,o);void n.get("@jupyterlab/console-extension:tracker","showAllKernelActivity").then((({composite:e})=>{const t=e;o.enabled=t}));r.disposed.connect((()=>{o.dispose()}))}));const{commands:l}=e;const c=i.__("Console");const d="console:toggle-show-all-kernel-activity";function u(e){const n=t.currentWidget;const r=e["activate"]!==false;if(r&&n){a.activateById(n.id)}return n}l.addCommand(d,{label:e=>i.__("Show All Kernel Activity"),execute:e=>{const t=u(e);if(!t){return}const n=_.foreignHandlerProperty.get(t.console);if(n){n.enabled=!n.enabled}},isToggled:()=>{var e;return t.currentWidget!==null&&!!((e=_.foreignHandlerProperty.get(t.currentWidget.console))===null||e===void 0?void 0:e.enabled)},isEnabled:()=>t.currentWidget!==null&&t.currentWidget===a.currentWidget});if(o){o.addItem({command:d,category:c,args:{isPalette:true}})}}var _;(function(e){e.foreignHandlerProperty=new A.AttachedProperty({name:"foreignHandler",create:()=>undefined})})(_||(_={}));var y;(function(e){e.autoClosingBrackets="console:toggle-autoclosing-brackets";e.create="console:create";e.clear="console:clear";e.runUnforced="console:run-unforced";e.runForced="console:run-forced";e.linebreak="console:linebreak";e.interrupt="console:interrupt-kernel";e.restart="console:restart-kernel";e.closeAndShutdown="console:close-and-shutdown";e.open="console:open";e.inject="console:inject";e.changeKernel="console:change-kernel";e.enterToExecute="console:enter-to-execute";e.shiftEnterToExecute="console:shift-enter-to-execute";e.interactionMode="console:interaction-mode";e.replaceSelection="console:replace-selection"})(y||(y={}));const E={id:"@jupyterlab/console-extension:tracker",provides:s.IConsoleTracker,requires:[s.ConsolePanel.IContentFactory,i.IEditorServices,d.IRenderMimeRegistry,u.ISettingRegistry,h.ITranslator],optional:[r.ILayoutRestorer,a.IFileBrowserFactory,c.IMainMenu,o.ICommandPalette,l.ILauncher,r.ILabStatus,o.ISessionContextDialogs],activate:k,autoStart:true};const w={id:"@jupyterlab/console-extension:factory",provides:s.ConsolePanel.IContentFactory,requires:[i.IEditorServices],autoStart:true,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new s.ConsolePanel.ContentFactory({editorFactory:n})}};const x=[w,E,C];const j=x;async function k(e,t,n,r,i,a,l,c,d,u,h,A,v){const C=a.load("jupyterlab");const b=e.serviceManager;const{commands:_,shell:E}=e;const w=C.__("Console");v=v!==null&&v!==void 0?v:o.sessionContextDialogs;const x=new o.WidgetTracker({namespace:"console"});if(l){void l.restore(x,{command:y.create,args:e=>{const{path:t,name:n,kernelPreference:r}=e.console.sessionContext;return{path:t,name:n,kernelPreference:Object.assign({},r)}},name:e=>{var t;return(t=e.console.sessionContext.path)!==null&&t!==void 0?t:g.UUID.uuid4()},when:b.ready})}if(h){void b.ready.then((()=>{let e=null;const t=()=>{if(e){e.dispose();e=null}const t=b.kernelspecs.specs;if(!t){return}e=new f.DisposableSet;for(const n in t.kernelspecs){const r=n===t.default?0:Infinity;const o=t.kernelspecs[n];let i=o.resources["logo-64x64"];e.add(h.add({command:y.create,args:{isLauncher:true,kernelPreference:{name:n}},category:C.__("Console"),rank:r,kernelIconUrl:i,metadata:{kernel:g.JSONExt.deepCopy(o.metadata||{})}}))}};t();b.kernelspecs.specsChanged.connect(t)}))}async function j(e){var o;await b.ready;const l=new s.ConsolePanel(Object.assign({manager:b,contentFactory:t,mimeTypeService:n.mimeTypeService,rendermime:r,translator:a,setBusy:(o=A&&(()=>A.setBusy()))!==null&&o!==void 0?o:undefined},e));const c=(await i.get("@jupyterlab/console-extension:tracker","interactionMode")).composite;l.console.node.dataset.jpInteractionMode=c;await x.add(l);l.sessionContext.propertyChanged.connect((()=>{void x.save(l)}));E.add(l,"main",{ref:e.ref,mode:e.insertMode,activate:e.activate!==false});return l}const k=(e,t,n)=>{if(t[n]===undefined){return}switch(n){case"autoClosingBrackets":e.setOption("autoClosingBrackets",t["autoClosingBrackets"]);break;case"cursorBlinkRate":e.setOption("cursorBlinkRate",t["cursorBlinkRate"]);break;case"fontFamily":e.setOption("fontFamily",t["fontFamily"]);break;case"fontSize":e.setOption("fontSize",t["fontSize"]);break;case"lineHeight":e.setOption("lineHeight",t["lineHeight"]);break;case"lineNumbers":e.setOption("lineNumbers",t["lineNumbers"]);break;case"lineWrap":e.setOption("lineWrap",t["lineWrap"]);break;case"matchBrackets":e.setOption("matchBrackets",t["matchBrackets"]);break;case"readOnly":e.setOption("readOnly",t["readOnly"]);break;case"insertSpaces":e.setOption("insertSpaces",t["insertSpaces"]);break;case"tabSize":e.setOption("tabSize",t["tabSize"]);break;case"wordWrapColumn":e.setOption("wordWrapColumn",t["wordWrapColumn"]);break;case"rulers":e.setOption("rulers",t["rulers"]);break;case"codeFolding":e.setOption("codeFolding",t["codeFolding"]);break}};const B=(e,t)=>{if(e===undefined){return}k(e,t,"autoClosingBrackets");k(e,t,"cursorBlinkRate");k(e,t,"fontFamily");k(e,t,"fontSize");k(e,t,"lineHeight");k(e,t,"lineNumbers");k(e,t,"lineWrap");k(e,t,"matchBrackets");k(e,t,"readOnly");k(e,t,"insertSpaces");k(e,t,"tabSize");k(e,t,"wordWrapColumn");k(e,t,"rulers");k(e,t,"codeFolding")};const S="@jupyterlab/console-extension:tracker";let D;let M;async function T(e){D=(await i.get(S,"interactionMode")).composite;M=(await i.get(S,"promptCellConfig")).composite;const t=e=>{var t;e.console.node.dataset.jpInteractionMode=D;e.console.editorConfig=M;B((t=e.console.promptCell)===null||t===void 0?void 0:t.editor,M)};if(e){t(e)}else{x.forEach(t)}}i.pluginChanged.connect(((e,t)=>{if(t===S){void T()}}));await T();x.widgetAdded.connect(((e,t)=>{void T(t)}));_.addCommand(y.autoClosingBrackets,{execute:async e=>{var t;M.autoClosingBrackets=!!((t=e["force"])!==null&&t!==void 0?t:!M.autoClosingBrackets);await i.set(S,"promptCellConfig",M)},label:C.__("Auto Close Brackets for Code Console Prompt"),isToggled:()=>M.autoClosingBrackets});function I(){return x.currentWidget!==null&&x.currentWidget===E.currentWidget}let P=y.open;_.addCommand(P,{execute:e=>{const t=e["path"];const n=x.find((e=>{var n;return((n=e.console.sessionContext.session)===null||n===void 0?void 0:n.path)===t}));if(n){if(e.activate!==false){E.activateById(n.id)}return n}else{return b.ready.then((()=>{const n=(0,m.find)(b.sessions.running(),(e=>e.path===t));if(n){return j(e)}return Promise.reject(`No running kernel session for path: ${t}`)}))}}});P=y.create;_.addCommand(P,{label:e=>{var t,n,r,o;if(e["isPalette"]){return C.__("New Console")}else if(e["isLauncher"]&&e["kernelPreference"]){const i=e["kernelPreference"];return(o=(r=(n=(t=b.kernelspecs)===null||t===void 0?void 0:t.specs)===null||n===void 0?void 0:n.kernelspecs[i.name||""])===null||r===void 0?void 0:r.display_name)!==null&&o!==void 0?o:""}return C.__("Console")},icon:e=>e["isPalette"]?undefined:p.consoleIcon,execute:e=>{var t;const n=(t=e["basePath"]||e["cwd"]||(c===null||c===void 0?void 0:c.defaultBrowser.model.path))!==null&&t!==void 0?t:"";return j(Object.assign({basePath:n},e))}});function R(e){const t=x.currentWidget;const n=e["activate"]!==false;if(n&&t){E.activateById(t.id)}return t!==null&&t!==void 0?t:null}_.addCommand(y.clear,{label:C.__("Clear Console Cells"),execute:e=>{const t=R(e);if(!t){return}t.console.clear()},isEnabled:I});_.addCommand(y.runUnforced,{label:C.__("Run Cell (unforced)"),execute:e=>{const t=R(e);if(!t){return}return t.console.execute()},isEnabled:I});_.addCommand(y.runForced,{label:C.__("Run Cell (forced)"),execute:e=>{const t=R(e);if(!t){return}return t.console.execute(true)},isEnabled:I});_.addCommand(y.linebreak,{label:C.__("Insert Line Break"),execute:e=>{const t=R(e);if(!t){return}t.console.insertLinebreak()},isEnabled:I});_.addCommand(y.replaceSelection,{label:C.__("Replace Selection in Console"),execute:e=>{const t=R(e);if(!t){return}const n=e["text"]||"";t.console.replaceSelection(n)},isEnabled:I});_.addCommand(y.interrupt,{label:C.__("Interrupt Kernel"),execute:e=>{var t;const n=R(e);if(!n){return}const r=(t=n.console.sessionContext.session)===null||t===void 0?void 0:t.kernel;if(r){return r.interrupt()}},isEnabled:I});_.addCommand(y.restart,{label:C.__("Restart Kernel"),execute:e=>{const t=R(e);if(!t){return}return v.restart(t.console.sessionContext,a)},isEnabled:I});_.addCommand(y.closeAndShutdown,{label:C.__("Close and Shut Down"),execute:e=>{const t=R(e);if(!t){return}return(0,o.showDialog)({title:C.__("Shut down the console?"),body:C.__('Are you sure you want to close "%1"?',t.title.label),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton()]}).then((e=>{if(e.button.accept){return t.console.sessionContext.shutdown().then((()=>{t.dispose();return true}))}else{return false}}))},isEnabled:I});_.addCommand(y.inject,{execute:e=>{const t=e["path"];x.find((n=>{var r;if(((r=n.console.sessionContext.session)===null||r===void 0?void 0:r.path)===t){if(e["activate"]!==false){E.activateById(n.id)}void n.console.inject(e["code"],e["metadata"]);return true}return false}))},isEnabled:I});_.addCommand(y.changeKernel,{label:C.__("Change Kernel"),execute:e=>{const t=R(e);if(!t){return}return v.selectKernel(t.console.sessionContext,a)},isEnabled:I});if(u){[y.create,y.linebreak,y.clear,y.runUnforced,y.runForced,y.restart,y.interrupt,y.changeKernel,y.closeAndShutdown].forEach((e=>{u.addItem({command:e,category:w,args:{isPalette:true}})}))}if(d){d.fileMenu.closeAndCleaners.add({tracker:x,closeAndCleanupLabel:e=>C.__("Shutdown Console"),closeAndCleanup:e=>(0,o.showDialog)({title:C.__("Shut down the Console?"),body:C.__('Are you sure you want to close "%1"?',e.title.label),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton()]}).then((t=>{if(t.button.accept){return e.console.sessionContext.shutdown().then((()=>{e.dispose()}))}else{return void 0}}))});d.kernelMenu.kernelUsers.add({tracker:x,restartKernelAndClearLabel:e=>C.__("Restart Kernel and Clear Console"),interruptKernel:e=>{var t;const n=(t=e.console.sessionContext.session)===null||t===void 0?void 0:t.kernel;if(n){return n.interrupt()}return Promise.resolve(void 0)},restartKernel:e=>v.restart(e.console.sessionContext,a),restartKernelAndClear:e=>v.restart(e.console.sessionContext).then((t=>{if(t){e.console.clear()}return t})),changeKernel:e=>v.selectKernel(e.console.sessionContext,a),shutdownKernel:e=>e.console.sessionContext.shutdown()});d.runMenu.codeRunners.add({tracker:x,runLabel:e=>C.__("Run Cell"),run:e=>e.console.execute(true)});d.editMenu.clearers.add({tracker:x,clearCurrentLabel:e=>C.__("Clear Console Cell"),clearCurrent:e=>e.console.clear()})}const L={notebook:C.__("Execute with Shift+Enter"),terminal:C.__("Execute with Enter")};_.addCommand(y.interactionMode,{label:e=>L[e["interactionMode"]]||"",execute:async e=>{const t="keyMap";try{await i.set(S,"interactionMode",e["interactionMode"])}catch(n){console.error(`Failed to set ${S}:${t} - ${n.message}`)}},isToggled:e=>e["interactionMode"]===D});if(d){d.helpMenu.kernelUsers.add({tracker:x,getKernel:e=>{var t;return(t=e.sessionContext.session)===null||t===void 0?void 0:t.kernel}})}return x}},28180:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(49914);var a=n(98896);var l=n(90516);var c=n(59240);var d=n(42650);var u=n(52812);var h=n(74518)},80867:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeConsole:()=>S,ConsoleHistory:()=>s,ConsolePanel:()=>T,ForeignHandler:()=>i,IConsoleTracker:()=>P});var r=n(18987);const o="jp-CodeConsole-foreignCell";class i{constructor(e){this._enabled=false;this._isDisposed=false;this.sessionContext=e.sessionContext;this.sessionContext.iopubMessage.connect(this.onIOPubMessage,this);this._parent=e.parent}get enabled(){return this._enabled}set enabled(e){this._enabled=e}get parent(){return this._parent}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;r.Signal.clearData(this)}onIOPubMessage(e,t){var n;if(!this._enabled){return false}const r=(n=this.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(!r){return false}const o=this._parent;const i=t.parent_header.session;if(i===r.clientId){return false}const s=t.header.msg_type;const a=t.parent_header;const l=a.msg_id;let c;switch(s){case"execute_input":{const e=t;c=this._newCell(l);const n=c.model;n.executionCount=e.content.execution_count;n.value.text=e.content.code;n.trusted=true;o.update();return true}case"execute_result":case"display_data":case"stream":case"error":{c=this._parent.getCell(l);if(!c){return false}const e=Object.assign(Object.assign({},t.content),{output_type:s});c.model.outputs.add(e);o.update();return true}case"clear_output":{const e=t.content.wait;c=this._parent.getCell(l);if(c){c.model.outputs.clear(e)}return true}default:return false}}_newCell(e){const t=this.parent.createCodeCell();t.addClass(o);this._parent.addCell(t,e);return t}}class s{constructor(e){this._cursor=0;this._hasSession=false;this._history=[];this._placeholder="";this._setByHistory=false;this._isDisposed=false;this._editor=null;this._filtered=[];this.sessionContext=e.sessionContext;void this._handleKernel();this.sessionContext.kernelChanged.connect(this._handleKernel,this)}get editor(){return this._editor}set editor(e){if(this._editor===e){return}const t=this._editor;if(t){t.edgeRequested.disconnect(this.onEdgeRequest,this);t.model.value.changed.disconnect(this.onTextChange,this)}this._editor=e;if(e){e.edgeRequested.connect(this.onEdgeRequest,this);e.model.value.changed.connect(this.onTextChange,this)}}get placeholder(){return this._placeholder}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed=true;this._history.length=0;r.Signal.clearData(this)}back(e){if(!this._hasSession){this._hasSession=true;this._placeholder=e;this.setFilter(e);this._cursor=this._filtered.length-1}--this._cursor;this._cursor=Math.max(0,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}forward(e){if(!this._hasSession){this._hasSession=true;this._placeholder=e;this.setFilter(e);this._cursor=this._filtered.length}++this._cursor;this._cursor=Math.min(this._filtered.length-1,this._cursor);const t=this._filtered[this._cursor];return Promise.resolve(t)}push(e){if(e&&e!==this._history[this._history.length-1]){this._history.push(e)}this.reset()}reset(){this._cursor=this._history.length;this._hasSession=false;this._placeholder=""}onHistory(e){this._history.length=0;let t="";let n="";if(e.content.status==="ok"){for(let r=0;r<e.content.history.length;r++){n=e.content.history[r][2];if(n!==t){this._history.push(t=n)}}}this._cursor=this._history.length}onTextChange(){if(this._setByHistory){this._setByHistory=false;return}this.reset()}onEdgeRequest(e,t){const n=e.model;const r=n.value.text;if(t==="top"||t==="topLine"){void this.back(r).then((t=>{if(this.isDisposed||!t){return}if(n.value.text===t){return}this._setByHistory=true;n.value.text=t;let r=0;r=t.indexOf("\n");if(r<0){r=t.length}e.setCursorPosition({line:0,column:r})}))}else{void this.forward(r).then((t=>{if(this.isDisposed){return}const r=t||this.placeholder;if(n.value.text===r){return}this._setByHistory=true;n.value.text=r;const o=e.getPositionAt(r.length);if(o){e.setCursorPosition(o)}}))}}async _handleKernel(){var e;const t=(e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel;if(!t){this._history.length=0;return}return t.requestHistory(a.initialRequest).then((e=>{this.onHistory(e)}))}setFilter(e=""){this._filtered.length=0;let t="";let n="";for(let r=0;r<this._history.length;r++){n=this._history[r];if(n!==t&&e===n.slice(0,e.length)){this._filtered.push(t=n)}}this._filtered.push(e)}}var a;(function(e){e.initialRequest={output:false,raw:true,hist_access_type:"tail",n:500}})(a||(a={}));var l=n(3378);var c=n(69442);var d=n(63833);var u=n(59768);var h=n(25903);var p=n(91100);var m=n(700);var g=n(76191);var f=n(82714);var A=n(54522);var v=n(9004);const C="jpKernelUser";const b="jpCodeRunner";const _="jp-CodeConsole";const y="jp-Console-cell";const E="jp-CodeConsole-banner";const w="jp-CodeConsole-promptCell";const x="jp-CodeConsole-content";const j="jp-CodeConsole-input";const k=250;const B="application/vnd.jupyter.cells";class S extends m.Widget{constructor(e){super();this._banner=null;this._executed=new r.Signal(this);this._mimetype="text/x-ipython";this._msgIds=new Map;this._msgIdCells=new Map;this._promptCellCreated=new r.Signal(this);this._dragData=null;this._drag=null;this._focusedCell=null;this.addClass(_);this.node.dataset[C]="true";this.node.dataset[b]="true";this.node.tabIndex=-1;const t=this.layout=new m.PanelLayout;this._cells=new f.ObservableList;this._content=new m.Panel;this._input=new m.Panel;this.contentFactory=e.contentFactory||S.defaultContentFactory;this.modelFactory=e.modelFactory||S.defaultModelFactory;this.rendermime=e.rendermime;this.sessionContext=e.sessionContext;this._mimeTypeService=e.mimeTypeService;this._content.addClass(x);this._input.addClass(j);t.addWidget(this._content);t.addWidget(this._input);this._history=new s({sessionContext:this.sessionContext});void this._onKernelChanged();this.sessionContext.kernelChanged.connect(this._onKernelChanged,this);this.sessionContext.statusChanged.connect(this._onKernelStatusChanged,this)}get executed(){return this._executed}get promptCellCreated(){return this._promptCellCreated}get cells(){return this._cells}get promptCell(){const e=this._input.layout;return e.widgets[0]||null}addCell(e,t){e.addClass(y);this._content.addWidget(e);this._cells.push(e);if(t){this._msgIds.set(t,e);this._msgIdCells.set(e,t)}e.disposed.connect(this._onCellDisposed,this);this.update()}addBanner(){if(this._banner){const e=this._banner;this._cells.push(this._banner);e.disposed.connect(this._onCellDisposed,this)}const e=this.modelFactory.createRawCell({});e.value.text="...";const t=(this._banner=new g.RawCell({model:e,contentFactory:this.contentFactory,placeholder:false})).initializeState();t.addClass(E);t.readOnly=true;this._content.addWidget(t)}clear(){const e=this._cells;while(e.length>0){e.get(0).dispose()}}createCodeCell(){const e=this.contentFactory;const t=this._createCodeCellOptions();const n=e.createCodeCell(t);n.readOnly=true;n.model.mimeType=this._mimetype;return n}dispose(){if(this.isDisposed){return}this._cells.clear();this._msgIdCells=null;this._msgIds=null;this._history.dispose();super.dispose()}async execute(e=false,t=k){var n,r;if(((r=(n=this.sessionContext.session)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.status)==="dead"){return}const o=this.promptCell;if(!o){throw new Error("Cannot execute without a prompt cell")}o.model.trusted=true;if(e){this.newPromptCell();await this._execute(o);return}const i=await this._shouldExecute(t);if(this.isDisposed){return}if(i){this.newPromptCell();this.promptCell.editor.focus();await this._execute(o)}else{o.editor.newIndentedLine()}}getCell(e){return this._msgIds.get(e)}inject(e,t={}){const n=this.createCodeCell();n.model.value.text=e;for(const r of Object.keys(t)){n.model.metadata.set(r,t[r])}this.addCell(n);return this._execute(n)}insertLinebreak(){const e=this.promptCell;if(!e){return}e.editor.newIndentedLine()}replaceSelection(e){var t,n;const r=this.promptCell;if(!r){return}(n=(t=r.editor).replaceSelection)===null||n===void 0?void 0:n.call(t,e)}serialize(){const e=[];(0,A.each)(this._cells,(t=>{const n=t.model;if((0,g.isCodeCellModel)(n)){e.push(n.toJSON())}}));if(this.promptCell){e.push(this.promptCell.model.toJSON())}return e}_evtMouseDown(e){const{button:t,shiftKey:n}=e;if(!(t===0||t===2)||n&&t===2){return}let r=e.target;const o=e=>e.classList.contains(y);let i=g.CellDragUtils.findCell(r,this._cells,o);if(i===-1){r=document.elementFromPoint(e.clientX,e.clientY);i=g.CellDragUtils.findCell(r,this._cells,o)}if(i===-1){return}const s=this._cells.get(i);const a=g.CellDragUtils.detectTargetArea(s,e.target);if(a==="prompt"){this._dragData={pressX:e.clientX,pressY:e.clientY,index:i};this._focusedCell=s;document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true);e.preventDefault()}}_evtMouseMove(e){const t=this._dragData;if(t&&g.CellDragUtils.shouldStartDrag(t.pressX,t.pressY,e.clientX,e.clientY)){void this._startDrag(t.index,e.clientX,e.clientY)}}_startDrag(e,t,n){const r=this._focusedCell.model;const o=[r.toJSON()];const i=g.CellDragUtils.createCellDragImage(this._focusedCell,o);this._drag=new v.Drag({mimeData:new p.MimeData,dragImage:i,proposedAction:"copy",supportedActions:"copy",source:this});this._drag.mimeData.setData(B,o);const s=r.value.text;this._drag.mimeData.setData("text/plain",s);this._focusedCell=null;document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);return this._drag.start(t,n).then((()=>{if(this.isDisposed){return}this._drag=null;this._dragData=null}))}handleEvent(e){switch(e.type){case"keydown":this._evtKeyDown(e);break;case"mousedown":this._evtMouseDown(e);break;case"mousemove":this._evtMouseMove(e);break;case"mouseup":this._evtMouseUp(e);break;default:break}}onAfterAttach(e){const t=this.node;t.addEventListener("keydown",this,true);t.addEventListener("click",this);t.addEventListener("mousedown",this);if(!this.promptCell){this.newPromptCell()}else{this.promptCell.editor.focus();this.update()}}onBeforeDetach(e){const t=this.node;t.removeEventListener("keydown",this,true);t.removeEventListener("click",this)}onActivateRequest(e){const t=this.promptCell&&this.promptCell.editor;if(t){t.focus()}this.update()}newPromptCell(){let e=this.promptCell;const t=this._input;if(e){e.readOnly=true;e.removeClass(w);r.Signal.clearData(e.editor);const n=t.widgets[0];n.parent=null;this.addCell(e)}const n=this.contentFactory;const o=this._createCodeCellOptions();e=n.createCodeCell(o);e.model.mimeType=this._mimetype;e.addClass(w);this._input.addWidget(e);const i=e.editor;i.addKeydownHandler(this._onEditorKeydown);this._history.editor=i;this._promptCellCreated.emit(e)}onUpdateRequest(e){D.scrollToBottom(this._content.node)}_evtKeyDown(e){const t=this.promptCell&&this.promptCell.editor;if(!t){return}if(e.keyCode===13&&!t.hasFocus()){e.preventDefault();t.focus()}else if(e.keyCode===27&&t.hasFocus()){e.preventDefault();e.stopPropagation();this.node.focus()}}_evtMouseUp(e){if(this.promptCell&&this.promptCell.node.contains(e.target)){this.promptCell.editor.focus()}}_execute(e){const t=e.model.value.text;this._history.push(t);if(t==="clear"||t==="%clear"){this.clear();return Promise.resolve(void 0)}e.model.contentChanged.connect(this.update,this);const n=t=>{if(this.isDisposed){return}if(t&&t.content.status==="ok"){const n=t.content;if(n.payload&&n.payload.length){const t=n.payload.filter((e=>e.source==="set_next_input"))[0];if(t){const n=t.text;e.model.value.text=n}}}else if(t&&t.content.status==="error"){(0,A.each)(this._cells,(e=>{if(e.model.executionCount===null){e.setPrompt("")}}))}e.model.contentChanged.disconnect(this.update,this);this.update();this._executed.emit(new Date)};const r=()=>{if(this.isDisposed){return}e.model.contentChanged.disconnect(this.update,this);this.update()};return g.CodeCell.execute(e,this.sessionContext).then(n,r)}_handleInfo(e){if(e.status!=="ok"){this._banner.model.value.text="Error in getting kernel banner";return}this._banner.model.value.text=e.banner;const t=e.language_info;this._mimetype=this._mimeTypeService.getMimeTypeByLanguage(t);if(this.promptCell){this.promptCell.model.mimeType=this._mimetype}}_createCodeCellOptions(){const e=this.contentFactory;const t=this.modelFactory;const n=t.createCodeCell({});const r=this.rendermime;const o=this.editorConfig;return{model:n,rendermime:r,contentFactory:e,editorConfig:o,placeholder:false}}_onCellDisposed(e,t){if(!this.isDisposed){this._cells.removeValue(e);const t=this._msgIdCells.get(e);if(t){this._msgIdCells.delete(e);this._msgIds.delete(t)}}}_shouldExecute(e){const t=this.promptCell;if(!t){return Promise.resolve(false)}const n=t.model;const r=n.value.text;return new Promise(((t,n)=>{var o;const i=setTimeout((()=>{t(true)}),e);const s=(o=this.sessionContext.session)===null||o===void 0?void 0:o.kernel;if(!s){t(false);return}s.requestIsComplete({code:r}).then((e=>{clearTimeout(i);if(this.isDisposed){t(false)}if(e.content.status!=="incomplete"){t(true);return}t(false)})).catch((()=>{t(true)}))}))}_onEditorKeydown(e,t){return t.keyCode===13}async _onKernelChanged(){var e;this.clear();if(this._banner){this._banner.dispose();this._banner=null}this.addBanner();if((e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel){this._handleInfo(await this.sessionContext.session.kernel.info)}}async _onKernelStatusChanged(){var e;const t=(e=this.sessionContext.session)===null||e===void 0?void 0:e.kernel;if((t===null||t===void 0?void 0:t.status)==="restarting"){this.addBanner();this._handleInfo(await(t===null||t===void 0?void 0:t.info))}}}(function(e){class t extends g.Cell.ContentFactory{createCodeCell(e){if(!e.contentFactory){e.contentFactory=this}return new g.CodeCell(e).initializeState()}createRawCell(e){if(!e.contentFactory){e.contentFactory=this}return new g.RawCell(e).initializeState()}}e.ContentFactory=t;e.defaultContentFactory=new t;class n{constructor(e={}){this.codeCellContentFactory=e.codeCellContentFactory||g.CodeCellModel.defaultContentFactory}createCodeCell(e){if(!e.contentFactory){e.contentFactory=this.codeCellContentFactory}return new g.CodeCellModel(e)}createRawCell(e){return new g.RawCellModel(e)}}e.ModelFactory=n;e.defaultModelFactory=new n({})})(S||(S={}));var D;(function(e){function t(e){e.scrollTop=e.scrollHeight-e.clientHeight}e.scrollToBottom=t})(D||(D={}));const M="jp-ConsolePanel";class T extends l.MainAreaWidget{constructor(e){super({content:new m.Panel});this._executed=null;this._connected=null;this.addClass(M);let{rendermime:t,mimeTypeService:n,path:r,basePath:o,name:i,manager:s,modelFactory:a,sessionContext:g,translator:f}=e;this.translator=f||u.nullTranslator;const A=this.translator.load("jupyterlab");const v=this.contentFactory=e.contentFactory||T.defaultContentFactory;const C=I.count++;if(!r){r=c.URLExt.join(o||"",`console-${C}-${p.UUID.uuid4()}`)}g=this._sessionContext=g||new l.SessionContext({sessionManager:s.sessions,specsManager:s.kernelspecs,path:r,name:i||A.__("Console %1",C),type:"console",kernelPreference:e.kernelPreference,setBusy:e.setBusy});const b=new d.RenderMimeRegistry.UrlResolver({session:g,contents:s.contents});t=t.clone({resolver:b});this.console=v.createConsole({rendermime:t,sessionContext:g,mimeTypeService:n,contentFactory:v,modelFactory:a});this.content.addWidget(this.console);void g.initialize().then((async e=>{if(e){await l.sessionContextDialogs.selectKernel(g)}this._connected=new Date;this._updateTitlePanel()}));this.console.executed.connect(this._onExecuted,this);this._updateTitlePanel();g.kernelChanged.connect(this._updateTitlePanel,this);g.propertyChanged.connect(this._updateTitlePanel,this);this.title.icon=h.consoleIcon;this.title.closable=true;this.id=`console-${C}`}get sessionContext(){return this._sessionContext}dispose(){this.sessionContext.dispose();this.console.dispose();super.dispose()}onActivateRequest(e){const t=this.console.promptCell;if(t){t.editor.focus()}}onCloseRequest(e){super.onCloseRequest(e);this.dispose()}_onExecuted(e,t){this._executed=t;this._updateTitlePanel()}_updateTitlePanel(){I.updateTitle(this,this._connected,this._executed,this.translator)}}(function(e){class t extends S.ContentFactory{createConsole(e){return new S(e)}}e.ContentFactory=t;e.defaultContentFactory=new t;e.IContentFactory=new p.Token("@jupyterlab/console:IContentFactory")})(T||(T={}));var I;(function(e){e.count=1;function t(e,t,n,r){r=r||u.nullTranslator;const o=r.load("jupyterlab");const i=e.console.sessionContext.session;if(i){let r=o.__("Name: %1\n",i.name)+o.__("Directory: %1\n",c.PathExt.dirname(i.path))+o.__("Kernel: %1",e.console.sessionContext.kernelDisplayName);if(t){r+=o.__("\nConnected: %1",c.Time.format(t.toISOString()))}if(n){r+=o.__("\nLast Execution: %1")}e.title.label=i.name;e.title.caption=r}else{e.title.label=o.__("Console");e.title.caption=""}}e.updateTitle=t})(I||(I={}));const P=new p.Token("@jupyterlab/console:IConsoleTracker")},42650:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(22748);var a=n(49914);var l=n(98896);var c=n(5956);var d=n(93379);var u=n.n(d);var h=n(79937);var p={};p.insert="head";p.singleton=false;var m=u()(h.Z,p);const g=h.Z.locals||{}},47542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ActivityMonitor=void 0;const r=n(18987);class o{constructor(e){this._timer=-1;this._timeout=-1;this._isDisposed=false;this._activityStopped=new r.Signal(this);e.signal.connect(this._onSignalFired,this);this._timeout=e.timeout||1e3}get activityStopped(){return this._activityStopped}get timeout(){return this._timeout}set timeout(e){this._timeout=e}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;r.Signal.clearData(this)}_onSignalFired(e,t){clearTimeout(this._timer);this._sender=e;this._args=t;this._timer=setTimeout((()=>{this._activityStopped.emit({sender:this._sender,args:this._args})}),this._timeout)}}t.ActivityMonitor=o},79622:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var o=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))r(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});o(n(47542),t);o(n(92086),t);o(n(47390),t);o(n(99458),t);o(n(20176),t);o(n(47846),t);o(n(32533),t);o(n(57319),t)},92086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},47390:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MarkdownCodeBlocks=void 0;var n;(function(e){e.CODE_BLOCK_MARKER="```";const t=[".markdown",".mdown",".mkdn",".md",".mkd",".mdwn",".mdtxt",".mdtext",".text",".txt",".Rmd"];class n{constructor(e){this.startLine=e;this.code="";this.endLine=-1}}e.MarkdownCodeBlock=n;function r(e){return t.indexOf(e)>-1}e.isMarkdown=r;function o(t){if(!t||t===""){return[]}const r=t.split("\n");const o=[];let i=null;for(let s=0;s<r.length;s++){const t=r[s];const a=t.indexOf(e.CODE_BLOCK_MARKER)===0;const l=i!=null;if(!a&&!l){continue}if(!l){i=new n(s);const r=t.indexOf(e.CODE_BLOCK_MARKER);const a=t.lastIndexOf(e.CODE_BLOCK_MARKER);const l=r!==a;if(l){i.code=t.substring(r+e.CODE_BLOCK_MARKER.length,a);i.endLine=s;o.push(i);i=null}}else if(i){if(a){i.endLine=s-1;o.push(i);i=null}else{i.code+=t+"\n"}}}return o}e.findMarkdownCodeBlocks=o})(n=t.MarkdownCodeBlocks||(t.MarkdownCodeBlocks={}))},99458:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var process=__webpack_require__(34155);var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:true});exports.PageConfig=void 0;const coreutils_1=__webpack_require__(91100);const minimist_1=__importDefault(__webpack_require__(96562));const url_1=__webpack_require__(57319);var PageConfig;(function(PageConfig){function getOption(name){if(configData){return configData[name]||getBodyData(name)}configData=Object.create(null);let found=false;if(typeof document!=="undefined"&&document){const e=document.getElementById("jupyter-config-data");if(e){configData=JSON.parse(e.textContent||"");found=true}}if(!found&&typeof process!=="undefined"&&process.argv){try{const cli=minimist_1.default(process.argv.slice(2));const path=__webpack_require__(26470);let fullPath="";if("jupyter-config-data"in cli){fullPath=path.resolve(cli["jupyter-config-data"])}else if("JUPYTER_CONFIG_DATA"in process.env){fullPath=path.resolve(process.env["JUPYTER_CONFIG_DATA"])}if(fullPath){configData=eval("require")(fullPath)}}catch(e){console.error(e)}}if(!coreutils_1.JSONExt.isObject(configData)){configData=Object.create(null)}else{for(const e in configData){if(typeof configData[e]!=="string"){configData[e]=JSON.stringify(configData[e])}}}return configData[name]||getBodyData(name)}PageConfig.getOption=getOption;function setOption(e,t){const n=getOption(e);configData[e]=t;return n}PageConfig.setOption=setOption;function getBaseUrl(){return url_1.URLExt.normalize(getOption("baseUrl")||"/")}PageConfig.getBaseUrl=getBaseUrl;function getTreeUrl(){return url_1.URLExt.join(getBaseUrl(),getOption("treeUrl"))}PageConfig.getTreeUrl=getTreeUrl;function getShareUrl(){return url_1.URLExt.normalize(getOption("shareUrl")||getBaseUrl())}PageConfig.getShareUrl=getShareUrl;function getTreeShareUrl(){return url_1.URLExt.normalize(url_1.URLExt.join(getShareUrl(),getOption("treeUrl")))}PageConfig.getTreeShareUrl=getTreeShareUrl;function getUrl(e){var t,n,r,o;let i=e.toShare?getShareUrl():getBaseUrl();const s=(t=e.mode)!==null&&t!==void 0?t:getOption("mode");const a=(n=e.workspace)!==null&&n!==void 0?n:getOption("workspace");const l=s==="single-document"?"doc":"lab";i=url_1.URLExt.join(i,l);if(a!==PageConfig.defaultWorkspace){i=url_1.URLExt.join(i,"workspaces",encodeURIComponent((r=getOption("workspace"))!==null&&r!==void 0?r:PageConfig.defaultWorkspace))}const c=(o=e.treePath)!==null&&o!==void 0?o:getOption("treePath");if(c){i=url_1.URLExt.join(i,"tree",url_1.URLExt.encodeParts(c))}return i}PageConfig.getUrl=getUrl;PageConfig.defaultWorkspace="default";function getWsUrl(e){let t=getOption("wsUrl");if(!t){e=e?url_1.URLExt.normalize(e):getBaseUrl();if(e.indexOf("http")!==0){return""}t="ws"+e.slice(4)}return url_1.URLExt.normalize(t)}PageConfig.getWsUrl=getWsUrl;function getNBConvertURL({path:e,format:t,download:n}){const r=url_1.URLExt.encodeParts(e);const o=url_1.URLExt.join(getBaseUrl(),"nbconvert",t,r);if(n){return o+"?download=true"}return o}PageConfig.getNBConvertURL=getNBConvertURL;function getToken(){return getOption("token")||getBodyData("jupyterApiToken")}PageConfig.getToken=getToken;function getNotebookVersion(){const e=getOption("notebookVersion");if(e===""){return[0,0,0]}return JSON.parse(e)}PageConfig.getNotebookVersion=getNotebookVersion;let configData=null;function getBodyData(e){if(typeof document==="undefined"||!document.body){return""}const t=document.body.dataset[e];if(typeof t==="undefined"){return""}return decodeURIComponent(t)}let Extension;(function(e){function t(e){try{const t=getOption(e);if(t){return JSON.parse(t)}}catch(t){console.warn(`Unable to parse ${e}.`,t)}return[]}e.deferred=t("deferredExtensions");e.disabled=t("disabledExtensions");function n(t){const n=t.indexOf(":");let r="";if(n!==-1){r=t.slice(0,n)}return e.deferred.some((e=>e===t||r&&e===r))}e.isDeferred=n;function r(t){const n=t.indexOf(":");let r="";if(n!==-1){r=t.slice(0,n)}return e.disabled.some((e=>e===t||r&&e===r))}e.isDisabled=r})(Extension=PageConfig.Extension||(PageConfig.Extension={}))})(PageConfig=exports.PageConfig||(exports.PageConfig={}))},20176:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PathExt=void 0;const r=n(26470);var o;(function(e){function t(...e){const t=r.posix.join(...e);return t==="."?"":d(t)}e.join=t;function n(e,t){return r.posix.basename(e,t)}e.basename=n;function o(e){const t=d(r.posix.dirname(e));return t==="."?"":t}e.dirname=o;function i(e){return r.posix.extname(e)}e.extname=i;function s(e){if(e===""){return""}return d(r.posix.normalize(e))}e.normalize=s;function a(...e){return d(r.posix.resolve(...e))}e.resolve=a;function l(e,t){return d(r.posix.relative(e,t))}e.relative=l;function c(e){if(e.length>0&&e.indexOf(".")!==0){e=`.${e}`}return e}e.normalizeExtension=c;function d(e){if(e.indexOf("/")===0){e=e.slice(1)}return e}e.removeSlash=d})(o=t.PathExt||(t.PathExt={}))},47846:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Text=void 0;var n;(function(e){const t="".length>1;function n(e,n){if(t){return e}let r=e;for(let t=0;t+1<n.length&&t<e;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);if(e>=56320&&e<=57343){r--;t++}}}return r}e.jsIndexToCharIndex=n;function r(e,n){if(t){return e}let r=e;for(let t=0;t+1<n.length&&t<r;t++){const e=n.charCodeAt(t);if(e>=55296&&e<=56319){const e=n.charCodeAt(t+1);if(e>=56320&&e<=57343){r++;t++}}}return r}e.charIndexToJsIndex=r;function o(e,t=false){return e.replace(/^(\w)|[\s-_:]+(\w)/g,(function(e,n,r){if(r){return r.toUpperCase()}else{return t?n.toUpperCase():n.toLowerCase()}}))}e.camelCase=o;function i(e){return(e||"").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}e.titleCase=i})(n=t.Text||(t.Text={}))},32533:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.Time=void 0;const o=r(n(30381));var i;(function(e){function t(e){o.default.locale(document.documentElement.lang);let t=o.default(e).fromNow();t=t==="a few seconds ago"?"seconds ago":t;return t}e.formatHuman=t;function n(e,t="YYYY-MM-DD HH:mm"){return o.default(e).format(t)}e.format=n})(i=t.Time||(t.Time={}))},57319:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.URLExt=void 0;const o=n(26470);const i=r(n(84564));var s;(function(e){function t(e){if(typeof document!=="undefined"&&document){const t=document.createElement("a");t.href=e;return t}return i.default(e)}e.parse=t;function n(e){return i.default(e).hostname}e.getHostName=n;function r(e){return e&&t(e).toString()}e.normalize=r;function s(...e){const t=i.default(e[0],{});const n=`${t.protocol}${t.slashes?"//":""}${t.auth}${t.auth?"@":""}${t.host}`;const r=o.posix.join(`${!!n&&t.pathname[0]!=="/"?"/":""}${t.pathname}`,...e.slice(1));return`${n}${r==="."?"":r}`}e.join=s;function a(e){return s(...e.split("/").map(encodeURIComponent))}e.encodeParts=a;function l(e){const t=Object.keys(e).filter((e=>e.length>0));if(!t.length){return""}return"?"+t.map((t=>{const n=encodeURIComponent(String(e[t]));return t+(n?"="+n:"")})).join("&")}e.objectToQueryString=l;function c(e){return e.replace(/^\?/,"").split("&").reduce(((e,t)=>{const[n,r]=t.split("=");if(n.length>0){e[n]=decodeURIComponent(r||"")}return e}),{})}e.queryStringToObject=c;function d(e){const{protocol:n}=t(e);return(!n||e.toLowerCase().indexOf(n)!==0)&&e.indexOf("/")!==0}e.isLocal=d})(s=t.URLExt||(t.URLExt={}))},70224:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>y});var r=n(97577);var o=n(3378);var i=n(45303);var s=n(7213);var a=n(73704);var l=n(42014);var c=n(59768);var d=n(6967);var u=n(34576);var h=n(18987);class p{constructor(){this.matches=[];this.currentMatchIndex=null;this.isReadOnly=true;this._changed=new h.Signal(this)}static canSearchOn(e){return e instanceof u.DocumentWidget&&e.content instanceof i.CSVViewer}getInitialQuery(e){return null}async startQuery(e,t){this._target=t;this._query=e;t.content.searchService.find(e);return this.matches}async endQuery(){this._target.content.searchService.clear()}async endSearch(){this._target.content.searchService.clear()}async highlightNext(){this._target.content.searchService.find(this._query);return undefined}async highlightPrevious(){this._target.content.searchService.find(this._query,true);return undefined}async replaceCurrentMatch(e){return false}async replaceAllMatches(e){return false}get changed(){return this._changed}}const m="CSVTable";const g="TSVTable";const f={activate:C,id:"@jupyterlab/csvviewer-extension:csv",requires:[c.ITranslator],optional:[r.ILayoutRestorer,o.IThemeManager,a.IMainMenu,s.ISearchProviderRegistry,l.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};const A={activate:b,id:"@jupyterlab/csvviewer-extension:tsv",requires:[c.ITranslator],optional:[r.ILayoutRestorer,o.IThemeManager,a.IMainMenu,s.ISearchProviderRegistry,l.ISettingRegistry,o.IToolbarWidgetRegistry],autoStart:true};function v(e,t,n){const r=n.load("jupyterlab");e.editMenu.goToLiners.add({tracker:t,goToLine:e=>o.InputDialog.getNumber({title:r.__("Go to Line"),value:0}).then((t=>{if(t.button.accept&&t.value!==null){e.content.goToLine(t.value)}}))})}function C(e,t,n,r,s,a,l,c){let d;if(c){c.registerFactory(m,"delimiter",(e=>new i.CSVDelimiter({widget:e.content,translator:t})));if(l){d=(0,o.createToolbarFactory)(c,l,m,f.id,t)}}const u=new i.CSVViewerFactory({name:m,fileTypes:["csv"],defaultFor:["csv"],readOnly:true,toolbarFactory:d,translator:t});const h=new o.WidgetTracker({namespace:"csvviewer"});let g=E.LIGHT_STYLE;let A=E.LIGHT_TEXT_CONFIG;if(n){void n.restore(h,{command:"docmanager:open",args:e=>({path:e.context.path,factory:m}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(u);const C=e.docRegistry.getFileType("csv");u.widgetCreated.connect(((e,t)=>{void h.add(t);t.context.pathChanged.connect((()=>{void h.save(t)}));if(C){t.title.icon=C.icon;t.title.iconClass=C.iconClass;t.title.iconLabel=C.iconLabel}t.content.style=g;t.content.rendererConfig=A}));const b=()=>{const e=r&&r.theme?r.isLight(r.theme):true;g=e?E.LIGHT_STYLE:E.DARK_STYLE;A=e?E.LIGHT_TEXT_CONFIG:E.DARK_TEXT_CONFIG;h.forEach((e=>{e.content.style=g;e.content.rendererConfig=A}))};if(r){r.themeChanged.connect(b)}if(s){v(s,h,t)}if(a){a.register("csv",p)}}function b(e,t,n,r,s,a,l,c){let d;if(c){c.registerFactory(g,"delimiter",(e=>new i.CSVDelimiter({widget:e.content,translator:t})));if(l){d=(0,o.createToolbarFactory)(c,l,g,A.id,t)}}const u=new i.TSVViewerFactory({name:g,fileTypes:["tsv"],defaultFor:["tsv"],readOnly:true,toolbarFactory:d,translator:t});const h=new o.WidgetTracker({namespace:"tsvviewer"});let m=E.LIGHT_STYLE;let f=E.LIGHT_TEXT_CONFIG;if(n){void n.restore(h,{command:"docmanager:open",args:e=>({path:e.context.path,factory:g}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(u);const C=e.docRegistry.getFileType("tsv");u.widgetCreated.connect(((e,t)=>{void h.add(t);t.context.pathChanged.connect((()=>{void h.save(t)}));if(C){t.title.icon=C.icon;t.title.iconClass=C.iconClass;t.title.iconLabel=C.iconLabel}t.content.style=m;t.content.rendererConfig=f}));const b=()=>{const e=r&&r.theme?r.isLight(r.theme):true;m=e?E.LIGHT_STYLE:E.DARK_STYLE;f=e?E.LIGHT_TEXT_CONFIG:E.DARK_TEXT_CONFIG;h.forEach((e=>{e.content.style=m;e.content.rendererConfig=f}))};if(r){r.themeChanged.connect(b)}if(s){v(s,h,t)}if(a){a.register("tsv",p)}}const _=[f,A];const y=_;var E;(function(e){e.LIGHT_STYLE=Object.assign(Object.assign({},d.DataGrid.defaultStyle),{voidColor:"#F3F3F3",backgroundColor:"white",headerBackgroundColor:"#EEEEEE",gridLineColor:"rgba(20, 20, 20, 0.15)",headerGridLineColor:"rgba(20, 20, 20, 0.25)",rowBackgroundColor:e=>e%2===0?"#F5F5F5":"white"});e.DARK_STYLE=Object.assign(Object.assign({},d.DataGrid.defaultStyle),{voidColor:"black",backgroundColor:"#111111",headerBackgroundColor:"#424242",gridLineColor:"rgba(235, 235, 235, 0.15)",headerGridLineColor:"rgba(235, 235, 235, 0.25)",rowBackgroundColor:e=>e%2===0?"#212121":"#111111"});e.LIGHT_TEXT_CONFIG={textColor:"#111111",matchBackgroundColor:"#FFFFE0",currentMatchBackgroundColor:"#FFFF00",horizontalAlignment:"right"};e.DARK_TEXT_CONFIG={textColor:"#F5F5F5",matchBackgroundColor:"#838423",currentMatchBackgroundColor:"#A3807A",horizontalAlignment:"right"}})(E||(E={}))},2542:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(94683);var s=n(90516);var a=n(93379);var l=n.n(a);var c=n(13818);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{};var p=n(38613);var m=n(74518)},83026:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CSVDelimiter:()=>C,CSVDocumentWidget:()=>D,CSVViewer:()=>S,CSVViewerFactory:()=>T,DSVModel:()=>d,GridSearchService:()=>B,TSVViewerFactory:()=>I,TextRenderConfig:()=>k,parseDSV:()=>a,parseDSVNoQuotes:()=>l});var r=n(91100);var o=n(6967);var i;(function(e){e[e["QUOTED_FIELD"]=0]="QUOTED_FIELD";e[e["QUOTED_FIELD_QUOTE"]=1]="QUOTED_FIELD_QUOTE";e[e["UNQUOTED_FIELD"]=2]="UNQUOTED_FIELD";e[e["NEW_FIELD"]=3]="NEW_FIELD";e[e["NEW_ROW"]=4]="NEW_ROW"})(i||(i={}));var s;(function(e){e[e["CR"]=0]="CR";e[e["CRLF"]=1]="CRLF";e[e["LF"]=2]="LF"})(s||(s={}));function a(e){const{data:t,columnOffsets:n,delimiter:r=",",startIndex:o=0,maxRows:a=4294967295,rowDelimiter:l="\r\n",quote:c='"'}=e;let d=e.ncols;let u=0;const h=[];const p=r.charCodeAt(0);const m=c.charCodeAt(0);const g=10;const f=13;const A=t.length;const{QUOTED_FIELD:v,QUOTED_FIELD_QUOTE:C,UNQUOTED_FIELD:b,NEW_FIELD:_,NEW_ROW:y}=i;const{CR:E,LF:w,CRLF:x}=s;const[j,k]=l==="\r\n"?[x,2]:l==="\r"?[E,1]:[w,1];let B=y;let S=o;let D=0;let M;while(S<A){if(B===y){h.push(S);D=1}M=t.charCodeAt(S);switch(B){case y:case _:switch(M){case m:B=v;break;case p:B=_;break;case f:if(j===E){B=y}else if(j===x&&t.charCodeAt(S+1)===g){S++;B=y}else{throw`string index ${S} (in row ${u}, column ${D}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(S+1)}`}break;case g:if(j===w){B=y}else{throw`string index ${S} (in row ${u}, column ${D}): line feed found, but row delimiter starts with a carriage return`}break;default:B=b;break}break;case v:S=t.indexOf(c,S);if(S<0){throw`string index ${S} (in row ${u}, column ${D}): mismatched quote`}B=C;break;case C:switch(M){case m:B=v;break;case p:B=_;break;case f:if(j===E){B=y}else if(j===x&&t.charCodeAt(S+1)===g){S++;B=y}else{throw`string index ${S} (in row ${u}, column ${D}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(S+1)}`}break;case g:if(j===w){B=y}else{throw`string index ${S} (in row ${u}, column ${D}): line feed found, but row delimiter starts with a carriage return`}break;default:throw`string index ${S} (in row ${u}, column ${D}): quote in escaped field not followed by quote, delimiter, or row delimiter`}break;case b:while(S<A){M=t.charCodeAt(S);if(M===p||M===g||M===f){break}S++}switch(M){case p:B=_;break;case f:if(j===E){B=y}else if(j===x&&t.charCodeAt(S+1)===g){S++;B=y}else{throw`string index ${S} (in row ${u}, column ${D}): carriage return found, but not as part of a row delimiter C ${t.charCodeAt(S+1)}`}break;case g:if(j===w){B=y}else{throw`string index ${S} (in row ${u}, column ${D}): line feed found, but row delimiter starts with a carriage return`}break;default:continue}break;default:throw`string index ${S} (in row ${u}, column ${D}): state not recognized`}S++;switch(B){case y:u++;if(d===undefined){if(u!==1){throw new Error("Error parsing default number of columns")}d=D}if(n===true){if(D<d){for(;D<d;D++){h.push(S-k)}}else if(D>d){h.length=h.length-(D-d)}}if(u===a){return{nrows:u,ncols:n?d:0,offsets:h}}break;case _:if(n===true){h.push(S)}D++;break;default:break}}if(B!==y){u++;if(n===true){if(d===undefined){d=D}if(D<d){for(;D<d;D++){h.push(S-(k-1))}}else if(D>d){h.length=h.length-(D-d)}}}return{nrows:u,ncols:n?d!==null&&d!==void 0?d:0:0,offsets:h}}function l(e){const{data:t,columnOffsets:n,delimiter:r=",",rowDelimiter:o="\r\n",startIndex:i=0,maxRows:s=4294967295}=e;let a=e.ncols;const l=[];let c=0;const d=o.length;let u=i;const h=t.length;let p;let m;let g;let f;let A;p=i;while(p!==-1&&c<s&&u<h){l.push(u);c++;p=t.indexOf(o,u);A=p===-1?h:p;if(n===true){m=1;g=t.slice(u,A);f=g.indexOf(r);if(a===undefined){while(f!==-1){l.push(u+f+1);m++;f=g.indexOf(r,f+1)}a=m}else{while(f!==-1&&m<a){l.push(u+f+1);m++;f=g.indexOf(r,f+1)}while(m<a){l.push(A);m++}}}u=A+d}return{nrows:c,ncols:n?a!==null&&a!==void 0?a:0:0,offsets:l}}const c={quotes:a,noquotes:l};class d extends o.DataModel{constructor(e){super();this._rowCount=0;this._header=[];this._columnOffsets=new Uint32Array(0);this._columnOffsetsStartingRow=0;this._maxCacheGet=1e3;this._rowOffsets=new Uint32Array(0);this._delayedParse=null;this._startedParsing=false;this._doneParsing=false;this._isDisposed=false;this._ready=new r.PromiseDelegate;let{data:t,delimiter:n=",",rowDelimiter:o=undefined,quote:i='"',quoteParser:s=undefined,header:a=true,initialRows:l=500}=e;this._rawData=t;this._delimiter=n;this._quote=i;this._quoteEscaped=new RegExp(i+i,"g");this._initialRows=l;if(o===undefined){const e=t.slice(0,5e3).indexOf("\r");if(e===-1){o="\n"}else if(t[e+1]==="\n"){o="\r\n"}else{o="\r"}}this._rowDelimiter=o;if(s===undefined){s=t.indexOf(i)>=0}this._parser=s?"quotes":"noquotes";this.parseAsync();if(a===true&&this._columnCount>0){const e=[];for(let t=0;t<this._columnCount;t++){e.push(this._getField(0,t))}this._header=e}}get isDisposed(){return this._isDisposed}get ready(){return this._ready.promise}get rawData(){return this._rawData}set rawData(e){this._rawData=e}get initialRows(){return this._initialRows}set initialRows(e){this._initialRows=e}get header(){return this._header}set header(e){this._header=e}get delimiter(){return this._delimiter}get rowDelimiter(){return this._rowDelimiter}get doneParsing(){return this._doneParsing}rowCount(e){if(e==="body"){if(this._header.length===0){return this._rowCount}else{return this._rowCount-1}}return 1}columnCount(e){if(e==="body"){return this._columnCount}return 1}data(e,t,n){let r;switch(e){case"body":if(this._header.length===0){r=this._getField(t,n)}else{r=this._getField(t+1,n)}break;case"column-header":if(this._header.length===0){r=(n+1).toString()}else{r=this._header[n]}break;case"row-header":r=(t+1).toString();break;case"corner-header":r="";break;default:throw"unreachable"}return r}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._columnCount=undefined;this._rowCount=undefined;this._rowOffsets=null;this._columnOffsets=null;this._rawData=null;if(this._doneParsing===false){this.ready.catch((()=>{}));this._ready.reject(undefined)}if(this._delayedParse!==null){window.clearTimeout(this._delayedParse)}}getOffsetIndex(e,t){const n=this._columnCount;let r=(e-this._columnOffsetsStartingRow)*n;if(r<0||r>this._columnOffsets.length){this._columnOffsets.fill(4294967295);this._columnOffsetsStartingRow=e;r=0}if(this._columnOffsets[r]===4294967295){let t=1;while(t<=this._maxCacheGet&&this._columnOffsets[r+t*n]===16777215){t++}const{offsets:o}=c[this._parser]({data:this._rawData,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:true,maxRows:t,ncols:n,startIndex:this._rowOffsets[e]});for(let e=0;e<o.length;e++){this._columnOffsets[r+e]=o[e]}}return this._columnOffsets[r+t]}parseAsync(){let e=this._initialRows;let t=Math.pow(2,32)-1;const n=30;const r=e=>{try{this._computeRowOffsets(e)}catch(t){if(this._parser==="quotes"){console.warn(t);this._parser="noquotes";this._resetParser();this._computeRowOffsets(e)}else{throw t}}return this._doneParsing};this._resetParser();const o=r(e);if(o){return}const i=()=>{const o=r(e+t);e+=t;if(t<1e6){t*=2}if(o){this._delayedParse=null}else{this._delayedParse=window.setTimeout(i,n)}};this._delayedParse=window.setTimeout(i,n)}_computeRowOffsets(e=4294967295){var t;if(this._rowCount>=e||this._doneParsing===true){return}if(this._columnCount===undefined){this._columnCount=c[this._parser]({data:this._rawData,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:true,maxRows:1}).ncols}const n=this._rowCount>0?1:0;const{nrows:r,offsets:o}=c[this._parser]({data:this._rawData,startIndex:(t=this._rowOffsets[this._rowCount-n])!==null&&t!==void 0?t:0,delimiter:this._delimiter,rowDelimiter:this._rowDelimiter,quote:this._quote,columnOffsets:false,maxRows:e-this._rowCount+n});if(this._startedParsing&&r<=n){this._doneParsing=true;this._ready.resolve(undefined);return}this._startedParsing=true;const i=this._rowCount;const s=Math.min(r,n);this._rowCount=i+r-s;if(this._rowCount<e){this._doneParsing=true;this._ready.resolve(undefined)}if(this._rowCount>i){const e=this._rowOffsets;this._rowOffsets=new Uint32Array(this._rowCount);this._rowOffsets.set(e);this._rowOffsets.set(o,i-s)}const a=Math.floor(33554432/this._columnCount);if(i<=a){if(this._rowCount<=a){const e=this._columnOffsets;this._columnOffsets=new Uint32Array(this._rowCount*this._columnCount);this._columnOffsets.set(e);this._columnOffsets.fill(4294967295,e.length)}else{const e=this._columnOffsets;this._columnOffsets=new Uint32Array(Math.min(this._maxCacheGet,a)*this._columnCount);this._columnOffsets.set(e.subarray(0,this._columnOffsets.length));this._columnOffsets.fill(4294967295,e.length);this._columnOffsetsStartingRow=0}}let l=i;if(this._header.length>0){l-=1}this.emitChanged({type:"rows-inserted",region:"body",index:l,span:this._rowCount-i})}_getField(e,t){let n;let r;const o=this.getOffsetIndex(e,t);let i=0;let s=0;if(t===this._columnCount-1){if(e<this._rowCount-1){r=this.getOffsetIndex(e+1,0);i+=this._rowDelimiter.length}else{r=this._rawData.length;if(this._rawData[r-1]===this._rowDelimiter[this._rowDelimiter.length-1]){i+=this._rowDelimiter.length}}}else{r=this.getOffsetIndex(e,t+1);if(o<r&&this._rawData[r-1]===this._delimiter){i+=1}}if(this._rawData[o]===this._quote){s+=1;i+=1}n=this._rawData.slice(o+s,r-i);if(s===1&&n.indexOf(this._quote)!==-1){n=n.replace(this._quoteEscaped,this._quote)}return n}_resetParser(){this._columnCount=undefined;this._rowOffsets=new Uint32Array(0);this._rowCount=0;this._startedParsing=false;this._columnOffsets=new Uint32Array(0);if(this._doneParsing===false){this.ready.catch((()=>{}));this._ready.reject(undefined)}this._doneParsing=false;this._ready=new r.PromiseDelegate;if(this._delayedParse!==null){window.clearTimeout(this._delayedParse);this._delayedParse=null}this.emitChanged({type:"model-reset"})}}var u=n(3378);var h=n(59768);var p=n(54522);var m=n(18987);var g=n(700);const f="jp-CSVDelimiter";const A="jp-CSVDelimiter-label";const v="jp-CSVDelimiter-dropdown";class C extends g.Widget{constructor(e){super({node:b.createNode(e.widget.delimiter,e.translator)});this._delimiterChanged=new m.Signal(this);this._widget=e.widget;this.addClass(f)}get delimiterChanged(){return this._delimiterChanged}get selectNode(){return this.node.getElementsByTagName("select")[0]}handleEvent(e){switch(e.type){case"change":this._delimiterChanged.emit(this.selectNode.value);this._widget.delimiter=this.selectNode.value;break;default:break}}onAfterAttach(e){this.selectNode.addEventListener("change",this)}onBeforeDetach(e){this.selectNode.removeEventListener("change",this)}}var b;(function(e){function t(e,t){t=t||h.nullTranslator;const n=t===null||t===void 0?void 0:t.load("jupyterlab");const r=[[",",","],[";",";"],["\t",n.__("tab")],["|",n.__("pipe")],["#",n.__("hash")]];const o=document.createElement("div");const i=document.createElement("span");const s=document.createElement("select");i.textContent=n.__("Delimiter: ");i.className=A;(0,p.each)(r,(([t,n])=>{const r=document.createElement("option");r.value=t;r.textContent=n;if(t===e){r.selected=true}s.appendChild(r)}));o.appendChild(i);const a=u.Styling.wrapSelect(s);a.classList.add(v);o.appendChild(a);return o}e.createNode=t})(b||(b={}));var _=n(69442);var y=n(34576);var E=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};const w="jp-CSVViewer";const x="jp-CSVViewer-grid";const j=1e3;class k{}class B{constructor(e){this._looping=true;this._changed=new m.Signal(this);this._grid=e;this._query=null;this._row=0;this._column=-1}get changed(){return this._changed}cellBackgroundColorRendererFunc(e){return({value:t,row:n,column:r})=>{if(this._query){if(t.match(this._query)){if(this._row===n&&this._column===r){return e.currentMatchBackgroundColor}return e.matchBackgroundColor}}return""}}clear(){this._query=null;this._row=0;this._column=-1;this._changed.emit(undefined)}find(e,t=false){const n=this._grid.dataModel;const r=n.rowCount("body");const o=n.columnCount("body");if(this._query!==e){this._row=0;this._column=-1}this._query=e;const i=this._grid.scrollY/this._grid.defaultSizes.rowHeight;const s=(this._grid.scrollY+this._grid.pageHeight)/this._grid.defaultSizes.rowHeight;const a=this._grid.scrollX/this._grid.defaultSizes.columnHeaderHeight;const l=(this._grid.scrollX+this._grid.pageWidth)/this._grid.defaultSizes.columnHeaderHeight;const c=(e,t)=>e>=i&&e<=s&&t>=a&&t<=l;const d=t?-1:1;this._column+=d;for(let u=this._row;t?u>=0:u<r;u+=d){for(let r=this._column;t?r>=0:r<o;r+=d){const t=n.data("body",u,r);if(t.match(e)){this._changed.emit(undefined);if(!c(u,r)){this._grid.scrollToRow(u)}this._row=u;this._column=r;return true}}this._column=t?o-1:0}if(this._looping){this._looping=false;this._row=t?0:r-1;this._wrapRows(t);try{return this.find(e,t)}finally{this._looping=true}}return false}_wrapRows(e=false){const t=this._grid.dataModel;const n=t.rowCount("body");const r=t.columnCount("body");if(e&&this._row<=0){this._row=n-1;this._column=r}else if(!e&&this._row>=n-1){this._row=0;this._column=-1}}get query(){return this._query}}class S extends g.Widget{constructor(e){super();this._monitor=null;this._delimiter=",";this._revealed=new r.PromiseDelegate;this._baseRenderer=null;const t=this._context=e.context;const n=this.layout=new g.PanelLayout;this.addClass(w);this._grid=new o.DataGrid({defaultSizes:{rowHeight:24,columnWidth:144,rowHeaderWidth:64,columnHeaderHeight:36}});this._grid.addClass(x);this._grid.headerVisibility="all";this._grid.keyHandler=new o.BasicKeyHandler;this._grid.mouseHandler=new o.BasicMouseHandler;this._grid.copyConfig={separator:"\t",format:o.DataGrid.copyFormatGeneric,headers:"all",warningThreshold:1e6};n.addWidget(this._grid);this._searchService=new B(this._grid);this._searchService.changed.connect(this._updateRenderer,this);void this._context.ready.then((()=>{this._updateGrid();this._revealed.resolve(undefined);this._monitor=new _.ActivityMonitor({signal:t.model.contentChanged,timeout:j});this._monitor.activityStopped.connect(this._updateGrid,this)}))}get context(){return this._context}get revealed(){return this._revealed.promise}get delimiter(){return this._delimiter}set delimiter(e){if(e===this._delimiter){return}this._delimiter=e;this._updateGrid()}get style(){return this._grid.style}set style(e){this._grid.style=e}set rendererConfig(e){this._baseRenderer=e;this._updateRenderer()}get searchService(){return this._searchService}dispose(){if(this._monitor){this._monitor.dispose()}super.dispose()}goToLine(e){this._grid.scrollToRow(e)}onActivateRequest(e){this.node.tabIndex=-1;this.node.focus()}_updateGrid(){const e=this._context.model.toString();const t=this._delimiter;const n=this._grid.dataModel;const r=this._grid.dataModel=new d({data:e,delimiter:t});this._grid.selectionModel=new o.BasicSelectionModel({dataModel:r});if(n){n.dispose()}}_updateRenderer(){if(this._baseRenderer===null){return}const e=this._baseRenderer;const t=new o.TextRenderer({textColor:e.textColor,horizontalAlignment:e.horizontalAlignment,backgroundColor:this._searchService.cellBackgroundColorRendererFunc(e)});this._grid.cellRenderers.update({body:t,"column-header":t,"corner-header":t,"row-header":t})}}class D extends y.DocumentWidget{constructor(e){let{content:t,context:n,delimiter:r,reveal:o}=e,i=E(e,["content","context","delimiter","reveal"]);t=t||M.createContent(n);o=Promise.all([o,t.revealed]);super(Object.assign({content:t,context:n,reveal:o},i));if(r){t.delimiter=r}}setFragment(e){const t=e.split("=");if(t[0]!=="#row"){return}let n=t[1].split(";")[0];n=n.split("-")[0];void this.context.ready.then((()=>{this.content.goToLine(Number(n))}))}}var M;(function(e){function t(e){return new S({context:e})}e.createContent=t})(M||(M={}));class T extends y.ABCWidgetFactory{createNewWidget(e){const t=this.translator;return new D({context:e,translator:t})}defaultToolbarFactory(e){return[{name:"delimiter",widget:new C({widget:e.content,translator:this.translator})}]}}class I extends T{createNewWidget(e){const t="\t";return new D({context:e,delimiter:t,translator:this.translator})}}},34360:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>H});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(66934);var l=n.n(a);var c=n(41776);var d=n.n(c);var u=n(20452);var h=n.n(u);var p=n(69442);var m=n.n(p);var g=n(16391);var f=n.n(g);var A=n(34576);var v=n.n(A);var C=n(48767);var b=n.n(C);var _=n(51457);var y=n.n(_);var E=n(58267);var w=n.n(E);var x=n(63833);var j=n.n(x);var k=n(42014);var B=n.n(k);var S=n(59768);var D=n.n(S);const M={id:"@jupyterlab/debugger-extension:consoles",autoStart:true,requires:[g.IDebugger,u.IConsoleTracker],optional:[r.ILabShell],activate:(e,t,n,r)=>{const o=new g.Debugger.Handler({type:"console",shell:e.shell,service:t});const i=async t=>{const{sessionContext:n}=t;await n.ready;await o.updateContext(t,n);e.commands.notifyCommandChanged()};if(r){r.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof u.ConsolePanel){void i(n)}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void i(t)}}))}}};const T={id:"@jupyterlab/debugger-extension:files",autoStart:true,requires:[g.IDebugger,C.IEditorTracker],optional:[r.ILabShell],activate:(e,t,n,r)=>{const o=new g.Debugger.Handler({type:"file",shell:e.shell,service:t});const i={};const s=async t=>{const n=e.serviceManager.sessions;try{const r=await n.findByPath(t.context.path);if(!r){return}let s=i[r.id];if(!s){s=n.connectTo({model:r});i[r.id]=s}await o.update(t,s);e.commands.notifyCommandChanged()}catch(r){return}};if(r){r.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof A.DocumentWidget){const{content:e}=n;if(e instanceof C.FileEditor){void s(n)}}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void s(t)}}))}}};const I={id:"@jupyterlab/debugger-extension:notebooks",autoStart:true,requires:[g.IDebugger,E.INotebookTracker,S.ITranslator],optional:[r.ILabShell,i.ICommandPalette],provides:g.IDebuggerHandler,activate:(e,t,n,r,o,s)=>{const a=new g.Debugger.Handler({type:"notebook",shell:e.shell,service:t});const l=r.load("jupyterlab");e.commands.addCommand(g.Debugger.CommandIDs.restartDebug,{label:l.__("Restart Kernel and Debug"),caption:l.__("Restart Kernel and Debug"),isEnabled:()=>t.isStarted,execute:async()=>{const e=t.getDebuggerState();await t.stop();const r=n.currentWidget;if(!r){return}const{content:o,sessionContext:s}=r;const l=await i.sessionContextDialogs.restart(s);if(!l){return}await t.restoreDebuggerState(e);await a.updateWidget(r,s.session);await E.NotebookActions.runAll(o,s)}});const c=async t=>{if(t){const{sessionContext:e}=t;await e.ready;await a.updateContext(t,e)}e.commands.notifyCommandChanged()};if(o){o.currentChanged.connect(((e,t)=>{const n=t.newValue;if(n instanceof E.NotebookPanel){void c(n)}}))}else{n.currentChanged.connect(((e,t)=>{if(t){void c(t)}}))}if(s){s.addItem({category:"Notebook Operations",command:g.Debugger.CommandIDs.restartDebug})}return a}};const P={id:"@jupyterlab/debugger-extension:service",autoStart:true,provides:g.IDebugger,requires:[g.IDebuggerConfig],optional:[g.IDebuggerSources],activate:(e,t,n)=>new g.Debugger.Service({config:t,debuggerSources:n,specsManager:e.serviceManager.kernelspecs})};const R={id:"@jupyterlab/debugger-extension:config",provides:g.IDebuggerConfig,autoStart:true,activate:()=>new g.Debugger.Config};const L={id:"@jupyterlab/debugger-extension:sources",autoStart:true,provides:g.IDebuggerSources,requires:[g.IDebuggerConfig,a.IEditorServices],optional:[E.INotebookTracker,u.IConsoleTracker,C.IEditorTracker],activate:(e,t,n,r,o,i)=>new g.Debugger.Sources({config:t,shell:e.shell,editorServices:n,notebookTracker:r,consoleTracker:o,editorTracker:i})};const O={id:"@jupyterlab/debugger-extension:variables",autoStart:true,requires:[g.IDebugger,g.IDebuggerHandler,S.ITranslator],optional:[i.IThemeManager,x.IRenderMimeRegistry],activate:(e,t,n,r,o,s)=>{const a=r.load("jupyterlab");const{commands:l,shell:c}=e;const d=new i.WidgetTracker({namespace:"debugger/inspect-variable"});const u=new i.WidgetTracker({namespace:"debugger/render-variable"});const h=g.Debugger.CommandIDs;l.addCommand(h.inspectVariable,{label:a.__("Inspect Variable"),caption:a.__("Inspect Variable"),isEnabled:e=>{var n,r,o,i;return!!((n=t.session)===null||n===void 0?void 0:n.isStarted)&&((i=(r=e.variableReference)!==null&&r!==void 0?r:(o=t.model.variables.selectedVariable)===null||o===void 0?void 0:o.variablesReference)!==null&&i!==void 0?i:0)>0},execute:async e=>{var n,r,s,a;let{variableReference:u,name:h}=e;if(!u){u=(n=t.model.variables.selectedVariable)===null||n===void 0?void 0:n.variablesReference}if(!h){h=(r=t.model.variables.selectedVariable)===null||r===void 0?void 0:r.name}const p=`jp-debugger-variable-${h}`;if(!h||!u||d.find((e=>e.id===p))){return}const m=await t.inspectVariable(u);if(!m||m.length===0){return}const f=t.model.variables;const A=new i.MainAreaWidget({content:new g.Debugger.VariablesGrid({model:f,commands:l,scopes:[{name:h,variables:m}],themeManager:o})});A.addClass("jp-DebuggerVariables");A.id=p;A.title.icon=g.Debugger.Icons.variableIcon;A.title.label=`${(a=(s=t.session)===null||s===void 0?void 0:s.connection)===null||a===void 0?void 0:a.name} - ${h}`;void d.add(A);const v=()=>{A.dispose();f.changed.disconnect(v)};f.changed.connect(v);c.add(A,"main",{mode:d.currentWidget?"split-right":"split-bottom",activate:false})}});l.addCommand(h.renderMimeVariable,{label:a.__("Render Variable"),caption:a.__("Render variable according to its mime type"),isEnabled:()=>{var e;return!!((e=t.session)===null||e===void 0?void 0:e.isStarted)},isVisible:()=>t.model.hasRichVariableRendering&&(s!==null||n.activeWidget instanceof E.NotebookPanel),execute:e=>{var o,i,a,l,d,h,p,m;let{name:f,frameId:A}=e;if(!f){f=(o=t.model.variables.selectedVariable)===null||o===void 0?void 0:o.name}if(!A){A=(i=t.model.callstack.frame)===null||i===void 0?void 0:i.id}const v=n.activeWidget;let C=v instanceof E.NotebookPanel?v.content.rendermime:s;if(!C){return}const b=`jp-debugger-variable-mime-${f}-${(l=(a=t.session)===null||a===void 0?void 0:a.connection)===null||l===void 0?void 0:l.path.replace("/","-")}`;if(!f||u.find((e=>e.id===b))||!A&&t.hasStoppedThreads()){return}const _=t.model.variables;const y=new g.Debugger.VariableRenderer({dataLoader:()=>t.inspectRichVariable(f,A),rendermime:C,translator:r});y.addClass("jp-DebuggerRichVariable");y.id=b;y.title.icon=g.Debugger.Icons.variableIcon;y.title.label=`${f} - ${(h=(d=t.session)===null||d===void 0?void 0:d.connection)===null||h===void 0?void 0:h.name}`;y.title.caption=`${f} - ${(m=(p=t.session)===null||p===void 0?void 0:p.connection)===null||m===void 0?void 0:m.path}`;void u.add(y);const w=()=>{y.dispose();_.changed.disconnect(x);v===null||v===void 0?void 0:v.disposed.disconnect(w)};const x=()=>{if(n.activeWidget===v){void y.refresh()}};y.disposed.connect(w);_.changed.connect(x);v===null||v===void 0?void 0:v.disposed.connect(w);c.add(y,"main",{mode:u.currentWidget?"split-right":"split-bottom",activate:false})}})}};const z={id:"@jupyterlab/debugger-extension:sidebar",provides:g.IDebuggerSidebar,requires:[g.IDebugger,a.IEditorServices,S.ITranslator],optional:[i.IThemeManager,k.ISettingRegistry],autoStart:true,activate:async(e,t,n,r,o,i)=>{const{commands:s}=e;const a=g.Debugger.CommandIDs;const l={registry:s,continue:a.debugContinue,terminate:a.terminate,next:a.next,stepIn:a.stepIn,stepOut:a.stepOut,evaluate:a.evaluate};const c={registry:s,pause:a.pause};const d=new g.Debugger.Sidebar({service:t,callstackCommands:l,breakpointsCommands:c,editorServices:n,themeManager:o,translator:r});if(i){const e=await i.load(N.id);const n=()=>{var n,r,o,i;const s=e.get("variableFilters").composite;const a=(i=(o=(r=(n=t.session)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.kernel)===null||o===void 0?void 0:o.name)!==null&&i!==void 0?i:"";if(a&&s[a]){d.variables.filter=new Set(s[a])}const l=e.get("defaultKernelSourcesFilter").composite;d.kernelSources.filter=l};n();e.changed.connect(n);t.sessionChanged.connect(n)}return d}};const N={id:"@jupyterlab/debugger-extension:main",requires:[g.IDebugger,g.IDebuggerSidebar,a.IEditorServices,S.ITranslator],optional:[i.ICommandPalette,g.IDebuggerSources,r.ILabShell,r.ILayoutRestorer,_.ILoggerRegistry],autoStart:true,activate:async(e,t,n,r,o,i,s,a,l,d)=>{var u;const h=o.load("jupyterlab");const{commands:m,shell:f,serviceManager:A}=e;const{kernelspecs:v}=A;const C=g.Debugger.CommandIDs;const b=p.PageConfig.getOption("alwaysShowDebuggerExtension").toLowerCase()==="true";if(!b){await v.ready;const e=(u=v.specs)===null||u===void 0?void 0:u.kernelspecs;if(!e){return}const t=Object.keys(e).some((t=>{var n,r,o;return!!((o=(r=(n=e[t])===null||n===void 0?void 0:n.metadata)===null||r===void 0?void 0:r["debugger"])!==null&&o!==void 0?o:false)}));if(!t){return}}const _=async()=>{var e,n,o;const i=(n=(e=t.session)===null||e===void 0?void 0:e.connection)===null||n===void 0?void 0:n.kernel;if(!i){return""}const s=(await i.info).language_info;const a=s.name;const l=(o=r===null||r===void 0?void 0:r.mimeTypeService.getMimeTypeByLanguage({name:a}))!==null&&o!==void 0?o:"";return l};const y=new x.RenderMimeRegistry({initialFactories:x.standardRendererFactories});m.addCommand(C.evaluate,{label:h.__("Evaluate Code"),caption:h.__("Evaluate Code"),icon:g.Debugger.Icons.evaluateIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{var e,n,r;const o=await _();const i=await g.Debugger.Dialogs.getCode({title:h.__("Evaluate Code"),okLabel:h.__("Evaluate"),cancelLabel:h.__("Cancel"),mimeType:o,rendermime:y});const s=i.value;if(!i.button.accept||!s){return}const a=await t.evaluate(s);if(a){const o=a.result;const i=(n=(e=t===null||t===void 0?void 0:t.session)===null||e===void 0?void 0:e.connection)===null||n===void 0?void 0:n.path;const s=i?(r=d===null||d===void 0?void 0:d.getLogger)===null||r===void 0?void 0:r.call(d,i):undefined;if(s){s.log({type:"text",data:o,level:s.level})}else{console.debug(o)}}}});m.addCommand(C.debugContinue,{label:h.__("Continue"),caption:h.__("Continue"),icon:g.Debugger.Icons.continueIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.continue();m.notifyCommandChanged()}});m.addCommand(C.terminate,{label:h.__("Terminate"),caption:h.__("Terminate"),icon:g.Debugger.Icons.terminateIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.restart();m.notifyCommandChanged()}});m.addCommand(C.next,{label:h.__("Next"),caption:h.__("Next"),icon:g.Debugger.Icons.stepOverIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.next()}});m.addCommand(C.stepIn,{label:h.__("Step In"),caption:h.__("Step In"),icon:g.Debugger.Icons.stepIntoIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.stepIn()}});m.addCommand(C.stepOut,{label:h.__("Step Out"),caption:h.__("Step Out"),icon:g.Debugger.Icons.stepOutIcon,isEnabled:()=>t.hasStoppedThreads(),execute:async()=>{await t.stepOut()}});m.addCommand(C.pause,{label:h.__("Enable / Disable pausing on exceptions"),caption:()=>t.isStarted?t.pauseOnExceptionsIsValid()?t.isPausingOnExceptions?h.__("Disable pausing on exceptions"):h.__("Enable pausing on exceptions"):h.__("Kernel does not support pausing on exceptions."):h.__("Enable / Disable pausing on exceptions"),className:"jp-PauseOnExceptions",icon:g.Debugger.Icons.pauseOnExceptionsIcon,isToggled:()=>t.isPausingOnExceptions,isEnabled:()=>t.pauseOnExceptionsIsValid(),execute:async()=>{await t.pauseOnExceptions(!t.isPausingOnExceptions);m.notifyCommandChanged()}});t.eventMessage.connect(((e,t)=>{m.notifyCommandChanged();if(a&&t.event==="initialized"){a.activateById(n.id)}}));t.sessionChanged.connect((e=>{m.notifyCommandChanged()}));if(l){l.add(n,"debugger-sidebar")}n.node.setAttribute("role","region");n.node.setAttribute("aria-label",h.__("Debugger section"));f.add(n,"right");if(i){const e=h.__("Debugger");[C.debugContinue,C.terminate,C.next,C.stepIn,C.stepOut,C.evaluate,C.pause].forEach((t=>{i.addItem({command:t,category:e})}))}if(s){const{model:e}=t;const n=new g.Debugger.ReadOnlyEditorFactory({editorServices:r});const o=(e,n)=>{var r,o,i,a,l,c,d,u,h;s.find({focus:true,kernel:(a=(i=(o=(r=t.session)===null||r===void 0?void 0:r.connection)===null||o===void 0?void 0:o.kernel)===null||i===void 0?void 0:i.name)!==null&&a!==void 0?a:"",path:(d=(c=(l=t.session)===null||l===void 0?void 0:l.connection)===null||c===void 0?void 0:c.path)!==null&&d!==void 0?d:"",source:(h=(u=n===null||n===void 0?void 0:n.source)===null||u===void 0?void 0:u.path)!==null&&h!==void 0?h:""}).forEach((e=>{requestAnimationFrame((()=>{g.Debugger.EditorHandler.showCurrentLine(e,n.line)}))}))};const i=(e,t,n)=>{if(!t){return}a(null,t,n)};const a=(e,r,o)=>{var i,a,l,d,u,h,m;if(!r){return}const{content:f,mimeType:A,path:v}=r;const C=s.find({focus:true,kernel:(d=(l=(a=(i=t.session)===null||i===void 0?void 0:i.connection)===null||a===void 0?void 0:a.kernel)===null||l===void 0?void 0:l.name)!==null&&d!==void 0?d:"",path:(m=(h=(u=t.session)===null||u===void 0?void 0:u.connection)===null||h===void 0?void 0:h.path)!==null&&m!==void 0?m:"",source:v});if(C.length>0){if(o&&typeof o.line!=="undefined"){C.forEach((e=>{if(e instanceof c.CodeMirrorEditor){e.scrollIntoViewCentered({line:o.line-1,ch:o.column||0})}else{e.revealPosition({line:o.line-1,column:o.column||0})}}))}return}const b=n.createNewEditor({content:f,mimeType:A,path:v});const _=b.editor;const y=new g.Debugger.EditorHandler({debuggerService:t,editor:_,path:v});b.disposed.connect((()=>y.dispose()));s.open({label:p.PathExt.basename(v),caption:v,editorWrapper:b});const E=t.model.callstack.frame;if(E){g.Debugger.EditorHandler.showCurrentLine(_,E.line)}};e.callstack.currentFrameChanged.connect(o);e.sources.currentSourceOpened.connect(a);e.kernelSources.kernelSourceOpened.connect(i);e.breakpoints.clicked.connect((async(e,n)=>{var r;const o=(r=n.source)===null||r===void 0?void 0:r.path;const i=await t.getSource({sourceReference:0,path:o});a(null,i,n)}))}}};const F=[P,M,T,I,O,z,N,L,R];const H=F},7920:(e,t,n)=>{"use strict";var r=n(79536);var o=n(49914);var i=n(37935);var s=n(98896);var a=n(94683);var l=n(90516);var c=n(42650);var d=n(33379);var u=n(88164);var h=n(32902);var p=n(34849);var m=n(5956);var g=n(93379);var f=n.n(g);var A=n(69324);var v={};v.insert="head";v.singleton=false;var C=f()(A.Z,v);const b=A.Z.locals||{};var _=n(70161)},34409:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Debugger:()=>Ye,IDebugger:()=>Ge,IDebuggerConfig:()=>Ze,IDebuggerHandler:()=>Qe,IDebuggerSidebar:()=>Xe,IDebuggerSources:()=>Je});var r=n(25903);const o=1540483477;const i=new TextEncoder;function s(e,t){const n=i.encode(e);let r=n.length;let s=t^r;let a=0;while(r>=4){let e=n[a]&255|(n[++a]&255)<<8|(n[++a]&255)<<16|(n[++a]&255)<<24;e=(e&65535)*o+(((e>>>16)*o&65535)<<16);e^=e>>>24;e=(e&65535)*o+(((e>>>16)*o&65535)<<16);s=(s&65535)*o+(((s>>>16)*o&65535)<<16)^e;r-=4;++a}switch(r){case 3:s^=(n[a+2]&255)<<16;case 2:s^=(n[a+1]&255)<<8;case 1:s^=n[a]&255;s=(s&65535)*o+(((s>>>16)*o&65535)<<16)}s^=s>>>13;s=(s&65535)*o+(((s>>>16)*o&65535)<<16);s^=s>>>15;return s>>>0}class a{constructor(){this._fileParams=new Map;this._hashMethods=new Map}getCodeId(e,t){const n=this._fileParams.get(t);if(!n){throw new Error(`Kernel (${t}) has no tmp file params.`)}const r=this._hashMethods.get(t);if(!r){throw new Error(`Kernel (${t}) has no hashing params.`)}const{prefix:o,suffix:i}=n;return`${o}${r(e)}${i}`}setHashParams(e){const{kernel:t,method:n,seed:r}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}switch(n){case"Murmur2":this._hashMethods.set(t,(e=>s(e,r).toString()));break;default:throw new Error(`Hash method (${n}) is not supported.`)}}setTmpFileParams(e){const{kernel:t,prefix:n,suffix:r}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}this._fileParams.set(t,{kernel:t,prefix:n,suffix:r})}getTmpFileParams(e){return this._fileParams.get(e)}}var l=n(3378);var c=n(76191);var d=n(700);var u;(function(e){function t(e){const t=new h(Object.assign(Object.assign({},e),{body:new p(e),buttons:[l.Dialog.cancelButton({label:e.cancelLabel}),l.Dialog.okButton({label:e.okLabel})]}));return t.launch()}e.getCode=t})(u||(u={}));class h extends l.Dialog{handleEvent(e){if(e.type==="keydown"){const t=e;const{code:n,shiftKey:r}=t;if(r&&n==="Enter"){return this.resolve()}if(n==="Enter"){return}}super.handleEvent(e)}}class p extends d.Widget{constructor(e){super();const{rendermime:t,mimeType:n}=e;const r=new c.CodeCellModel({});r.mimeType=n!==null&&n!==void 0?n:"";this._prompt=new c.CodeCell({rendermime:t,model:r}).initializeState();this._prompt.inputArea.promptNode.remove();this.node.appendChild(this._prompt.node)}getValue(){return this._prompt.model.value.text}onAfterAttach(e){super.onAfterAttach(e);this._prompt.activate()}}var m=n(66934);class g{constructor(e){this._services=e.editorServices}createNewEditor(e){const{content:t,mimeType:n,path:r}=e;const o=this._services.factoryService.newInlineEditor;const i=this._services.mimeTypeService;const s=new m.CodeEditorWrapper({model:new m.CodeEditor.Model({value:t,mimeType:n||i.getMimeTypeByFilePath(r)}),factory:o,config:{readOnly:true,lineNumbers:true}});s.node.setAttribute("data-jp-debugger","true");return s}}var f=n(59768);var A=n(82714);var v=n(54522);var C=n(18987);var b=n(69442);const _="jp-DebuggerEditor-highlight";const y=1e3;class E{constructor(e){var t,n,r,o;this._onGutterClick=(e,t)=>{var n,r,o;const i=e.lineInfo(t);if(!i||this._id!==((r=(n=this._debuggerService.session)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.id)){return}const s=!!i.gutterMarkers;let a=this._getBreakpoints();if(s){a=a.filter((e=>e.line!==i.line+1))}else{a.push(w.createBreakpoint((o=this._path)!==null&&o!==void 0?o:this._debuggerService.session.connection.name,i.line+1))}void this._debuggerService.updateBreakpoints(this._editor.model.value.text,a,this._path)};this._id=(r=(n=(t=e.debuggerService.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.id)!==null&&r!==void 0?r:"";this._path=(o=e.path)!==null&&o!==void 0?o:"";this._debuggerService=e.debuggerService;this._editor=e.editor;this._editorMonitor=new b.ActivityMonitor({signal:this._editor.model.value.changed,timeout:y});this._editorMonitor.activityStopped.connect((()=>{this._sendEditorBreakpoints()}),this);this._debuggerService.model.breakpoints.changed.connect((async()=>{if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.breakpoints.restored.connect((async()=>{if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.callstack.currentFrameChanged.connect((()=>{E.clearHighlight(this._editor)}));this._setupEditor()}get editor(){return this._editor}dispose(){if(this.isDisposed){return}this._editorMonitor.dispose();this._clearEditor();this.isDisposed=true;C.Signal.clearData(this)}refreshBreakpoints(){this._addBreakpointsToEditor()}_setupEditor(){if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor();const e=this._editor;e.setOption("lineNumbers",true);e.editor.setOption("gutters",["CodeMirror-linenumbers","breakpoints"]);e.editor.on("gutterClick",this._onGutterClick)}_clearEditor(){if(!this._editor||this._editor.isDisposed){return}const e=this._editor;E.clearHighlight(e);E.clearGutter(e);e.setOption("lineNumbers",false);e.editor.setOption("gutters",[]);e.editor.off("gutterClick",this._onGutterClick)}_sendEditorBreakpoints(){if(this._editor.isDisposed){return}const e=this._getBreakpointsFromEditor().map((e=>{var t,n;return w.createBreakpoint(((n=(t=this._debuggerService.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.name)||"",e.line+1)}));void this._debuggerService.updateBreakpoints(this._editor.model.value.text,e,this._path)}_addBreakpointsToEditor(){var e,t;const n=this._editor;const r=this._getBreakpoints();if(this._id!==((t=(e=this._debuggerService.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.id)){return}E.clearGutter(n);r.forEach((e=>{if(typeof e.line==="number"){n.editor.setGutterMarker(e.line-1,"breakpoints",w.createMarkerNode())}}))}_getBreakpointsFromEditor(){const e=this._editor;let t=[];for(let n=0;n<e.doc.lineCount();n++){const r=e.editor.lineInfo(n);if(r.gutterMarkers){t.push(r)}}return t}_getBreakpoints(){const e=this._editor.model.value.text;return this._debuggerService.model.breakpoints.getBreakpoints(this._path||this._debuggerService.getCodeId(e))}}(function(e){function t(e,t){n(e);const r=e;r.editor.addLineClass(t-1,"wrap",_);r.scrollIntoViewCentered({ch:0,line:t-1})}e.showCurrentLine=t;function n(e){if(!e||e.isDisposed){return}const t=e;t.doc.eachLine((e=>{t.editor.removeLineClass(e,"wrap",_)}))}e.clearHighlight=n;function r(e){if(!e){return}const t=e;t.doc.eachLine((e=>{if(e.gutterMarkers){t.editor.setGutterMarker(e,"breakpoints",null)}}))}e.clearGutter=r})(E||(E={}));var w;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerEditor-marker";e.innerHTML="";return e}e.createMarkerNode=t;function n(e,t){return{line:t,verified:true,source:{name:e}}}e.createBreakpoint=n})(w||(w={}));class x{constructor(e){this._debuggerService=e.debuggerService;this._consolePanel=e.widget;this._cellMap=new A.ObservableMap;const t=this._consolePanel.console;if(t.promptCell){this._addEditorHandler(t.promptCell)}t.promptCellCreated.connect(((e,t)=>{this._addEditorHandler(t)}));const n=()=>{(0,v.each)(t.cells,(e=>this._addEditorHandler(e)))};n();this._consolePanel.console.cells.changed.connect(n)}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>e.dispose()));this._cellMap.dispose();C.Signal.clearData(this)}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const n=e;const r=new E({debuggerService:this._debuggerService,editor:n.editor});n.disposed.connect((()=>{this._cellMap.delete(t);r.dispose()}));this._cellMap.set(t,r)}}class j{constructor(e){this._debuggerService=e.debuggerService;this._fileEditor=e.widget.content;this._hasLineNumber=this._fileEditor.editor.getOption("lineNumbers");this._editorHandler=new E({debuggerService:this._debuggerService,editor:this._fileEditor.editor})}dispose(){var e,t;if(this.isDisposed){return}this.isDisposed=true;(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();(t=this._editorHandler)===null||t===void 0?void 0:t.editor.setOptions({lineNumbers:this._hasLineNumber});C.Signal.clearData(this)}}class k{constructor(e){var t;this._debuggerService=e.debuggerService;this._notebookPanel=e.widget;this._cellMap=new A.ObservableMap;const n=this._notebookPanel.content;n.activeCellChanged.connect(this._onActiveCellChanged,this);(t=n.model)===null||t===void 0?void 0:t.cells.changed.connect(this._onCellsChanged,this);this._onCellsChanged()}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>{e.dispose();e.editor.setOptions(Object.assign({},this._notebookPanel.content.editorConfig.code))}));this._cellMap.dispose();C.Signal.clearData(this)}_onCellsChanged(e,t){var n;this._notebookPanel.content.widgets.forEach((e=>this._addEditorHandler(e)));if((t===null||t===void 0?void 0:t.type)==="move"){for(const e of t.newValues){(n=this._cellMap.get(e.id))===null||n===void 0?void 0:n.refreshBreakpoints()}}}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const n=e;const r=new E({debuggerService:this._debuggerService,editor:n.editor});n.disposed.connect((()=>{this._cellMap.delete(t);r.dispose()}));this._cellMap.set(e.model.id,r)}_onActiveCellChanged(e,t){if(this._notebookPanel.content!==e){return}this._addEditorHandler(t)}}const B="debugger-icon";function S(e,t,n,o,i=f.nullTranslator){const s=i.load("jupyterlab");const a=new l.ToolbarButton({className:"jp-DebuggerBugButton",icon:r.bugIcon,tooltip:s.__("Enable Debugger"),pressedIcon:r.bugDotIcon,pressedTooltip:s.__("Disable Debugger"),disabledTooltip:s.__("Select a kernel that supports debugging to enable debugger"),enabled:n,pressed:o,onClick:t});if(!e.toolbar.insertBefore("kernelName",B,a)){e.toolbar.addItem(B,a)}return a}function D(e,t,n=true,r){if(e){e.enabled=n;e.pressed=t;if(r){e.onClick=r}}}class M{constructor(e){this._handlers={};this._contextKernelChangedHandlers={};this._kernelChangedHandlers={};this._statusChangedHandlers={};this._iopubMessageHandlers={};this._iconButtons={};this._type=e.type;this._shell=e.shell;this._service=e.service}get activeWidget(){return this._activeWidget}async update(e,t){if(!t){delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];return this.updateWidget(e,t)}const n=()=>{void this.updateWidget(e,t)};const r=this._kernelChangedHandlers[e.id];if(r){t.kernelChanged.disconnect(r)}this._kernelChangedHandlers[e.id]=n;t.kernelChanged.connect(n);const o=(n,r)=>{if(r.endsWith("restarting")){void this.updateWidget(e,t)}};const i=this._statusChangedHandlers[e.id];if(i){t.statusChanged.disconnect(i)}t.statusChanged.connect(o);this._statusChangedHandlers[e.id]=o;const s=(e,t)=>{if(t.parent_header!={}&&t.parent_header.msg_type=="execute_request"&&this._service.isStarted&&!this._service.hasStoppedThreads()){void this._service.displayDefinedVariables()}};const a=this._iopubMessageHandlers[e.id];if(a){t.iopubMessage.disconnect(a)}t.iopubMessage.connect(s);this._iopubMessageHandlers[e.id]=s;this._activeWidget=e;return this.updateWidget(e,t)}async updateContext(e,t){const n=()=>{const{session:n}=t;void this.update(e,n)};const r=this._contextKernelChangedHandlers[e.id];if(r){t.kernelChanged.disconnect(r)}this._contextKernelChangedHandlers[e.id]=n;t.kernelChanged.connect(n);return this.update(e,t.session)}async updateWidget(e,t){var n,r,o,i;if(!this._service.model||!t){return}const s=()=>this._shell.currentWidget===e;const a=()=>{if(!this._handlers[e.id]){e.node.removeAttribute("data-jp-debugger");return}e.node.setAttribute("data-jp-debugger","true")};const l=()=>{if(this._handlers[e.id]){return}switch(this._type){case"notebook":this._handlers[e.id]=new k({debuggerService:this._service,widget:e});break;case"console":this._handlers[e.id]=new x({debuggerService:this._service,widget:e});break;case"file":this._handlers[e.id]=new j({debuggerService:this._service,widget:e});break;default:throw Error(`No handler for the type ${this._type}`)}a()};const c=()=>{var n,r,o,i;const s=this._handlers[e.id];if(!s){return}s.dispose();delete this._handlers[e.id];delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._iopubMessageHandlers[e.id];delete this._contextKernelChangedHandlers[e.id];if(((r=(n=this._service.session)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.path)===(t===null||t===void 0?void 0:t.path)||!((i=(o=this._service.session)===null||o===void 0?void 0:o.connection)===null||i===void 0?void 0:i.kernel)){const e=this._service.model;e.clear()}a()};const d=(t=true)=>{const n=this._iconButtons[e.id];if(!n){this._iconButtons[e.id]=S(e,m,this._service.isStarted,t)}else{D(n,this._service.isStarted,t,m)}};const u=()=>{var e;return this._service.isStarted&&((e=this._previousConnection)===null||e===void 0?void 0:e.id)===(t===null||t===void 0?void 0:t.id)};const h=async()=>{this._service.session.connection=t;await this._service.stop()};const p=async()=>{var e,n;this._service.session.connection=t;this._previousConnection=t;await this._service.restoreState(true);await this._service.displayDefinedVariables();if((n=(e=this._service.session)===null||e===void 0?void 0:e.capabilities)===null||n===void 0?void 0:n.supportsModulesRequest){await this._service.displayModules()}};const m=async()=>{if(!s()){return}const t=this._iconButtons[e.id];if(u()){await h();c();D(t,false)}else{await p();l();D(t,true)}};d(false);const g=await this._service.isAvailable(t);if(!g){c();D(this._iconButtons[e.id],false,false);return}if(!this._service.session){this._service.session=new Ye.Session({connection:t})}else{this._previousConnection=((n=this._service.session.connection)===null||n===void 0?void 0:n.kernel)?this._service.session.connection:null;this._service.session.connection=t}await this._service.restoreState(false);if(this._service.isStarted&&!this._service.hasStoppedThreads()){await this._service.displayDefinedVariables();if((o=(r=this._service.session)===null||r===void 0?void 0:r.capabilities)===null||o===void 0?void 0:o.supportsModulesRequest){await this._service.displayModules()}}D(this._iconButtons[e.id],this._service.isStarted,true);if(!this._service.isStarted){c();this._service.session.connection=(i=this._previousConnection)!==null&&i!==void 0?i:t;await this._service.restoreState(false);return}l();this._previousConnection=t;e.disposed.connect(c)}}const T='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161">\n    <path d="M16.4805 17.2481C16.8158 16.3972 17 15.4701 17 14.5C17 10.3579 13.6421 7.00001 9.5 7.00001C8.36314 7.00001 7.28536 7.25295 6.31986 7.70564C7.60064 6.0592 9.60074 5 11.8482 5C15.7142 5 18.8482 8.13401 18.8482 12C18.8482 14.0897 17.9325 15.9655 16.4805 17.2481Z" />\n    <path d="M19.1607 14.2481C19.496 13.3971 19.6801 12.4701 19.6801 11.5C19.6801 7.35786 16.3223 4 12.1801 4C11.0433 4 9.9655 4.25295 9.00001 4.70563C10.2808 3.05919 12.2809 2 14.5284 2C18.3944 2 21.5284 5.134 21.5284 9C21.5284 11.0897 20.6127 12.9655 19.1607 14.2481Z" />\n    <path d="M16 15C16 18.866 12.866 22 9 22C5.13401 22 2 18.866 2 15C2 11.134 5.13401 8 9 8C12.866 8 16 11.134 16 15ZM11.7914 11L13 12.2086L10.2086 15L13 17.7914L11.7914 19L9 16.2086L6.20857 19L5 17.7914L7.79143 15L5 12.2086L6.20857 11L9 13.7914L11.7914 11Z" />\n    </g>\n</svg>\n';const I='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 9.53198H8.54198L12.447 5.62698L11.386 4.56698L8.74898 7.17698L8.74898 0.999985H7.99998H7.25098L7.25098 7.17698L4.61398 4.56698L3.55298 5.62698L7.45798 9.53198H7.99998ZM9.95598 13.013C9.95598 14.1175 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1175 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const P='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 1H7.45798L3.55298 4.905L4.61398 5.965L7.25098 3.355V9.532H7.99998H8.74898V3.355L11.386 5.965L12.447 4.905L8.54198 1H7.99998ZM9.95598 13.013C9.95598 14.1176 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1176 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const R='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M14.25 5.75V1.75H12.75V4.2916C11.605 2.93303 9.83899 2.08334 7.90914 2.08334C4.73316 2.08334 1.98941 4.39036 1.75072 7.48075L1.72992 7.75H3.231L3.25287 7.5241C3.46541 5.32932 5.45509 3.58334 7.90914 3.58334C9.6452 3.58334 11.1528 4.45925 11.9587 5.75H9.12986V7.25H13.292L14.2535 6.27493V5.75H14.25ZM7.99997 14C9.10454 14 9.99997 13.1046 9.99997 12C9.99997 10.8954 9.10454 10 7.99997 10C6.8954 10 5.99997 10.8954 5.99997 12C5.99997 13.1046 6.8954 14 7.99997 14Z"/>\n\t</g>\n</svg>\n';const L='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4L1 4.5V12.5L1.5 13H4V12H2V5H4V4H1.5ZM14.5 13L15 12.5L15 4.5L14.5 4H12V5L14 5L14 12H12V13H14.5ZM8.79693 5L4.29693 7L4 7.45691V9.95691L4.24275 10.3857L6.74275 11.8857L7.20307 11.9138L11.7031 9.91381L12 9.45691V6.95691L11.7572 6.52816L9.25725 5.02816L8.79693 5ZM5 8.34V9.67381L6.5 10.5738V9.24L5 8.34ZM7.5 9.28184V10.6875L11 9.13197V7.72629L7.5 9.28184ZM10.4178 6.89071L8.96559 6.01936L5.58216 7.52311L7.03441 8.39445L10.4178 6.89071Z" fill="#007ACC"/>\n</svg>\n';const O='<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="m 7,6 h 4 V 18 H 7 Z" />\n        <path d="m 13,6 h 4 v 12 h -4 z" />\n    </g>\n</svg>\n';const z='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const N='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const F=new r.LabIcon({name:"debugger:close-all",svgstr:T});const H=new r.LabIcon({name:"debugger:pause",svgstr:O});const W=new r.LabIcon({name:"debugger:step-into",svgstr:I});const V=new r.LabIcon({name:"debugger:step-over",svgstr:R});const q=new r.LabIcon({name:"debugger:step-out",svgstr:P});const U=new r.LabIcon({name:"debugger:variable",svgstr:L});const $=new r.LabIcon({name:"debugger:view-breakpoint",svgstr:z});const K=new r.LabIcon({name:"debugger:open-kernel-source",svgstr:N});class Y{constructor(){this._breakpoints=new Map;this._changed=new C.Signal(this);this._restored=new C.Signal(this);this._clicked=new C.Signal(this)}get changed(){return this._changed}get restored(){return this._restored}get clicked(){return this._clicked}get breakpoints(){return this._breakpoints}setBreakpoints(e,t){this._breakpoints.set(e,t);this._changed.emit(t)}getBreakpoints(e){var t;return(t=this._breakpoints.get(e))!==null&&t!==void 0?t:[]}restoreBreakpoints(e){this._breakpoints=e;this._restored.emit()}}class G{constructor(){this._state=[];this._currentFrame=null;this._framesChanged=new C.Signal(this);this._currentFrameChanged=new C.Signal(this)}get frames(){return this._state}set frames(e){this._state=e;const t=this.frame!==null?Z.getFrameId(this.frame):"";const n=e.find((e=>Z.getFrameId(e)===t));if(!n){this.frame=e[0]}this._framesChanged.emit(e)}get frame(){return this._currentFrame}set frame(e){this._currentFrame=e;this._currentFrameChanged.emit(e)}get framesChanged(){return this._framesChanged}get currentFrameChanged(){return this._currentFrameChanged}}var Z;(function(e){function t(e){var t;return`${(t=e===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.path}-${e===null||e===void 0?void 0:e.id}`}e.getFrameId=t})(Z||(Z={}));class J{constructor(e){this._currentSourceOpened=new C.Signal(this);this._currentSourceChanged=new C.Signal(this);this.currentFrameChanged=e.currentFrameChanged}get currentSourceOpened(){return this._currentSourceOpened}get currentSourceChanged(){return this._currentSourceChanged}get currentSource(){return this._currentSource}set currentSource(e){this._currentSource=e;this._currentSourceChanged.emit(e)}open(){this._currentSourceOpened.emit(this._currentSource)}}var X=n(6625);const Q=500;const ee=(e,t)=>{if(e.name<t.name){return-1}if(e.name>t.name){return 1}return 0};class te{constructor(){this._kernelSources=null;this._filteredKernelSources=null;this._filter="";this._changed=new C.Signal(this);this._filterChanged=new C.Signal(this);this._kernelSourceOpened=new C.Signal(this);this.refresh=this.refresh.bind(this);this._refreshDebouncer=new X.Debouncer(this.refresh,Q)}get filter(){return this._filter}set filter(e){this._filter=e;this._filterChanged.emit(e);void this._refreshDebouncer.invoke()}get kernelSources(){return this._kernelSources}set kernelSources(e){this._kernelSources=e;this.refresh()}get changed(){return this._changed}get filterChanged(){return this._filterChanged}get kernelSourceOpened(){return this._kernelSourceOpened}open(e){this._kernelSourceOpened.emit(e)}getFilteredKernelSources(){const e=new RegExp(this._filter);return this._kernelSources.filter((t=>e.test(t.name)))}refresh(){if(this._kernelSources){this._filteredKernelSources=this._filter?this.getFilteredKernelSources():this._kernelSources;this._filteredKernelSources.sort(ee)}else{this._kernelSources=new Array;this._filteredKernelSources=new Array}this._changed.emit(this._filteredKernelSources)}}class ne{constructor(){this._selectedVariable=null;this._state=[];this._variableExpanded=new C.Signal(this);this._changed=new C.Signal(this)}get scopes(){return this._state}set scopes(e){this._state=e;this._changed.emit()}get changed(){return this._changed}get variableExpanded(){return this._variableExpanded}get selectedVariable(){return this._selectedVariable}set selectedVariable(e){this._selectedVariable=e}expandVariable(e){this._variableExpanded.emit(e)}}class re{constructor(){this._disposed=new C.Signal(this);this._isDisposed=false;this._hasRichVariableRendering=false;this._stoppedThreads=new Set;this._title="-";this._titleChanged=new C.Signal(this);this.breakpoints=new Y;this.callstack=new G;this.variables=new ne;this.sources=new J({currentFrameChanged:this.callstack.currentFrameChanged});this.kernelSources=new te}get disposed(){return this._disposed}get hasRichVariableRendering(){return this._hasRichVariableRendering}set hasRichVariableRendering(e){this._hasRichVariableRendering=e}get isDisposed(){return this._isDisposed}get stoppedThreads(){return this._stoppedThreads}set stoppedThreads(e){this._stoppedThreads=e}get title(){return this._title}set title(e){if(e===this._title){return}this._title=e!==null&&e!==void 0?e:"-";this._titleChanged.emit(e)}get titleChanged(){return this._titleChanged}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit()}clear(){this._stoppedThreads.clear();const e=new Map;this.breakpoints.restoreBreakpoints(e);this.callstack.frames=[];this.variables.scopes=[];this.sources.currentSource=null;this.kernelSources.kernelSources=null;this.title="-"}}var oe=n(6967);class ie extends d.Panel{constructor(e){super();const{model:t,commands:n,themeManager:r,scopes:o}=e;this._grid=new se({commands:n,model:t,themeManager:r});this._grid.addClass("jp-DebuggerVariables-grid");this._model=t;this._model.changed.connect((e=>{this._update()}),this);this._grid.dataModel.setData(o!==null&&o!==void 0?o:[]);this.addWidget(this._grid);this.addClass("jp-DebuggerVariables-body")}set filter(e){this._grid.dataModel.filter=e;this._update()}set scope(e){this._grid.dataModel.scope=e;this._update()}_update(){var e;this._grid.dataModel.setData((e=this._model.scopes)!==null&&e!==void 0?e:[])}}class se extends d.Panel{constructor(e){super();const{commands:t,model:n,themeManager:r}=e;this.model=n;const o=new ae;const i=new oe.DataGrid;const s=new le.MouseHandler;s.doubleClicked.connect(((e,n)=>t.execute(Ye.CommandIDs.inspectVariable,{variableReference:o.getVariableReference(n.row),name:o.getVariableName(n.row)})));s.selected.connect(((e,t)=>{const{row:n}=t;this.model.selectedVariable={name:o.getVariableName(n),value:o.data("body",n,1),type:o.data("body",n,2),variablesReference:o.getVariableReference(n)}}));i.dataModel=o;i.keyHandler=new oe.BasicKeyHandler;i.mouseHandler=s;i.selectionModel=new oe.BasicSelectionModel({dataModel:o});i.stretchLastColumn=true;i.node.style.height="100%";this._grid=i;if(r){r.themeChanged.connect(this._updateStyles,this)}this.addWidget(i)}set filter(e){this._grid.dataModel.filter=e;this.update()}set scope(e){this._grid.dataModel.scope=e;this.update()}get dataModel(){return this._grid.dataModel}onAfterAttach(e){super.onAfterAttach(e);this._updateStyles()}_updateStyles(){const{style:e,textRenderer:t}=le.computeStyle();this._grid.cellRenderers.update({},t);this._grid.style=e}}class ae extends oe.DataModel{constructor(){super(...arguments);this._filter=new Set;this._scope="";this._data={name:[],type:[],value:[],variablesReference:[]}}set filter(e){this._filter=e}get scope(){return this._scope}set scope(e){this._scope=e}rowCount(e){return e==="body"?this._data.name.length:1}columnCount(e){return e==="body"?2:1}data(e,t,n){if(e==="row-header"){return this._data.name[t]}if(e==="column-header"){return n===1?"Value":"Type"}if(e==="corner-header"){return"Name"}return n===1?this._data.value[t]:this._data.type[t]}getVariableReference(e){return this._data.variablesReference[e]}getVariableName(e){return this._data.name[e]}setData(e){var t,n;this._clearData();this.emitChanged({type:"model-reset",region:"body"});const r=(t=e.find((e=>e.name===this._scope)))!==null&&t!==void 0?t:e[0];const o=(n=r===null||r===void 0?void 0:r.variables)!==null&&n!==void 0?n:[];const i=o.filter((e=>e.name&&!this._filter.has(e.name)));i.forEach(((e,t)=>{var n;this._data.name[t]=e.name;this._data.type[t]=(n=e.type)!==null&&n!==void 0?n:"";this._data.value[t]=e.value;this._data.variablesReference[t]=e.variablesReference}));this.emitChanged({type:"rows-inserted",region:"body",index:1,span:i.length})}_clearData(){this._data={name:[],type:[],value:[],variablesReference:[]}}}var le;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerVariables-colorPalette";e.innerHTML=`\n      <div class="jp-mod-void"></div>\n      <div class="jp-mod-background"></div>\n      <div class="jp-mod-header-background"></div>\n      <div class="jp-mod-grid-line"></div>\n      <div class="jp-mod-header-grid-line"></div>\n      <div class="jp-mod-selection"></div>\n      <div class="jp-mod-text"></div>\n    `;return e}function n(){const e=t();document.body.appendChild(e);let n;n=e.querySelector(".jp-mod-void");const r=getComputedStyle(n).color;n=e.querySelector(".jp-mod-background");const o=getComputedStyle(n).color;n=e.querySelector(".jp-mod-header-background");const i=getComputedStyle(n).color;n=e.querySelector(".jp-mod-grid-line");const s=getComputedStyle(n).color;n=e.querySelector(".jp-mod-header-grid-line");const a=getComputedStyle(n).color;n=e.querySelector(".jp-mod-selection");const l=getComputedStyle(n).color;n=e.querySelector(".jp-mod-text");const c=getComputedStyle(n).color;document.body.removeChild(e);return{style:{voidColor:r,backgroundColor:o,headerBackgroundColor:i,gridLineColor:s,headerGridLineColor:a,rowBackgroundColor:e=>e%2===0?r:o,selectionFillColor:l},textRenderer:new oe.TextRenderer({font:"12px sans-serif",textColor:c,backgroundColor:"",verticalAlignment:"center",horizontalAlignment:"left"})}}e.computeStyle=n;class r extends oe.BasicMouseHandler{constructor(){super(...arguments);this._doubleClicked=new C.Signal(this);this._selected=new C.Signal(this)}get doubleClicked(){return this._doubleClicked}get selected(){return this._selected}dispose(){if(this.isDisposed){return}C.Signal.disconnectSender(this);super.dispose()}onMouseDoubleClick(e,t){const n=e.hitTest(t.clientX,t.clientY);this._doubleClicked.emit(n)}onMouseDown(e,t){let{clientX:n,clientY:r}=t;let o=e.hitTest(n,r);this._selected.emit(o)}onContextMenu(e,t){let{clientX:n,clientY:r}=t;let o=e.hitTest(n,r);this._selected.emit(o)}}e.MouseHandler=r})(le||(le={}));var ce=n(63833);var de=n(91100);class ue extends l.MainAreaWidget{constructor(e){const{dataLoader:t,rendermime:n,translator:r}=e;const o=new d.Panel;const i=new de.PromiseDelegate;super({content:o,reveal:Promise.all([t,i.promise])});this.trans=(r!==null&&r!==void 0?r:f.nullTranslator).load("jupyterlab");this.dataLoader=t;this.renderMime=n;this._dataHash=null;this.refresh().then((()=>{i.resolve()})).catch((e=>i.reject(e)))}async refresh(e=false){let t=await this.dataLoader();if(Object.keys(t.data).length===0){t={data:{"text/plain":this.trans.__("The variable is undefined in the active context.")},metadata:{}}}if(t.data){const n=s(JSON.stringify(t),17);if(e||this._dataHash!==n){if(this.content.layout){this.content.widgets.forEach((e=>{this.content.layout.removeWidget(e)}))}const e=this.renderMime.preferredMimeType(t.data,"any");if(e){const r=this.renderMime.createRenderer(e);const o=new ce.MimeModel(Object.assign(Object.assign({},t),{trusted:true}));this._dataHash=n;await r.renderModel(o);this.content.addWidget(r)}else{this._dataHash=null;return Promise.reject("Unable to determine the preferred mime type.")}}}else{this._dataHash=null;return Promise.reject("Unable to get a view on the variable.")}}}class he{constructor(e){var t,n;this._eventMessage=new C.Signal(this);this._isDisposed=false;this._sessionChanged=new C.Signal(this);this._config=e.config;this._session=null;this._specsManager=(t=e.specsManager)!==null&&t!==void 0?t:null;this._model=new Ye.Model;this._debuggerSources=(n=e.debuggerSources)!==null&&n!==void 0?n:null}get eventMessage(){return this._eventMessage}get isDisposed(){return this._isDisposed}get isStarted(){var e,t;return(t=(e=this._session)===null||e===void 0?void 0:e.isStarted)!==null&&t!==void 0?t:false}get isPausingOnExceptions(){var e,t,n,r,o,i;const s=(r=(n=(t=(e=this.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"";if(s){const e=this._config.getTmpFileParams(s);if(e){return(i=(o=this._session)===null||o===void 0?void 0:o.pausingOnExceptions.includes(e.prefix))!==null&&i!==void 0?i:false}}return false}get model(){return this._model}get session(){return this._session}set session(e){var t;if(this._session===e){return}if(this._session){this._session.dispose()}this._session=e;(t=this._session)===null||t===void 0?void 0:t.eventMessage.connect(((e,t)=>{if(t.event==="stopped"){this._model.stoppedThreads.add(t.body.threadId);void this._getAllFrames()}else if(t.event==="continued"){this._model.stoppedThreads.delete(t.body.threadId);this._clearModel();this._clearSignals()}this._eventMessage.emit(t)}));this._sessionChanged.emit(e)}get sessionChanged(){return this._sessionChanged}dispose(){if(this.isDisposed){return}this._isDisposed=true;C.Signal.clearData(this)}getCodeId(e){var t,n,r,o;try{return this._config.getCodeId(e,(o=(r=(n=(t=this.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"")}catch(i){return""}}hasStoppedThreads(){var e,t;return(t=((e=this._model)===null||e===void 0?void 0:e.stoppedThreads.size)>0)!==null&&t!==void 0?t:false}async isAvailable(e){var t,n,r,o;if(!this._specsManager){return true}await this._specsManager.ready;const i=e===null||e===void 0?void 0:e.kernel;if(!i){return false}const s=i.name;if(!((t=this._specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[s])){return true}return!!((o=(r=(n=this._specsManager.specs.kernelspecs[s])===null||n===void 0?void 0:n.metadata)===null||r===void 0?void 0:r["debugger"])!==null&&o!==void 0?o:false)}async clearBreakpoints(){var e;if(((e=this.session)===null||e===void 0?void 0:e.isStarted)!==true){return}this._model.breakpoints.breakpoints.forEach(((e,t,n)=>{void this._setBreakpoints([],t)}));let t=new Map;this._model.breakpoints.restoreBreakpoints(t)}async continue(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("continue",{threadId:this._currentThread()});this._model.stoppedThreads.delete(this._currentThread());this._clearModel();this._clearSignals()}catch(e){console.error("Error:",e.message)}}async getSource(e){var t,n;if(!this.session){throw new Error("No active debugger session")}const r=await this.session.sendRequest("source",{source:e,sourceReference:(t=e.sourceReference)!==null&&t!==void 0?t:0});return Object.assign(Object.assign({},r.body),{path:(n=e.path)!==null&&n!==void 0?n:""})}async evaluate(e){var t;if(!this.session){throw new Error("No active debugger session")}const n=(t=this.model.callstack.frame)===null||t===void 0?void 0:t.id;const r=await this.session.sendRequest("evaluate",{context:"repl",expression:e,frameId:n});if(!r.success){return null}this._clearModel();await this._getAllFrames();return r.body}async next(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("next",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async inspectRichVariable(e,t){if(!this.session){throw new Error("No active debugger session")}const n=await this.session.sendRequest("richInspectVariables",{variableName:e,frameId:t});if(n.success){return n.body}else{throw new Error(n.message)}}async inspectVariable(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("variables",{variablesReference:e});if(t.success){return t.body.variables}else{throw new Error(t.message)}}async displayDefinedVariables(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("inspectVariables",{});const t=e.body.variables;const n=[{name:"Globals",variables:t}];this._model.variables.scopes=n}async restart(){const{breakpoints:e}=this._model.breakpoints;await this.stop();await this.start();await this._restoreBreakpoints(e)}async restoreState(e){var t,n,r,o,i,s,a,l,c,d;if(!this.model||!this.session){return}const u=await this.session.restoreState();const{body:h}=u;const p=this._mapBreakpoints(h.breakpoints);const m=new Set(h.stoppedThreads);this._model.hasRichVariableRendering=h.richRendering===true;this._config.setHashParams({kernel:(o=(r=(n=(t=this.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"",method:h.hashMethod,seed:h.hashSeed});this._config.setTmpFileParams({kernel:(l=(a=(s=(i=this.session)===null||i===void 0?void 0:i.connection)===null||s===void 0?void 0:s.kernel)===null||a===void 0?void 0:a.name)!==null&&l!==void 0?l:"",prefix:h.tmpFilePrefix,suffix:h.tmpFileSuffix});this._model.stoppedThreads=m;if(!this.isStarted&&(e||m.size!==0)){await this.start()}if(this.isStarted||e){this._model.title=this.isStarted?((d=(c=this.session)===null||c===void 0?void 0:c.connection)===null||d===void 0?void 0:d.name)||"-":"-"}if(this._debuggerSources){const e=this._filterBreakpoints(p);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(p)}if(m.size!==0){await this._getAllFrames()}else if(this.isStarted){this._clearModel();this._clearSignals()}}start(){if(!this.session){throw new Error("No active debugger session")}return this.session.start()}async stepIn(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepIn",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepOut(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepOut",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stop(){if(!this.session){throw new Error("No active debugger session")}await this.session.stop();if(this._model){this._model.clear()}}async updateBreakpoints(e,t,n){var r;if(!((r=this.session)===null||r===void 0?void 0:r.isStarted)){return}if(!n){n=(await this._dumpCell(e)).body.sourcePath}const o=await this.session.restoreState();const i=t.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e})));const s=this._mapBreakpoints(o.body.breakpoints);if(this._debuggerSources){const e=this._filterBreakpoints(s);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(s)}const a=await this._setBreakpoints(i,n);const l=a.body.breakpoints.filter(((e,t,n)=>n.findIndex((t=>t.line===e.line))>-1));this._model.breakpoints.setBreakpoints(n,l);await this.session.sendRequest("configurationDone",{})}pauseOnExceptionsIsValid(){var e;if(this.isStarted){if((e=this.session)===null||e===void 0?void 0:e.exceptionBreakpointFilters){return true}}return false}async pauseOnExceptions(e){var t,n,r,o,i;if(!((t=this.session)===null||t===void 0?void 0:t.isStarted)){return}const s=(i=(o=(r=(n=this.session)===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r.kernel)===null||o===void 0?void 0:o.name)!==null&&i!==void 0?i:"";if(!s){return}const a=this._config.getTmpFileParams(s);if(!a){return}let l=a.prefix;const c=this.session.exceptionBreakpointFilters;let d=this.session.pausingOnExceptions;if(e){if(!this.session.pausingOnExceptions.includes(l)){d.push(l);this.session.pausingOnExceptions=d}}else{let e=this.session.pausingOnExceptions.indexOf(l);if(e>-1){this.session.pausingOnExceptions=d.splice(e,1);this.session.pausingOnExceptions=d}}const u=[];const h=[];const p=e?"userUnhandled":"never";for(let g of c!==null&&c!==void 0?c:[]){u.push(g.filter);h.push({path:[{names:this.session.exceptionPaths}],breakMode:p})}const m={filters:u,exceptionOptions:h};await this.session.sendRequest("setExceptionBreakpoints",m)}getDebuggerState(){var e,t,n,r,o,i,s;const a=this._model.breakpoints.breakpoints;let l=[];for(const c of a.keys()){const a=this._debuggerSources.find({focus:false,kernel:(r=(n=(t=(e=this.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",path:(s=(i=(o=this._session)===null||o===void 0?void 0:o.connection)===null||i===void 0?void 0:i.path)!==null&&s!==void 0?s:"",source:c});const d=a.map((e=>e.model.value.text));l=l.concat(d)}return{cells:l,breakpoints:a}}async restoreDebuggerState(e){var t,n,r,o;await this.start();for(const d of e.cells){await this._dumpCell(d)}const i=new Map;const s=(o=(r=(n=(t=this.session)===null||t===void 0?void 0:t.connection)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"";const{prefix:a,suffix:l}=this._config.getTmpFileParams(s);for(const d of e.breakpoints){const[e,t]=d;const n=e.substr(0,e.length-l.length);const r=n.substr(n.lastIndexOf("/")+1);const o=a.concat(r).concat(l);i.set(o,t)}await this._restoreBreakpoints(i);const c=await this.session.sendRequest("configurationDone",{});await this.restoreState(false);return c.success}_clearModel(){this._model.callstack.frames=[];this._model.variables.scopes=[]}_clearSignals(){this._model.callstack.currentFrameChanged.disconnect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.disconnect(this._onVariableExpanded,this)}_convertScopes(e,t){if(!t||!e){return[]}return e.map(((e,n)=>({name:e.name,variables:t[n].map((e=>Object.assign({},e)))})))}_currentThread(){return 1}async _dumpCell(e){if(!this.session){throw new Error("No active debugger session")}return this.session.sendRequest("dumpCell",{code:e})}_filterBreakpoints(e){if(!this._debuggerSources){return e}let t=new Map;for(const n of e){const[e,r]=n;r.forEach((()=>{var n,o,i,s,a,l,c;this._debuggerSources.find({focus:false,kernel:(s=(i=(o=(n=this.session)===null||n===void 0?void 0:n.connection)===null||o===void 0?void 0:o.kernel)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"",path:(c=(l=(a=this._session)===null||a===void 0?void 0:a.connection)===null||l===void 0?void 0:l.path)!==null&&c!==void 0?c:"",source:e}).forEach((()=>{if(r.length>0){t.set(e,r)}}))}))}return t}async _getAllFrames(){this._model.callstack.currentFrameChanged.connect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.connect(this._onVariableExpanded,this);const e=await this._getFrames(this._currentThread());this._model.callstack.frames=e}async _getFrames(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("stackTrace",{threadId:e});const n=t.body.stackFrames;return n}async _getScopes(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("scopes",{frameId:e.id});return t.body.scopes}async _getVariables(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("variables",{variablesReference:e.variablesReference});return t.body.variables}_mapBreakpoints(e){if(!e.length){return new Map}return e.reduce(((e,t)=>{const{breakpoints:n,source:r}=t;e.set(r,n.map((e=>Object.assign(Object.assign({},e),{source:{path:r},verified:true}))));return e}),new Map)}async _onCurrentFrameChanged(e,t){if(!t){return}const n=await this._getScopes(t);const r=await Promise.all(n.map((e=>this._getVariables(e))));const o=this._convertScopes(n,r);this._model.variables.scopes=o}async displayModules(){if(!this.session){throw new Error("No active debugger session")}const e=await this.session.sendRequest("modules",{});this._model.kernelSources.kernelSources=e.body.modules.map((e=>({name:e.name,path:e.path})))}async _onVariableExpanded(e,t){if(!this.session){throw new Error("No active debugger session")}const n=await this.session.sendRequest("variables",{variablesReference:t.variablesReference});let r=Object.assign(Object.assign({},t),{expanded:true});n.body.variables.forEach((e=>{r=Object.assign({[e.name]:e},r)}));const o=this._model.variables.scopes.map((e=>{const n=e.variables.findIndex((e=>e.variablesReference===t.variablesReference));e.variables[n]=r;return Object.assign({},e)}));this._model.variables.scopes=[...o];return n.body.variables}async _setBreakpoints(e,t){if(!this.session){throw new Error("No active debugger session")}return await this.session.sendRequest("setBreakpoints",{breakpoints:e,source:{path:t},sourceModified:false})}async _restoreBreakpoints(e){for(const[t,n]of e){await this._setBreakpoints(n.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e}))),t)}this._model.breakpoints.restoreBreakpoints(e)}}class pe{constructor(e){this._seq=0;this._ready=new de.PromiseDelegate;this._isDisposed=false;this._isStarted=false;this._pausingOnExceptions=[];this._exceptionPaths=[];this._exceptionBreakpointFilters=[];this._disposed=new C.Signal(this);this._eventMessage=new C.Signal(this);this.connection=e.connection;this.translator=e.translator||f.nullTranslator}get isDisposed(){return this._isDisposed}get capabilities(){return this._capabilities}get disposed(){return this._disposed}get connection(){return this._connection}set connection(e){var t,n;if(this._connection){this._connection.iopubMessage.disconnect(this._handleEvent,this)}this._connection=e;if(!this._connection){this._isStarted=false;return}this._connection.iopubMessage.connect(this._handleEvent,this);this._ready=new de.PromiseDelegate;const r=(n=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.requestDebug({type:"request",seq:0,command:"debugInfo"});if(r){r.onReply=e=>{this._ready.resolve();r.dispose()}}}get isStarted(){return this._isStarted}get pausingOnExceptions(){return this._pausingOnExceptions}set pausingOnExceptions(e){this._pausingOnExceptions=e}get exceptionPaths(){return this._exceptionPaths}get exceptionBreakpointFilters(){return this._exceptionBreakpointFilters}get eventMessage(){return this._eventMessage}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();C.Signal.clearData(this)}async start(){var e,t,n,r;const o=await this.sendRequest("initialize",{clientID:"jupyterlab",clientName:"JupyterLab",adapterID:(n=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:"",pathFormat:"path",linesStartAt1:true,columnsStartAt1:true,supportsVariableType:true,supportsVariablePaging:true,supportsRunInTerminalRequest:true,locale:document.documentElement.lang});if(!o.success){throw new Error(`Could not start the debugger: ${o.message}`)}this._capabilities=o.body;this._isStarted=true;this._exceptionBreakpointFilters=(r=o.body)===null||r===void 0?void 0:r.exceptionBreakpointFilters;await this.sendRequest("attach",{})}async stop(){await this.sendRequest("disconnect",{restart:false,terminateDebuggee:false});this._isStarted=false}async restoreState(){var e;const t=await this.sendRequest("debugInfo",{});this._isStarted=t.body.isStarted;this._exceptionPaths=(e=t.body)===null||e===void 0?void 0:e.exceptionPaths;return t}async sendRequest(e,t){await this._ready.promise;const n=await this._sendDebugMessage({type:"request",seq:this._seq++,command:e,arguments:t});return n.content}_handleEvent(e,t){const n=t.header.msg_type;if(n!=="debug_event"){return}const r=t.content;this._eventMessage.emit(r)}async _sendDebugMessage(e){var t;const n=(t=this.connection)===null||t===void 0?void 0:t.kernel;if(!n){return Promise.reject(new Error("A kernel is required to send debug messages."))}const r=new de.PromiseDelegate;const o=n.requestDebug(e);o.onReply=e=>{r.resolve(e)};await o.done;return r.promise}}var me=n(77865);var ge=n.n(me);class fe extends l.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerBreakpoints-body")}render(){return ge().createElement(Ae,{model:this._model})}}const Ae=({model:e})=>{const[t,n]=(0,me.useState)(Array.from(e.breakpoints.entries()));(0,me.useEffect)((()=>{const t=(t,r)=>{n(Array.from(e.breakpoints.entries()))};const r=t=>{n(Array.from(e.breakpoints.entries()))};e.changed.connect(t);e.restored.connect(r);return()=>{e.changed.disconnect(t);e.restored.disconnect(r)}}));return ge().createElement(ge().Fragment,null,t.map((t=>ge().createElement(ve,{key:t[0],breakpoints:t[1],model:e}))))};const ve=({breakpoints:e,model:t})=>ge().createElement(ge().Fragment,null,e.sort(((e,t)=>{var n,r;return((n=e.line)!==null&&n!==void 0?n:0)-((r=t.line)!==null&&r!==void 0?r:0)})).map(((e,n)=>{var r,o;return ge().createElement(Ce,{key:((o=(r=e.source)===null||r===void 0?void 0:r.path)!==null&&o!==void 0?o:"")+n,breakpoint:e,model:t})})));const Ce=({breakpoint:e,model:t})=>{var n,r,o;const i=e=>e[0]==="/"?e.slice(1)+"/":e;return ge().createElement("div",{className:"jp-DebuggerBreakpoint",onClick:()=>t.clicked.emit(e),title:(n=e.source)===null||n===void 0?void 0:n.path},ge().createElement("span",{className:"jp-DebuggerBreakpoint-marker"},""),ge().createElement("span",{className:"jp-DebuggerBreakpoint-source jp-left-truncated"},i((o=(r=e.source)===null||r===void 0?void 0:r.path)!==null&&o!==void 0?o:"")),ge().createElement("span",{className:"jp-DebuggerBreakpoint-line"},e.line))};class be extends d.Widget{constructor(e){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");e=e||f.nullTranslator;const t=e.load("jupyterlab");const n=new d.Widget({node:document.createElement("h2")});n.node.textContent=t.__("Breakpoints");const r=new d.PanelLayout;r.addWidget(n);r.addWidget(this.toolbar);this.layout=r}}class _e extends d.Panel{constructor(e){var t;super(e);this.clicked=new C.Signal(this);const{model:n,service:r,commands:o}=e;const i=e.translator||f.nullTranslator;const s=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.title.label=s.__("Breakpoints");const a=new be(i);const c=new fe(n);a.toolbar.addItem("pause",new l.CommandToolbarButton({commands:o.registry,id:o.pause,label:""}));a.toolbar.addItem("closeAll",new l.ToolbarButton({icon:F,onClick:async()=>{if(n.breakpoints.size===0){return}const e=await(0,l.showDialog)({title:s.__("Remove All Breakpoints"),body:s.__("Are you sure you want to remove all breakpoints?"),buttons:[l.Dialog.okButton({label:s.__("Remove breakpoints")}),l.Dialog.cancelButton({label:s.__("Cancel")})],hasClose:true});if(e.button.accept){return r.clearBreakpoints()}},tooltip:s.__("Remove All Breakpoints")}));this.addWidget(a);this.addWidget(c);this.addClass("jp-DebuggerBreakpoints")}}class ye extends l.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerCallstack-body")}render(){return ge().createElement(Ee,{model:this._model})}}const Ee=({model:e})=>{const[t,n]=(0,me.useState)(e.frames);const[r,o]=(0,me.useState)(e.frame);const i=t=>{o(t);e.frame=t};(0,me.useEffect)((()=>{const t=()=>{o(e.frame);n(e.frames)};e.framesChanged.connect(t);return()=>{e.framesChanged.disconnect(t)}}),[e]);const s=e=>{var t;const n=((t=e.source)===null||t===void 0?void 0:t.path)||"";const r=b.PathExt.basename(b.PathExt.dirname(n));const o=b.PathExt.basename(n);const i=b.PathExt.join(r,o);return`${i}:${e.line}`};return ge().createElement("ul",null,t.map((e=>{var t;return ge().createElement("li",{key:e.id,onClick:()=>i(e),className:(r===null||r===void 0?void 0:r.id)===e.id?"selected jp-DebuggerCallstackFrame":"jp-DebuggerCallstackFrame"},ge().createElement("span",{className:"jp-DebuggerCallstackFrame-name"},e.name),ge().createElement("span",{className:"jp-DebuggerCallstackFrame-location",title:(t=e.source)===null||t===void 0?void 0:t.path},s(e)))})))};class we extends d.Widget{constructor(e){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");e=e||f.nullTranslator;const t=e.load("jupyterlab");const n=new d.Widget({node:document.createElement("h2")});n.node.textContent=t.__("Callstack");const r=new d.PanelLayout;r.addWidget(n);r.addWidget(this.toolbar);this.layout=r}}class xe extends d.Panel{constructor(e){super();const{commands:t,model:n}=e;const r=e.translator||f.nullTranslator;const o=new we(r);const i=new ye(n);o.toolbar.addItem("continue",new l.CommandToolbarButton({commands:t.registry,id:t.continue}));o.toolbar.addItem("terminate",new l.CommandToolbarButton({commands:t.registry,id:t.terminate}));o.toolbar.addItem("step-over",new l.CommandToolbarButton({commands:t.registry,id:t.next}));o.toolbar.addItem("step-in",new l.CommandToolbarButton({commands:t.registry,id:t.stepIn}));o.toolbar.addItem("step-out",new l.CommandToolbarButton({commands:t.registry,id:t.stepOut}));o.toolbar.addItem("evaluate",new l.CommandToolbarButton({commands:t.registry,id:t.evaluate}));this.addWidget(o);this.addWidget(i);this.addClass("jp-DebuggerCallstack")}}class je extends d.Widget{constructor(e){super();this._model=e.model;this._debuggerService=e.service;this._mimeTypeService=e.editorServices.mimeTypeService;const t=new Ye.ReadOnlyEditorFactory({editorServices:e.editorServices});this._editor=t.createNewEditor({content:"",mimeType:"",path:""});this._editor.hide();this._model.currentFrameChanged.connect((async(e,t)=>{if(!t){this._clearEditor();return}void this._showSource(t)}));const n=new d.PanelLayout;n.addWidget(this._editor);this.layout=n;this.addClass("jp-DebuggerSources-body")}dispose(){var e;if(this.isDisposed){return}(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();C.Signal.clearData(this);super.dispose()}_clearEditor(){this._model.currentSource=null;this._editor.hide()}async _showSource(e){var t;const n=(t=e.source)===null||t===void 0?void 0:t.path;const r=await this._debuggerService.getSource({sourceReference:0,path:n});if(!(r===null||r===void 0?void 0:r.content)){this._clearEditor();return}if(this._editorHandler){this._editorHandler.dispose()}const{content:o,mimeType:i}=r;const s=i||this._mimeTypeService.getMimeTypeByFilePath(n!==null&&n!==void 0?n:"");this._editor.model.value.text=o;this._editor.model.mimeType=s;this._editorHandler=new E({debuggerService:this._debuggerService,editor:this._editor.editor,path:n});this._model.currentSource={content:o,mimeType:s,path:n!==null&&n!==void 0?n:""};requestAnimationFrame((()=>{E.showCurrentLine(this._editor.editor,e.line)}));this._editor.show()}}class ke extends d.Widget{constructor(e,t){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");t=t||f.nullTranslator;const n=t.load("jupyterlab");const r=new d.PanelLayout;this.layout=r;const o=new d.Widget({node:document.createElement("h2")});o.node.textContent=n.__("Source");const i=l.ReactWidget.create(ge().createElement(Be,{model:e}));r.addWidget(o);r.addWidget(this.toolbar);r.addWidget(i);this.addClass("jp-DebuggerSources-header")}}const Be=({model:e})=>ge().createElement(l.UseSignal,{signal:e.currentSourceChanged,initialSender:e},(e=>{var t,n;return ge().createElement("span",{onClick:()=>e===null||e===void 0?void 0:e.open()},(n=(t=e===null||e===void 0?void 0:e.currentSource)===null||t===void 0?void 0:t.path)!==null&&n!==void 0?n:"")}));class Se extends d.Panel{constructor(e){super();const{model:t,service:n,editorServices:r}=e;const o=e.translator||f.nullTranslator;const i=o.load("jupyterlab");const s=new ke(t,o);const a=new je({service:n,model:t,editorServices:r});s.toolbar.addItem("open",new l.ToolbarButton({icon:$,onClick:()=>t.open(),tooltip:i.__("Open in the Main Area")}));this.addWidget(s);this.addWidget(a)}}const De=e=>{const t=t=>{const n=t.target.value;e.model.filter=n};return ge().createElement(r.InputGroup,{type:"text",onChange:t,placeholder:"Filter the kernel sources",value:e.model.filter})};const Me=e=>l.ReactWidget.create(ge().createElement(l.UseSignal,{signal:e.model.filterChanged,initialArgs:e.model.filter},(t=>ge().createElement(De,{model:e.model}))));const Te="jp-DebuggerKernelSource-filterBox";const Ie="jp-DebuggerKernelSource-filterBox-hidden";class Pe extends d.Widget{constructor(e){var t;super();this._model=e.model;this._debuggerService=e.service;const n=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.layout=new d.PanelLayout;this.addClass("jp-DebuggerKernelSources-body");this._kernelSourcesFilter=Me({model:this._model});this._kernelSourcesFilter.addClass(Te);this._kernelSourcesFilter.addClass(Ie);this.layout.addWidget(this._kernelSourcesFilter);this._model.changed.connect(((e,t)=>{this._clear();if(t){t.forEach((e=>{const t=e.name;const r=e.path;const o=new l.ToolbarButton({icon:K,label:t,tooltip:r});o.node.addEventListener("dblclick",(()=>{this._debuggerService.getSource({sourceReference:0,path:r}).then((e=>{this._model.open(e)})).catch((e=>{void(0,l.showErrorMessage)(n.__("Fail to get source"),n.__("Fail to get '%1' source:\n%2",r,e))}))}));this.layout.addWidget(o)}))}}))}toggleFilterbox(){this._kernelSourcesFilter.node.classList.contains(Ie)?this._kernelSourcesFilter.node.classList.remove(Ie):this._kernelSourcesFilter.node.classList.add(Ie)}_clear(){while(this.layout.widgets.length>1){this.layout.removeWidgetAt(1)}}}class Re extends d.Widget{constructor(e,t){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");t=t||f.nullTranslator;const n=t.load("jupyterlab");const r=new d.PanelLayout;this.layout=r;const o=new d.Widget({node:document.createElement("h2")});o.node.textContent=n.__("Kernel Sources");r.addWidget(o);r.addWidget(this.toolbar);this.addClass("jp-DebuggerSources-header")}}class Le extends d.Panel{constructor(e){var t;super();const{model:n,service:o}=e;this._model=n;const i=((t=e.translator)!==null&&t!==void 0?t:f.nullTranslator).load("jupyterlab");this.title.label=i.__("Kernel Sources");const s=new Re(n,e.translator);s.addClass("jp-DebuggerKernelSources-header");this._body=new Pe({service:o,model:n,translator:e.translator});s.toolbar.addItem("open-filter",new l.ToolbarButton({icon:r.searchIcon,onClick:async()=>{this._body.toggleFilterbox()},tooltip:i.__("Toggle search filter")}));s.toolbar.addItem("refresh",new l.ToolbarButton({icon:r.refreshIcon,onClick:()=>{this._model.kernelSources=[];void o.displayModules().catch((e=>{void(0,l.showErrorMessage)(i.__("Fail to get kernel sources"),i.__("Fail to get kernel sources:\n%2",e))}))},tooltip:i.__("Refresh kernel sources")}));this.addClass("jp-DebuggerKernelSources-header");this.addClass("jp-DebuggerKernelSources");this.addWidget(s);this.addWidget(this._body)}set filter(e){this._model.filter=e}}class Oe extends d.Widget{constructor(e){super({node:document.createElement("div")});this.toolbar=new l.Toolbar;this.node.classList.add("jp-stack-panel-header");e=e||f.nullTranslator;const t=e.load("jupyterlab");const n=new d.Widget({node:document.createElement("h2")});n.node.textContent=t.__("Variables");const r=new d.PanelLayout;r.addWidget(n);r.addWidget(this.toolbar);this.layout=r}}const ze=({model:e,tree:t,grid:n,trans:o})=>{const[i,s]=(0,me.useState)("-");const a=e.scopes;const l=e=>{const r=e.target.value;s(r);t.scope=r;n.scope=r};return ge().createElement(r.HTMLSelect,{onChange:l,value:i,"aria-label":o.__("Scope")},a.map((e=>ge().createElement("option",{key:e.name,value:e.name},o.__(e.name)))))};class Ne extends l.ReactWidget{constructor(e){super();const{translator:t,model:n,tree:r,grid:o}=e;this._model=n;this._tree=r;this._grid=o;this._trans=(t||f.nullTranslator).load("jupyterlab")}render(){return ge().createElement(l.UseSignal,{signal:this._model.changed,initialSender:this._model},(()=>ge().createElement(ze,{model:this._model,trans:this._trans,tree:this._tree,grid:this._grid})))}}class Fe extends l.ReactWidget{constructor(e){super();this._scope="";this._scopes=[];this._filter=new Set;this._commands=e.commands;this._service=e.service;this._translator=e.translator;const t=this.model=e.model;t.changed.connect(this._updateScopes,this);this.addClass("jp-DebuggerVariables-body")}render(){var e;const t=(e=this._scopes.find((e=>e.name===this._scope)))!==null&&e!==void 0?e:this._scopes[0];return t?ge().createElement(He,{key:t.name,commands:this._commands,service:this._service,data:t.variables,filter:this._filter,translator:this._translator,handleSelectVariable:e=>{this.model.selectedVariable=e}}):ge().createElement("div",null)}set filter(e){this._filter=e;this.update()}set scope(e){this._scope=e;this.update()}_updateScopes(e){if(v.ArrayExt.shallowEqual(this._scopes,e.scopes)){return}this._scopes=e.scopes;this.update()}}const He=e=>{const{commands:t,data:n,service:r,filter:o,translator:i,handleSelectVariable:s}=e;const[a,l]=(0,me.useState)(n);(0,me.useEffect)((()=>{l(n)}),[n]);return ge().createElement("ul",null,a===null||a===void 0?void 0:a.filter((e=>!(o||new Set).has(e.evaluateName||""))).map((e=>{const n=`${e.name}-${e.evaluateName}-${e.type}-${e.value}-${e.variablesReference}`;return ge().createElement(We,{key:n,commands:t,data:e,service:r,filter:o,translator:i,onSelect:s})})))};const We=e=>{const{commands:t,data:n,service:o,filter:i,translator:s,onSelect:a}=e;const[l]=(0,me.useState)(n);const[c,d]=(0,me.useState)();const[u,h]=(0,me.useState)();const p={color:"var(--jp-mirror-editor-attribute-color)"};const m={color:"var(--jp-mirror-editor-string-color)"};const g=a!==null&&a!==void 0?a:()=>void 0;const A=l.variablesReference!==0||l.type==="function";const v=(s!==null&&s!==void 0?s:f.nullTranslator).load("jupyterlab");const C=async e=>{if(!A){return}e.stopPropagation();const t=await o.inspectVariable(l.variablesReference);d(!c);h(t)};return ge().createElement("li",{onClick:e=>C(e),onMouseDown:()=>{g(l)}},ge().createElement(r.caretDownEmptyIcon.react,{visibility:A?"visible":"hidden",stylesheet:"menuItem",tag:"span",transform:c?"rotate(0deg)":"rotate(-90deg)"}),ge().createElement("span",{style:p},l.name),ge().createElement("span",null,": "),ge().createElement("span",{style:m},qe(l)),ge().createElement("span",{className:"jp-DebuggerVariables-hspacer"}),o.model.hasRichVariableRendering&&!["special variables","protected variables","function variables","class variables"].includes(l.name)&&ge().createElement("button",{className:"jp-DebuggerVariables-renderVariable",disabled:!t.isEnabled(Ye.CommandIDs.renderMimeVariable,{name:l.name,variablesReference:l.variablesReference}),onClick:e=>{e.stopPropagation();g(l);t.execute(Ye.CommandIDs.renderMimeVariable,{name:l.name,variablesReference:l.variablesReference}).catch((e=>{console.error(`Failed to render variable ${l.name}`,e)}))},title:v.__("Render variable")},ge().createElement(r.searchIcon.react,{stylesheet:"menuItem",tag:"span"})),c&&u&&ge().createElement(He,{key:l.name,commands:t,data:u,service:o,filter:i,translator:s}))};class Ve extends d.Panel{constructor(e){super();const{model:t,service:n,commands:o,themeManager:i}=e;const s=e.translator||f.nullTranslator;const a=s.load("jupyterlab");this._header=new Oe(s);this._tree=new Fe({model:t,service:n,commands:o,translator:s});this._table=new ie({model:t,commands:o,themeManager:i});this._table.hide();this._header.toolbar.addItem("scope-switcher",new Ne({translator:s,model:t,tree:this._tree,grid:this._table}));const c=()=>{if(this._table.isHidden){this._tree.hide();this._table.show();this.node.setAttribute("data-jp-table","true");h("table")}else{this._tree.show();this._table.hide();this.node.removeAttribute("data-jp-table");h("tree")}this.update()};const d=new l.ToolbarButton({icon:r.treeViewIcon,className:"jp-TreeView",onClick:c,tooltip:a.__("Tree View")});const u=new l.ToolbarButton({icon:r.tableRowsIcon,className:"jp-TableView",onClick:c,tooltip:a.__("Table View")});const h=e=>{const t="jp-ViewModeSelected";if(e==="tree"){u.removeClass(t);d.addClass(t)}else{d.removeClass(t);u.addClass(t)}};h(this._table.isHidden?"tree":"table");this._header.toolbar.addItem("view-VariableTreeView",d);this._header.toolbar.addItem("view-VariableTableView",u);this.addWidget(this._header);this.addWidget(this._tree);this.addWidget(this._table);this.addClass("jp-DebuggerVariables")}set filter(e){this._tree.filter=e;this._table.filter=e}onResize(e){super.onResize(e);this._resizeBody(e)}_resizeBody(e){const t=e.height-this._header.node.offsetHeight;this._tree.node.style.height=`${t}px`}}const qe=e=>{var t,n;const{type:r,value:o}=e;switch(r){case"int":return parseInt(o,10);case"float":return parseFloat(o);case"bool":return o;case"str":if((n=(t=e.presentationHint)===null||t===void 0?void 0:t.attributes)===null||n===void 0?void 0:n.includes("rawString")){return o.slice(1,o.length-1)}else{return o}default:return r!==null&&r!==void 0?r:o}};class Ue extends d.Panel{constructor(e){super();this.id="jp-debugger-sidebar";this.title.icon=r.bugIcon;this.addClass("jp-DebuggerSidebar");const{callstackCommands:t,breakpointsCommands:n,editorServices:o,service:i,themeManager:s}=e;const a=e.translator||f.nullTranslator;const l=i.model;this.variables=new Ve({model:l.variables,commands:t.registry,service:i,themeManager:s,translator:a});this.callstack=new xe({commands:t,model:l.callstack,translator:a});this.breakpoints=new _e({service:i,commands:n,model:l.breakpoints,translator:a});this.sources=new Se({model:l.sources,service:i,editorServices:o,translator:a});this.kernelSources=new Le({model:l.kernelSources,service:i,translator:a});const c=new Ue.Header;this.addWidget(c);l.titleChanged.connect(((e,t)=>{c.title.label=t}));this._body=new d.SplitPanel;this._body.orientation="vertical";this._body.addClass("jp-DebuggerSidebar-body");this.addWidget(this._body);this.addItem(this.variables);this.addItem(this.callstack);this.addItem(this.breakpoints);this.addItem(this.sources);this.addItem(this.kernelSources)}addItem(e){this._body.addWidget(e)}insertItem(e,t){this._body.insertWidget(e,t)}get items(){return this._body.widgets}dispose(){if(this.isDisposed){return}super.dispose()}}(function(e){class t extends d.Widget{constructor(){super({node:$e.createHeader()});this.title.changed.connect((e=>{this.node.querySelector("h2").textContent=this.title.label}))}}e.Header=t})(Ue||(Ue={}));var $e;(function(e){function t(){const e=document.createElement("div");e.classList.add("jp-stack-panel-header");const t=document.createElement("h2");t.textContent="-";t.classList.add("jp-left-truncated");e.appendChild(t);return e}e.createHeader=t})($e||($e={}));class Ke{constructor(e){var t,n,r;this._config=e.config;this._shell=e.shell;this._notebookTracker=(t=e.notebookTracker)!==null&&t!==void 0?t:null;this._consoleTracker=(n=e.consoleTracker)!==null&&n!==void 0?n:null;this._editorTracker=(r=e.editorTracker)!==null&&r!==void 0?r:null;this._readOnlyEditorTracker=new l.WidgetTracker({namespace:"@jupyterlab/debugger"})}find(e){return[...this._findInConsoles(e),...this._findInEditors(e),...this._findInNotebooks(e),...this._findInReadOnlyEditors(e)]}open(e){const{editorWrapper:t,label:n,caption:o}=e;const i=new l.MainAreaWidget({content:t});i.id=l.DOMUtils.createDomID();i.title.label=n;i.title.closable=true;i.title.caption=o;i.title.icon=r.textEditorIcon;this._shell.add(i,"main");void this._readOnlyEditorTracker.add(i)}_findInNotebooks(e){if(!this._notebookTracker){return[]}const{focus:t,kernel:n,path:r,source:o}=e;const i=[];this._notebookTracker.forEach((e=>{const s=e.sessionContext;if(r!==s.path){return}const a=e.content;if(t){a.mode="command"}const l=e.content.widgets;l.forEach(((r,s)=>{const l=r.model.value.text;const c=this._getCodeId(l,n);if(!c){return}if(o!==c){return}if(t){a.activeCellIndex=s;if(a.activeCell){const e=a.activeCell.inputArea.node;const t=e.getBoundingClientRect();a.scrollToPosition(t.bottom,45)}this._shell.activateById(e.id)}i.push(r.editor)}))}));return i}_findInConsoles(e){if(!this._consoleTracker){return[]}const{focus:t,kernel:n,path:r,source:o}=e;const i=[];this._consoleTracker.forEach((e=>{const s=e.sessionContext;if(r!==s.path){return}const a=e.console.cells;(0,v.each)(a,(r=>{const s=r.model.value.text;const a=this._getCodeId(s,n);if(!a){return}if(o!==a){return}i.push(r.editor);if(t){this._shell.activateById(e.id)}}))}));return i}_findInEditors(e){if(!this._editorTracker){return[]}const{focus:t,kernel:n,path:r,source:o}=e;const i=[];this._editorTracker.forEach((e=>{const s=e.content;if(r!==s.context.path){return}const a=s.editor;if(!a){return}const l=a.model.value.text;const c=this._getCodeId(l,n);if(!c){return}if(o!==c){return}i.push(a);if(t){this._shell.activateById(e.id)}}));return i}_findInReadOnlyEditors(e){const{focus:t,kernel:n,source:r}=e;const o=[];this._readOnlyEditorTracker.forEach((e=>{var i;const s=(i=e.content)===null||i===void 0?void 0:i.editor;if(!s){return}const a=s.model.value.text;const l=this._getCodeId(a,n);if(!l){return}if(e.title.caption!==r&&r!==l){return}o.push(s);if(t){this._shell.activateById(e.id)}}));return o}_getCodeId(e,t){try{return this._config.getCodeId(e,t)}catch(n){return""}}}var Ye;(function(e){class t extends a{}e.Config=t;class n extends E{}e.EditorHandler=n;class o extends M{}e.Handler=o;class i extends re{}e.Model=i;class s extends g{}e.ReadOnlyEditorFactory=s;class l extends he{}e.Service=l;class c extends pe{}e.Session=c;class d extends Ue{}e.Sidebar=d;class h extends Ke{}e.Sources=h;class p extends ie{}e.VariablesGrid=p;class m extends ue{}e.VariableRenderer=m;let f;(function(e){e.debugContinue="debugger:continue";e.terminate="debugger:terminate";e.next="debugger:next";e.stepIn="debugger:stepIn";e.stepOut="debugger:stepOut";e.inspectVariable="debugger:inspect-variable";e.renderMimeVariable="debugger:render-mime-variable";e.evaluate="debugger:evaluate";e.restartDebug="debugger:restart-debug";e.pause="debugger:pause"})(f=e.CommandIDs||(e.CommandIDs={}));let A;(function(e){e.closeAllIcon=F;e.evaluateIcon=r.codeIcon;e.continueIcon=r.runIcon;e.stepIntoIcon=W;e.stepOutIcon=q;e.stepOverIcon=V;e.terminateIcon=r.stopIcon;e.variableIcon=U;e.viewBreakpointIcon=$;e.pauseOnExceptionsIcon=H})(A=e.Icons||(e.Icons={}));let v;(function(e){e.getCode=u.getCode})(v=e.Dialogs||(e.Dialogs={}))})(Ye||(Ye={}));const Ge=new de.Token("@jupyterlab/debugger:IDebugger");const Ze=new de.Token("@jupyterlab/debugger:IDebuggerConfig");const Je=new de.Token("@jupyterlab/debugger:IDebuggerSources");const Xe=new de.Token("@jupyterlab/debugger:IDebuggerSidebar");const Qe=new de.Token("@jupyterlab/debugger:IDebuggerHandler")},87144:(e,t,n)=>{"use strict";n.r(t);n.d(t,{savingStatusPlugin:()=>T,pathStatusPlugin:()=>I,downloadPlugin:()=>P,openBrowserTabPlugin:()=>R,default:()=>O,ToolbarItems:()=>z});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(69442);var l=n.n(a);var c=n(71861);var d=n.n(c);var u=n(4370);var h=n.n(u);var p=n(42014);var m=n.n(p);var g=n(85913);var f=n.n(g);var A=n(59768);var v=n.n(A);var C=n(25903);var b=n.n(C);var _=n(54522);var y=n.n(_);var E=n(91100);var w=n.n(E);var x=n(700);var j=n.n(x);var k=n(77865);var B=n.n(k);var S;(function(e){e.clone="docmanager:clone";e.deleteFile="docmanager:delete-file";e.newUntitled="docmanager:new-untitled";e.open="docmanager:open";e.openBrowserTab="docmanager:open-browser-tab";e.reload="docmanager:reload";e.rename="docmanager:rename";e.del="docmanager:delete";e.restoreCheckpoint="docmanager:restore-checkpoint";e.save="docmanager:save";e.saveAll="docmanager:save-all";e.saveAs="docmanager:save-as";e.download="docmanager:download";e.toggleAutosave="docmanager:toggle-autosave";e.showInFileBrowser="docmanager:show-in-file-browser"})(S||(S={}));const D="@jupyterlab/docmanager-extension:plugin";const M={id:D,provides:c.IDocumentManager,requires:[p.ISettingRegistry,A.ITranslator],optional:[r.ILabStatus,i.ICommandPalette,r.ILabShell,i.ISessionContextDialogs,u.IDocumentProviderFactory],activate:(e,t,n,r,o,i,s,a)=>{var l;const d=n.load("jupyterlab");const u=e.serviceManager;const h=new WeakSet;const p={open:(t,n)=>{if(!t.id){t.id=`document-manager-${++q.id}`}t.title.dataset=Object.assign({type:"document-title"},t.title.dataset);if(!t.isAttached){e.shell.add(t,"main",n||{})}e.shell.activateById(t.id);const o=f.contextForWidget(t);if(o&&!h.has(o)){if(r){V(r,o)}h.add(o)}}};const m=e.docRegistry;const g=e.restored.then((()=>void 0));const f=new c.DocumentManager({registry:m,manager:u,opener:p,when:g,setBusy:(l=r&&(()=>r.setBusy()))!==null&&l!==void 0?l:undefined,sessionDialogs:s||undefined,translator:n,collaborative:true,docProviderFactory:a!==null&&a!==void 0?a:undefined});H(e,f,p,t,n,i,o);const A=t=>{const n=t.get("autosave").composite;f.autosave=n===true||n===false?n:true;e.commands.notifyCommandChanged(S.toggleAutosave);const r=t.get("autosaveInterval").composite;f.autosaveInterval=r||120;const o=t.get("lastModifiedCheckMargin").composite;f.lastModifiedCheckMargin=o||500;const i=t.get("defaultViewers").composite;const s={};Object.keys(i).forEach((e=>{if(!m.getFileType(e)){console.warn(`File Type ${e} not found`);return}if(!m.getWidgetFactory(i[e])){console.warn(`Document viewer ${i[e]} not found`)}s[e]=i[e]}));(0,_.each)(m.fileTypes(),(e=>{try{m.setDefaultWidgetFactory(e.name,s[e.name])}catch(l){console.warn(`Failed to set default viewer ${s[e.name]} for file type ${e.name}`)}}))};Promise.all([t.load(D),e.restored]).then((([e])=>{e.changed.connect(A);A(e)})).catch((e=>{console.error(e.message)}));t.transform(D,{fetch:e=>{const t=(0,_.toArray)(m.fileTypes()).map((e=>e.name)).join("    \n");const n=(0,_.toArray)(m.widgetFactories()).map((e=>e.name)).join("    \n");const r=d.__(`Overrides for the default viewers for file types.\nSpecify a mapping from file type name to document viewer name, for example:\n\ndefaultViewers: {\n  markdown: "Markdown Preview"\n}\n\nIf you specify non-existent file types or viewers, or if a viewer cannot\nopen a given file type, the override will not function.\n\nAvailable viewers:\n%1\n\nAvailable file types:\n%2`,n,t);const o=E.JSONExt.deepCopy(e.schema);o.properties.defaultViewers.description=r;return Object.assign(Object.assign({},e),{schema:o})}});m.changed.connect((()=>t.reload(D)));return f}};const T={id:"@jupyterlab/docmanager-extension:saving-status",autoStart:true,requires:[c.IDocumentManager,r.ILabShell,A.ITranslator],optional:[g.IStatusBar],activate:(e,t,n,r,o)=>{if(!o){return}const i=new c.SavingStatus({docManager:t,translator:r});i.model.widget=n.currentWidget;n.currentChanged.connect((()=>{i.model.widget=n.currentWidget}));o.registerStatusItem(T.id,{item:i,align:"middle",isActive:()=>i.model!==null&&i.model.status!==null,activeStateChanged:i.model.stateChanged})}};const I={id:"@jupyterlab/docmanager-extension:path-status",autoStart:true,requires:[c.IDocumentManager,r.ILabShell],optional:[g.IStatusBar],activate:(e,t,n,r)=>{if(!r){return}const o=new c.PathStatus({docManager:t});o.model.widget=n.currentWidget;n.currentChanged.connect((()=>{o.model.widget=n.currentWidget}));r.registerStatusItem(I.id,{item:o,align:"right",rank:0})}};const P={id:"@jupyterlab/docmanager-extension:download",autoStart:true,requires:[A.ITranslator,c.IDocumentManager],optional:[i.ICommandPalette],activate:(e,t,n,r)=>{const o=t.load("jupyterlab");const{commands:s,shell:a}=e;const l=()=>{const{currentWidget:e}=a;return!!(e&&n.contextForWidget(e))};s.addCommand(S.download,{label:o.__("Download"),caption:o.__("Download the file to your computer"),isEnabled:l,execute:()=>{if(l()){const e=n.contextForWidget(a.currentWidget);if(!e){return(0,i.showDialog)({title:o.__("Cannot Download"),body:o.__("No context found for current widget!"),buttons:[i.Dialog.okButton({label:o.__("OK")})]})}return e.download()}}});const c=o.__("File Operations");if(r){r.addItem({command:S.download,category:c})}}};const R={id:"@jupyterlab/docmanager-extension:open-browser-tab",autoStart:true,requires:[A.ITranslator,c.IDocumentManager],activate:(e,t,n)=>{const r=t.load("jupyterlab");const{commands:o}=e;o.addCommand(S.openBrowserTab,{execute:e=>{const t=typeof e["path"]==="undefined"?"":e["path"];if(!t){return}return n.services.contents.getDownloadUrl(t).then((e=>{const t=window.open();if(t){t.opener=null;t.location.href=e}else{throw new Error("Failed to open new browser tab.")}}))},icon:e=>e["icon"]||"",label:()=>r.__("Open in New Browser Tab")})}};const L=[M,I,T,P,R];const O=L;var z;(function(e){function t(e,t){return(0,i.addCommandToolbarButtonClass)(i.ReactWidget.create(k.createElement(i.UseSignal,{signal:t},(()=>k.createElement(i.CommandToolbarButtonComponent,{commands:e,id:S.save,label:"",args:{toolbar:true}})))))}e.createSaveButton=t})(z||(z={}));class N extends x.Widget{constructor(e,t,n="notebook"){super({node:q.createRevertConfirmNode(e,n,t)})}}function F(e,t){if(!e){return"File"}const n=t.contextForWidget(e);if(!n){return""}const r=t.registry.getFileTypesForPath(n.path);return r.length&&r[0].displayName?r[0].displayName:"File"}function H(e,t,n,r,o,s,a){const l=o.load("jupyterlab");const{commands:c,shell:d}=e;const u=l.__("File Operations");const h=()=>{const{currentWidget:e}=d;return!!(e&&t.contextForWidget(e))};const p=()=>{const{currentWidget:e}=d;if(!e){return false}const n=t.contextForWidget(e);return!!(n&&n.contentsModel&&n.contentsModel.writable)};if(s){W(e,t,s,n,o)}c.addCommand(S.deleteFile,{label:()=>`Delete ${F(d.currentWidget,t)}`,execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];if(!n){const e=S.deleteFile;throw new Error(`A non-empty path is required for ${e}.`)}return t.deleteFile(n)}});c.addCommand(S.newUntitled,{execute:e=>{const n=e["error"]||l.__("Error");const r=typeof e["path"]==="undefined"?"":e["path"];const o={type:e["type"],path:r};if(e["type"]==="file"){o.ext=e["ext"]||".txt"}return t.services.contents.newUntitled(o).catch((e=>(0,i.showErrorMessage)(n,e)))},label:e=>e["label"]||`New ${e["type"]}`});c.addCommand(S.open,{execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];const r=e["factory"]||void 0;const o=e===null||e===void 0?void 0:e.kernel;const i=e["options"]||void 0;return t.services.contents.get(n,{content:false}).then((()=>t.openOrReveal(n,r,o,i)))},icon:e=>e["icon"]||"",label:e=>e["label"]||e["factory"],mnemonic:e=>e["mnemonic"]||-1});c.addCommand(S.reload,{label:()=>l.__("Reload %1 from Disk",F(d.currentWidget,t)),caption:l.__("Reload contents from disk"),isEnabled:h,execute:()=>{if(!h()){return}const e=t.contextForWidget(d.currentWidget);const n=F(d.currentWidget,t);if(!e){return(0,i.showDialog)({title:l.__("Cannot Reload"),body:l.__("No context found for current widget!"),buttons:[i.Dialog.okButton({label:l.__("Ok")})]})}if(e.model.dirty){return(0,i.showDialog)({title:l.__("Reload %1 from Disk",n),body:l.__("Are you sure you want to reload the %1 from the disk?",n),buttons:[i.Dialog.cancelButton({label:l.__("Cancel")}),i.Dialog.warnButton({label:l.__("Reload")})]}).then((t=>{if(t.button.accept&&!e.isDisposed){return e.revert()}}))}else{if(!e.isDisposed){return e.revert()}}}});c.addCommand(S.restoreCheckpoint,{label:()=>l.__("Revert %1 to Checkpoint",F(d.currentWidget,t)),caption:l.__("Revert contents to previous checkpoint"),isEnabled:h,execute:()=>{if(!h()){return}const e=t.contextForWidget(d.currentWidget);if(!e){return(0,i.showDialog)({title:l.__("Cannot Revert"),body:l.__("No context found for current widget!"),buttons:[i.Dialog.okButton({label:l.__("Ok")})]})}return e.listCheckpoints().then((n=>{if(n.length<1){return}const r=n[n.length-1];if(!r){return}const o=F(d.currentWidget,t);return(0,i.showDialog)({title:l.__("Revert %1 to checkpoint",o),body:new N(r,l,o),buttons:[i.Dialog.cancelButton({label:l.__("Cancel")}),i.Dialog.warnButton({label:l.__("Revert")})]}).then((t=>{if(e.isDisposed){return}if(t.button.accept){if(e.model.readOnly){return e.revert()}return e.restoreCheckpoint().then((()=>e.revert()))}}))}))}});c.addCommand(S.save,{label:()=>l.__("Save %1",F(d.currentWidget,t)),caption:l.__("Save and create checkpoint"),icon:e=>e.toolbar?C.saveIcon:"",isEnabled:p,execute:()=>{if(h()){const e=d.currentWidget;const n=t.contextForWidget(e);if(!n){return(0,i.showDialog)({title:l.__("Cannot Save"),body:l.__("No context found for current widget!"),buttons:[i.Dialog.okButton({label:l.__("Ok")})]})}else{if(n.model.readOnly){return(0,i.showDialog)({title:l.__("Cannot Save"),body:l.__("Document is read-only"),buttons:[i.Dialog.okButton({label:l.__("Ok")})]})}return n.save().then((()=>{if(!(e===null||e===void 0?void 0:e.isDisposed)){return n.createCheckpoint()}})).catch((e=>{if(e.message==="Cancel"){return}throw e}))}}}});c.addCommand(S.saveAll,{label:()=>l.__("Save All"),caption:l.__("Save all open documents"),isEnabled:()=>(0,_.some)((0,_.map)(d.widgets("main"),(e=>t.contextForWidget(e))),(e=>{var t,n;return(n=(t=e===null||e===void 0?void 0:e.contentsModel)===null||t===void 0?void 0:t.writable)!==null&&n!==void 0?n:false})),execute:()=>{const e=[];const n=new Set;(0,_.each)(d.widgets("main"),(r=>{const o=t.contextForWidget(r);if(o&&!o.model.readOnly&&!n.has(o.path)){n.add(o.path);e.push(o.save())}}));return Promise.all(e)}});c.addCommand(S.saveAs,{label:()=>l.__("Save %1 As",F(d.currentWidget,t)),caption:l.__("Save with new path"),isEnabled:h,execute:()=>{if(h()){const e=t.contextForWidget(d.currentWidget);if(!e){return(0,i.showDialog)({title:l.__("Cannot Save"),body:l.__("No context found for current widget!"),buttons:[i.Dialog.okButton({label:l.__("Ok")})]})}return e.saveAs()}}});c.addCommand(S.toggleAutosave,{label:l.__("Autosave Documents"),isToggled:()=>t.autosave,execute:()=>{const e=!t.autosave;const n="autosave";return r.set(D,n,e).catch((e=>{console.error(`Failed to set ${D}:${n} - ${e.message}`)}))}});if(a){[S.reload,S.restoreCheckpoint,S.save,S.saveAs,S.toggleAutosave].forEach((e=>{a.addItem({command:e,category:u})}))}}function W(e,t,n,r,o){const s=o.load("jupyterlab");const{commands:a}=e;const l=()=>{var r;const o=/[Pp]ath:\s?(.*)\n?/;const i=e=>{var t;return!!((t=e["title"])===null||t===void 0?void 0:t.match(o))};const s=e.contextMenuHitTest(i);const a=s===null||s===void 0?void 0:s["title"].match(o);return(r=a&&t.findWidget(a[1],null))!==null&&r!==void 0?r:n.currentWidget};const d=()=>{const{currentWidget:e}=n;return!!(e&&t.contextForWidget(e))};a.addCommand(S.clone,{label:()=>s.__("New View for %1",F(l(),t)),isEnabled:d,execute:e=>{const n=l();const o=e["options"]||{mode:"split-right"};if(!n){return}const i=t.cloneWidget(n);if(i){r.open(i,o)}}});a.addCommand(S.rename,{label:()=>{let e=F(l(),t);if(e){e=" "+e}return s.__("Rename%1",e)},isEnabled:d,execute:()=>{if(d()){const e=t.contextForWidget(l());return(0,c.renameDialog)(t,e.path)}}});a.addCommand(S.del,{label:()=>s.__("Delete %1",F(l(),t)),isEnabled:d,execute:async()=>{if(d()){const n=t.contextForWidget(l());if(!n){return}const r=await(0,i.showDialog)({title:s.__("Delete"),body:s.__("Are you sure you want to delete %1",n.path),buttons:[i.Dialog.cancelButton({label:s.__("Cancel")}),i.Dialog.warnButton({label:s.__("Delete")})]});if(r.button.accept){await e.commands.execute("docmanager:delete-file",{path:n.path})}}}});a.addCommand(S.showInFileBrowser,{label:()=>s.__("Show in File Browser"),isEnabled:d,execute:async()=>{const e=l();const n=e&&t.contextForWidget(e);if(!n){return}await a.execute("filebrowser:activate",{path:n.path});await a.execute("filebrowser:go-to-path",{path:n.path})}})}function V(e,t){let n=null;const r=(t,r)=>{if(r.name==="dirty"){if(r.newValue===true){if(!n){n=e.setDirty()}}else if(n){n.dispose();n=null}}};void t.ready.then((()=>{t.model.stateChanged.connect(r);if(t.model.dirty){n=e.setDirty()}}));t.disposed.connect((()=>{if(n){n.dispose()}}))}var q;(function(e){e.id=0;function t(e,t,n){const r=document.createElement("div");const o=document.createElement("p");const i=document.createTextNode(n.__("Are you sure you want to revert the %1 to the latest checkpoint? ",t));const s=document.createElement("strong");s.textContent=n.__("This cannot be undone.");o.appendChild(i);o.appendChild(s);const l=document.createElement("p");const c=document.createTextNode(n.__("The checkpoint was last updated at: "));const d=document.createElement("p");const u=new Date(e.last_modified);d.style.textAlign="center";d.textContent=a.Time.format(u,"dddd, MMMM Do YYYY, h:mm:ss a")+" ("+a.Time.formatHuman(u)+")";l.appendChild(c);l.appendChild(d);r.appendChild(o);r.appendChild(l);return r}e.createRevertConfirmNode=t})(q||(q={}))},38710:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(98328);var a=n(94683);var l=n(90516);var c=n(82401)},69993:(e,t,n)=>{"use strict";n.r(t);n.d(t,{DocumentManager:()=>j,DocumentWidgetManager:()=>w,IDocumentManager:()=>L,PathStatus:()=>T,SaveHandler:()=>b,SavingStatus:()=>R,isValidFileName:()=>h,renameDialog:()=>c,renameFile:()=>d,shouldOverwrite:()=>u});var r=n(3378);var o=n(69442);var i=n(59768);var s=n(700);const a="jp-FileDialog";const l="jp-new-name-title";function c(e,t,n){n=n||i.nullTranslator;const s=n.load("jupyterlab");return(0,r.showDialog)({title:s.__("Rename File"),body:new p(t),focusNodeSelector:"input",buttons:[r.Dialog.cancelButton({label:s.__("Cancel")}),r.Dialog.okButton({label:s.__("Rename")})]}).then((n=>{if(!n.value){return null}if(!h(n.value)){void(0,r.showErrorMessage)(s.__("Rename Error"),Error(s.__('"%1" is not a valid name for a file. Names must have nonzero length, and cannot include "/", "\\", or ":"',n.value)));return null}const i=o.PathExt.dirname(t);const a=o.PathExt.join(i,n.value);return d(e,t,a)}))}function d(e,t,n){return e.rename(t,n).catch((r=>{if(r.response.status!==409){throw r}return u(n).then((r=>{if(r){return e.overwrite(t,n)}return Promise.reject("File not renamed")}))}))}function u(e,t){t=t||i.nullTranslator;const n=t.load("jupyterlab");const o={title:n.__("Overwrite file?"),body:n.__('"%1" already exists, overwrite?',e),buttons:[r.Dialog.cancelButton({label:n.__("Cancel")}),r.Dialog.warnButton({label:n.__("Overwrite")})]};return(0,r.showDialog)(o).then((e=>Promise.resolve(e.button.accept)))}function h(e){const t=/[\/\\:]/;return e.length>0&&!t.test(e)}class p extends s.Widget{constructor(e){super({node:m.createRenameNode(e)});this.addClass(a);const t=o.PathExt.extname(e);const n=this.inputNode.value=o.PathExt.basename(e);this.inputNode.setSelectionRange(0,n.length-t.length)}get inputNode(){return this.node.getElementsByTagName("input")[0]}getValue(){return this.inputNode.value}}var m;(function(e){function t(e,t){t=t||i.nullTranslator;const n=t.load("jupyterlab");const r=document.createElement("div");const o=document.createElement("label");o.textContent=n.__("File Path");const s=document.createElement("span");s.textContent=e;const a=document.createElement("label");a.textContent=n.__("New Name");a.className=l;const c=document.createElement("input");r.appendChild(o);r.appendChild(s);r.appendChild(a);r.appendChild(c);return r}e.createRenameNode=t})(m||(m={}));var g=n(34576);var f=n(54522);var A=n(91100);var v=n(63577);var C=n(18987);class b{constructor(e){this._autosaveTimer=-1;this._minInterval=-1;this._interval=-1;this._isActive=false;this._inDialog=false;this._isDisposed=false;this._multiplier=10;this._context=e.context;const t=e.saveInterval||120;this._minInterval=t*1e3;this._interval=this._minInterval;this._context.fileChanged.connect(this._setTimer,this);this._context.disposed.connect(this.dispose,this)}get saveInterval(){return this._interval/1e3}set saveInterval(e){this._minInterval=this._interval=e*1e3;if(this._isActive){this._setTimer()}}get isActive(){return this._isActive}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;clearTimeout(this._autosaveTimer);C.Signal.clearData(this)}start(){this._isActive=true;this._setTimer()}stop(){this._isActive=false;clearTimeout(this._autosaveTimer)}_setTimer(){clearTimeout(this._autosaveTimer);if(!this._isActive){return}this._autosaveTimer=window.setTimeout((()=>{this._save()}),this._interval)}_save(){const e=this._context;this._setTimer();if(!e){return}const t=e.contentsModel&&e.contentsModel.writable;if(!t||!e.model.dirty||this._inDialog){return}const n=(new Date).getTime();e.save().then((()=>{if(this.isDisposed){return}const e=(new Date).getTime()-n;this._interval=Math.max(this._multiplier*e,this._minInterval);this._setTimer()})).catch((e=>{if(e.message==="Cancel"||e.message==="Modal is already displayed"){return}console.error("Error in Auto-Save",e.message)}))}}var _=n(64782);var y=n(46843);const E="jp-Document";class w{constructor(e){this._activateRequested=new C.Signal(this);this._isDisposed=false;this._registry=e.registry;this.translator=e.translator||i.nullTranslator}get activateRequested(){return this._activateRequested}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;C.Signal.disconnectReceiver(this)}createWidget(e,t){const n=e.createNew(t);this._initializeWidget(n,e,t);return n}_initializeWidget(e,t,n){x.factoryProperty.set(e,t);const r=new _.DisposableSet;(0,f.each)(this._registry.widgetExtensions(t.name),(t=>{const o=t.createNew(e,n);if(o){r.add(o)}}));x.disposablesProperty.set(e,r);e.disposed.connect(this._onWidgetDisposed,this);this.adoptWidget(n,e);n.fileChanged.connect(this._onFileChanged,this);n.pathChanged.connect(this._onPathChanged,this);void n.ready.then((()=>{void this.setCaption(e)}))}adoptWidget(e,t){const n=x.widgetsProperty.get(e);n.push(t);y.MessageLoop.installMessageHook(t,this);t.addClass(E);t.title.closable=true;t.disposed.connect(this._widgetDisposed,this);x.contextProperty.set(t,e)}findWidget(e,t){const n=x.widgetsProperty.get(e);if(!n){return undefined}return(0,f.find)(n,(e=>{const n=x.factoryProperty.get(e);if(!n){return false}return n.name===t}))}contextForWidget(e){return x.contextProperty.get(e)}cloneWidget(e){const t=x.contextProperty.get(e);if(!t){return undefined}const n=x.factoryProperty.get(e);if(!n){return undefined}const r=n.createNew(t,e);this._initializeWidget(r,n,t);return r}closeWidgets(e){const t=x.widgetsProperty.get(e);return Promise.all((0,f.toArray)((0,f.map)(t,(e=>this.onClose(e))))).then((()=>undefined))}deleteWidgets(e){const t=x.widgetsProperty.get(e);return Promise.all((0,f.toArray)((0,f.map)(t,(e=>this.onDelete(e))))).then((()=>undefined))}messageHook(e,t){switch(t.type){case"close-request":void this.onClose(e);return false;case"activate-request":{const t=this.contextForWidget(e);if(t){this._activateRequested.emit(t.path)}break}default:break}return true}async setCaption(e){const t=this.translator.load("jupyterlab");const n=x.contextProperty.get(e);if(!n){return}const r=n.contentsModel;if(!r){e.title.caption="";return}return n.listCheckpoints().then((i=>{if(e.isDisposed){return}const s=i[i.length-1];const a=s?o.Time.format(s.last_modified):"None";let l=t.__("Name: %1\nPath: %2\n",r.name,r.path);if(n.model.readOnly){l+=t.__("Read-only")}else{l+=t.__("Last Saved: %1\n",o.Time.format(r.last_modified))+t.__("Last Checkpoint: %1",a)}e.title.caption=l}))}async onClose(e){var t;const[n,r]=await this._maybeClose(e,this.translator);if(e.isDisposed){return true}if(n){if(!r){const n=x.contextProperty.get(e);if(!n){return true}if((t=n.contentsModel)===null||t===void 0?void 0:t.writable){await n.save()}else{await n.saveAs()}}if(e.isDisposed){return true}e.dispose()}return n}onDelete(e){e.dispose();return Promise.resolve(void 0)}_maybeClose(e,t){var n;t=t||i.nullTranslator;const o=t.load("jupyterlab");const s=x.contextProperty.get(e);if(!s){return Promise.resolve([true,true])}let a=x.widgetsProperty.get(s);if(!a){return Promise.resolve([true,true])}a=(0,f.toArray)((0,f.filter)(a,(e=>{const t=x.factoryProperty.get(e);if(!t){return false}return t.readOnly===false})));const l=x.factoryProperty.get(e);if(!l){return Promise.resolve([true,true])}const c=s.model;if(!c.dirty||a.length>1||l.readOnly){return Promise.resolve([true,true])}const d=e.title.label;const u=((n=s.contentsModel)===null||n===void 0?void 0:n.writable)?o.__("Save"):o.__("Save as");return(0,r.showDialog)({title:o.__("Save your work"),body:o.__('Save changes in "%1" before closing?',d),buttons:[r.Dialog.cancelButton({label:o.__("Cancel")}),r.Dialog.warnButton({label:o.__("Discard")}),r.Dialog.okButton({label:u})]}).then((e=>[e.button.accept,e.button.displayType==="warn"]))}_widgetDisposed(e){const t=x.contextProperty.get(e);if(!t){return}const n=x.widgetsProperty.get(t);if(!n){return}f.ArrayExt.removeFirstOf(n,e);if(!n.length){t.dispose()}}_onWidgetDisposed(e){const t=x.disposablesProperty.get(e);t.dispose()}_onFileChanged(e){const t=x.widgetsProperty.get(e);(0,f.each)(t,(e=>{void this.setCaption(e)}))}_onPathChanged(e){const t=x.widgetsProperty.get(e);(0,f.each)(t,(e=>{void this.setCaption(e)}))}}var x;(function(e){e.contextProperty=new v.AttachedProperty({name:"context",create:()=>undefined});e.factoryProperty=new v.AttachedProperty({name:"factory",create:()=>undefined});e.widgetsProperty=new v.AttachedProperty({name:"widgets",create:()=>[]});e.disposablesProperty=new v.AttachedProperty({name:"disposables",create:()=>new _.DisposableSet})})(x||(x={}));class j{constructor(e){this._activateRequested=new C.Signal(this);this._contexts=[];this._isDisposed=false;this._autosave=true;this._autosaveInterval=120;this._lastModifiedCheckMargin=500;this.translator=e.translator||i.nullTranslator;this.registry=e.registry;this.services=e.manager;this._collaborative=!!e.collaborative;this._dialogs=e.sessionDialogs||r.sessionContextDialogs;this._docProviderFactory=e.docProviderFactory;this._opener=e.opener;this._when=e.when||e.manager.ready;const t=new w({registry:this.registry,translator:this.translator});t.activateRequested.connect(this._onActivateRequested,this);this._widgetManager=t;this._setBusy=e.setBusy}get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){this._autosave=e;this._contexts.forEach((t=>{const n=k.saveHandlerProperty.get(t);if(!n){return}if(e===true&&!n.isActive){n.start()}else if(e===false&&n.isActive){n.stop()}}))}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){this._autosaveInterval=e;this._contexts.forEach((t=>{const n=k.saveHandlerProperty.get(t);if(!n){return}n.saveInterval=e||120}))}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e;this._contexts.forEach((t=>{t.lastModifiedCheckMargin=e}))}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;C.Signal.clearData(this);this._contexts.forEach((e=>this._widgetManager.closeWidgets(e)));this._widgetManager.dispose();this._contexts.length=0}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map((e=>this._widgetManager.closeWidgets(e)))).then((()=>undefined))}closeFile(e){const t=this._contextsForPath(e).map((e=>this._widgetManager.closeWidgets(e)));return Promise.all(t).then((e=>undefined))}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",n){return this._createOrOpenDocument("create",e,t,n)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then((()=>this.services.contents.delete(e))).then((()=>{this._contextsForPath(e).forEach((e=>this._widgetManager.deleteWidgets(e)));return Promise.resolve(void 0)}))}findWidget(e,t="default"){const n=o.PathExt.normalize(e);let r=[t];if(t==="default"){const e=this.registry.defaultWidgetFactory(n);if(!e){return undefined}r=[e.name]}else if(t===null){r=this.registry.preferredWidgetFactories(n).map((e=>e.name))}for(const o of this._contextsForPath(n)){for(const e of r){if(e!==null){const t=this._widgetManager.findWidget(o,e);if(t){return t}}}}return undefined}newUntitled(e){if(e.type==="file"){e.ext=e.ext||".txt"}return this.services.contents.newUntitled(e)}open(e,t="default",n,r){return this._createOrOpenDocument("open",e,t,n,r)}openOrReveal(e,t="default",n,r){const o=this.findWidget(e,t);if(o){this._opener.open(o,r||{});return o}return this.open(e,t,n,r||{})}overwrite(e,t){const n=`${t}.${A.UUID.uuid4()}`;const r=()=>this.rename(n,t);return this.rename(e,n).then((()=>this.deleteFile(t))).then(r,r)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const n=this.services.contents.normalize(e);return(0,f.find)(this._contexts,(e=>e.path===n&&e.factoryName===t))}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter((e=>e.path===t))}_createContext(e,t,n){const r=(e,t)=>{this._widgetManager.adoptWidget(i,e);this._opener.open(e,t)};const o=this.services.contents.getModelDBFactory(e)||undefined;const i=new g.Context({opener:r,manager:this.services,factory:t,path:e,kernelPreference:n,modelDBFactory:o,setBusy:this._setBusy,sessionDialogs:this._dialogs,collaborative:this._collaborative,docProviderFactory:this._docProviderFactory,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator});const s=new b({context:i,saveInterval:this.autosaveInterval});k.saveHandlerProperty.set(i,s);void i.ready.then((()=>{if(this.autosave){s.start()}}));i.disposed.connect(this._onContextDisposed,this);this._contexts.push(i);return i}_onContextDisposed(e){f.ArrayExt.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:n}=this;if(t==="default"){const r=n.defaultWidgetFactory(e);if(!r){return undefined}t=r.name}return n.getWidgetFactory(t)}_createOrOpenDocument(e,t,n="default",r,o){const i=this._widgetFactoryFor(t,n);if(!i){return undefined}const s=i.modelName||"text";const a=this.registry.getModelFactory(s);if(!a){return undefined}const l=this.registry.getKernelPreference(t,i.name,r);let c;let d=Promise.resolve(undefined);if(e==="open"){c=this._findContext(t,a.name)||null;if(!c){c=this._createContext(t,a,l);d=this._when.then((()=>c.initialize(false)))}}else if(e==="create"){c=this._createContext(t,a,l);d=this._when.then((()=>c.initialize(true)))}else{throw new Error(`Invalid argument 'which': ${e}`)}const u=this._widgetManager.createWidget(i,c);this._opener.open(u,o||{});d.catch((e=>{console.error(`Failed to initialize the context with '${a.name}' for ${t}`,e);u.close()}));return u}_onActivateRequested(e,t){this._activateRequested.emit(t)}}var k;(function(e){e.saveHandlerProperty=new v.AttachedProperty({name:"saveHandler",create:()=>undefined})})(k||(k={}));var B=n(85913);var S=n(77865);var D=n.n(S);function M(e){return D().createElement(B.TextItem,{source:e.name,title:e.fullPath})}class T extends r.VDomRenderer{constructor(e){super(new T.Model(e.docManager));this.node.title=this.model.path}render(){return D().createElement(M,{fullPath:this.model.path,name:this.model.name})}}(function(e){class t extends r.VDomModel{constructor(e){super();this._onTitleChange=e=>{const t=this._getAllState();this._name=e.label;this._triggerChange(t,this._getAllState())};this._onPathChange=(e,t)=>{const n=this._getAllState();this._path=t;this._name=o.PathExt.basename(t);this._triggerChange(n,this._getAllState())};this._path="";this._name="";this._widget=null;this._docManager=e}get path(){return this._path}get name(){return this._name}get widget(){return this._widget}set widget(e){const t=this._widget;if(t!==null){const e=this._docManager.contextForWidget(t);if(e){e.pathChanged.disconnect(this._onPathChange)}else{t.title.changed.disconnect(this._onTitleChange)}}const n=this._getAllState();this._widget=e;if(this._widget===null){this._path="";this._name=""}else{const e=this._docManager.contextForWidget(this._widget);if(e){this._path=e.path;this._name=o.PathExt.basename(e.path);e.pathChanged.connect(this._onPathChange)}else{this._path="";this._name=this._widget.title.label;this._widget.title.changed.connect(this._onTitleChange)}}this._triggerChange(n,this._getAllState())}_getAllState(){return[this._path,this._name]}_triggerChange(e,t){if(e[0]!==t[0]||e[1]!==t[1]){this.stateChanged.emit(void 0)}}}e.Model=t})(T||(T={}));function I(e){return D().createElement(B.TextItem,{source:e.fileStatus})}const P=2e3;class R extends r.VDomRenderer{constructor(e){super(new R.Model(e.docManager));const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");this._statusMap={completed:n.__("Saving completed"),started:n.__("Saving started"),failed:n.__("Saving failed")}}render(){if(this.model===null||this.model.status===null){return null}else{return D().createElement(I,{fileStatus:this._statusMap[this.model.status]})}}}(function(e){class t extends r.VDomModel{constructor(e){super();this._onStatusChange=(e,t)=>{this._status=t;if(this._status==="completed"){setTimeout((()=>{this._status=null;this.stateChanged.emit(void 0)}),P);this.stateChanged.emit(void 0)}else{this.stateChanged.emit(void 0)}};this._status=null;this._widget=null;this._status=null;this.widget=null;this._docManager=e}get status(){return this._status}get widget(){return this._widget}set widget(e){var t,n;const r=this._widget;if(r!==null){const e=this._docManager.contextForWidget(r);if(e){e.saveState.disconnect(this._onStatusChange)}else if((t=this._widget.content)===null||t===void 0?void 0:t.saveStateChanged){this._widget.content.saveStateChanged.disconnect(this._onStatusChange)}}this._widget=e;if(this._widget===null){this._status=null}else{const e=this._docManager.contextForWidget(this._widget);if(e){e.saveState.connect(this._onStatusChange)}else if((n=this._widget.content)===null||n===void 0?void 0:n.saveStateChanged){this._widget.content.saveStateChanged.connect(this._onStatusChange)}}}}e.Model=t})(R||(R={}));const L=new A.Token("@jupyterlab/docmanager:IDocumentManager")},82401:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(94683)},67188:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>u});var r=n(69442);var o=n.n(r);var i=n(4370);var s=n.n(i);var a=n(22248);var l=n.n(a);const c={id:"@jupyterlab/docprovider-extension:plugin",provides:i.IDocumentProviderFactory,activate:e=>{const t=a.ServerConnection.makeSettings();const n=r.URLExt.join(t.wsUrl,"api/yjs");const o=r.PageConfig.getOption("collaborative")=="true"?true:false;const s=e=>o?new i.WebSocketProviderWithLocks(Object.assign(Object.assign({},e),{url:n})):new i.ProviderMock;return s}};const d=[c];const u=d},21411:(e,t,n)=>{"use strict";var r=n(90516)},92476:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IDocumentProviderFactory:()=>c,ProviderMock:()=>a,WebSocketProviderWithLocks:()=>m,getAnonymousUserName:()=>o,getRandomColor:()=>s,moonsOfJupyter:()=>r,userColors:()=>i});const r=["Metis","Adrastea","Amalthea","Thebe","Io","Europa","Ganymede","Callisto","Themisto","Leda","Ersa","Pandia","Himalia","Lysithea","Elara","Dia","Carpo","Valetudo","Euporie","Eupheme","Helike","Euanthe","Hermippe","Praxidike","Thyone","Thelxinoe","Ananke","Mneme","Orthosie","Harpalyke","Iocaste","Erinome","Aitne","Herse","Taygete","Eukelade","Carme","Isonoe","Autonoe","Philophrosyne","Cyllene","Pasithee","Pasiphae","Sponde","Eurydome","Kalyke","Hegemone","Kale","Kallichore","Chaldene","Arche","Eirene","Kore","Megaclite","Aoede","Callirrhoe","Sinope"];const o=()=>"Anonymous "+r[Math.floor(Math.random()*r.length)];const i=["#12A0D3","#17AB30","#CC8500","#A79011","#ee6352","#609DA9","#4BA749","#00A1B3"];const s=()=>i[Math.floor(Math.random()*i.length)];class a{requestInitialContent(){return Promise.resolve(false)}putInitializedState(){}acquireLock(){return Promise.resolve(0)}releaseLock(e){}destroy(){}setPath(e){}}var l=n(91100);const c=new l.Token("@jupyterlab/docprovider:IDocumentProviderFactory");var d=n(64485);var u=n(29194);var h=n(64151);var p=n(20073);class m extends h.V{constructor(e){var t,n,r;super(e.url,e.contentType+":"+e.path,e.ymodel.ydoc,{awareness:e.ymodel.awareness});this._currentLockRequest=null;this._initialContentRequest=null;this._path=e.path;this._contentType=e.contentType;this._serverUrl=e.url;const i=new URL(e.url).searchParams;const a=(t="#"+i.get("usercolor"))!==null&&t!==void 0?t:s().slice(1);const l=(n=i.get("username"))!==null&&n!==void 0?n:o();const c=e.ymodel.awareness;const u=c.getLocalState();if(u&&((r=u.user)===null||r===void 0?void 0:r.name)==null){e.ymodel.awareness.setLocalStateField("user",{name:l,color:a})}this.messageHandlers[127]=(e,t,n,r,o)=>{const i=d.Jl(t);const s=this._currentLockRequest;this._currentLockRequest=null;if(s){s.resolve(i)}};this.messageHandlers[125]=(e,t,n,r,o)=>{const i=d.iU(t);if(i.byteLength>0){p.applyUpdate(this.doc,i)}const s=this._initialContentRequest;this._initialContentRequest=null;if(s){s.resolve(i.byteLength>0)}};this._isInitialized=false;this._onConnectionStatus=this._onConnectionStatus.bind(this);this.on("status",this._onConnectionStatus)}setPath(e){if(e!==this._path){this._path=e;const t=u.Mf();u.cW(t,123);const n=unescape(encodeURIComponent(this._contentType+":"+e));for(let e=0;e<n.length;e++){u.cW(t,n.codePointAt(e))}this._sendMessage(u._f(t));this.disconnectBc();this.bcChannel=this._serverUrl+"/"+this._contentType+":"+this._path;this.url=this.bcChannel;this.connectBc()}}requestInitialContent(){if(this._initialContentRequest){return this._initialContentRequest.promise}this._initialContentRequest=new l.PromiseDelegate;this._sendMessage(new Uint8Array([125]));setTimeout((()=>{var e;return(e=this._initialContentRequest)===null||e===void 0?void 0:e.resolve(false)}),1e3);return this._initialContentRequest.promise}putInitializedState(){const e=u.Mf();u.uE(e,124);u.HK(e,p.encodeStateAsUpdate(this.doc));this._sendMessage(u._f(e));this._isInitialized=true}acquireLock(){if(this._currentLockRequest){return this._currentLockRequest.promise}this._sendMessage(new Uint8Array([127]));if(this._requestLockInterval){clearInterval(this._requestLockInterval)}this._requestLockInterval=setInterval((()=>{if(this.wsconnected){this._sendMessage(new Uint8Array([127]))}}),500);let e,t;const n=new Promise(((n,r)=>{e=n;t=r}));this._currentLockRequest={promise:n,resolve:e,reject:t};return n}releaseLock(e){const t=u.Mf();u.uE(t,126);u.Ep(t,e);this._sendMessage(u._f(t));if(this._requestLockInterval){clearInterval(this._requestLockInterval)}}_sendMessage(e){const t=()=>{setTimeout((()=>{if(this.wsconnected){this.ws.send(e)}else{this.once("status",t)}}),0)};t()}async _onConnectionStatus(e){if(this._isInitialized&&e.status==="connected"){const e=await this.acquireLock();const t=await this.requestInitialContent();if(!t){this.putInitializedState()}this.releaseLock(e)}}}},17454:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ABCWidgetFactory:()=>b,Base64ModelFactory:()=>C,Context:()=>h,DocumentModel:()=>A,DocumentRegistry:()=>D,DocumentWidget:()=>y,MimeContent:()=>w,MimeDocument:()=>x,MimeDocumentFactory:()=>j,TextModelFactory:()=>v});var r=n(3378);var o=n(69442);var i=n(4370);var s=n(63833);var a=n(59768);var l=n(91100);var c=n(64782);var d=n(18987);var u=n(700);class h{constructor(e){this._path="";this._lineEnding=null;this._contentsModel=null;this._populatedPromise=new l.PromiseDelegate;this._isPopulated=false;this._isReady=false;this._isDisposed=false;this._pathChanged=new d.Signal(this);this._fileChanged=new d.Signal(this);this._saveState=new d.Signal(this);this._disposed=new d.Signal(this);this._lastModifiedCheckMargin=500;this._timeConflictModalIsOpen=false;const t=this._manager=e.manager;this.translator=e.translator||a.nullTranslator;this._trans=this.translator.load("jupyterlab");this._factory=e.factory;this._dialogs=e.sessionDialogs||r.sessionContextDialogs;this._opener=e.opener||p.noOp;this._path=this._manager.contents.normalize(e.path);this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const n=this._manager.contents.localPath(this._path);const c=this._factory.preferredLanguage(o.PathExt.basename(n));const u=e.modelDBFactory;if(u){const e=t.contents.localPath(this._path);this._modelDB=u.createNew(e);this._model=this._factory.createNew(c,this._modelDB,false)}else{this._model=this._factory.createNew(c,undefined,false)}const h=this._model.sharedModel;const m=h.ydoc;this._ydoc=m;this._ycontext=m.getMap("context");const g=e.docProviderFactory;this._provider=g?g({path:this._path,contentType:this._factory.contentType,ymodel:h}):new i.ProviderMock;this._readyPromise=t.ready.then((()=>this._populatedPromise.promise));const f=o.PathExt.extname(this._path);this.sessionContext=new r.SessionContext({sessionManager:t.sessions,specsManager:t.kernelspecs,path:this._path,type:f===".ipynb"?"notebook":"file",name:o.PathExt.basename(n),kernelPreference:e.kernelPreference||{shouldStart:false},setBusy:e.setBusy});this.sessionContext.propertyChanged.connect(this._onSessionChanged,this);t.contents.fileChanged.connect(this._onFileChanged,this);const A=this.urlResolver=new s.RenderMimeRegistry.UrlResolver({path:this._path,contents:t.contents});this._ycontext.set("path",this._path);this._ycontext.observe((e=>{var t;const n=e.changes.keys.get("path");if(n){const e=this._ycontext.get("path");if(e&&e!==n.oldValue){A.path=e;this._path=e;this._provider.setPath(e);this._pathChanged.emit(this.path);(t=this.sessionContext.session)===null||t===void 0?void 0:t.setPath(e)}}}))}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.sessionContext.dispose();if(this._modelDB){this._modelDB.dispose()}this._model.dispose();this._provider.destroy();this._model.sharedModel.dispose();this._ydoc.destroy();this._disposed.emit(void 0);d.Signal.clearData(this)}get isReady(){return this._isReady}get ready(){return this._readyPromise}async initialize(e){const t=await this._provider.acquireLock();const n=await this._provider.requestInitialContent();let r;if(e||n){r=this._save()}else{r=this._revert()}const o=()=>{this._provider.releaseLock(t)};r.then((()=>{this._provider.putInitializedState();this._model.initialize()})).then(o,o);return r}rename(e){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(e)))))}async save(){const[e]=await Promise.all([this._provider.acquireLock(),this.ready]);let t;t=this._save();t=t.then((()=>{this._provider.putInitializedState()}));const n=()=>{this._provider.releaseLock(e)};t.then(n,n);return await t}saveAs(){return this.ready.then((()=>p.getSavePath(this._path))).then((e=>{if(this.isDisposed||!e){return}if(e===this._path){return this.save()}return this._manager.ready.then((()=>this._manager.contents.get(e))).then((()=>this._maybeOverWrite(e))).catch((t=>{if(!t.response||t.response.status!==404){throw t}return this._finishSaveAs(e)}))}))}async download(){const e=await this._manager.contents.getDownloadUrl(this._path);const t=document.createElement("a");t.href=e;t.download="";document.body.appendChild(t);t.click();document.body.removeChild(t);return void 0}async revert(){const[e]=await Promise.all([this._provider.acquireLock(),this.ready]);const t=this._revert();const n=()=>{this._provider.releaseLock(e)};t.then(n,n);return await t}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then((()=>e.createCheckpoint(this._path)))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then((()=>t.deleteCheckpoint(this._path,e)))}restoreCheckpoint(e){const t=this._manager.contents;const n=this._path;return this._manager.ready.then((()=>{if(e){return t.restoreCheckpoint(n,e)}return this.listCheckpoints().then((r=>{if(this.isDisposed||!r.length){return}e=r[r.length-1].id;return t.restoreCheckpoint(n,e)}))}))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then((()=>e.listCheckpoints(this._path)))}addSibling(e,t={}){const n=this._opener;if(n){n(e,t)}return new c.DisposableDelegate((()=>{e.close()}))}_onFileChanged(e,t){var n,r,i;if(t.type!=="rename"){return}let s=t.oldValue&&t.oldValue.path;let a=t.newValue&&t.newValue.path;if(a&&this._path.indexOf(s||"")===0){let e=t.newValue;if(s!==this._path){a=this._path.replace(new RegExp(`^${s}/`),`${a}/`);s=this._path;e={last_modified:(n=t.newValue)===null||n===void 0?void 0:n.created,path:a}}this._path=a;void((r=this.sessionContext.session)===null||r===void 0?void 0:r.setPath(a));const l=Object.assign(Object.assign({},this._contentsModel),e);const c=this._manager.contents.localPath(a);void((i=this.sessionContext.session)===null||i===void 0?void 0:i.setName(o.PathExt.basename(c)));this._updateContentsModel(l);this._ycontext.set("path",this._path)}}_onSessionChanged(e,t){if(t!=="path"){return}const n=this.sessionContext.session.path;if(n!==this._path){this._path=n;this._ycontext.set("path",this._path)}}_updateContentsModel(e){const t={path:e.path,name:e.name,type:e.type,content:undefined,writable:e.writable,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format};const n=this._contentsModel?this._contentsModel.last_modified:null;this._contentsModel=t;this._ycontext.set("last_modified",t.last_modified);if(!n||t.last_modified!==n){this._fileChanged.emit(t)}}_populate(){this._isPopulated=true;this._isReady=true;this._populatedPromise.resolve(void 0);return this._maybeCheckpoint(false).then((()=>{if(this.isDisposed){return}const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference=Object.assign(Object.assign({},this.sessionContext.kernelPreference),{name:e,language:this._model.defaultKernelLanguage});void this.sessionContext.initialize().then((e=>{if(e){void this._dialogs.selectKernel(this.sessionContext,this.translator)}}))}))}async _rename(e){var t,n;const r=this.path.split("/");r[r.length-1]=e;const o=r.join("/");await this._manager.contents.rename(this.path,o);await((t=this.sessionContext.session)===null||t===void 0?void 0:t.setPath(o));await((n=this.sessionContext.session)===null||n===void 0?void 0:n.setName(e));this._path=o;this._ycontext.set("path",this._path)}async _save(){this._saveState.emit("started");const e=this._model;let t;if(this._factory.fileFormat==="json"){t=e.toJSON()}else{t=e.toString();if(this._lineEnding){t=t.replace(/\n/g,this._lineEnding)}}const n={type:this._factory.contentType,format:this._factory.fileFormat,content:t};try{let t;await this._manager.ready;if(!e.modelDB.isCollaborative){t=await this._maybeSave(n)}else{t=await this._manager.contents.save(this._path,n)}if(this.isDisposed){return}e.dirty=false;this._updateContentsModel(t);if(!this._isPopulated){await this._populate()}this._saveState.emit("completed")}catch(r){if(r.message==="Cancel"||r.message==="Modal is already displayed"){throw r}const e=this._manager.contents.localPath(this._path);const t=o.PathExt.basename(e);void this._handleError(r,this._trans.__("File Save Error for %1",t));this._saveState.emit("failed");throw r}}_revert(e=false){const t=Object.assign({type:this._factory.contentType,content:this._factory.fileFormat!==null},this._factory.fileFormat!==null?{format:this._factory.fileFormat}:{});const n=this._path;const r=this._model;return this._manager.ready.then((()=>this._manager.contents.get(n,t))).then((t=>{if(this.isDisposed){return}if(t.format==="json"){r.fromJSON(t.content);if(e){r.initialize()}}else{let n=t.content;if(n.indexOf("\r\n")!==-1){this._lineEnding="\r\n";n=n.replace(/\r\n/g,"\n")}else if(n.indexOf("\r")!==-1){this._lineEnding="\r";n=n.replace(/\r/g,"\n")}else{this._lineEnding=null}r.fromString(n);if(e){r.initialize()}}this._updateContentsModel(t);r.dirty=false;if(!this._isPopulated){return this._populate()}})).catch((async e=>{const t=this._manager.contents.localPath(this._path);const n=o.PathExt.basename(t);void this._handleError(e,this._trans.__("File Load Error for %1",n));throw e}))}_maybeSave(e){const t=this._path;const n=this._manager.contents.get(t,{content:false});return n.then((n=>{var r;if(this.isDisposed){return Promise.reject(new Error("Disposed"))}const o=this._lastModifiedCheckMargin;const i=this._ycontext.get("last_modified");const s=i||((r=this.contentsModel)===null||r===void 0?void 0:r.last_modified);const a=s?new Date(s):new Date;const l=new Date(n.last_modified);if(s&&l.getTime()-a.getTime()>o){return this._timeConflict(a,n,e)}return this._manager.contents.save(t,e)}),(n=>{if(n.response&&n.response.status===404){return this._manager.contents.save(t,e)}throw n}))}async _handleError(e,t){await(0,r.showErrorMessage)(t,e);return}_maybeCheckpoint(e){let t=this._contentsModel&&this._contentsModel.writable;let n=Promise.resolve(void 0);if(!t){return n}if(e){n=this.createCheckpoint().then()}else{n=this.listCheckpoints().then((e=>{t=this._contentsModel&&this._contentsModel.writable;if(!this.isDisposed&&!e.length&&t){return this.createCheckpoint().then()}}))}return n.catch((e=>{if(!e.response||e.response.status!==403){throw e}}))}_timeConflict(e,t,n){const o=new Date(t.last_modified);console.warn(`Last saving performed ${e} `+`while the current file seems to have been saved `+`${o}`);if(this._timeConflictModalIsOpen){return Promise.reject(new Error("Modal is already displayed"))}const i=this._trans.__(`"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?`,this.path);const s=r.Dialog.okButton({label:this._trans.__("Revert")});const a=r.Dialog.warnButton({label:this._trans.__("Overwrite")});this._timeConflictModalIsOpen=true;return(0,r.showDialog)({title:this._trans.__("File Changed"),body:i,buttons:[r.Dialog.cancelButton(),s,a]}).then((e=>{this._timeConflictModalIsOpen=false;if(this.isDisposed){return Promise.reject(new Error("Disposed"))}if(e.button.label===this._trans.__("Overwrite")){return this._manager.contents.save(this._path,n)}if(e.button.label===this._trans.__("Revert")){return this.revert().then((()=>t))}return Promise.reject(new Error("Cancel"))}))}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e);const n=r.Dialog.warnButton({label:this._trans.__("Overwrite")});return(0,r.showDialog)({title:this._trans.__("File Overwrite?"),body:t,buttons:[r.Dialog.cancelButton(),n]}).then((t=>{if(this.isDisposed){return Promise.reject(new Error("Disposed"))}if(t.button.label===this._trans.__("Overwrite")){return this._manager.contents.delete(e).then((()=>this._finishSaveAs(e)))}}))}async _finishSaveAs(e){var t,n;this._path=e;await((t=this.sessionContext.session)===null||t===void 0?void 0:t.setPath(e));await((n=this.sessionContext.session)===null||n===void 0?void 0:n.setName(e.split("/").pop()));await this.save();this._ycontext.set("path",this._path);await this._maybeCheckpoint(true)}}var p;(function(e){function t(e,t){t=t||a.nullTranslator;const n=t.load("jupyterlab");const i=r.Dialog.okButton({label:n.__("Save")});return(0,r.showDialog)({title:n.__("Save File As.."),body:new o(e),buttons:[r.Dialog.cancelButton(),i]}).then((e=>{var t;if(e.button.label===n.__("Save")){return(t=e.value)!==null&&t!==void 0?t:undefined}return}))}e.getSavePath=t;function n(){}e.noOp=n;class o extends u.Widget{constructor(e){super({node:i(e)})}getValue(){return this.node.value}}function i(e){const t=document.createElement("input");t.value=e;return t}})(p||(p={}));var m=n(66934);var g=n(41776);var f=n(73967);class A extends m.CodeEditor.Model{constructor(e,t){super({modelDB:t});this._defaultLang="";this._readOnly=false;this._contentChanged=new d.Signal(this);this._stateChanged=new d.Signal(this);this._defaultLang=e||"";const n=new f.YFile;this.switchSharedModel(n,true);this.value.changed.connect(this.triggerContentChange,this);this.sharedModel.dirty=false;this.sharedModel.changed.connect(this._onStateChanged,this)}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get dirty(){return this.sharedModel.dirty}set dirty(e){if(e===this.dirty){return}this.sharedModel.dirty=e}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}const t=this._readOnly;this._readOnly=e;this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get defaultKernelName(){return""}get defaultKernelLanguage(){return this._defaultLang}toString(){return this.value.text}fromString(e){this.value.text=e}toJSON(){return JSON.parse(this.value.text||"null")}fromJSON(e){this.fromString(JSON.stringify(e))}initialize(){return}triggerStateChange(e){this._stateChanged.emit(e)}triggerContentChange(){this._contentChanged.emit(void 0);this.dirty=true}_onStateChanged(e,t){if(t.stateChange){t.stateChange.forEach((e=>{if(e.name!=="dirty"||e.oldValue!==e.newValue){this.triggerStateChange(e)}}))}}}class v{constructor(){this._isDisposed=false}get name(){return"text"}get contentType(){return"file"}get fileFormat(){return"text"}get isDisposed(){return this._isDisposed}dispose(){this._isDisposed=true}createNew(e,t,n){return new A(e,t)}preferredLanguage(e){const t=g.Mode.findByFileName(e);return t&&t.mode}}class C extends v{get name(){return"base64"}get contentType(){return"file"}get fileFormat(){return"base64"}}class b{constructor(e){this._isDisposed=false;this._widgetCreated=new d.Signal(this);this._translator=e.translator||a.nullTranslator;this._name=e.name;this._readOnly=e.readOnly===undefined?false:e.readOnly;this._defaultFor=e.defaultFor?e.defaultFor.slice():[];this._defaultRendered=(e.defaultRendered||[]).slice();this._fileTypes=e.fileTypes.slice();this._modelName=e.modelName||"text";this._preferKernel=!!e.preferKernel;this._canStartKernel=!!e.canStartKernel;this._shutdownOnClose=!!e.shutdownOnClose;this._toolbarFactory=e.toolbarFactory}get widgetCreated(){return this._widgetCreated}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;d.Signal.clearData(this)}get readOnly(){return this._readOnly}get name(){return this._name}get fileTypes(){return this._fileTypes.slice()}get modelName(){return this._modelName}get defaultFor(){return this._defaultFor.slice()}get defaultRendered(){return this._defaultRendered.slice()}get preferKernel(){return this._preferKernel}get canStartKernel(){return this._canStartKernel}get translator(){return this._translator}get shutdownOnClose(){return this._shutdownOnClose}set shutdownOnClose(e){this._shutdownOnClose=e}createNew(e,t){var n;const o=this.createNewWidget(e,t);(0,r.setToolbar)(o,(n=this._toolbarFactory)!==null&&n!==void 0?n:this.defaultToolbarFactory.bind(this));this._widgetCreated.emit(o);return o}defaultToolbarFactory(e){return[]}}const _="jp-mod-dirty";class y extends r.MainAreaWidget{constructor(e){e.reveal=Promise.all([e.reveal,e.context.ready]);super(e);this.context=e.context;this.context.pathChanged.connect(this._onPathChanged,this);this._onPathChanged(this.context,this.context.path);this.context.model.stateChanged.connect(this._onModelStateChanged,this);void this.context.ready.then((()=>{this._handleDirtyState()}));this.title.changed.connect(this._onTitleChanged,this)}setFragment(e){}async _onTitleChanged(e){const t=/[\/\\:]/;const n=this.title.label;const r=this.context.path.split("/").pop();if(n===r){return}if(n.length>0&&!t.test(n)){const e=this.context.path;await this.context.rename(n);if(this.context.path!==e){return}}this.title.label=r}_onPathChanged(e,t){this.title.label=o.PathExt.basename(e.localPath)}_onModelStateChanged(e,t){if(t.name==="dirty"){this._handleDirtyState()}}_handleDirtyState(){if(this.context.model.dirty&&!this.title.className.includes(_)){this.title.className+=` ${_}`}else{this.title.className=this.title.className.replace(_,"")}}}var E=n(46843);class w extends u.Widget{constructor(e){super();this._changeCallback=e=>{if(!e.data||!e.data[this.mimeType]){return}const t=e.data[this.mimeType];if(typeof t==="string"){if(t!==this._context.model.toString()){this._context.model.fromString(t)}}else if(t!==null&&t!==undefined&&!l.JSONExt.deepEqual(t,this._context.model.toJSON())){this._context.model.fromJSON(t)}};this._fragment="";this._ready=new l.PromiseDelegate;this._isRendering=false;this._renderRequested=false;this.addClass("jp-MimeDocument");this.translator=e.translator||a.nullTranslator;this._trans=this.translator.load("jupyterlab");this.mimeType=e.mimeType;this._dataType=e.dataType||"string";this._context=e.context;this.renderer=e.renderer;const t=this.layout=new u.StackedLayout;t.addWidget(this.renderer);this._context.ready.then((()=>this._render())).then((()=>{if(this.node===document.activeElement){E.MessageLoop.sendMessage(this.renderer,u.Widget.Msg.ActivateRequest)}this._monitor=new o.ActivityMonitor({signal:this._context.model.contentChanged,timeout:e.renderTimeout});this._monitor.activityStopped.connect(this.update,this);this._ready.resolve(undefined)})).catch((e=>{requestAnimationFrame((()=>{this.dispose()}));void(0,r.showErrorMessage)(this._trans.__("Renderer Failure: %1",this._context.path),e)}))}[r.Printing.symbol](){return r.Printing.getPrintFunction(this.renderer)}get ready(){return this._ready.promise}setFragment(e){this._fragment=e;this.update()}dispose(){if(this.isDisposed){return}if(this._monitor){this._monitor.dispose()}this._monitor=null;super.dispose()}onUpdateRequest(e){if(this._context.isReady){void this._render();this._fragment=""}}async _render(){if(this.isDisposed){return}if(this._isRendering){this._renderRequested=true;return}this._renderRequested=false;const e=this._context;const t=e.model;const n={};if(this._dataType==="string"){n[this.mimeType]=t.toString()}else{n[this.mimeType]=t.toJSON()}const o=new s.MimeModel({data:n,callback:this._changeCallback,metadata:{fragment:this._fragment}});try{this._isRendering=true;await this.renderer.renderModel(o);this._isRendering=false;if(this._renderRequested){return this._render()}}catch(i){requestAnimationFrame((()=>{this.dispose()}));void(0,r.showErrorMessage)(this._trans.__("Renderer Failure: %1",e.path),i)}}}class x extends y{setFragment(e){this.content.setFragment(e)}}class j extends b{constructor(e){super(k.createRegistryOptions(e));this._rendermime=e.rendermime;this._renderTimeout=e.renderTimeout||1e3;this._dataType=e.dataType||"string";this._fileType=e.primaryFileType;this._factory=e.factory}createNewWidget(e){var t,n;const r=this._fileType;const o=(r===null||r===void 0?void 0:r.mimeTypes.length)?r.mimeTypes[0]:"text/plain";const i=this._rendermime.clone({resolver:e.urlResolver});let s;if(this._factory&&this._factory.mimeTypes.includes(o)){s=this._factory.createRenderer({mimeType:o,resolver:i.resolver,sanitizer:i.sanitizer,linkHandler:i.linkHandler,latexTypesetter:i.latexTypesetter})}else{s=i.createRenderer(o)}const a=new w({context:e,renderer:s,mimeType:o,renderTimeout:this._renderTimeout,dataType:this._dataType});a.title.icon=r===null||r===void 0?void 0:r.icon;a.title.iconClass=(t=r===null||r===void 0?void 0:r.iconClass)!==null&&t!==void 0?t:"";a.title.iconLabel=(n=r===null||r===void 0?void 0:r.iconLabel)!==null&&n!==void 0?n:"";const l=new x({content:a,context:e});return l}}var k;(function(e){function t(e){return Object.assign(Object.assign({},e),{readOnly:true})}e.createRegistryOptions=t})(k||(k={}));var B=n(25903);var S=n(54522);class D{constructor(e={}){this._modelFactories=Object.create(null);this._widgetFactories=Object.create(null);this._defaultWidgetFactory="";this._defaultWidgetFactoryOverrides=Object.create(null);this._defaultWidgetFactories=Object.create(null);this._defaultRenderedWidgetFactories=Object.create(null);this._widgetFactoriesForFileType=Object.create(null);this._fileTypes=[];this._extenders=Object.create(null);this._changed=new d.Signal(this);this._isDisposed=false;const t=e.textModelFactory;this.translator=e.translator||a.nullTranslator;if(t&&t.name!=="text"){throw new Error("Text model factory must have the name `text`")}this._modelFactories["text"]=t||new v;const n=e.initialFileTypes||D.getDefaultFileTypes(this.translator);n.forEach((e=>{const t=Object.assign(Object.assign({},D.getFileTypeDefaults(this.translator)),e);this._fileTypes.push(t)}))}get changed(){return this._changed}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;for(const e in this._modelFactories){this._modelFactories[e].dispose()}for(const e in this._widgetFactories){this._widgetFactories[e].dispose()}for(const e in this._extenders){this._extenders[e].length=0}this._fileTypes.length=0;d.Signal.clearData(this)}addWidgetFactory(e){const t=e.name.toLowerCase();if(!t||t==="default"){throw Error("Invalid factory name")}if(this._widgetFactories[t]){console.warn(`Duplicate registered factory ${t}`);return new c.DisposableDelegate(M.noOp)}this._widgetFactories[t]=e;for(const n of e.defaultFor||[]){if(e.fileTypes.indexOf(n)===-1){continue}if(n==="*"){this._defaultWidgetFactory=t}else{this._defaultWidgetFactories[n]=t}}for(const n of e.defaultRendered||[]){if(e.fileTypes.indexOf(n)===-1){continue}this._defaultRenderedWidgetFactories[n]=t}for(const n of e.fileTypes){if(!this._widgetFactoriesForFileType[n]){this._widgetFactoriesForFileType[n]=[]}this._widgetFactoriesForFileType[n].push(t)}this._changed.emit({type:"widgetFactory",name:t,change:"added"});return new c.DisposableDelegate((()=>{delete this._widgetFactories[t];if(this._defaultWidgetFactory===t){this._defaultWidgetFactory=""}for(const e of Object.keys(this._defaultWidgetFactories)){if(this._defaultWidgetFactories[e]===t){delete this._defaultWidgetFactories[e]}}for(const e of Object.keys(this._defaultRenderedWidgetFactories)){if(this._defaultRenderedWidgetFactories[e]===t){delete this._defaultRenderedWidgetFactories[e]}}for(const e of Object.keys(this._widgetFactoriesForFileType)){S.ArrayExt.removeFirstOf(this._widgetFactoriesForFileType[e],t);if(this._widgetFactoriesForFileType[e].length===0){delete this._widgetFactoriesForFileType[e]}}for(const e of Object.keys(this._defaultWidgetFactoryOverrides)){if(this._defaultWidgetFactoryOverrides[e]===t){delete this._defaultWidgetFactoryOverrides[e]}}this._changed.emit({type:"widgetFactory",name:t,change:"removed"})}))}addModelFactory(e){const t=e.name.toLowerCase();if(this._modelFactories[t]){console.warn(`Duplicate registered factory ${t}`);return new c.DisposableDelegate(M.noOp)}this._modelFactories[t]=e;this._changed.emit({type:"modelFactory",name:t,change:"added"});return new c.DisposableDelegate((()=>{delete this._modelFactories[t];this._changed.emit({type:"modelFactory",name:t,change:"removed"})}))}addWidgetExtension(e,t){e=e.toLowerCase();if(!(e in this._extenders)){this._extenders[e]=[]}const n=this._extenders[e];const r=S.ArrayExt.firstIndexOf(n,t);if(r!==-1){console.warn(`Duplicate registered extension for ${e}`);return new c.DisposableDelegate(M.noOp)}this._extenders[e].push(t);this._changed.emit({type:"widgetExtension",name:e,change:"added"});return new c.DisposableDelegate((()=>{S.ArrayExt.removeFirstOf(this._extenders[e],t);this._changed.emit({type:"widgetExtension",name:e,change:"removed"})}))}addFileType(e,t){const n=Object.assign(Object.assign(Object.assign({},D.getFileTypeDefaults(this.translator)),e),!(e.icon||e.iconClass)&&{icon:B.fileIcon});this._fileTypes.push(n);if(t){const e=n.name.toLowerCase();t.map((e=>e.toLowerCase())).forEach((t=>{if(!this._widgetFactoriesForFileType[e]){this._widgetFactoriesForFileType[e]=[]}if(!this._widgetFactoriesForFileType[e].includes(t)){this._widgetFactoriesForFileType[e].push(t)}}));if(!this._defaultWidgetFactories[e]){this._defaultWidgetFactories[e]=this._widgetFactoriesForFileType[e][0]}}this._changed.emit({type:"fileType",name:n.name,change:"added"});return new c.DisposableDelegate((()=>{S.ArrayExt.removeFirstOf(this._fileTypes,n);if(t){const e=n.name.toLowerCase();for(const n of t.map((e=>e.toLowerCase()))){S.ArrayExt.removeFirstOf(this._widgetFactoriesForFileType[e],n)}if(this._defaultWidgetFactories[e]===t[0].toLowerCase()){delete this._defaultWidgetFactories[e]}}this._changed.emit({type:"fileType",name:e.name,change:"removed"})}))}preferredWidgetFactories(e){const t=new Set;const n=this.getFileTypesForPath(o.PathExt.basename(e));n.forEach((e=>{if(e.name in this._defaultWidgetFactoryOverrides){t.add(this._defaultWidgetFactoryOverrides[e.name])}}));n.forEach((e=>{if(e.name in this._defaultWidgetFactories){t.add(this._defaultWidgetFactories[e.name])}}));n.forEach((e=>{if(e.name in this._defaultRenderedWidgetFactories){t.add(this._defaultRenderedWidgetFactories[e.name])}}));if(this._defaultWidgetFactory){t.add(this._defaultWidgetFactory)}n.forEach((e=>{if(e.name in this._widgetFactoriesForFileType){(0,S.each)(this._widgetFactoriesForFileType[e.name],(e=>{t.add(e)}))}}));if("*"in this._widgetFactoriesForFileType){(0,S.each)(this._widgetFactoriesForFileType["*"],(e=>{t.add(e)}))}const r=[];t.forEach((e=>{const t=this._widgetFactories[e];if(!t){return}const n=t.modelName||"text";if(n in this._modelFactories){r.push(t)}}));return r}defaultRenderedWidgetFactory(e){const t=this.getFileTypesForPath(o.PathExt.basename(e));let n=undefined;for(const r of t){if(r.name in this._defaultRenderedWidgetFactories){n=this._widgetFactories[this._defaultRenderedWidgetFactories[r.name]];break}}return n||this.defaultWidgetFactory(e)}defaultWidgetFactory(e){if(!e){return this._widgetFactories[this._defaultWidgetFactory]}return this.preferredWidgetFactories(e)[0]}setDefaultWidgetFactory(e,t){e=e.toLowerCase();if(!this.getFileType(e)){throw Error(`Cannot find file type ${e}`)}if(!t){if(this._defaultWidgetFactoryOverrides[e]){delete this._defaultWidgetFactoryOverrides[e]}return}if(!this.getWidgetFactory(t)){throw Error(`Cannot find widget factory ${t}`)}t=t.toLowerCase();const n=this._widgetFactoriesForFileType[e];if(t!==this._defaultWidgetFactory&&!(n&&n.includes(t))){throw Error(`Factory ${t} cannot view file type ${e}`)}this._defaultWidgetFactoryOverrides[e]=t}widgetFactories(){return(0,S.map)(Object.keys(this._widgetFactories),(e=>this._widgetFactories[e]))}modelFactories(){return(0,S.map)(Object.keys(this._modelFactories),(e=>this._modelFactories[e]))}widgetExtensions(e){e=e.toLowerCase();if(!(e in this._extenders)){return(0,S.empty)()}return new S.ArrayIterator(this._extenders[e])}fileTypes(){return new S.ArrayIterator(this._fileTypes)}getWidgetFactory(e){return this._widgetFactories[e.toLowerCase()]}getModelFactory(e){return this._modelFactories[e.toLowerCase()]}getFileType(e){e=e.toLowerCase();return(0,S.find)(this._fileTypes,(t=>t.name.toLowerCase()===e))}getKernelPreference(e,t,n){t=t.toLowerCase();const r=this._widgetFactories[t];if(!r){return void 0}const i=this.getModelFactory(r.modelName||"text");if(!i){return void 0}const s=i.preferredLanguage(o.PathExt.basename(e));const a=n&&n.name;const l=n&&n.id;return{id:l,name:a,language:s,shouldStart:r.preferKernel,canStart:r.canStartKernel,shutdownOnDispose:r.shutdownOnClose}}getFileTypeForModel(e){switch(e.type){case"directory":return(0,S.find)(this._fileTypes,(e=>e.contentType==="directory"))||D.getDefaultDirectoryFileType(this.translator);case"notebook":return(0,S.find)(this._fileTypes,(e=>e.contentType==="notebook"))||D.getDefaultNotebookFileType(this.translator);default:if(e.name||e.path){const t=e.name||o.PathExt.basename(e.path);const n=this.getFileTypesForPath(t);if(n.length>0){return n[0]}}return this.getFileType("text")||D.getDefaultTextFileType(this.translator)}}getFileTypesForPath(e){const t=[];const n=o.PathExt.basename(e);let r=(0,S.find)(this._fileTypes,(e=>!!(e.pattern&&n.match(e.pattern)!==null)));if(r){t.push(r)}let i=M.extname(n);while(i.length>1){const e=this._fileTypes.filter((e=>e.extensions.map((e=>e.toLowerCase())).includes(i)));t.push(...e);i="."+i.split(".").slice(2).join(".")}return t}}(function(e){function t(e){e=e||a.nullTranslator;const t=e===null||e===void 0?void 0:e.load("jupyterlab");return{name:"default",displayName:t.__("default"),extensions:[],mimeTypes:[],contentType:"file",fileFormat:"text"}}e.getFileTypeDefaults=t;function n(e){e=e||a.nullTranslator;const n=e===null||e===void 0?void 0:e.load("jupyterlab");const r=t(e);return Object.assign(Object.assign({},r),{name:"text",displayName:n.__("Text"),mimeTypes:["text/plain"],extensions:[".txt"],icon:B.fileIcon})}e.getDefaultTextFileType=n;function r(e){e=e||a.nullTranslator;const n=e===null||e===void 0?void 0:e.load("jupyterlab");return Object.assign(Object.assign({},t(e)),{name:"notebook",displayName:n.__("Notebook"),mimeTypes:["application/x-ipynb+json"],extensions:[".ipynb"],contentType:"notebook",fileFormat:"json",icon:B.notebookIcon})}e.getDefaultNotebookFileType=r;function o(e){e=e||a.nullTranslator;const n=e===null||e===void 0?void 0:e.load("jupyterlab");return Object.assign(Object.assign({},t(e)),{name:"directory",displayName:n.__("Directory"),extensions:[],mimeTypes:["text/directory"],contentType:"directory",icon:B.folderIcon})}e.getDefaultDirectoryFileType=o;function i(e){e=e||a.nullTranslator;const t=e===null||e===void 0?void 0:e.load("jupyterlab");return[n(e),r(e),o(e),{name:"markdown",displayName:t.__("Markdown File"),extensions:[".md"],mimeTypes:["text/markdown"],icon:B.markdownIcon},{name:"PDF",displayName:t.__("PDF File"),extensions:[".pdf"],mimeTypes:["application/pdf"],icon:B.pdfIcon},{name:"python",displayName:t.__("Python File"),extensions:[".py"],mimeTypes:["text/x-python"],icon:B.pythonIcon},{name:"json",displayName:t.__("JSON File"),extensions:[".json"],mimeTypes:["application/json"],icon:B.jsonIcon},{name:"julia",displayName:t.__("Julia File"),extensions:[".jl"],mimeTypes:["text/x-julia"],icon:B.juliaIcon},{name:"csv",displayName:t.__("CSV File"),extensions:[".csv"],mimeTypes:["text/csv"],icon:B.spreadsheetIcon},{name:"tsv",displayName:t.__("TSV File"),extensions:[".tsv"],mimeTypes:["text/csv"],icon:B.spreadsheetIcon},{name:"r",displayName:t.__("R File"),mimeTypes:["text/x-rsrc"],extensions:[".R"],icon:B.rKernelIcon},{name:"yaml",displayName:t.__("YAML File"),mimeTypes:["text/x-yaml","text/yaml"],extensions:[".yaml",".yml"],icon:B.yamlIcon},{name:"svg",displayName:t.__("Image"),mimeTypes:["image/svg+xml"],extensions:[".svg"],icon:B.imageIcon,fileFormat:"base64"},{name:"tiff",displayName:t.__("Image"),mimeTypes:["image/tiff"],extensions:[".tif",".tiff"],icon:B.imageIcon,fileFormat:"base64"},{name:"jpeg",displayName:t.__("Image"),mimeTypes:["image/jpeg"],extensions:[".jpg",".jpeg"],icon:B.imageIcon,fileFormat:"base64"},{name:"gif",displayName:t.__("Image"),mimeTypes:["image/gif"],extensions:[".gif"],icon:B.imageIcon,fileFormat:"base64"},{name:"png",displayName:t.__("Image"),mimeTypes:["image/png"],extensions:[".png"],icon:B.imageIcon,fileFormat:"base64"},{name:"bmp",displayName:t.__("Image"),mimeTypes:["image/bmp"],extensions:[".bmp"],icon:B.imageIcon,fileFormat:"base64"}]}e.getDefaultFileTypes=i})(D||(D={}));var M;(function(e){function t(e){const t=o.PathExt.basename(e).split(".");t.shift();const n="."+t.join(".");return n.toLowerCase()}e.extname=t;function n(){}e.noOp=n})(M||(M={}))},94683:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(93379);var a=n.n(s);var l=n(98491);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},25649:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>f});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(7213);var l=n.n(a);var c=n(42014);var d=n.n(c);var u=n(59768);var h=n.n(u);const p="jp-mod-searchable";const m={id:"@jupyterlab/documentsearch:labShellWidgetListener",requires:[r.ILabShell,a.ISearchProviderRegistry],autoStart:true,activate:(e,t,n)=>{const r=e=>{if(!e){return}const t=n.getProviderForWidget(e);if(t){e.addClass(p)}if(!t){e.removeClass(p)}};n.changed.connect((()=>r(t.activeWidget)));t.activeChanged.connect(((e,t)=>{const n=t.oldValue;if(n){n.removeClass(p)}r(t.newValue)}))}};const g={id:"@jupyterlab/documentsearch:plugin",provides:a.ISearchProviderRegistry,requires:[u.ITranslator],optional:[i.ICommandPalette,c.ISettingRegistry],autoStart:true,activate:(e,t,n,r)=>{const o=t.load("jupyterlab");let i=500;const s=new a.SearchProviderRegistry;s.register("jp-notebookSearchProvider",a.NotebookSearchProvider);s.register("jp-codeMirrorSearchProvider",a.CodeMirrorSearchProvider);const l=new Map;const c="documentsearch:start";const d="documentsearch:startWithReplace";const u="documentsearch:highlightNext";const h="documentsearch:highlightPrevious";if(r){const t=r.load("@jupyterlab/documentsearch-extension:plugin");const n=e=>{i=e.get("searchDebounceTime").composite};Promise.all([t,e.restored]).then((([e])=>{n(e);e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const p=()=>{const t=e.shell.currentWidget;if(!t){return false}return s.getProviderForWidget(t)!==undefined};const m=()=>{const n=e.shell.currentWidget;if(!n){return}const r=n.id;let o=l.get(r);if(!o){const c=s.getProviderForWidget(n);if(!c){return}o=new a.SearchInstance(n,c,t,i);l.set(r,o);e.commands.notifyCommandChanged();o.disposed.connect((()=>{l.delete(r);e.commands.notifyCommandChanged()}))}return o};e.commands.addCommand(c,{label:o.__("Find"),isEnabled:p,execute:e=>{const t=m();if(t){const n=e["searchText"];if(n){t.setSearchText(n)}t.focusInput()}}});e.commands.addCommand(d,{label:o.__("Find and Replace"),isEnabled:p,execute:e=>{const t=m();if(t){const n=e["searchText"];if(n){t.setSearchText(n)}const r=e["replaceText"];if(r){t.setReplaceText(r)}t.showReplace();t.focusInput()}}});e.commands.addCommand(u,{label:o.__("Find Next"),isEnabled:()=>{const t=e.shell.currentWidget;if(!t){return false}return l.has(t.id)},execute:async()=>{const t=e.shell.currentWidget;if(!t){return}const n=l.get(t.id);if(!n){return}await n.provider.highlightNext();n.updateIndices()}});e.commands.addCommand(h,{label:o.__("Find Previous"),isEnabled:()=>{const t=e.shell.currentWidget;if(!t){return false}return l.has(t.id)},execute:async()=>{const t=e.shell.currentWidget;if(!t){return}const n=l.get(t.id);if(!n){return}await n.provider.highlightPrevious();n.updateIndices()}});if(n){n.addItem({command:c,category:o.__("Main Area")});n.addItem({command:u,category:o.__("Main Area")});n.addItem({command:h,category:o.__("Main Area")})}return s}};const f=[g,m]},81554:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(90516);var s=n(38613)},4163:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CodeMirrorSearchProvider:()=>c,FOUND_CLASSES:()=>h,GenericSearchProvider:()=>m,ISearchProviderRegistry:()=>ce,NotebookSearchProvider:()=>C,SearchInstance:()=>ie,SearchProviderRegistry:()=>ae,SearchState:()=>d});var r=n(3378);var o=n(41776);var i=n(48767);var s=n(18987);var a=n(57886);var l=n.n(a);class c{constructor(){this.isReadOnly=false;this.isSubProvider=false;this._matchState={};this._changed=new s.Signal(this)}getInitialQuery(e){const t=e.content.editor;const n=t.doc.getSelection();return n.search(/\r?\n|\r/g)===-1?n:""}async startQuery(e,t,n={}){if(!c.canSearchOn(t)){throw new Error("Cannot find Codemirror instance to search")}this._cm=t.content.editor;return this._startQuery(e)}async startQueryCodeMirror(e,t){this._cm=t;return this._startQuery(e,false)}refreshOverlay(){this._refreshOverlay()}async _startQuery(e,t=true){await this.endQuery(false);this._query=e;a.on(this._cm.doc,"change",this._onDocChanged.bind(this));if(t){this._refreshOverlay()}this._setInitialMatches(e);const n=this._parseMatchesFromState();if(n.length===0){return[]}if(!this.isSubProvider){const e=this._findNext(false);const t=e&&this._matchState[e.from.line][e.from.ch];this._currentMatch=t}return n}async endQuery(e=true){this._matchState={};this._currentMatch=null;if(e){this._cm.removeOverlay(this._overlay)}const t=this._cm.getCursor("from");const n=this._cm.getCursor("to");if(t!==n){this._cm.setSelection({start:this._toEditorPos(n),end:this._toEditorPos(t)})}a.off(this._cm.doc,"change",this._onDocChanged.bind(this))}async endSearch(){if(!this.isSubProvider){this._cm.focus()}return this.endQuery()}async highlightNext(){const e=this._findNext(false);if(!e){return}const t=this._matchState[e.from.line][e.from.ch];this._currentMatch=t;return t}async highlightPrevious(){const e=this._findNext(true);if(!e){return}const t=this._matchState[e.from.line][e.from.ch];this._currentMatch=t;return t}async replaceCurrentMatch(e){let t=false;if(this._currentMatchIsSelected()){const n=this._cm.getSearchCursor(this._query,this._cm.getCursor("from"),!this._query.ignoreCase);if(!n.findNext()){return t}t=true;n.replace(e)}await this.highlightNext();return t}async replaceAllMatches(e){let t=false;return new Promise(((n,r)=>{this._cm.operation((()=>{const r=this._cm.getSearchCursor(this._query,undefined,!this._query.ignoreCase);while(r.findNext()){t=true;r.replace(e)}this._matchState={};this._currentMatch=null;n(t)}))}))}static canSearchOn(e){return e instanceof r.MainAreaWidget&&e.content instanceof i.FileEditor&&e.content.editor instanceof o.CodeMirrorEditor}get matches(){return this._parseMatchesFromState()}get currentMatch(){return this._currentMatch}get changed(){return this._changed}get currentMatchIndex(){if(!this._currentMatch){return null}return this._currentMatch.index}clearSelection(){return undefined}get editor(){return this._cm}_onDocChanged(e,t){var n,r;if(t.text.length>1||((r=(n=t.removed)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0)>1){this._setInitialMatches(this._query);this._changed.emit(undefined)}}_refreshOverlay(){this._cm.operation((()=>{this._cm.removeOverlay(this._overlay);this._overlay=this._getSearchOverlay();this._cm.addOverlay(this._overlay);this._changed.emit(undefined)}))}_setInitialMatches(e){this._matchState={};const t=a.Pos(this._cm.doc.firstLine(),0);const n=a.Pos(this._cm.doc.lastLine());const r=this._cm.doc.getRange(t,n);const o=r.split("\n");const i=0;o.forEach(((t,n)=>{e.lastIndex=0;let r=e.exec(t);while(r){const o=r.index;const s={text:r[0],line:n,column:o,fragment:t,index:i};if(!this._matchState[n]){this._matchState[n]={}}this._matchState[n][o]=s;r=e.exec(t)}}))}_getSearchOverlay(){return{token:e=>{const t=e.pos;this._query.lastIndex=t;const n=e.string;const r=this._query.exec(n);const o=e.lineOracle.line;if(e.start===t&&t===0&&!!this._matchState[o]){this._matchState[o]={}}if(r&&r.index===t){const i=r[0].length;const s={text:n.substr(t,i),line:o,column:t,fragment:n,index:0};if(!this._matchState[o]){this._matchState[o]={}}this._matchState[o][t]=s;e.pos+=i||1;if(e.eol()){this._changed.emit(undefined)}return"searching"}else if(r){e.pos=r.index}else{this._changed.emit(undefined);e.skipToEnd()}}}}_findNext(e){return this._cm.operation((()=>{const t=this._query.ignoreCase;const n=e?"anchor":"head";const r=this._cm.getCursor(n);const o=this._toEditorPos(r);let i=this._cm.getSearchCursor(this._query,r,!t);if(!i.find(e)){if(this.isSubProvider){this._cm.setCursorPosition(o,{scroll:false});this._currentMatch=null;return null}const n=e?a.Pos(this._cm.lastLine()):a.Pos(this._cm.firstLine(),0);i=this._cm.getSearchCursor(this._query,n,!t);if(!i.find(e)){return null}}const s=i.from();const l=i.to();const c={start:{line:s.line,column:s.ch},end:{line:l.line,column:l.ch}};this._cm.setSelection(c);this._cm.scrollIntoView({from:s,to:l},100);return{from:s,to:l}}))}_parseMatchesFromState(){let e=0;const t=Object.keys(this._matchState).reduce(((t,n)=>{const r=parseInt(n,10);const o=this._matchState[r];Object.keys(o).forEach((n=>{const r=parseInt(n,10);const i=o[r];i.index=e;e+=1;t.push(i)}));return t}),[]);return t}_toEditorPos(e){return{line:e.line,column:e.ch}}_currentMatchIsSelected(){if(!this._currentMatch){return false}const e=this._cm.getSelection();const t=e.end.column-e.start.column;const n=e.start.line===e.end.line;return this._currentMatch.line===e.start.line&&this._currentMatch.column===e.start.column&&this._currentMatch.text.length===t&&n}}class d{}var u=n(700);const h=["cm-string","cm-overlay","cm-searching"];const p=["CodeMirror-selectedtext"];class m{constructor(){this.isReadOnly=true;this.isSubProvider=false;this._matches=[];this._mutationObserver=new MutationObserver(this._onWidgetChanged.bind(this));this._changed=new s.Signal(this)}getInitialQuery(e){return""}async startQuery(e,t,n={}){const r=this;await this.endQuery(false);this._widget=t;this._query=e;this._mutationObserver.disconnect();const o=[];const i=document.createTreeWalker(this._widget.node,NodeFilter.SHOW_TEXT,{acceptNode:e=>{let t=e.parentElement;while(t!==this._widget.node){if(t.nodeName in m.UNSUPPORTED_ELEMENTS){return NodeFilter.FILTER_REJECT}t=t.parentElement}return r._query.test(e.textContent)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},false);const s=[];const a=[];let l=i.nextNode();while(l){s.push(l);a.push(l.parentElement.cloneNode(true));l=i.nextNode()}const c=this._query.flags.indexOf("g")===-1?e.flags+"g":e.flags;s.forEach(((t,n)=>{const r=new RegExp(e.source,c);const i=[];let s=r.exec(t.textContent);while(s){i.push({start:s.index,end:s.index+s[0].length,text:s[0]});s=r.exec(t.textContent)}const l=a[n];const d=t.textContent.length;let u=null;const p=[];for(let e=i.length-1;e>=0;--e){const{start:n,end:r,text:o}=i[e];const s=document.createElement("span");s.classList.add(...h);s.textContent=o;t.textContent=`${t.textContent.slice(0,n)}${t.textContent.slice(r)}`;if((t===null||t===void 0?void 0:t.nodeType)==Node.TEXT_NODE){const e=t.splitText(n);t.parentNode.insertBefore(s,e)}else if(n===0){t.parentNode.prepend(s)}else if(r===d){t.parentNode.append(s)}else if(u&&r===i[e+1].start){t.parentNode.insertBefore(s,u)}u=s;p.unshift({text:o,fragment:"",line:0,column:0,index:-1,matchesIndex:-1,indexInOriginal:e,spanElement:s,originalNode:l})}o.push(...p)}));o.forEach(((e,t)=>{e.index=t;e.matchesIndex=t}));if(!this.isSubProvider&&o.length>0){this._currentMatch=o[0]}this._mutationObserver.observe(this._widget.node,{attributes:false,characterData:true,childList:true,subtree:true});this._matches=o;return this._matches}refreshOverlay(){}async endQuery(e=true){this._matches.forEach((e=>{if(e.indexInOriginal!==0){return}e.spanElement.parentElement.replaceWith(e.originalNode)}));this._matches=[];this._currentMatch=null;this._mutationObserver.disconnect()}async endSearch(){return this.endQuery()}async highlightNext(){return this._highlightNext(false)}async highlightPrevious(){return this._highlightNext(true)}_highlightNext(e){if(this._matches.length===0){return undefined}if(!this._currentMatch){this._currentMatch=e?this._matches[this.matches.length-1]:this._matches[0]}else{this._currentMatch.spanElement.classList.remove(...p);let t=e?this._currentMatch.matchesIndex-1:this._currentMatch.matchesIndex+1;if(this.isSubProvider){if(t<0||t>=this._matches.length){this._currentMatch=null;return undefined}}t=(t+this._matches.length)%this._matches.length;this._currentMatch=this._matches[t]}if(this._currentMatch){this._currentMatch.spanElement.classList.add(...p);if(!g(this._currentMatch.spanElement)){this._currentMatch.spanElement.scrollIntoView(e)}this._currentMatch.spanElement.focus()}return this._currentMatch}async replaceCurrentMatch(e){return Promise.resolve(false)}async replaceAllMatches(e){return Promise.resolve(false)}static canSearchOn(e){return e instanceof u.Widget}get matches(){return this._matches?this._matches.map((e=>Object.assign({},e))):this._matches}get changed(){return this._changed}get currentMatchIndex(){if(!this._currentMatch){return null}return this._currentMatch.index}get currentMatch(){return this._currentMatch}clearSelection(){return}async _onWidgetChanged(e,t){await this.startQuery(this._query,this._widget);this._changed.emit(undefined)}}m.UNSUPPORTED_ELEMENTS={BASE:true,HEAD:true,LINK:true,META:true,STYLE:true,TITLE:true,BODY:true,AREA:true,AUDIO:true,IMG:true,MAP:true,TRACK:true,VIDEO:true,APPLET:true,EMBED:true,IFRAME:true,NOEMBED:true,OBJECT:true,PARAM:true,PICTURE:true,SOURCE:true,CANVAS:true,NOSCRIPT:true,SCRIPT:true,SVG:true};function g(e){const t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}var f=n(76191);var A=n(58267);var v=n(54522);class C{constructor(){this.isReadOnly=false;this.hasOutputs=true;this._searchProviders=[];this._unRenderedMarkdownCells=[];this._cellsWithMatches=[];this._changed=new s.Signal(this)}getInitialQuery(e){var t;const n=e.content.activeCell;const r=(t=n===null||n===void 0?void 0:n.editor)===null||t===void 0?void 0:t.doc.getSelection();return(r===null||r===void 0?void 0:r.search(/\r?\n|\r/g))===-1?r:""}async startQuery(e,t,n){this._searchTarget=t;let r=this._searchTarget.content.widgets;this._filters=!n||Object.entries(n).length===0?{output:true,selectedCells:false}:n;const o=r.filter((e=>this._searchTarget.content.isSelectedOrActive(e)));if(this._filters.selectedCells&&o.length>0){r=o}this._searchTarget.hide();let i=0;const s=[];for(const a of r){const t=a.editor;const n=new c;n.isSubProvider=true;let r=false;if(a instanceof f.MarkdownCell&&a.rendered){a.rendered=false;r=true}if(a.inputHidden){a.inputHidden=false}const o=await n.startQueryCodeMirror(e,t);if(a instanceof f.MarkdownCell){if(o.length!==0){this._unRenderedMarkdownCells.push(a)}else if(r){a.rendered=true}}if(o.length!==0){n.refreshOverlay();this._cellsWithMatches.push(a)}o.forEach((e=>{e.index=e.index+i}));i+=o.length;n.changed.connect(this._onSearchProviderChanged,this);s.concat(o);this._searchProviders.push({cell:a,provider:n});if(a instanceof f.CodeCell&&this._filters.output){const t=new m;t.isSubProvider=true;const n=await t.startQuery(e,a.outputArea);n.map((e=>{e.index=e.index+i}));i+=n.length;s.concat(n);t.changed.connect(this._onSearchProviderChanged,this);this._searchProviders.push({cell:a,provider:t})}}this._searchTarget.show();this._currentMatch=await this._stepNext(this._updatedCurrentProvider(false));this._refreshCurrentCellEditor();this._refreshCellsEditorsInBackground(this._cellsWithMatches);return s}_refreshCellsEditorsInBackground(e,t=5){let n=0;const r=()=>{for(let r=n+t;n<r&&n<e.length;n++){e[n].editor.refresh()}if(n<e.length){window.setTimeout(r,0)}};window.setTimeout(r,0)}_refreshCurrentCellEditor(){const e=this._searchTarget.content;e.activeCell.editor.refresh()}async endQuery(){this._searchTarget.hide();const e=[];this._searchProviders.forEach((({provider:t})=>{e.push(t.endQuery());t.changed.disconnect(this._onSearchProviderChanged,this)}));s.Signal.disconnectBetween(this._searchTarget.model.cells,this);this._searchProviders=[];this._currentProvider=null;this._unRenderedMarkdownCells.forEach((e=>{if(!e.isDisposed){e.rendered=true}}));this._unRenderedMarkdownCells=[];await Promise.all(e);this._searchTarget.show();this._refreshCurrentCellEditor();this._refreshCellsEditorsInBackground(this._cellsWithMatches.filter((e=>!(e instanceof f.MarkdownCell))));this._cellsWithMatches=[]}async endSearch(){this._searchTarget.hide();s.Signal.disconnectBetween(this._searchTarget.model.cells,this);const e=this._searchTarget.content.activeCellIndex;const t=[];this._searchProviders.forEach((({provider:e})=>{t.push(e.endSearch());e.changed.disconnect(this._onSearchProviderChanged,this)}));this._searchProviders=[];this._currentProvider=null;this._unRenderedMarkdownCells.forEach((e=>{e.rendered=true}));this._unRenderedMarkdownCells=[];this._searchTarget.content.activeCellIndex=e;this._searchTarget.content.mode="edit";this._currentMatch=null;await Promise.all(t);this._searchTarget.show();this._refreshCurrentCellEditor();this._searchTarget=null;this._refreshCellsEditorsInBackground(this._cellsWithMatches.filter((e=>!(e instanceof f.MarkdownCell))));this._cellsWithMatches=[]}async highlightNext(){this._currentMatch=await this._stepNext(this._updatedCurrentProvider(false));return this._currentMatch}async highlightPrevious(){this._currentMatch=await this._stepNext(this._updatedCurrentProvider(true),true);return this._currentMatch}async replaceCurrentMatch(e){const t=this._searchTarget.content;const n=t.activeCell.editor;let r=false;if(this._currentMatchIsSelected(n)){const{provider:t}=this._currentProvider;r=await t.replaceCurrentMatch(e);if(r){this._currentMatch=t.currentMatch;if(this._currentMatch){return r}}}await this.highlightNext();return r}async replaceAllMatches(e){let t=false;for(const n in this._searchProviders){const{provider:r}=this._searchProviders[n];const o=await r.replaceAllMatches(e);t=o?true:t}this._currentMatch=null;return t}static canSearchOn(e){return e instanceof A.NotebookPanel}get matches(){return[].concat(...this._getMatchesFromCells())}get changed(){return this._changed}get currentMatchIndex(){if(!this._currentMatch){return null}return this._currentMatch.index}_updatedCurrentProvider(e){if(this._currentProvider&&this._currentProvider.cell===this._searchTarget.content.activeCell){return this._currentProvider}let t;if(!this._currentProvider){const n=e?v.ArrayExt.findLastValue:v.ArrayExt.findFirstValue;t=n(this._searchProviders,(e=>this._searchTarget.content.activeCell===e.cell))}else{const n=v.ArrayExt.firstIndexOf(this._searchProviders,this._currentProvider);const r=((e?n-1:n+1)+this._searchProviders.length)%this._searchProviders.length;t=this._searchProviders[r]}this._currentProvider=t;return t}async _stepNext(e,t=false,n=0){const{provider:r}=e;const o=t?await r.highlightPrevious():await r.highlightNext();if(!o){const r=this._searchProviders.indexOf(e);const o=this._searchProviders.length;if(n===o){return undefined}const i=((t?r-1:r+1)+o)%o;const s=this._searchProviders[i];if(s.provider instanceof c){const e=s.provider.editor;const n=t?l().Pos(e.lastLine()):l().Pos(e.firstLine(),0);const r={line:n.line,column:n.ch};e.setCursorPosition(r,{scroll:false})}this._currentProvider=s;return this._stepNext(s,t,n+1)}const i=this._searchTarget.content;i.activeCellIndex=i.widgets.indexOf(e.cell);return o}_getMatchesFromCells(){let e=0;const t=[];this._searchProviders.forEach((({provider:n})=>{const r=n.matches;r.forEach((t=>{t.index=t.index+e}));e+=r.length;t.push(r)}));return t}_onSearchProviderChanged(){this._changed.emit(undefined)}_currentMatchIsSelected(e){if(!this._currentMatch){return false}const t=e.getSelection();const n=t.end.column-t.start.column;const r=t.start.line===t.end.line;return this._currentMatch.line===t.start.line&&this._currentMatch.column===t.start.column&&this._currentMatch.text.length===n&&r}}var b=n(59768);var _=n(25903);var y=n(6625);var E=n(77865);const w="jp-DocumentSearch-overlay";const x="jp-DocumentSearch-overlay-row";const j="jp-DocumentSearch-input";const k="jp-DocumentSearch-input-wrapper";const B="jp-DocumentSearch-input-button-off";const S="jp-DocumentSearch-input-button-on";const D="jp-DocumentSearch-index-counter";const M="jp-DocumentSearch-up-down-wrapper";const T="jp-DocumentSearch-up-down-button";const I="jp-DocumentSearch-ellipses-button";const P="jp-DocumentSearch-ellipses-button-enabled";const R="jp-DocumentSearch-regex-error";const L="jp-DocumentSearch-search-options";const O="jp-DocumentSearch-search-options-disabled";const z="jp-DocumentSearch-document-loading";const N="jp-DocumentSearch-replace-entry";const F="jp-DocumentSearch-replace-button";const H="jp-DocumentSearch-replace-button-wrapper";const W="jp-DocumentSearch-replace-wrapper-class";const V="jp-DocumentSearch-replace-toggle";const q="jp-DocumentSearch-focused-input";const U="jp-DocumentSearch-toggle-wrapper";const $="jp-DocumentSearch-toggle-placeholder";const K="jp-DocumentSearch-button-content";const Y="jp-DocumentSearch-button-wrapper";const G="jp-DocumentSearch-spacer";class Z extends E.Component{constructor(e){super(e);this.translator=e.translator||b.nullTranslator;this._trans=this.translator.load("jupyterlab");this.searchInputRef=E.createRef()}focusInput(){var e;(e=this.searchInputRef.current)===null||e===void 0?void 0:e.select()}componentDidUpdate(){if(this.props.forceFocus){this.focusInput()}}render(){const e=(0,_.classes)(this.props.caseSensitive?S:B,K);const t=(0,_.classes)(this.props.useRegex?S:B,K);const n=`${k} ${this.props.inputFocused?q:""}`;return E.createElement("div",{className:n},E.createElement("input",{placeholder:this.props.searchText?undefined:this._trans.__("Find"),className:j,value:this.props.searchText,onChange:e=>this.props.onChange(e),onKeyDown:e=>this.props.onKeydown(e),tabIndex:0,onFocus:e=>this.props.onInputFocus(),onBlur:e=>this.props.onInputBlur(),ref:this.searchInputRef}),E.createElement("button",{className:Y,onClick:()=>this.props.onCaseSensitiveToggled(),tabIndex:0},E.createElement(_.caseSensitiveIcon.react,{className:e,tag:"span"})),E.createElement("button",{className:Y,onClick:()=>this.props.onRegexToggled(),tabIndex:0},E.createElement(_.regexIcon.react,{className:t,tag:"span"})))}}class J extends E.Component{constructor(e){super(e);this._trans=(e.translator||b.nullTranslator).load("jupyterlab");this.replaceInputRef=E.createRef()}render(){return E.createElement("div",{className:W},E.createElement("input",{placeholder:this.props.replaceText?undefined:this._trans.__("Replace"),className:N,value:this.props.replaceText,onKeyDown:e=>this.props.onReplaceKeydown(e),onChange:e=>this.props.onChange(e),tabIndex:0,ref:this.replaceInputRef}),E.createElement("button",{className:H,onClick:()=>this.props.onReplaceCurrent(),tabIndex:0},E.createElement("span",{className:`${F} ${K}`,tabIndex:0},this._trans.__("Replace"))),E.createElement("button",{className:H,tabIndex:0,onClick:()=>this.props.onReplaceAll()},E.createElement("span",{className:`${F} ${K}`,tabIndex:-1},this._trans.__("Replace All"))))}}function X(e){return E.createElement("div",{className:M},E.createElement("button",{className:Y,onClick:()=>e.onHighlightPrevious(),tabIndex:0},E.createElement(_.caretUpEmptyThinIcon.react,{className:(0,_.classes)(T,K),tag:"span"})),E.createElement("button",{className:Y,onClick:()=>e.onHighlightNext(),tabIndex:0},E.createElement(_.caretDownEmptyThinIcon.react,{className:(0,_.classes)(T,K),tag:"span"})))}function Q(e){return E.createElement("div",{className:D},e.totalMatches===0?"-/-":`${e.currentIndex===null?"-":e.currentIndex+1}/${e.totalMatches}`)}class ee extends E.Component{render(){let e=`${I} ${K}`;if(this.props.enabled){e=`${e} ${P}`}return E.createElement("button",{className:Y,onClick:()=>this.props.toggleEnabled(),tabIndex:0},E.createElement(_.ellipsesIcon.react,{className:e,tag:"span",height:"20px",width:"20px"}))}}class te extends E.Component{render(){return E.createElement("label",{className:L},E.createElement("div",null,E.createElement("span",{className:this.props.canToggleOutput?"":O},this.props.trans.__("Search Cell Outputs")),E.createElement("input",{type:"checkbox",disabled:!this.props.canToggleOutput,checked:this.props.searchOutput,onChange:this.props.toggleOutput})),E.createElement("div",null,E.createElement("span",{className:this.props.canToggleSelectedCells?"":O},this.props.trans.__("Search Selected Cell(s)")),E.createElement("input",{type:"checkbox",disabled:!this.props.canToggleSelectedCells,checked:this.props.searchSelectedCells,onChange:this.props.toggleSelectedCells})))}}class ne extends E.Component{constructor(e){var t;super(e);this.translator=e.translator||b.nullTranslator;this.state=e.overlayState;this.replaceEntryRef=E.createRef();this._debouncedStartSearch=new y.Debouncer((()=>{this._executeSearch(true,this.state.searchText)}),(t=e.searchDebounceTime)!==null&&t!==void 0?t:500);this._toggleSearchOutput=this._toggleSearchOutput.bind(this);this._toggleSearchSelectedCells=this._toggleSearchSelectedCells.bind(this)}componentDidMount(){if(this.state.searchText){this._executeSearch(true,this.state.searchText)}}_onSearchChange(e){const t=e.target.value;this.setState({searchText:t});void this._debouncedStartSearch.invoke()}_onReplaceChange(e){this.setState({replaceText:e.target.value})}_onSearchKeydown(e){if(e.keyCode===13){e.preventDefault();e.stopPropagation();this._executeSearch(!e.shiftKey)}else if(e.keyCode===27){e.preventDefault();e.stopPropagation();this._onClose()}}_onReplaceKeydown(e){if(e.keyCode===13){e.preventDefault();e.stopPropagation();this.props.onReplaceCurrent(this.state.replaceText)}}_executeSearch(e,t,n=false){let r;const o=t?t:this.state.searchText;try{r=oe.parseQuery(o,this.props.overlayState.caseSensitive,this.props.overlayState.useRegex);this.setState({errorMessage:""})}catch(i){this.setState({errorMessage:i.message});return}if(oe.regexEqual(this.props.overlayState.query,r)&&!n){if(e){this.props.onHighlightNext()}else{this.props.onHighlightPrevious()}return}this.props.onStartQuery(r,this.state.filters)}_onClose(){this.props.onEndSearch();this._debouncedStartSearch.dispose()}_onReplaceToggled(){this.setState({replaceEntryShown:!this.state.replaceEntryShown})}_onSearchInputFocus(){if(!this.state.searchInputFocused){this.setState({searchInputFocused:true})}}_onSearchInputBlur(){if(this.state.searchInputFocused){this.setState({searchInputFocused:false})}}_toggleSearchOutput(){this.setState((e=>Object.assign(Object.assign({},e),{filters:Object.assign(Object.assign({},e.filters),{output:!e.filters.output})})),(()=>this._executeSearch(true,undefined,true)))}_toggleSearchSelectedCells(){this.setState((e=>Object.assign(Object.assign({},e),{filters:Object.assign(Object.assign({},e.filters),{selectedCells:!e.filters.selectedCells})})),(()=>this._executeSearch(true,undefined,true)))}_toggleFiltersOpen(){this.setState((e=>({filtersOpen:!e.filtersOpen})))}render(){const e=!this.props.isReadOnly&&this.state.replaceEntryShown;const t=this.props.hasOutputs;const n=t?E.createElement(ee,{enabled:this.state.filtersOpen,toggleEnabled:()=>this._toggleFiltersOpen()}):null;const r=t?E.createElement(te,{key:"filter",canToggleOutput:!e,canToggleSelectedCells:true,searchOutput:this.state.filters.output,searchSelectedCells:this.state.filters.selectedCells,toggleOutput:this._toggleSearchOutput,toggleSelectedCells:this._toggleSearchSelectedCells,trans:this.translator.load("jupyterlab")}):null;const o=this.state.replaceEntryShown?_.caretDownIcon:_.caretRightIcon;return[E.createElement("div",{className:x,key:0},this.props.isReadOnly?E.createElement("div",{className:$}):E.createElement("button",{className:U,onClick:()=>this._onReplaceToggled(),tabIndex:0},E.createElement(o.react,{className:`${V} ${K}`,tag:"span",elementPosition:"center",height:"20px",width:"20px"})),E.createElement(Z,{useRegex:this.props.overlayState.useRegex,caseSensitive:this.props.overlayState.caseSensitive,onCaseSensitiveToggled:()=>{this.props.onCaseSensitiveToggled();this._executeSearch(true)},onRegexToggled:()=>{this.props.onRegexToggled();this._executeSearch(true)},onKeydown:e=>this._onSearchKeydown(e),onChange:e=>this._onSearchChange(e),onInputFocus:this._onSearchInputFocus.bind(this),onInputBlur:this._onSearchInputBlur.bind(this),inputFocused:this.state.searchInputFocused,searchText:this.state.searchText,forceFocus:this.props.overlayState.forceFocus,translator:this.translator}),E.createElement(Q,{currentIndex:this.props.overlayState.currentIndex,totalMatches:this.props.overlayState.totalMatches}),E.createElement(X,{onHighlightPrevious:()=>this._executeSearch(false),onHighlightNext:()=>this._executeSearch(true)}),e?null:n,E.createElement("button",{className:Y,onClick:()=>this._onClose(),tabIndex:0},E.createElement(_.closeIcon.react,{className:"jp-icon-hover",elementPosition:"center",height:"16px",width:"16px"}))),E.createElement("div",{className:x,key:1},e?E.createElement(E.Fragment,null,E.createElement(J,{onReplaceKeydown:e=>this._onReplaceKeydown(e),onChange:e=>this._onReplaceChange(e),onReplaceCurrent:()=>this.props.onReplaceCurrent(this.state.replaceText),onReplaceAll:()=>this.props.onReplaceAll(this.state.replaceText),replaceText:this.state.replaceText,ref:this.replaceEntryRef,translator:this.translator}),E.createElement("div",{className:G}),n):null),this.state.filtersOpen?r:null,E.createElement("div",{className:R,hidden:!!this.state.errorMessage&&this.state.errorMessage.length===0,key:3},this.state.errorMessage),E.createElement("div",{className:z,key:4},"This document is still loading. Only loaded content will appear in search results until the entire document loads.")]}}function re(e){const{widgetChanged:t,overlayState:n,onCaseSensitiveToggled:o,onRegexToggled:i,onHighlightNext:s,onHighlightPrevious:a,onStartQuery:l,onReplaceCurrent:c,onReplaceAll:d,onEndSearch:u,isReadOnly:h,hasOutputs:p,searchDebounceTime:m,translator:g}=e;const f=r.ReactWidget.create(E.createElement(r.UseSignal,{signal:t,initialArgs:n},((e,t)=>E.createElement(ne,{onCaseSensitiveToggled:o,onRegexToggled:i,onHighlightNext:s,onHighlightPrevious:a,onStartQuery:l,onEndSearch:u,onReplaceCurrent:c,onReplaceAll:d,overlayState:t,isReadOnly:h,hasOutputs:p,searchDebounceTime:m,translator:g}))));f.addClass(w);return f}var oe;(function(e){function t(e,t,n){const r=t?"g":"gi";const o=n?e:e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");let i;i=new RegExp(o,r);if(i.test("")){i=/x^/}return i}e.parseQuery=t;function n(e,t){if(!e||!t){return false}return e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline}e.regexEqual=n})(oe||(oe={}));class ie{constructor(e,t,n,o=500){this._displayState={currentIndex:0,totalMatches:0,caseSensitive:false,useRegex:false,searchText:"",query:null,errorMessage:"",searchInputFocused:true,replaceInputFocused:false,forceFocus:true,replaceText:"",replaceEntryShown:false,filters:{output:true,selectedCells:false},filtersOpen:false};this._displayUpdateSignal=new s.Signal(this);this._isDisposed=false;this._disposed=new s.Signal(this);this.translator=n||b.nullTranslator;this._widget=e;this._activeProvider=t;const i=this._activeProvider.getInitialQuery(this._widget);this._displayState.searchText=i||"";this._searchWidget=re({widgetChanged:this._displayUpdateSignal,overlayState:this._displayState,onCaseSensitiveToggled:this._onCaseSensitiveToggled.bind(this),onRegexToggled:this._onRegexToggled.bind(this),onHighlightNext:this._highlightNext.bind(this),onHighlightPrevious:this._highlightPrevious.bind(this),onStartQuery:this._startQuery.bind(this),onReplaceCurrent:this._replaceCurrent.bind(this),onReplaceAll:this._replaceAll.bind(this),onEndSearch:this.dispose.bind(this),isReadOnly:this._activeProvider.isReadOnly,hasOutputs:this._activeProvider.hasOutputs||false,searchDebounceTime:o,translator:this.translator});this._widget.disposed.connect((()=>{this.dispose()}));this._searchWidget.disposed.connect((()=>{this._widget.activate();this.dispose()}));if(this._widget instanceof r.MainAreaWidget){this._searchWidget.node.style.top=`${this._widget.toolbar.node.clientHeight}px`}if(this._widget instanceof A.NotebookPanel){this._widget.content.activeCellChanged.connect((()=>{if(this._displayState.query&&this._displayState.filters.selectedCells){void this._startQuery(this._displayState.query,this._displayState.filters)}}))}this._displaySearchWidget()}get searchWidget(){return this._searchWidget}get provider(){return this._activeProvider}focusInput(){this._displayState.forceFocus=true;this._displayState.searchInputFocused=true;this._displayUpdateSignal.emit(this._displayState);this._displayState.forceFocus=false}setSearchText(e){this._displayState.searchText=e}setReplaceText(e){this._displayState.replaceText=e}showReplace(){this._displayState.replaceEntryShown=true}updateIndices(){this._displayState.totalMatches=this._activeProvider.matches.length;this._displayState.currentIndex=this._activeProvider.currentMatchIndex;this._updateDisplay()}_updateDisplay(){this._displayState.forceFocus=false;this._displayUpdateSignal.emit(this._displayState)}async _startQuery(e,t){if(this._activeProvider&&this._displayState.query){await this._activeProvider.endQuery()}this._displayState.query=e;this._displayState.filters=t;await this._activeProvider.startQuery(e,this._widget,t);this.updateIndices();this._activeProvider.changed.connect(this.updateIndices,this)}async _replaceCurrent(e){if(this._activeProvider&&this._displayState.query){await this._activeProvider.replaceCurrentMatch(e);this.updateIndices()}}async _replaceAll(e){if(this._activeProvider&&this._displayState.query){await this._activeProvider.replaceAllMatches(e);this.updateIndices()}}dispose(){if(this.isDisposed){return}this._isDisposed=true;if(this._displayState.query){void this._activeProvider.endSearch()}this._searchWidget.dispose();this._disposed.emit(undefined);s.Signal.clearData(this)}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}_displaySearchWidget(){if(!this._searchWidget.isAttached){u.Widget.attach(this._searchWidget,this._widget.node)}}async _highlightNext(){if(!this._displayState.query){return}await this._activeProvider.highlightNext();this.updateIndices()}async _highlightPrevious(){if(!this._displayState.query){return}await this._activeProvider.highlightPrevious();this.updateIndices()}_onCaseSensitiveToggled(){this._displayState.caseSensitive=!this._displayState.caseSensitive;this._updateDisplay()}_onRegexToggled(){this._displayState.useRegex=!this._displayState.useRegex;this._updateDisplay()}}var se=n(64782);class ae{constructor(){this._changed=new s.Signal(this);this._providerMap=new Map}register(e,t){this._providerMap.set(e,t);this._changed.emit();return new se.DisposableDelegate((()=>{this._providerMap.delete(e);this._changed.emit()}))}getProviderForWidget(e){return this._findMatchingProvider(this._providerMap,e)}get changed(){return this._changed}_findMatchingProvider(e,t){for(const n of e.values()){if(n.canSearchOn(t)){return new n}}return undefined}}var le=n(91100);const ce=new le.Token("@jupyterlab/documentsearch:ISearchProviderRegistry")},38613:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(93379);var a=n.n(s);var l=n(52215);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},32601:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>v});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(47798);var l=n.n(a);var c=n(42014);var d=n.n(c);var u=n(59768);var h=n.n(u);var p=n(25903);var m=n.n(p);const g="@jupyterlab/extensionmanager-extension:plugin";var f;(function(e){e.toggle="extensionmanager:toggle"})(f||(f={}));const A={id:g,autoStart:true,requires:[c.ISettingRegistry,u.ITranslator],optional:[r.ILabShell,r.ILayoutRestorer,i.ICommandPalette],activate:async(e,t,n,r,o,i)=>{const s=n.load("jupyterlab");const l=await t.load(A.id);let c=l.composite["enabled"]===true;const{commands:d,serviceManager:u}=e;let h;const m=()=>{const t=new a.ExtensionView(e,u,l,n);t.id="extensionmanager.main-view";t.title.icon=p.extensionIcon;t.title.caption=s.__("Extension Manager");if(o){o.add(t,t.id)}return t};if(c&&r){h=m();h.node.setAttribute("role","region");h.node.setAttribute("aria-label",s.__("Extension Manager section"));r.add(h,"left",{rank:1e3})}Promise.all([e.restored,t.load(g)]).then((([,t])=>{t.changed.connect((async()=>{c=t.composite["enabled"]===true;if(c&&!(h===null||h===void 0?void 0:h.isAttached)){const e=await C.showWarning(s);if(!e){void t.set("enabled",false);return}h=h||m();h.node.setAttribute("role","region");h.node.setAttribute("aria-label",s.__("Extension Manager section"));if(r){r.add(h,"left",{rank:1e3})}}else if(!c&&(h===null||h===void 0?void 0:h.isAttached)){e.commands.notifyCommandChanged(f.toggle);h.close()}}))})).catch((e=>{console.error(`Something went wrong when reading the settings.\n${e}`)}));d.addCommand(f.toggle,{label:s.__("Enable Extension Manager"),execute:()=>{if(t){void t.set(A.id,"enabled",!c)}},isToggled:()=>c,isEnabled:()=>u.builder.isAvailable});const v=s.__("Extension Manager");const b=f.toggle;if(i){i.addItem({command:b,category:v})}}};const v=A;var C;(function(e){async function t(e){return(0,i.showDialog)({title:e.__("Enable Extension Manager?"),body:e.__(`Thanks for trying out JupyterLab's extension manager.\nThe JupyterLab development team is excited to have a robust\nthird-party extension community.\nHowever, we cannot vouch for every extension,\nand some may introduce security risks.\nDo you want to continue?`),buttons:[i.Dialog.cancelButton({label:e.__("Disable")}),i.Dialog.warnButton({label:e.__("Enable")})]}).then((e=>e.button.accept))}e.showWarning=t})(C||(C={}))},67014:(e,t,n)=>{"use strict";var r=n(34849);var o=n(79536);var i=n(90516);var s=n(93379);var a=n.n(s);var l=n(11988);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},74298:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CollapsibleSection:()=>z,ExtensionView:()=>N,ListModel:()=>_,ListView:()=>L,Lister:()=>f,SearchBar:()=>M,Searcher:()=>v,isJupyterOrg:()=>C});var r=n(3378);var o=n(22248);var i=n(59768);var s=n(6625);var a=n(81249);var l=n(77865);function c(e,t,n){n=n||i.nullTranslator;const o=n.load("jupyterlab");if(t.isAvailable){return t.build().then((()=>(0,r.showDialog)({title:o.__("Build Complete"),body:l.createElement("div",null,o.__("Build successfully completed, reload page?"),l.createElement("br",null),o.__("You will lose any unsaved changes.")),buttons:[r.Dialog.cancelButton({label:o.__("Reload Without Saving"),actions:["reload"]}),r.Dialog.okButton({label:o.__("Save and Reload")})],hasClose:true}))).then((({button:{accept:t,actions:n}})=>{if(t){void e.commands.execute("docmanager:save").then((()=>{location.reload()})).catch((e=>{void(0,r.showErrorMessage)(o.__("Save Failed"),{message:l.createElement("pre",null,e.message)})}))}else if(n.includes("reload")){location.reload()}})).catch((e=>{void(0,r.showDialog)({title:o.__("Build Failed"),body:l.createElement("pre",null,e.message)})}))}return Promise.resolve()}const d={pip:e=>`pip install ${e}`,conda:e=>`conda install -c conda-forge ${e}`};function u(e){var t,n,r,o;const i=Array();for(const s of e.managers){const a=(r=(n=(t=e.overrides)===null||t===void 0?void 0:t[s])===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:e.base.name;if(!a){console.warn(`No package name found for manager ${s}`);continue}const l=(o=d[s])===null||o===void 0?void 0:o.call(d,a);if(!l){console.warn(`Don't know how to install packages for manager ${s}`)}i.push(l)}return i}function h(e,t,n){n=n||i.nullTranslator;const o=n.load("jupyterlab");const s=[];if(t){s.push(l.createElement("p",{key:"server-companion"},o.__(`This package has indicated that it needs a corresponding server\nextension. Please contact your Administrator to update the server with\none of the following commands:`),u(t).map((e=>l.createElement("p",{key:e},l.createElement("code",null,e))))))}if(e.length>0){s.push(l.createElement("p",{key:"kernel-companion"},o.__("This package has indicated that it needs a corresponding package for the kernel.")));for(const[t,n]of e.entries()){s.push(l.createElement("p",{key:`companion-${t}`},o.__(`The package <code>%1</code>, is required by the following kernels:`,n.kernelInfo.base.name)));const e=[];for(const[t,r]of n.kernels.entries()){e.push(l.createElement("li",{key:`kernels-${t}`},l.createElement("code",null,r.display_name)))}s.push(l.createElement("ul",{key:"kernel-companion-end"},e));s.push(l.createElement("p",{key:`kernel-companion-${t}`},o.__(`This package has indicated that it needs a corresponding kernel\npackage. Please contact your Administrator to update the server with\none of the following commands:`),u(n.kernelInfo).map((e=>l.createElement("p",{key:e},l.createElement("code",null,e))))))}}const a=l.createElement("div",null,s,l.createElement("p",null,o.__(`You should make sure that the indicated packages are installed before\ntrying to use the extension. Do you want to continue with the extension\ninstallation?`)));const c=e.length>0;const d=!!t;let h="";if(c&&d){h=o.__("Kernel and Server Companions")}else if(c){h=o.__("Kernel Companions")}else{h=o.__("Server Companion")}return(0,r.showDialog)({title:h,body:a,buttons:[r.Dialog.cancelButton({label:o.__("Cancel")}),r.Dialog.okButton({label:o.__("OK"),caption:o.__("Install the JupyterLab extension.")})]}).then((e=>e.button.accept))}function p(e,t,n){n=n||i.nullTranslator;const o=n.load("jupyterlab");const s=[];s.push(l.createElement("p",null,o.__("An error occurred installing <code>%1</code>.",e)));if(t){s.push(l.createElement("p",null,l.createElement("span",{className:"jp-extensionmanager-dialog-subheader"},o.__("Error message:"))),l.createElement("pre",null,t.trim()))}const a=l.createElement("div",{className:"jp-extensionmanager-dialog"},s);void(0,r.showDialog)({title:o.__("Extension Installation Error"),body:a,buttons:[r.Dialog.warnButton({label:o.__("OK")})]})}var m=n(69442);var g=n(18987);class f{constructor(){this._listings=null;this._listingsLoaded=new g.Signal(this);A("@jupyterlab/extensionmanager-extension/listings.json").then((e=>{this._listings={mode:"default",uris:[],entries:[]};if(e.blocked_extensions_uris.length>0&&e.allowed_extensions_uris.length>0){console.warn("Simultaneous black and white list are not allowed.");this._listings={mode:"invalid",uris:[],entries:[]}}else if(e.blocked_extensions_uris.length>0||e.allowed_extensions_uris.length>0){this._listings={mode:e.blocked_extensions_uris.length>0?"block":"allow",uris:e.blocked_extensions_uris.length>0?e.blocked_extensions_uris:e.allowed_extensions_uris,entries:e.blocked_extensions_uris.length>0?e.blocked_extensions:e.allowed_extensions}}this._listingsLoaded.emit(this._listings)})).catch((e=>{console.error(e)}))}get listingsLoaded(){return this._listingsLoaded}}async function A(e="",t={}){const n=o.ServerConnection.makeSettings();const r=m.URLExt.join(n.baseUrl,n.appUrl,"api/listings/",e);let i;try{i=await o.ServerConnection.makeRequest(r,t,n)}catch(a){throw new o.ServerConnection.NetworkError(a)}const s=await i.json();if(!i.ok){throw new o.ServerConnection.ResponseError(i,s.message)}return s}class v{constructor(e="https://registry.npmjs.org/-/v1/",t="https://unpkg.com",n=true){this.repoUri=e;this.cdnUri=t;this.enableCdn=n}searchExtensions(e,t=0,n=250){const r=new URL("search",this.repoUri);const o=`${e} keywords:"jupyterlab-extension"`;r.searchParams.append("text",o);r.searchParams.append("size",n.toString());r.searchParams.append("from",(n*t).toString());return fetch(r.toString()).then((e=>{if(e.ok){return e.json()}return[]}))}fetchPackageData(e,t){const n=this.enableCdn?new URL(`/${e}@${t}/package.json`,this.cdnUri):new URL(`/${e}/${t}`,this.repoUri);return fetch(n.toString()).then((e=>{if(e.ok){return e.json()}return null}))}}function C(e){const t=["jupyterlab","jupyter-widgets"];const n=e.split("/");const r=n[0];return n.length>1&&!!r&&r[0]==="@"&&t.indexOf(r.slice(1))!==-1}const b="lab/api/extensions";class _ extends r.VDomModel{constructor(e,t,n,r){super();this.installedError=null;this.searchError=null;this.blockedExtensionsError=null;this.serverConnectionError=null;this.serverRequirementsError=null;this.initialized=false;this.promptBuild=false;this.lister=new f;this._query="";this._page=0;this._pagination=250;this._totalEntries=0;this._pendingActions=[];this._totalblockedExtensionsFound=0;this._totalallowedExtensionsFound=0;this.translator=r||i.nullTranslator;this._app=e;this._installed=[];this._searchResult=[];this.serviceManager=t;this.serverConnectionSettings=o.ServerConnection.makeSettings();this._debouncedUpdate=new s.Debouncer(this.update.bind(this),1e3);this.lister.listingsLoaded.connect(this._listingIsLoaded,this);this.searcher=new v(n.composite["npmRegistry"],n.composite["npmCdn"],n.composite["enableCdn"]);y=n.composite["disclaimed"]===true;n.changed.connect((()=>{y=n.composite["disclaimed"]===true;this.searcher=new v(n.composite["npmRegistry"],n.composite["npmCdn"],n.composite["enableCdn"]);void this.update()}))}_listingIsLoaded(e,t){this._listMode=t.mode;this._blockedExtensionsArray=new Array;if(this._listMode==="block"){t.entries.map((e=>{this._blockedExtensionsArray.push({name:e.name,regexp:new RegExp(e.name),type:e.type,reason:e.reason,creation_date:e.creation_date,last_update_date:e.last_update_date})}))}this._allowedExtensionsArray=new Array;if(this._listMode==="allow"){t.entries.map((e=>{this._allowedExtensionsArray.push({name:e.name,regexp:new RegExp(e.name),type:e.type,reason:e.reason,creation_date:e.creation_date,last_update_date:e.last_update_date})}))}void this.initialize()}get installed(){return this._installed}get searchResult(){return this._searchResult}get query(){return this._query}set query(e){this._query=e;void this._debouncedUpdate.invoke()}get page(){return this._page}set page(e){this._page=e;void this.update()}get pagination(){return this._pagination}set pagination(e){this._pagination=e;void this.update()}get totalEntries(){return this._totalEntries}get listMode(){return this._listMode}get totalblockedExtensionsFound(){return this._totalblockedExtensionsFound}get totalallowedExtensionsFound(){return this._totalallowedExtensionsFound}initialize(){return this.update().then((()=>{this.initialized=true;this.stateChanged.emit(undefined)})).catch((()=>{this.initialized=true;this.stateChanged.emit(undefined)}))}hasPendingActions(){return this._pendingActions.length>0}async install(e){if(e.installed){await this._performAction("install",e).then((t=>{if(t.status!=="ok"){p(e.name,t.message,this.translator)}return this.update()}))}await this.checkCompanionPackages(e).then((t=>{if(t){return this._performAction("install",e).then((t=>{if(t.status!=="ok"){p(e.name,t.message,this.translator)}return this.update()}))}}))}async uninstall(e){if(!e.installed){throw new Error(`Not installed, cannot uninstall: ${e.name}`)}await this._performAction("uninstall",e);return this.update()}async enable(e){if(e.enabled){throw new Error(`Already enabled: ${e.name}`)}await this._performAction("enable",e);await this.update()}async disable(e){if(!e.enabled){throw new Error(`Already disabled: ${e.name}`)}await this._performAction("disable",e);await this.update()}checkCompanionPackages(e){return this.searcher.fetchPackageData(e.name,e.latest_version).then((e=>{if(!e||!e.jupyterlab||!e.jupyterlab.discovery){return true}const t=e.jupyterlab.discovery;const n=[];if(t.kernel){for(const e of t.kernel){const t=E.matchSpecs(e,this.serviceManager.kernelspecs.specs);n.push({kernelInfo:e,kernels:t})}}if(n.length<1&&!t.server){return true}return h(n,t.server,this.translator)}))}triggerBuildCheck(){const e=this.serviceManager.builder;if(e.isAvailable&&!this.promptBuild){const t=e.getStatus().then((t=>{if(t.status==="building"){return c(this._app,e)}if(t.status!=="needed"){return}if(!this.promptBuild){this.promptBuild=true;this.stateChanged.emit(undefined)}}));this._addPendingAction(t)}}performBuild(){if(this.promptBuild){this.promptBuild=false;this.stateChanged.emit(undefined)}const e=c(this._app,this.serviceManager.builder);this._addPendingAction(e)}ignoreBuildRecommendation(){if(this.promptBuild){this.promptBuild=false;this.stateChanged.emit(undefined)}}refreshInstalled(){const e=this.update(true);this._addPendingAction(e)}async translateSearchResult(e){const t={};this._totalblockedExtensionsFound=0;this._totalallowedExtensionsFound=0;this._totalEntries=0;for(const n of(await e).objects){const e=n.package;if(e.keywords.indexOf("deprecated")>=0){continue}this._totalEntries=this._totalEntries+1;const r=this.isListed(e.name,this._blockedExtensionsArray);if(r){this._totalblockedExtensionsFound=this._totalblockedExtensionsFound+1}const o=this.isListed(e.name,this._allowedExtensionsArray);if(o){this._totalallowedExtensionsFound=this._totalallowedExtensionsFound+1}t[e.name]={name:e.name,description:e.description,url:"homepage"in e.links?e.links.homepage:"repository"in e.links?e.links.repository:e.links.npm,installed:false,enabled:false,status:null,latest_version:e.version,installed_version:"",blockedExtensionsEntry:r,allowedExtensionsEntry:o,pkg_type:"source",install:undefined}}return t}async translateInstalled(e){const t=[];const n={};for(const r of await e){t.push(e.then((e=>{var t,o,i;n[r.name]={name:r.name,description:r.description,url:r.url,installed:r.installed!==false,enabled:r.enabled,status:r.status,latest_version:r.latest_version,installed_version:r.installed_version,blockedExtensionsEntry:this.isListed(r.name,this._blockedExtensionsArray),allowedExtensionsEntry:this.isListed(r.name,this._allowedExtensionsArray),pkg_type:r.pkg_type,install:{packageManager:(t=r.install)===null||t===void 0?void 0:t.packageManager,packageName:(o=r.install)===null||o===void 0?void 0:o.packageName,uninstallInstructions:(i=r.install)===null||i===void 0?void 0:i.uninstallInstructions}}})))}return Promise.all(t).then((()=>n))}isListed(e,t){let n=undefined;t.forEach((t=>{var r;if(t.regexp&&((r=t.regexp)===null||r===void 0?void 0:r.test(e))){n=t}}));return n}fetchInstalled(e=false){const t=new URL(b,this.serverConnectionSettings.baseUrl);if(e){t.searchParams.append("refresh","1")}const n=o.ServerConnection.makeRequest(t.toString(),{},this.serverConnectionSettings).then((e=>{E.handleError(e);return e.json()}));n.then((()=>{this.serverConnectionError=null}),(e=>{this.serverConnectionError=e.toString()}));return n}async performSearch(){if(this.query===null){this.query=""}const e=this.searcher.searchExtensions(this.query,this.page,this.pagination);const t=this.translateSearchResult(e);let n;try{n=await t;this.searchError=null}catch(r){n={};this.searchError=r.toString()}return n}async queryInstalled(e){let t;try{t=await this.translateInstalled(this.fetchInstalled(e));this.installedError=null}catch(n){t={};this.installedError=n.toString()}return t}async update(e=false){if(_.isDisclaimed()){const[t,n]=await Promise.all([this.performSearch(),this.queryInstalled(e)]);const r=[];for(const e of Object.keys(n)){r.push(n[e])}this._installed=r.sort(E.comparator);const o=[];for(const e of Object.keys(t)){if(n[e]===undefined){o.push(t[e])}else{o.push(n[e])}}this._searchResult=o.sort(E.comparator)}this.stateChanged.emit(undefined)}_performAction(e,t){const n=new URL(b,this.serverConnectionSettings.baseUrl);const r={method:"POST",body:JSON.stringify({cmd:e,extension_name:t.name})};const i=o.ServerConnection.makeRequest(n.toString(),r,this.serverConnectionSettings).then((e=>{E.handleError(e);this.triggerBuildCheck();return e.json()}));i.then((()=>{this.serverConnectionError=null}),(e=>{this.serverConnectionError=e.toString()}));this._addPendingAction(i);return i}_addPendingAction(e){this._pendingActions.push(e);const t=()=>{const t=this._pendingActions.indexOf(e);this._pendingActions.splice(t,1);this.stateChanged.emit(undefined)};e.then(t,t);this.stateChanged.emit(undefined)}}let y=false;(function(e){function t(e){if(!e.installed||!e.latest_version){return false}return a.lt(e.installed_version,e.latest_version)}e.entryHasUpdate=t;function n(){return y}e.isDisclaimed=n;function r(){y=!y}e.toogleDisclaimed=r})(_||(_={}));var E;(function(e){function t(e,t){if(e.name===t.name){return 0}const n=C(e.name);const r=C(t.name);if(n===r){return 0}else if(n&&!r){return-1}else{return 1}}e.comparator=t;function n(e,t){if(!t){return[]}const n=[];let r=null;let o=null;if(e.kernel_spec.language){r=new RegExp(e.kernel_spec.language)}if(e.kernel_spec.display_name){o=new RegExp(e.kernel_spec.display_name)}for(const i of Object.keys(t.kernelspecs)){const e=t.kernelspecs[i];let s=false;if(r){s=r.test(e.language)}if(!s&&o){s=o.test(e.display_name)}if(s){n.push(e);continue}}return n}e.matchSpecs=n;function r(e){if(!e.ok){throw new Error(`${e.status} (${e.statusText})`)}return e}e.handleError=r})(E||(E={}));var w=n(25903);var x=n(11358);var j=n.n(x);const k=w.caretDownIcon.bindprops({height:"auto",width:"20px"});const B=w.caretRightIcon.bindprops({height:"auto",width:"20px"});const S=32;const D=Math.floor(devicePixelRatio*S);class M extends l.Component{constructor(e){super(e);this.handleChange=e=>{const t=e.target;this.setState({value:t.value})};this.state={value:""}}render(){return l.createElement("div",{className:"jp-extensionmanager-search-bar"},l.createElement(w.InputGroup,{className:"jp-extensionmanager-search-wrapper",type:"text",placeholder:this.props.placeholder,onChange:this.handleChange,value:this.state.value,rightIcon:"ui-components:search",disabled:this.props.disabled}))}}function T(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");return l.createElement("div",{className:"jp-extensionmanager-buildprompt"},l.createElement("div",{className:"jp-extensionmanager-buildmessage"},n.__("A build is needed to include the latest changes")),l.createElement(w.Button,{onClick:e.performBuild,minimal:true,small:true},n.__("Rebuild")),l.createElement(w.Button,{onClick:e.ignoreBuild,minimal:true,small:true},n.__("Ignore")))}function I(e){if(e.url&&e.url.startsWith("https://github.com/")){return e.url.split("/")[3]}return null}function P(e){var t;const{entry:n,listMode:o,viewType:s}=e;const a=e.translator||i.nullTranslator;const c=a.load("jupyterlab");const d=[];if(n.status&&["ok","warning","error"].indexOf(n.status)!==-1){d.push(`jp-extensionmanager-entry-${n.status}`)}let u=n.name;const h=C(n.name);if(h){u=c.__("%1 (Developed by Project Jupyter)",n.name)}const p=I(n);if(o==="block"&&n.blockedExtensionsEntry&&s==="searchResult"){return l.createElement("li",null)}if(o==="allow"&&!n.allowedExtensionsEntry&&s==="searchResult"){return l.createElement("li",null)}if(o==="block"&&((t=n.blockedExtensionsEntry)===null||t===void 0?void 0:t.name)){d.push(`jp-extensionmanager-entry-should-be-uninstalled`)}if(o==="allow"&&!n.allowedExtensionsEntry){d.push(`jp-extensionmanager-entry-should-be-uninstalled`)}return l.createElement("li",{className:`jp-extensionmanager-entry ${d.join(" ")}`,title:u,style:{display:"flex"}},l.createElement("div",{style:{marginRight:"8px"}},p&&l.createElement("img",{src:`https://github.com/${p}.png?size=${D}`,style:{width:"32px",height:"32px"}}),!p&&l.createElement("div",{style:{width:`${S}px`,height:`${S}px`}})),l.createElement("div",{className:"jp-extensionmanager-entry-description"},l.createElement("div",{className:"jp-extensionmanager-entry-title"},l.createElement("div",{className:"jp-extensionmanager-entry-name"},n.url?l.createElement("a",{href:n.url,target:"_blank",rel:"noopener noreferrer"},n.name):l.createElement("div",null,n.name)),n.blockedExtensionsEntry&&l.createElement(r.ToolbarButtonComponent,{icon:w.listingsInfoIcon,iconLabel:c.__("%1 extension has been blockedExtensions since install. Please uninstall immediately and contact your blockedExtensions administrator.",n.name),onClick:()=>window.open("https://jupyterlab.readthedocs.io/en/3.4.x/user/extensions.html")}),!n.allowedExtensionsEntry&&s==="installed"&&o==="allow"&&l.createElement(r.ToolbarButtonComponent,{icon:w.listingsInfoIcon,iconLabel:c.__("%1 extension has been removed from the allowedExtensions since installation. Please uninstall immediately and contact your allowedExtensions administrator.",n.name),onClick:()=>window.open("https://jupyterlab.readthedocs.io/en/3.4.x/user/extensions.html")}),h&&l.createElement(w.jupyterIcon.react,{className:"jp-extensionmanager-is-jupyter-org",top:"1px",height:"auto",width:"1em"})),l.createElement("div",{className:"jp-extensionmanager-entry-content"},l.createElement("div",{className:"jp-extensionmanager-entry-description"},n.description),l.createElement("div",{className:"jp-extensionmanager-entry-buttons"},!n.installed&&n.pkg_type=="source"&&!n.blockedExtensionsEntry&&!(!n.allowedExtensionsEntry&&o==="allow")&&_.isDisclaimed()&&l.createElement(w.Button,{onClick:()=>e.performAction("install",n),minimal:true,small:true},c.__("Install")),_.entryHasUpdate(n)&&n.pkg_type=="source"&&!n.blockedExtensionsEntry&&!(!n.allowedExtensionsEntry&&o==="allow")&&_.isDisclaimed()&&l.createElement(w.Button,{onClick:()=>e.performAction("install",n),minimal:true,small:true},c.__("Update")),n.installed&&n.pkg_type=="source"&&l.createElement(w.Button,{onClick:()=>e.performAction("uninstall",n),minimal:true,small:true},c.__("Uninstall")),n.enabled&&n.pkg_type=="source"&&l.createElement(w.Button,{onClick:()=>e.performAction("disable",n),minimal:true,small:true},c.__("Disable")),n.installed&&n.pkg_type=="source"&&!n.enabled&&l.createElement(w.Button,{onClick:()=>e.performAction("enable",n),minimal:true,small:true},c.__("Enable")),n.installed&&n.pkg_type=="prebuilt"&&l.createElement("div",{className:"jp-extensionmanager-entry-buttons"},l.createElement(w.Button,{onClick:()=>(0,r.showDialog)({title:u,body:l.createElement("div",null,R(n,c)),buttons:[r.Dialog.okButton({label:c.__("OK"),caption:c.__("OK")})]}).then((e=>e.button.accept)),minimal:true,small:true},c.__("About")))))))}function R(e,t){var n,r;if((n=e.install)===null||n===void 0?void 0:n.uninstallInstructions){return l.createElement("div",null,l.createElement("p",null,t.__(`This is a prebuilt extension. To uninstall it, please\n    apply following instructions.`)),l.createElement("p",null,t.__((r=e.install)===null||r===void 0?void 0:r.uninstallInstructions)))}return l.createElement("div",null,l.createElement("p",null,t.__(`This is a prebuilt extension. To uninstall it, please\n    read the user guide on:`)),l.createElement("p",null,l.createElement("a",{href:"https://jupyterlab.readthedocs.io/en/3.4.x/user/extensions.html",target:"_blank",rel:"noopener noreferrer"},"https://jupyterlab.readthedocs.io/en/3.4.x/user/extensions.html")))}function L(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");const r=[];for(const i of e.entries){r.push(l.createElement(P,{entry:i,listMode:e.listMode,viewType:e.viewType,key:i.name,performAction:e.performAction,translator:t}))}let o;if(e.numPages>1){o=l.createElement("div",{className:"jp-extensionmanager-pagination"},l.createElement(j(),{previousLabel:"<",nextLabel:">",breakLabel:l.createElement("a",{href:""},"..."),breakClassName:"break-me",pageCount:e.numPages,marginPagesDisplayed:2,pageRangeDisplayed:5,onPageChange:t=>e.onPage(t.selected),containerClassName:"pagination",activeClassName:"active"}))}const s=l.createElement("ul",{className:"jp-extensionmanager-listview"},r);return l.createElement("div",{className:"jp-extensionmanager-listview-wrapper"},r.length>0?s:l.createElement("div",{key:"message",className:"jp-extensionmanager-listview-message"},n.__("No entries")),o)}function O(e){return l.createElement("div",{key:"error-msg",className:"jp-extensionmanager-error"},e.children)}class z extends l.Component{constructor(e){super(e);this.state={isOpen:e.isOpen?true:false}}render(){let e=this.state.isOpen?k:B;let t=this.state.isOpen;let n="jp-extensionmanager-headerText";if(this.props.disabled){e=B;t=false;n="jp-extensionmanager-headerTextDisabled"}return l.createElement(l.Fragment,null,l.createElement("div",{className:"jp-stack-panel-header"},l.createElement(r.ToolbarButtonComponent,{icon:e,onClick:()=>{this.handleCollapse()}}),l.createElement("span",{className:n},this.props.header),!this.props.disabled&&this.props.headerElements),l.createElement(w.Collapse,{isOpen:t},this.props.children))}handleCollapse(){this.setState({isOpen:!this.state.isOpen},(()=>{if(this.props.onCollapse){this.props.onCollapse(this.state.isOpen)}}))}UNSAFE_componentWillReceiveProps(e){if(e.forceOpen){this.setState({isOpen:true})}}}class N extends r.VDomRenderer{constructor(e,t,n,r){super(new _(e,t,n,r));this.translator=r||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._settings=n;this._forceOpen=false;this.addClass("jp-extensionmanager-view")}get inputNode(){return this.node.querySelector(".jp-extensionmanager-search-wrapper input")}render(){var e,t;const n=this.model;if(!n.listMode){return[l.createElement("div",{key:"empty"})]}if(n.listMode==="invalid"){return[l.createElement("div",{style:{padding:8},key:"invalid"},l.createElement("div",null,this._trans.__(`The extension manager is disabled. Please contact your system\nadministrator to verify the listings configuration.`)),l.createElement("div",null,l.createElement("a",{href:"https://jupyterlab.readthedocs.io/en/3.4.x/user/extensions.html",target:"_blank",rel:"noopener noreferrer"},this._trans.__("Read more in the JupyterLab documentation."))))]}const o=Math.ceil(n.totalEntries/n.pagination);const i=[l.createElement(M,{key:"searchbar",placeholder:this._trans.__("SEARCH"),disabled:!_.isDisclaimed(),settings:this._settings})];if(n.promptBuild){i.push(l.createElement(T,{key:"promt",translator:this.translator,performBuild:()=>{n.performBuild()},ignoreBuild:()=>{n.ignoreBuildRecommendation()}}))}i.push(l.createElement("div",{key:"pending",className:`jp-extensionmanager-pending ${n.hasPendingActions()?"jp-mod-hasPending":""}`}));const s=[];s.push(l.createElement(z,{key:"warning-section",isOpen:!_.isDisclaimed(),disabled:false,header:this._trans.__("Warning")},l.createElement("div",{className:"jp-extensionmanager-disclaimer"},l.createElement("div",null,this._trans.__(`The JupyterLab development team is excited to have a robust\nthird-party extension community. However, we do not review\nthird-party extensions, and some extensions may introduce security\nrisks or contain malicious code that runs on your machine.`)),l.createElement("div",{style:{paddingTop:8}},_.isDisclaimed()&&l.createElement(w.Button,{className:"jp-extensionmanager-disclaimer-disable",onClick:e=>{this._settings.set("disclaimed",false).catch((e=>{console.error(`Something went wrong when setting disclaimed.\n${e}`)}))}},this._trans.__("Disable")),!_.isDisclaimed()&&l.createElement(w.Button,{className:"jp-extensionmanager-disclaimer-enable",onClick:e=>{this._forceOpen=true;this._settings.set("disclaimed",true).catch((e=>{console.error(`Something went wrong when setting disclaimed.\n${e}`)}))}},this._trans.__("Enable"))))));if(!n.initialized){s.push(l.createElement("div",{key:"loading-placeholder",className:"jp-extensionmanager-loader"},this._trans.__("Updating extensions list")))}else if(n.serverConnectionError!==null){s.push(l.createElement(O,{key:"error-msg"},l.createElement("p",null,this._trans.__(`Error communicating with server extension. Consult the documentation\n            for how to ensure that it is enabled.`)),l.createElement("p",null,this._trans.__("Reason given:")),l.createElement("pre",null,n.serverConnectionError)))}else if(n.serverRequirementsError!==null){s.push(l.createElement(O,{key:"server-requirements-error"},l.createElement("p",null,this._trans.__("The server has some missing requirements for installing extensions.")),l.createElement("p",null,this._trans.__("Details:")),l.createElement("pre",null,n.serverRequirementsError)))}else{const i=[];if(n.installedError!==null){i.push(l.createElement(O,{key:"install-error"},`Error querying installed extensions${n.installedError?`: ${n.installedError}`:"."}`))}else{const r=new RegExp((t=(e=n.query)===null||e===void 0?void 0:e.toLowerCase())!==null&&t!==void 0?t:"");i.push(l.createElement(L,{key:"installed-items",listMode:n.listMode,viewType:"installed",entries:n.installed.filter((e=>!n.query||r.test(e.name))),numPages:1,translator:this.translator,onPage:e=>{},performAction:this.onAction.bind(this)}))}s.push(l.createElement(z,{key:"installed-section",isOpen:_.isDisclaimed(),forceOpen:this._forceOpen,disabled:!_.isDisclaimed(),header:this._trans.__("Installed"),headerElements:l.createElement(r.ToolbarButtonComponent,{key:"refresh-button",icon:w.refreshIcon,onClick:()=>{n.refreshInstalled()},tooltip:this._trans.__("Refresh extension list")})},i));const a=[];if(n.searchError!==null){a.push(l.createElement(O,{key:"search-error"},`Error searching for extensions${n.searchError?`: ${n.searchError}`:"."}`))}else{a.push(l.createElement(L,{key:"search-items",listMode:n.listMode,viewType:"searchResult",entries:n.searchResult.filter((e=>n.installed.indexOf(e)===-1)),numPages:o,onPage:e=>{this.onPage(e)},performAction:this.onAction.bind(this),translator:this.translator}))}s.push(l.createElement(z,{key:"search-section",isOpen:_.isDisclaimed(),forceOpen:this._forceOpen,disabled:!_.isDisclaimed(),header:n.query?this._trans.__("Search Results"):this._trans.__("Discover"),onCollapse:e=>{if(e&&n.query===null){n.query=""}}},a))}i.push(l.createElement("div",{key:"content",className:"jp-extensionmanager-content"},s));this._forceOpen=false;return i}onSearch(e){this.model.query=e}onPage(e){this.model.page=e}onAction(e,t){switch(e){case"install":return this.model.install(t);case"uninstall":return this.model.uninstall(t);case"enable":return this.model.enable(t);case"disable":return this.model.disable(t);default:throw new Error(`Invalid action: ${e}`)}}handleEvent(e){switch(e.type){case"input":this.onSearch(this.inputNode.value);break;case"focus":case"blur":this._toggleFocused();break;default:break}}onBeforeAttach(e){this.node.addEventListener("input",this);this.node.addEventListener("focus",this,true);this.node.addEventListener("blur",this,true)}onAfterDetach(e){this.node.removeEventListener("input",this);this.node.removeEventListener("focus",this,true);this.node.removeEventListener("blur",this,true)}onActivateRequest(e){if(this.isAttached){const e=this.inputNode;if(e){e.focus();e.select()}}}_toggleFocused(){const e=document.activeElement===this.inputNode;this.toggleClass("lm-mod-focused",e)}}},90053:(e,t,n)=>{"use strict";n.r(t);n.d(t,{fileUploadStatus:()=>O,default:()=>W});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(69442);var l=n.n(a);var c=n(71861);var d=n.n(c);var u=n(54917);var h=n.n(u);var p=n(42014);var m=n.n(p);var g=n(42573);var f=n.n(g);var A=n(85913);var v=n.n(A);var C=n(59768);var b=n.n(C);var _=n(25903);var y=n.n(_);var E=n(54522);var w=n.n(E);var x=n(47220);var j=n.n(x);const k="FileBrowser";var B;(function(e){e.copy="filebrowser:copy";e.copyDownloadLink="filebrowser:copy-download-link";e.createLauncher="filebrowser:create-main-launcher";e.cut="filebrowser:cut";e.del="filebrowser:delete";e.download="filebrowser:download";e.duplicate="filebrowser:duplicate";e.hideBrowser="filebrowser:hide-main";e.goToPath="filebrowser:go-to-path";e.goUp="filebrowser:go-up";e.openPath="filebrowser:open-path";e.openUrl="filebrowser:open-url";e.open="filebrowser:open";e.openBrowserTab="filebrowser:open-browser-tab";e.paste="filebrowser:paste";e.createNewDirectory="filebrowser:create-new-directory";e.createNewFile="filebrowser:create-new-file";e.createNewMarkdownFile="filebrowser:create-new-markdown-file";e.refresh="filebrowser:refresh";e.rename="filebrowser:rename";e.copyShareableLink="filebrowser:share-main";e.copyPath="filebrowser:copy-path";e.showBrowser="filebrowser:activate";e.shutdown="filebrowser:shutdown";e.toggleBrowser="filebrowser:toggle-main";e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory";e.toggleLastModified="filebrowser:toggle-last-modified";e.search="filebrowser:search";e.toggleHiddenFiles="filebrowser:toggle-hidden-files"})(B||(B={}));const S="filebrowser";const D={id:"@jupyterlab/filebrowser-extension:browser",requires:[u.IFileBrowserFactory,C.ITranslator],optional:[r.ILayoutRestorer,p.ISettingRegistry,r.ITreePathUpdater,i.ICommandPalette],provides:u.IFileBrowserCommands,autoStart:true,activate:async(e,t,n,r,o,i,s)=>{const l=n.load("jupyterlab");const c=t.defaultBrowser;if(r){r.add(c,S)}const d=a.PageConfig.getOption("preferredPath");if(d){await c.model.cd(d)}N(e,t,n,o,s);const u=()=>{const t=(0,E.find)(e.commands.keyBindings,(e=>e.command===B.toggleBrowser));if(t){const e=x.CommandRegistry.formatKeystroke(t.keys.join(" "));c.title.caption=l.__("File Browser (%1)",e)}else{c.title.caption=l.__("File Browser")}};u();e.commands.keyBindingChanged.connect((()=>{u()}));return void Promise.all([e.restored,c.model.restored]).then((()=>{if(i){c.model.pathChanged.connect(((e,t)=>{i(t.newValue)}))}let e=false;let t=true;let n=true;let r=false;if(o){void o.load("@jupyterlab/filebrowser-extension:browser").then((o=>{o.changed.connect((t=>{e=t.get("navigateToCurrentDirectory").composite;c.navigateToCurrentDirectory=e}));e=o.get("navigateToCurrentDirectory").composite;c.navigateToCurrentDirectory=e;o.changed.connect((e=>{t=e.get("showLastModifiedColumn").composite;c.showLastModifiedColumn=t}));t=o.get("showLastModifiedColumn").composite;c.showLastModifiedColumn=t;o.changed.connect((e=>{n=e.get("useFuzzyFilter").composite;c.useFuzzyFilter=n}));n=o.get("useFuzzyFilter").composite;c.useFuzzyFilter=n;o.changed.connect((e=>{r=e.get("showHiddenFiles").composite;c.showHiddenFiles=r}));r=o.get("showHiddenFiles").composite;c.showHiddenFiles=r}))}}))}};const M={id:"@jupyterlab/filebrowser-extension:factory",provides:u.IFileBrowserFactory,requires:[c.IDocumentManager,C.ITranslator],optional:[g.IStateDB,r.IRouter,r.JupyterFrontEnd.ITreeResolver],activate:async(e,t,n,r,o,s)=>{const{commands:a}=e;const l=new i.WidgetTracker({namespace:S});const c=(e,o={})=>{var i;const s=new u.FilterFileBrowserModel({translator:n,auto:(i=o.auto)!==null&&i!==void 0?i:true,manager:t,driveName:o.driveName||"",refreshInterval:o.refreshInterval,state:o.state===null?undefined:o.state||r||undefined});const a=o.restore;const c=new u.FileBrowser({id:e,model:s,restore:a,translator:n});void l.add(c);return c};const d=c("filebrowser",{auto:false,restore:false});void F.restoreBrowser(d,a,o,s);return{createFileBrowser:c,defaultBrowser:d,tracker:l}}};const T={id:"@jupyterlab/filebrowser-extension:download",requires:[u.IFileBrowserFactory,C.ITranslator],autoStart:true,activate:(e,t,n)=>{const r=n.load("jupyterlab");const{commands:o}=e;const{tracker:s}=t;o.addCommand(B.download,{execute:()=>{const e=s.currentWidget;if(e){return e.download()}},icon:_.downloadIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Download")});o.addCommand(B.copyDownloadLink,{execute:()=>{const e=s.currentWidget;if(!e){return}return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().path).then((e=>{i.Clipboard.copyToSystem(e)}))},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Download Link"),mnemonic:0})}};const I={id:"@jupyterlab/filebrowser-extension:widget",requires:[c.IDocumentManager,u.IFileBrowserFactory,p.ISettingRegistry,i.IToolbarWidgetRegistry,C.ITranslator,r.ILabShell,u.IFileBrowserCommands],autoStart:true,activate:(e,t,n,r,o,s,a)=>{const{commands:l}=e;const{defaultBrowser:c,tracker:d}=n;const h=s.load("jupyterlab");c.node.setAttribute("role","region");c.node.setAttribute("aria-label",h.__("File Browser Section"));c.title.icon=_.folderIcon;o.registerFactory(k,"uploader",(e=>new u.Uploader({model:e.model,translator:s})));(0,i.setToolbar)(c,(0,i.createToolbarFactory)(o,r,k,I.id,s));a.add(c,"left",{rank:100});l.addCommand(B.showBrowser,{execute:e=>{const t=e.path||"";const r=F.getBrowserForPath(t,n);if(!r){return}if(c===r){a.activateById(c.id);return}else{const e=["left","right"];for(const t of e){const e=a.widgets(t);let n=e.next();while(n){if(n.contains(r)){a.activateById(n.id);return}n=e.next()}}}}});l.addCommand(B.hideBrowser,{execute:()=>{const e=d.currentWidget;if(e&&!e.isHidden){a.collapseLeft()}}});void a.restored.then((e=>{if(e.fresh&&a.mode!=="single-document"){void l.execute(B.showBrowser,void 0)}}));void Promise.all([e.restored,c.model.restored]).then((()=>{function e(){if(a.isEmpty("main")&&l.hasCommand("launcher:create")){void F.createLauncher(l,c)}}a.layoutModified.connect((()=>{e()}));a.currentChanged.connect((async(e,r)=>{if(c.navigateToCurrentDirectory&&r.newValue){const{newValue:e}=r;const i=t.contextForWidget(e);if(i){const{path:e}=i;try{await F.navigateToPath(e,n,s)}catch(o){console.warn(`${B.goToPath} failed to open: ${e}`,o)}}}}));e()}))}};const P={id:"@jupyterlab/filebrowser-extension:share-file",requires:[u.IFileBrowserFactory,C.ITranslator],autoStart:true,activate:(e,t,n)=>{const r=n.load("jupyterlab");const{commands:o}=e;const{tracker:s}=t;o.addCommand(B.copyShareableLink,{execute:()=>{const e=s.currentWidget;const t=e===null||e===void 0?void 0:e.selectedItems().next();if(!t){return}i.Clipboard.copyToSystem(a.PageConfig.getUrl({workspace:a.PageConfig.defaultWorkspace,treePath:t.path,toShare:true}))},isVisible:()=>!!s.currentWidget&&(0,E.toArray)(s.currentWidget.selectedItems()).length===1,icon:_.linkIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Shareable Link")})}};const R={id:"@jupyterlab/filebrowser-extension:open-with",requires:[u.IFileBrowserFactory],autoStart:true,activate:(e,t)=>{const{docRegistry:n}=e;const{tracker:r}=t;function o(e){var t,o;const i=(o=(t=e.menu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-contextmenu-open-with"})))===null||t===void 0?void 0:t.submenu)!==null&&o!==void 0?o:null;if(!i){return}i.clearItems();const s=r.currentWidget?F.OpenWith.intersection((0,E.map)(r.currentWidget.selectedItems(),(e=>F.OpenWith.getFactories(n,e)))):new Set;s.forEach((e=>{i.addItem({args:{factory:e},command:B.open})}))}e.contextMenu.opened.connect(o)}};const L={id:"@jupyterlab/filebrowser-extension:open-browser-tab",requires:[u.IFileBrowserFactory,C.ITranslator],autoStart:true,activate:(e,t,n)=>{const{commands:r}=e;const o=n.load("jupyterlab");const{tracker:i}=t;r.addCommand(B.openBrowserTab,{execute:e=>{const t=i.currentWidget;if(!t){return}const n=e["mode"];return Promise.all((0,E.toArray)((0,E.map)(t.selectedItems(),(e=>{if(n==="single-document"){const t=a.PageConfig.getUrl({mode:"single-document",treePath:e.path});const n=window.open();if(n){n.opener=null;n.location.href=t}else{throw new Error("Failed to open new browser tab.")}}else{return r.execute("docmanager:open-browser-tab",{path:e.path})}}))))},icon:_.addIcon.bindprops({stylesheet:"menuItem"}),label:e=>e["mode"]==="single-document"?o.__("Open in Simple Mode"):o.__("Open in New Browser Tab"),mnemonic:0})}};const O={id:"@jupyterlab/filebrowser-extension:file-upload-status",autoStart:true,requires:[u.IFileBrowserFactory,C.ITranslator],optional:[A.IStatusBar],activate:(e,t,n,r)=>{if(!r){return}const o=new u.FileUploadStatus({tracker:t.tracker,translator:n});r.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:o,align:"middle",isActive:()=>!!o.model&&o.model.items.length>0,activeStateChanged:o.model.stateChanged})}};const z={id:"@jupyterlab/filebrowser-extension:open-url",autoStart:true,requires:[u.IFileBrowserFactory,C.ITranslator],optional:[i.ICommandPalette],activate:(e,t,n,r)=>{const{commands:o}=e;const s=n.load("jupyterlab");const{defaultBrowser:l}=t;const c=B.openUrl;o.addCommand(c,{label:e=>e.url?s.__("Open %1",e.url):s.__("Open from URL"),caption:e=>e.url?s.__("Open %1",e.url):s.__("Open from URL"),execute:async e=>{var t,n,r;let c=(t=e===null||e===void 0?void 0:e.url)!==null&&t!==void 0?t:"";if(!c){c=(n=(await i.InputDialog.getText({label:s.__("URL"),placeholder:"https://example.com/path/to/file",title:s.__("Open URL"),okLabel:s.__("Open")})).value)!==null&&n!==void 0?n:undefined}if(!c){return}let d="";let u;try{const e=await fetch(c);u=await e.blob();d=(r=e.headers.get("Content-Type"))!==null&&r!==void 0?r:""}catch(h){if(h.response&&h.response.status!==200){h.message=s.__("Could not open URL: %1",c)}return(0,i.showErrorMessage)(s.__("Cannot fetch"),h)}try{const e=a.PathExt.basename(c);const t=new File([u],e,{type:d});const n=await l.model.upload(t);return o.execute("docmanager:open",{path:n.path})}catch(p){return(0,i.showErrorMessage)(s._p("showErrorMessage","Upload Error"),p)}}});if(r){r.addItem({command:c,category:s.__("File Operations")})}}};function N(e,t,n,r,o){const s=n.load("jupyterlab");const{docRegistry:l,commands:c}=e;const{defaultBrowser:d,tracker:u}=t;c.addCommand(B.del,{execute:()=>{const e=u.currentWidget;if(e){return e.delete()}},icon:_.closeIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Delete"),mnemonic:0});c.addCommand(B.copy,{execute:()=>{const e=u.currentWidget;if(e){return e.copy()}},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Copy"),mnemonic:0});c.addCommand(B.cut,{execute:()=>{const e=u.currentWidget;if(e){return e.cut()}},icon:_.cutIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Cut")});c.addCommand(B.duplicate,{execute:()=>{const e=u.currentWidget;if(e){return e.duplicate()}},icon:_.copyIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Duplicate")});c.addCommand(B.goToPath,{execute:async e=>{var r;const o=e.path||"";const i=!((r=e===null||e===void 0?void 0:e.dontShowBrowser)!==null&&r!==void 0?r:false);try{const e=await F.navigateToPath(o,t,n);if(e.type!=="directory"&&i){const e=F.getBrowserForPath(o,t);if(e){e.clearSelectedItems();const t=o.split("/");const n=t[t.length-1];if(n){await e.selectItemByName(n)}}}}catch(s){console.warn(`${B.goToPath} failed to go to: ${o}`,s)}if(i){return c.execute(B.showBrowser,{path:o})}}});c.addCommand(B.goUp,{label:"go up",execute:async()=>{const e=F.getBrowserForPath("",t);if(!e){return}const{model:n}=e;await n.restored;if(n.path===n.rootPath){return}try{await n.cd("..")}catch(r){console.warn(`${B.goUp} failed to go to parent directory of ${n.path}`,r)}}});c.addCommand(B.openPath,{label:e=>e.path?s.__("Open %1",e.path):s.__("Open from Path"),caption:e=>e.path?s.__("Open %1",e.path):s.__("Open from path"),execute:async e=>{var n;let r;if(e===null||e===void 0?void 0:e.path){r=e.path}else{r=(n=(await i.InputDialog.getText({label:s.__("Path"),placeholder:"/path/relative/to/jlab/root",title:s.__("Open Path"),okLabel:s.__("Open")})).value)!==null&&n!==void 0?n:undefined}if(!r){return}try{const n=r!=="/"&&r.endsWith("/");if(n){r=r.slice(0,r.length-1)}const o=F.getBrowserForPath(r,t);const{services:i}=o.model.manager;const s=await i.contents.get(r,{content:false});if(n&&s.type!=="directory"){throw new Error(`Path ${r}/ is not a directory`)}await c.execute(B.goToPath,{path:r,dontShowBrowser:e.dontShowBrowser});if(s.type==="directory"){return}return c.execute("docmanager:open",{path:r})}catch(o){if(o.response&&o.response.status===404){o.message=s.__("Could not find path: %1",r)}return(0,i.showErrorMessage)(s.__("Cannot open"),o)}}});if(o){o.addItem({command:B.openPath,category:s.__("File Operations")})}c.addCommand(B.open,{execute:e=>{const t=e["factory"]||void 0;const n=u.currentWidget;if(!n){return}const{contents:r}=n.model.manager.services;return Promise.all((0,E.toArray)((0,E.map)(n.selectedItems(),(e=>{if(e.type==="directory"){const t=r.localPath(e.path);return n.model.cd(`/${t}`)}return c.execute("docmanager:open",{factory:t,path:e.path})}))))},icon:e=>{var t;const n=e["factory"]||void 0;if(n){const e=l.getFileType(n);return(t=e===null||e===void 0?void 0:e.icon)===null||t===void 0?void 0:t.bindprops({stylesheet:"menuItem"})}else{return _.folderIcon.bindprops({stylesheet:"menuItem"})}},label:e=>e["label"]||e["factory"]||s.__("Open"),mnemonic:0});c.addCommand(B.paste,{execute:()=>{const e=u.currentWidget;if(e){return e.paste()}},icon:_.pasteIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Paste"),mnemonic:0});c.addCommand(B.createNewDirectory,{execute:()=>{const e=u.currentWidget;if(e){return e.createNewDirectory()}},icon:_.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:s.__("New Folder")});c.addCommand(B.createNewFile,{execute:()=>{const e=u.currentWidget;if(e){return e.createNewFile({ext:"txt"})}},icon:_.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:s.__("New File")});c.addCommand(B.createNewMarkdownFile,{execute:()=>{const e=u.currentWidget;if(e){return e.createNewFile({ext:"md"})}},icon:_.markdownIcon.bindprops({stylesheet:"menuItem"}),label:s.__("New Markdown File")});c.addCommand(B.refresh,{execute:e=>{const t=u.currentWidget;if(t){return t.model.refresh()}},icon:_.refreshIcon.bindprops({stylesheet:"menuItem"}),caption:s.__("Refresh the file browser."),label:s.__("Refresh File List")});c.addCommand(B.rename,{execute:e=>{const t=u.currentWidget;if(t){return t.rename()}},icon:_.editIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Rename"),mnemonic:0});c.addCommand(B.copyPath,{execute:()=>{const e=u.currentWidget;if(!e){return}const t=e.selectedItems().next();if(!t){return}i.Clipboard.copyToSystem(t.path)},isVisible:()=>!!u.currentWidget&&u.currentWidget.selectedItems().next!==undefined,icon:_.fileIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Copy Path")});c.addCommand(B.shutdown,{execute:()=>{const e=u.currentWidget;if(e){return e.shutdownKernels()}},icon:_.stopIcon.bindprops({stylesheet:"menuItem"}),label:s.__("Shut Down Kernel")});c.addCommand(B.toggleBrowser,{execute:()=>{if(d.isHidden){return c.execute(B.showBrowser,void 0)}return c.execute(B.hideBrowser,void 0)}});c.addCommand(B.createLauncher,{label:s.__("New Launcher"),icon:e=>e.toolbar?_.addIcon:undefined,execute:e=>{if(c.hasCommand("launcher:create")){return F.createLauncher(c,d,e)}}});if(r){c.addCommand(B.toggleNavigateToCurrentDirectory,{label:s.__("Show Active File in File Browser"),isToggled:()=>d.navigateToCurrentDirectory,execute:()=>{const e=!d.navigateToCurrentDirectory;const t="navigateToCurrentDirectory";return r.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set navigateToCurrentDirectory setting`)}))}})}c.addCommand(B.toggleLastModified,{label:s.__("Show Last Modified Column"),isToggled:()=>d.showLastModifiedColumn,execute:()=>{const e=!d.showLastModifiedColumn;const t="showLastModifiedColumn";if(r){return r.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set showLastModifiedColumn setting`)}))}}});c.addCommand(B.toggleHiddenFiles,{label:s.__("Show Hidden Files"),isToggled:()=>d.showHiddenFiles,isVisible:()=>a.PageConfig.getOption("allow_hidden_files")==="true",execute:()=>{const e=!d.showHiddenFiles;const t="showHiddenFiles";if(r){return r.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set showHiddenFiles setting`)}))}}});c.addCommand(B.search,{label:s.__("Search on File Names"),execute:()=>alert("search")});if(o){o.addItem({command:B.toggleNavigateToCurrentDirectory,category:s.__("File Operations")})}}var F;(function(e){function t(e,t,n){const{model:r}=t;return e.execute("launcher:create",Object.assign({cwd:r.path},n)).then((e=>{r.pathChanged.connect((()=>{if(e.content){e.content.cwd=r.path}}),e);return e}))}e.createLauncher=t;function n(e,t){const{defaultBrowser:n,tracker:r}=t;const o=n.model.manager.services.contents.driveName(e);if(o){const t=r.find((e=>e.model.driveName===o));if(!t){console.warn(`${B.goToPath} failed to find filebrowser for path: ${e}`);return}return t}return n}e.getBrowserForPath=n;async function r(t,n,r){const o=r.load("jupyterlab");const i=e.getBrowserForPath(t,n);if(!i){throw new Error(o.__("No browser for path"))}const{services:s}=i.model.manager;const l=s.contents.localPath(t);await s.ready;const c=await s.contents.get(t,{content:false});const{model:d}=i;await d.restored;if(c.type==="directory"){await d.cd(`/${l}`)}else{await d.cd(`/${a.PathExt.dirname(l)}`)}return c}e.navigateToPath=r;async function o(e,t,n,r){const o="jp-mod-restoring";e.addClass(o);if(!n){await e.model.restore(e.id);await e.model.refresh();e.removeClass(o);return}const i=async()=>{n.routed.disconnect(i);const s=await(r===null||r===void 0?void 0:r.paths);if((s===null||s===void 0?void 0:s.file)||(s===null||s===void 0?void 0:s.browser)){await e.model.restore(e.id,false);if(s.file){await t.execute(B.openPath,{path:s.file,dontShowBrowser:true})}if(s.browser){await t.execute(B.openPath,{path:s.browser,dontShowBrowser:true})}}else{await e.model.restore(e.id);await e.model.refresh()}e.removeClass(o)};n.routed.connect(i)}e.restoreBrowser=o})(F||(F={}));const H=[M,D,P,O,T,I,R,L,z];const W=H;(function(e){let t;(function(e){function t(e,t){var n;const r=e.preferredWidgetFactories(t.path).map((e=>e.name));const o=(n=e.getWidgetFactory("notebook"))===null||n===void 0?void 0:n.name;if(o&&t.type==="notebook"&&r.indexOf(o)===-1){r.unshift(o)}return r}e.getFactories=t;function n(e){const t=e.next();if(!t){return new Set}const n=new Set(t);return(0,E.reduce)(e,((e,t)=>new Set(t.filter((t=>e.has(t))))),n)}e.intersection=n})(t=e.OpenWith||(e.OpenWith={}))})(F||(F={}))},77552:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(98328);var a=n(94683);var l=n(90516);var c=n(82401);var d=n(59240);var u=n(52812);var h=n(93379);var p=n.n(h);var m=n(4409);var g={};g.insert="head";g.singleton=false;var f=p()(m.Z,g);const A=m.Z.locals||{}},34635:(e,t,n)=>{"use strict";n.r(t);n.d(t,{BreadCrumbs:()=>C,CHUNK_SIZE:()=>pe,DirListing:()=>ne,FileBrowser:()=>ce,FileBrowserModel:()=>me,FileDialog:()=>ve,FileUploadStatus:()=>Me,FilterFileBrowserModel:()=>fe,IFileBrowserCommands:()=>ye,IFileBrowserFactory:()=>_e,LARGE_FILE_SIZE:()=>he,TogglableHiddenFileBrowserModel:()=>ge,Uploader:()=>Ee});var r=n(3378);var o=n(22248);var i=n(59768);var s=n(700);var a=n(69442);var l=n(71861);var c=n(25903);var d=n(54522);var u=n(45187);const h="jp-BreadCrumbs";const p="jp-BreadCrumbs-home";const m="jp-BreadCrumbs-preferred";const g="jp-BreadCrumbs-item";const f=["/","../../","../",""];const A="application/x-jupyter-icontents";const v="jp-mod-dropTarget";class C extends s.Widget{constructor(e){super();this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._model=e.model;this.addClass(h);this._crumbs=b.createCrumbs();this._crumbSeps=b.createCrumbSeparators();const t=a.PageConfig.getOption("preferredPath");this._hasPreferred=t&&t!=="/"?true:false;if(this._hasPreferred){this.node.appendChild(this._crumbs[b.Crumb.Preferred])}this.node.appendChild(this._crumbs[b.Crumb.Home]);this._model.refreshed.connect(this.update,this)}handleEvent(e){switch(e.type){case"click":this._evtClick(e);break;case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:return}}onAfterAttach(e){super.onAfterAttach(e);this.update();const t=this.node;t.addEventListener("click",this);t.addEventListener("lm-dragenter",this);t.addEventListener("lm-dragleave",this);t.addEventListener("lm-dragover",this);t.addEventListener("lm-drop",this)}onBeforeDetach(e){super.onBeforeDetach(e);const t=this.node;t.removeEventListener("click",this);t.removeEventListener("lm-dragenter",this);t.removeEventListener("lm-dragleave",this);t.removeEventListener("lm-dragover",this);t.removeEventListener("lm-drop",this)}onUpdateRequest(e){const t=this._model.manager.services.contents;const n=t.localPath(this._model.path);b.updateCrumbs(this._crumbs,this._crumbSeps,n,this._hasPreferred)}_evtClick(e){if(e.button!==0){return}let t=e.target;while(t&&t!==this.node){if(t.classList.contains(m)){this._model.cd(a.PageConfig.getOption("preferredPath")).catch((e=>(0,r.showErrorMessage)(this._trans.__("Open Error"),e)));e.preventDefault();e.stopPropagation();return}if(t.classList.contains(g)||t.classList.contains(p)){const n=d.ArrayExt.findFirstIndex(this._crumbs,(e=>e===t));this._model.cd(f[n]).catch((e=>(0,r.showErrorMessage)(this._trans.__("Open Error"),e)));e.preventDefault();e.stopPropagation();return}t=t.parentElement}}_evtDragEnter(e){if(e.mimeData.hasData(A)){const t=d.ArrayExt.findFirstIndex(this._crumbs,(t=>u.ElementExt.hitTest(t,e.clientX,e.clientY)));if(t!==-1){if(t!==b.Crumb.Current){this._crumbs[t].classList.add(v);e.preventDefault();e.stopPropagation()}}}}_evtDragLeave(e){e.preventDefault();e.stopPropagation();const t=r.DOMUtils.findElement(this.node,v);if(t){t.classList.remove(v)}}_evtDragOver(e){e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction;const t=r.DOMUtils.findElement(this.node,v);if(t){t.classList.remove(v)}const n=d.ArrayExt.findFirstIndex(this._crumbs,(t=>u.ElementExt.hitTest(t,e.clientX,e.clientY)));if(n!==-1){this._crumbs[n].classList.add(v)}}_evtDrop(e){e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}if(!e.mimeData.hasData(A)){return}e.dropAction=e.proposedAction;let t=e.target;while(t&&t.parentElement){if(t.classList.contains(v)){t.classList.remove(v);break}t=t.parentElement}const n=d.ArrayExt.findFirstIndex(this._crumbs,(e=>e===t));if(n===-1){return}const o=this._model;const i=a.PathExt.resolve(o.path,f[n]);const s=o.manager;const c=[];const u=e.mimeData.getData(A);for(const r of u){const e=s.services.contents.localPath(r);const t=a.PathExt.basename(e);const n=a.PathExt.join(i,t);c.push((0,l.renameFile)(s,r,n))}void Promise.all(c).catch((e=>(0,r.showErrorMessage)(this._trans.__("Move Error"),e)))}}var b;(function(e){let t;(function(e){e[e["Home"]=0]="Home";e[e["Ellipsis"]=1]="Ellipsis";e[e["Parent"]=2]="Parent";e[e["Current"]=3]="Current";e[e["Preferred"]=4]="Preferred"})(t=e.Crumb||(e.Crumb={}));function n(e,n,r,o){const i=e[0].parentNode;const s=i.firstChild;while(s&&s.nextSibling){i.removeChild(s.nextSibling)}if(o){i.appendChild(e[t.Home]);i.appendChild(n[0])}else{i.appendChild(n[0])}const a=r.split("/");if(a.length>2){i.appendChild(e[t.Ellipsis]);const r=a.slice(0,a.length-2).join("/");e[t.Ellipsis].title=r;i.appendChild(n[1])}if(r){if(a.length>=2){e[t.Parent].textContent=a[a.length-2];i.appendChild(e[t.Parent]);const r=a.slice(0,a.length-1).join("/");e[t.Parent].title=r;i.appendChild(n[2])}e[t.Current].textContent=a[a.length-1];i.appendChild(e[t.Current]);e[t.Current].title=r;i.appendChild(n[3])}}e.updateCrumbs=n;function r(){const e=c.folderIcon.element({className:p,tag:"span",title:a.PageConfig.getOption("serverRoot")||"Jupyter Server Root",stylesheet:"breadCrumb"});const t=c.ellipsesIcon.element({className:g,tag:"span",stylesheet:"breadCrumb"});const n=document.createElement("span");n.className=g;const r=document.createElement("span");r.className=g;const o=c.homeIcon.element({className:m,tag:"span",title:a.PageConfig.getOption("preferredPath")||"Jupyter Preferred Path",stylesheet:"breadCrumb"});return[e,t,n,r,o]}e.createCrumbs=r;function o(){const e=[];const t=2;for(let n=0;n<t+2;n++){const t=document.createElement("span");t.textContent="/";e.push(t)}return e}e.createCrumbSeparators=o})(b||(b={}));var _=n(34576);var y=n(91100);var E=n(9004);var w=n(46843);var x=n(18987);var j=n(3967);const k="jp-DirListing";const B="jp-DirListing-header";const S="jp-DirListing-headerItem";const D="jp-DirListing-headerItemText";const M="jp-DirListing-headerItemIcon";const T="jp-DirListing-content";const I="jp-DirListing-item";const P="jp-DirListing-itemText";const R="jp-DirListing-itemIcon";const L="jp-DirListing-itemModified";const O="jp-DirListing-editor";const z="jp-id-name";const N="jp-id-modified";const F="jp-id-narrow";const H="jp-LastModified-hidden";const W="application/x-jupyter-icontents";const V="application/x-jupyter-icontentsrich";const q="jp-mod-dropTarget";const U="jp-mod-selected";const $="jp-DragIcon";const K="jp-mod-clipboard";const Y="jp-mod-cut";const G="jp-mod-multiSelected";const Z="jp-mod-running";const J="jp-mod-descending";const X=1e3;const Q=5;const ee=!!navigator.platform.match(/Mac/i);const te="application/vnd.lumino.widget-factory";class ne extends s.Widget{constructor(e){super({node:(e.renderer||ne.defaultRenderer).createNode()});this._items=[];this._sortedItems=[];this._sortState={direction:"ascending",key:"name"};this._onItemOpened=new x.Signal(this);this._drag=null;this._dragData=null;this._selectTimer=-1;this._isCut=false;this._prevPath="";this._clipboard=[];this._softSelection="";this.selection=Object.create(null);this._searchPrefix="";this._searchPrefixTimer=-1;this._inRename=false;this._isDirty=false;this._hiddenColumns=new Set;this.addClass(k);this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._model=e.model;this._model.fileChanged.connect(this._onFileChanged,this);this._model.refreshed.connect(this._onModelRefreshed,this);this._model.pathChanged.connect(this._onPathChanged,this);this._editNode=document.createElement("input");this._editNode.className=O;this._manager=this._model.manager;this._renderer=e.renderer||ne.defaultRenderer;const t=r.DOMUtils.findElement(this.node,B);this._renderer.populateHeaderNode(t,this.translator,this._hiddenColumns);this._manager.activateRequested.connect(this._onActivateRequested,this)}dispose(){this._items.length=0;this._sortedItems.length=0;this._clipboard.length=0;super.dispose()}get model(){return this._model}get headerNode(){return r.DOMUtils.findElement(this.node,B)}get contentNode(){return r.DOMUtils.findElement(this.node,T)}get renderer(){return this._renderer}get sortState(){return this._sortState}get onItemOpened(){return this._onItemOpened}selectedItems(){const e=this._sortedItems;return(0,d.filter)(e,(e=>this.selection[e.path]))}sortedItems(){return new d.ArrayIterator(this._sortedItems)}sort(e){this._sortedItems=re.sort(this.model.items(),e);this._sortState=e;this.update()}rename(){return this._doRename()}cut(){this._isCut=true;this._copy();this.update()}copy(){this._copy()}paste(){if(!this._clipboard.length){this._isCut=false;return Promise.resolve(undefined)}const e=this._model.path;const t=[];(0,d.each)(this._clipboard,(n=>{if(this._isCut){const r=n.split("/");const o=r[r.length-1];const i=a.PathExt.join(e,o);t.push(this._model.manager.rename(n,i))}else{t.push(this._model.manager.copy(n,e))}}));(0,d.each)(this._items,(e=>{e.classList.remove(Y)}));this._clipboard.length=0;this._isCut=false;this.removeClass(K);return Promise.all(t).then((()=>undefined)).catch((e=>{void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Paste Error"),e)}))}async delete(){const e=this._sortedItems.filter((e=>this.selection[e.path]));if(!e.length){return}const t=e.length===1?this._trans.__("Are you sure you want to permanently delete: %1?",e[0].name):this._trans._n("Are you sure you want to permanently delete the %1 selected item?","Are you sure you want to permanently delete the %1 selected items?",e.length);const n=await(0,r.showDialog)({title:this._trans.__("Delete"),body:t,buttons:[r.Dialog.cancelButton({label:this._trans.__("Cancel")}),r.Dialog.warnButton({label:this._trans.__("Delete")})],defaultButton:0});if(!this.isDisposed&&n.button.accept){await this._delete(e.map((e=>e.path)))}}duplicate(){const e=this._model.path;const t=[];(0,d.each)(this.selectedItems(),(n=>{if(n.type!=="directory"){t.push(this._model.manager.copy(n.path,e))}}));return Promise.all(t).then((()=>undefined)).catch((e=>{void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Duplicate file"),e)}))}async download(){await Promise.all((0,d.toArray)(this.selectedItems()).filter((e=>e.type!=="directory")).map((e=>this._model.download(e.path))))}shutdownKernels(){const e=this._model;const t=this._sortedItems;const n=t.map((e=>e.path));const o=(0,d.toArray)(this._model.sessions()).filter((e=>{const r=d.ArrayExt.firstIndexOf(n,e.path);return this.selection[t[r].path]})).map((t=>e.manager.services.sessions.shutdown(t.id)));return Promise.all(o).then((()=>undefined)).catch((e=>{void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Shut down kernel"),e)}))}selectNext(e=false){let t=-1;const n=Object.keys(this.selection);const r=this._sortedItems;if(n.length===1||e){const e=n[n.length-1];t=d.ArrayExt.findFirstIndex(r,(t=>t.path===e));t+=1;if(t===this._items.length){t=0}}else if(n.length===0){t=0}else{const e=n[n.length-1];t=d.ArrayExt.findFirstIndex(r,(t=>t.path===e))}if(t!==-1){this._selectItem(t,e);u.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[t])}}selectPrevious(e=false){let t=-1;const n=Object.keys(this.selection);const r=this._sortedItems;if(n.length===1||e){const e=n[0];t=d.ArrayExt.findFirstIndex(r,(t=>t.path===e));t-=1;if(t===-1){t=this._items.length-1}}else if(n.length===0){t=this._items.length-1}else{const e=n[0];t=d.ArrayExt.findFirstIndex(r,(t=>t.path===e))}if(t!==-1){this._selectItem(t,e);u.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[t])}}selectByPrefix(){const e=this._searchPrefix.toLowerCase();const t=this._sortedItems;const n=d.ArrayExt.findFirstIndex(t,(t=>t.name.toLowerCase().substr(0,e.length)===e));if(n!==-1){this._selectItem(n,false);u.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[n])}}isSelected(e){const t=this._sortedItems;return(0,d.toArray)((0,d.filter)(t,(t=>t.name===e&&this.selection[t.path]))).length!==0}modelForClick(e){const t=this._sortedItems;const n=re.hitTestNodes(this._items,e);if(n!==-1){return t[n]}return undefined}clearSelectedItems(){this.selection=Object.create(null)}async selectItemByName(e,t=false){await this.model.refresh();if(this.isDisposed){throw new Error("File browser is disposed.")}const n=this._sortedItems;const r=d.ArrayExt.findFirstIndex(n,(t=>t.name===e));if(r===-1){throw new Error("Item does not exist.")}this._selectItem(r,false,t);w.MessageLoop.sendMessage(this,s.Widget.Msg.UpdateRequest);u.ElementExt.scrollIntoViewIfNeeded(this.contentNode,this._items[r])}handleEvent(e){switch(e.type){case"mousedown":this._evtMousedown(e);break;case"mouseup":this._evtMouseup(e);break;case"mousemove":this._evtMousemove(e);break;case"keydown":this.evtKeydown(e);break;case"click":this._evtClick(e);break;case"dblclick":this.evtDblClick(e);break;case"dragenter":case"dragover":this.addClass("jp-mod-native-drop");e.preventDefault();break;case"dragleave":case"dragend":this.removeClass("jp-mod-native-drop");break;case"drop":this.removeClass("jp-mod-native-drop");this.evtNativeDrop(e);break;case"scroll":this._evtScroll(e);break;case"lm-dragenter":this.evtDragEnter(e);break;case"lm-dragleave":this.evtDragLeave(e);break;case"lm-dragover":this.evtDragOver(e);break;case"lm-drop":this.evtDrop(e);break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;const n=r.DOMUtils.findElement(t,T);t.addEventListener("mousedown",this);t.addEventListener("keydown",this);t.addEventListener("click",this);t.addEventListener("dblclick",this);n.addEventListener("dragenter",this);n.addEventListener("dragover",this);n.addEventListener("dragleave",this);n.addEventListener("dragend",this);n.addEventListener("drop",this);n.addEventListener("scroll",this);n.addEventListener("lm-dragenter",this);n.addEventListener("lm-dragleave",this);n.addEventListener("lm-dragover",this);n.addEventListener("lm-drop",this)}onBeforeDetach(e){super.onBeforeDetach(e);const t=this.node;const n=r.DOMUtils.findElement(t,T);t.removeEventListener("mousedown",this);t.removeEventListener("keydown",this);t.removeEventListener("click",this);t.removeEventListener("dblclick",this);n.removeEventListener("scroll",this);n.removeEventListener("dragover",this);n.removeEventListener("dragover",this);n.removeEventListener("dragleave",this);n.removeEventListener("dragend",this);n.removeEventListener("drop",this);n.removeEventListener("lm-dragenter",this);n.removeEventListener("lm-dragleave",this);n.removeEventListener("lm-dragover",this);n.removeEventListener("lm-drop",this);document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true)}onAfterShow(e){if(this._isDirty){this.sort(this.sortState);this.update()}}onUpdateRequest(e){this._isDirty=false;const t=this._sortedItems;const n=this._items;const o=r.DOMUtils.findElement(this.node,T);const i=this._renderer;this.removeClass(G);this.removeClass(U);while(n.length>t.length){o.removeChild(n.pop())}while(n.length<t.length){const e=i.createItemNode(this._hiddenColumns);e.classList.add(I);n.push(e);o.appendChild(e)}n.forEach((e=>{e.classList.remove(U);e.classList.remove(Z);e.classList.remove(Y)}));t.forEach(((e,t)=>{const r=n[t];const o=this._manager.registry.getFileTypeForModel(e);i.updateItemNode(r,e,o,this.translator,this._hiddenColumns);if(this.selection[e.path]){r.classList.add(U);if(this._isCut&&this._model.path===this._prevPath){r.classList.add(Y)}}r.setAttribute("data-isdir",e.type==="directory"?"true":"false")}));const s=Object.keys(this.selection).length;if(s){this.addClass(U);if(s>1){this.addClass(G)}}const a=t.map((e=>e.path));(0,d.each)(this._model.sessions(),(e=>{var t;const r=d.ArrayExt.firstIndexOf(a,e.path);const o=n[r];if(o){let n=(t=e.kernel)===null||t===void 0?void 0:t.name;const r=this._model.specs;o.classList.add(Z);if(r&&n){const e=r.kernelspecs[n];n=e?e.display_name:"unknown"}o.title=this._trans.__("%1\nKernel: %2",o.title,n)}}));this._prevPath=this._model.path}onResize(e){const{width:t}=e.width===-1?this.node.getBoundingClientRect():e;this.toggleClass("jp-DirListing-narrow",t<250)}setColumnVisibility(e,t){if(t){this._hiddenColumns.delete(e)}else{this._hiddenColumns.add(e)}this.headerNode.innerHTML="";this._renderer.populateHeaderNode(this.headerNode,this.translator,this._hiddenColumns)}_evtClick(e){const t=e.target;const n=this.headerNode;if(n.contains(t)){const t=this.renderer.handleHeaderClick(n,e);if(t){this.sort(t)}return}}_evtScroll(e){this.headerNode.scrollLeft=this.contentNode.scrollLeft}_evtMousedown(e){if(e.target===this._editNode){return}if(this._editNode.parentNode){if(this._editNode!==e.target){this._editNode.focus();this._editNode.blur();clearTimeout(this._selectTimer)}else{return}}let t=re.hitTestNodes(this._items,e);if(t===-1){return}this.handleFileSelect(e);if(e.button!==0){clearTimeout(this._selectTimer)}const n=ee&&e.ctrlKey||e.button===2;if(n){return}if(e.button===0){this._dragData={pressX:e.clientX,pressY:e.clientY,index:t};document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true)}}_evtMouseup(e){if(this._softSelection){const t=e.metaKey||e.shiftKey||e.ctrlKey;if(!t&&e.button===0){this.clearSelectedItems();this.selection[this._softSelection]=true;this.update()}this._softSelection=""}if(e.button===0){this._focusSelectedFile()}if(e.button!==0||!this._drag){document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);return}e.preventDefault();e.stopPropagation()}_evtMousemove(e){e.preventDefault();e.stopPropagation();if(this._drag||!this._dragData){return}const t=this._dragData;const n=Math.abs(e.clientX-t.pressX);const r=Math.abs(e.clientY-t.pressY);if(n<Q&&r<Q){return}this._startDrag(t.index,e.clientX,e.clientY)}handleOpen(e){this._onItemOpened.emit(e);if(e.type==="directory"){const t=this._manager.services.contents.localPath(e.path);this._model.cd(`/${t}`).catch((e=>(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Open directory"),e)))}else{const t=e.path;this._manager.openOrReveal(t)}}evtKeydown(e){switch(e.keyCode){case 13:{if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){return}e.preventDefault();e.stopPropagation();const t=Object.keys(this.selection);const n=t[0];const r=this._sortedItems;const o=d.ArrayExt.findFirstIndex(r,(e=>e.path===n));if(o===-1){return}const i=this._sortedItems[o];this.handleOpen(i);break}case 38:this.selectPrevious(e.shiftKey);e.stopPropagation();e.preventDefault();break;case 40:this.selectNext(e.shiftKey);e.stopPropagation();e.preventDefault();break;default:break}if(!this._inRename&&e.key!==undefined&&e.key.length===1){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){return}this._searchPrefix+=e.key;clearTimeout(this._searchPrefixTimer);this._searchPrefixTimer=window.setTimeout((()=>{this._searchPrefix=""}),X);this.selectByPrefix();e.stopPropagation();e.preventDefault()}}evtDblClick(e){if(e.button!==0){return}if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey){return}e.preventDefault();e.stopPropagation();clearTimeout(this._selectTimer);this._editNode.blur();const t=e.target;const n=d.ArrayExt.findFirstIndex(this._items,(e=>e.contains(t)));if(n===-1){return}const r=this._sortedItems[n];this.handleOpen(r)}evtNativeDrop(e){var t,n,o;const i=(t=e.dataTransfer)===null||t===void 0?void 0:t.files;if(!i||i.length===0){return}const s=(n=e.dataTransfer)===null||n===void 0?void 0:n.items.length;if(!s){return}for(let a=0;a<s;a++){let t=(o=e.dataTransfer)===null||o===void 0?void 0:o.items[a].webkitGetAsEntry();if(t.isDirectory){console.log("currently not supporting drag + drop for folders");void(0,r.showDialog)({title:this._trans.__("Error Uploading Folder"),body:this._trans.__("Drag and Drop is currently not supported for folders"),buttons:[r.Dialog.cancelButton({label:this._trans.__("Close")})]})}}e.preventDefault();for(let r=0;r<i.length;r++){void this._model.upload(i[r])}}evtDragEnter(e){if(e.mimeData.hasData(W)){const t=re.hitTestNodes(this._items,e);if(t===-1){return}const n=this._sortedItems[t];if(n.type!=="directory"||this.selection[n.path]){return}const r=e.target;r.classList.add(q);e.preventDefault();e.stopPropagation()}}evtDragLeave(e){e.preventDefault();e.stopPropagation();const t=r.DOMUtils.findElement(this.node,q);if(t){t.classList.remove(q)}}evtDragOver(e){e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction;const t=r.DOMUtils.findElement(this.node,q);if(t){t.classList.remove(q)}const n=re.hitTestNodes(this._items,e);this._items[n].classList.add(q)}evtDrop(e){e.preventDefault();e.stopPropagation();clearTimeout(this._selectTimer);if(e.proposedAction==="none"){e.dropAction="none";return}if(!e.mimeData.hasData(W)){return}let t=e.target;while(t&&t.parentElement){if(t.classList.contains(q)){t.classList.remove(q);break}t=t.parentElement}const n=d.ArrayExt.firstIndexOf(this._items,t);const o=this._sortedItems;let i=this._model.path;if(o[n].type==="directory"){i=a.PathExt.join(i,o[n].name)}const s=this._manager;const c=[];const u=e.mimeData.getData(W);if(e.ctrlKey&&e.proposedAction==="move"){e.dropAction="copy"}else{e.dropAction=e.proposedAction}for(const r of u){const t=s.services.contents.localPath(r);const n=a.PathExt.basename(t);const o=a.PathExt.join(i,n);if(o===r){continue}if(e.dropAction==="copy"){c.push(s.copy(r,i))}else{c.push((0,l.renameFile)(s,r,o))}}Promise.all(c).catch((e=>{void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Error while copying/moving files"),e)}))}_startDrag(e,t,n){let r=Object.keys(this.selection);const o=this._items[e];const i=this._sortedItems;let s;let a;if(!o.classList.contains(U)){a=i[e];r=[a.path];s=[a]}else{const e=r[0];a=(0,d.find)(i,(t=>t.path===e));s=(0,d.toArray)(this.selectedItems())}if(!a){return}const l=this._manager.registry.getFileTypeForModel(a);const c=this.renderer.createDragImage(o,r.length,this._trans,l);this._drag=new E.Drag({dragImage:c,mimeData:new y.MimeData,supportedActions:"move",proposedAction:"move"});this._drag.mimeData.setData(W,r);const u=this.model.manager.services;for(const d of s){this._drag.mimeData.setData(V,{model:d,withContent:async()=>await u.contents.get(d.path)})}if(a&&a.type!=="directory"){const e=r.slice(1).reverse();this._drag.mimeData.setData(te,(()=>{if(!a){return}const t=a.path;let n=this._manager.findWidget(t);if(!n){n=this._manager.open(a.path)}if(e.length){const t=new y.PromiseDelegate;void t.promise.then((()=>{let t=n;e.forEach((e=>{const n={ref:t===null||t===void 0?void 0:t.id,mode:"tab-after"};t=this._manager.openOrReveal(e,void 0,void 0,n);this._manager.openOrReveal(a.path)}))}));t.resolve(void 0)}return n}))}document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);clearTimeout(this._selectTimer);void this._drag.start(t,n).then((e=>{this._drag=null;clearTimeout(this._selectTimer)}))}handleFileSelect(e){const t=this._sortedItems;const n=re.hitTestNodes(this._items,e);clearTimeout(this._selectTimer);if(n===-1){return}this._softSelection="";const r=t[n].path;const o=Object.keys(this.selection);if(ee&&e.metaKey||!ee&&e.ctrlKey){if(this.selection[r]){delete this.selection[r]}else{this.selection[r]=true}}else if(e.shiftKey){this._handleMultiSelect(o,n)}else if(r in this.selection&&o.length>1){this._softSelection=r}else{return this._selectItem(n,false)}this.update()}_focusSelectedFile(e){if(typeof e==="undefined"){const t=Object.keys(this.selection);if(t.length>1){return}e=d.ArrayExt.findFirstIndex(this._sortedItems,(e=>e.path===t[0]))}if(e===-1){return}const t=this._items[e];const n=r.DOMUtils.findElement(t,P);if(n){n.focus()}}_handleMultiSelect(e,t){const n=this._sortedItems;let r=-1;for(let o=0;o<this._items.length;o++){if(o===t){continue}const i=n[o].path;if(e.indexOf(i)!==-1){if(r===-1){r=o}else{if(Math.abs(t-o)<Math.abs(r-o)){r=o}}}}if(r===-1){r=0}for(let o=0;o<this._items.length;o++){if(r>=o&&t<=o||r<=o&&t>=o){this.selection[n[o].path]=true}}}_copy(){this._clipboard.length=0;(0,d.each)(this.selectedItems(),(e=>{this._clipboard.push(e.path)}))}async _delete(e){await Promise.all(e.map((e=>this._model.manager.deleteFile(e).catch((e=>{void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Delete Failed"),e)})))))}_doRename(){this._inRename=true;const e=this._sortedItems;const t=Object.keys(this.selection)[0];const n=d.ArrayExt.findFirstIndex(e,(e=>e.path===t));const o=this._items[n];const i=e[n];const s=this.renderer.getNameNode(o);const c=i.name;this._editNode.value=c;this._selectItem(n,false);return re.doRename(s,this._editNode,c).then((e=>{this.node.focus();if(!e||e===c){this._inRename=false;return c}if(!(0,l.isValidFileName)(e)){void(0,r.showErrorMessage)(this._trans.__("Rename Error"),Error(this._trans._p("showErrorMessage",'"%1" is not a valid name for a file. Names must have nonzero length, and cannot include "/", "\\", or ":"',e)));this._inRename=false;return c}if(this.isDisposed){this._inRename=false;throw new Error("File browser is disposed.")}const t=this._manager;const n=a.PathExt.join(this._model.path,c);const o=a.PathExt.join(this._model.path,e);const i=(0,l.renameFile)(t,n,o);return i.catch((e=>{if(e!=="File not renamed"){void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Rename Error"),e)}this._inRename=false;return c})).then((()=>{if(this.isDisposed){this._inRename=false;throw new Error("File browser is disposed.")}if(this._inRename){void this.selectItemByName(e)}this._inRename=false;return e}))}))}_selectItem(e,t,n=true){const r=this._sortedItems;if(!t){this.clearSelectedItems()}const o=r[e].path;this.selection[o]=true;if(!t&&n){this._focusSelectedFile(e)}this.update()}_onModelRefreshed(){const e=Object.keys(this.selection);this.clearSelectedItems();(0,d.each)(this._model.items(),(t=>{const n=t.path;if(e.indexOf(n)!==-1){this.selection[n]=true}}));if(this.isVisible){this.sort(this.sortState)}else{this._isDirty=true}}_onPathChanged(){this.clearSelectedItems();this.sort(this.sortState)}_onFileChanged(e,t){const n=t.newValue;if(!n){return}const r=n.name;if(t.type!=="new"||!r){return}void this.selectItemByName(r).catch((()=>{}))}_onActivateRequested(e,t){const n=a.PathExt.dirname(t);if(n!==this._model.path){return}const r=a.PathExt.basename(t);this.selectItemByName(r).catch((()=>{}))}}(function(e){class t{createNode(){const e=document.createElement("div");const t=document.createElement("div");const n=document.createElement("ul");n.className=T;t.className=B;e.appendChild(t);e.appendChild(n);e.tabIndex=0;return e}populateHeaderNode(e,t,n){var o;t=t||i.nullTranslator;const s=t.load("jupyterlab");const a=this.createHeaderItemNode(s.__("Name"));const l=document.createElement("div");const c=this.createHeaderItemNode(s.__("Last Modified"));a.classList.add(z);a.classList.add(U);c.classList.add(N);l.classList.add(F);l.textContent="...";e.appendChild(a);e.appendChild(l);e.appendChild(c);if((o=n===null||n===void 0?void 0:n.has)===null||o===void 0?void 0:o.call(n,"last_modified")){c.classList.add(H)}else{c.classList.remove(H)}re.updateCaret(r.DOMUtils.findElement(a,M),"right","up")}handleHeaderClick(e,t){const n=r.DOMUtils.findElement(e,z);const o=r.DOMUtils.findElement(e,N);const i={direction:"ascending",key:"name"};const s=t.target;if(n.contains(s)){const e=r.DOMUtils.findElement(o,M);const t=r.DOMUtils.findElement(n,M);if(n.classList.contains(U)){if(!n.classList.contains(J)){i.direction="descending";n.classList.add(J);re.updateCaret(t,"right","down")}else{n.classList.remove(J);re.updateCaret(t,"right","up")}}else{n.classList.remove(J);re.updateCaret(t,"right","up")}n.classList.add(U);o.classList.remove(U);o.classList.remove(J);re.updateCaret(e,"left");return i}if(o.contains(s)){const e=r.DOMUtils.findElement(o,M);const t=r.DOMUtils.findElement(n,M);i.key="last_modified";if(o.classList.contains(U)){if(!o.classList.contains(J)){i.direction="descending";o.classList.add(J);re.updateCaret(e,"left","down")}else{o.classList.remove(J);re.updateCaret(e,"left","up")}}else{o.classList.remove(J);re.updateCaret(e,"left","up")}o.classList.add(U);n.classList.remove(U);n.classList.remove(J);re.updateCaret(t,"right");return i}return i}createItemNode(e){var t;const n=document.createElement("li");const r=document.createElement("span");const o=document.createElement("span");const i=document.createElement("span");r.className=R;o.className=P;i.className=L;n.appendChild(r);n.appendChild(o);n.appendChild(i);o.tabIndex=0;if((t=e===null||e===void 0?void 0:e.has)===null||t===void 0?void 0:t.call(e,"last_modified")){i.classList.add(H)}else{i.classList.remove(H)}return n}updateItemNode(e,t,n,o,s){var l;o=o||i.nullTranslator;n=n||_.DocumentRegistry.getDefaultTextFileType(o);const{icon:u,iconClass:h,name:p}=n;o=o||i.nullTranslator;const m=o.load("jupyterlab");const g=r.DOMUtils.findElement(e,R);const f=r.DOMUtils.findElement(e,P);const A=r.DOMUtils.findElement(e,L);if((l=s===null||s===void 0?void 0:s.has)===null||l===void 0?void 0:l.call(s,"last_modified")){A.classList.add(H)}else{A.classList.remove(H)}c.LabIcon.resolveElement({icon:u,iconClass:(0,c.classes)(h,"jp-Icon"),container:g,className:R,stylesheet:"listing"});let v=m.__("Name: %1",t.name);if(t.size!==null&&t.size!==undefined){v+=m.__("\nSize: %1",re.formatFileSize(t.size,1,1024))}if(t.path){const e=a.PathExt.dirname(t.path);if(e){v+=m.__("\nPath: %1",e.substr(0,50));if(e.length>50){v+="..."}}}if(t.created){v+=m.__("\nCreated: %1",a.Time.format(new Date(t.created),"YYYY-MM-DD HH:mm:ss"))}if(t.last_modified){v+=m.__("\nModified: %1",a.Time.format(new Date(t.last_modified),"YYYY-MM-DD HH:mm:ss"))}v+=m.__("\nWritable: %1",t.writable);e.title=v;e.setAttribute("data-file-type",p);if(t.name.startsWith(".")){e.setAttribute("data-is-dot","true")}else{e.removeAttribute("data-is-dot")}if(f){const e=!t.indices?[]:t.indices;let n=d.StringExt.highlight(t.name,e,j.h.mark);j.VirtualDOM.render(j.h.span(n),f)}let C="";let b="";if(t.last_modified){C=a.Time.formatHuman(new Date(t.last_modified));b=a.Time.format(new Date(t.last_modified),"lll")}A.textContent=C;A.title=b}getNameNode(e){return r.DOMUtils.findElement(e,P)}createDragImage(e,t,n,o){const i=e.cloneNode(true);const s=r.DOMUtils.findElement(i,L);const a=r.DOMUtils.findElement(i,R);i.removeChild(s);if(!o){a.textContent="";a.className=""}else{a.textContent=o.iconLabel||"";a.className=o.iconClass||""}a.classList.add($);if(t>1){const e=r.DOMUtils.findElement(i,P);e.textContent=n._n("%1 Item","%1 Items",t)}return i}createHeaderItemNode(e){const t=document.createElement("div");const n=document.createElement("span");const r=document.createElement("span");t.className=S;n.className=D;r.className=M;n.textContent=e;t.appendChild(n);t.appendChild(r);return t}}e.Renderer=t;e.defaultRenderer=new t})(ne||(ne={}));var re;(function(e){function t(e,t,n){const r=e.parentElement;r.replaceChild(t,e);t.focus();const o=t.value.lastIndexOf(".");if(o===-1){t.setSelectionRange(0,t.value.length)}else{t.setSelectionRange(0,o)}return new Promise(((o,i)=>{t.onblur=()=>{r.replaceChild(e,t);o(t.value)};t.onkeydown=e=>{switch(e.keyCode){case 13:e.stopPropagation();e.preventDefault();t.blur();break;case 27:e.stopPropagation();e.preventDefault();t.value=n;t.blur();break;case 38:e.stopPropagation();e.preventDefault();if(t.selectionStart!==t.selectionEnd){t.selectionStart=t.selectionEnd=0}break;case 40:e.stopPropagation();e.preventDefault();if(t.selectionStart!==t.selectionEnd){t.selectionStart=t.selectionEnd=t.value.length}break;default:break}}}))}e.doRename=t;function n(e,t){const n=(0,d.toArray)(e);const r=t.direction==="descending"?1:-1;if(t.key==="last_modified"){n.sort(((e,t)=>{const n=e.type==="directory"?0:1;const o=t.type==="directory"?0:1;const i=new Date(e.last_modified).getTime();const s=new Date(t.last_modified).getTime();return n-o||(i-s)*r}))}else{n.sort(((e,t)=>{const n=e.type==="directory"?0:1;const o=t.type==="directory"?0:1;return n-o||t.name.localeCompare(e.name)*r}))}return n}e.sort=n;function r(e,t){return d.ArrayExt.findFirstIndex(e,(e=>u.ElementExt.hitTest(e,t.clientX,t.clientY)||t.target===e))}e.hitTestNodes=r;function o(e,t,n){if(e===0){return"0 Bytes"}const r=t||2;const o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"];const i=Math.floor(Math.log(e)/Math.log(n));if(i>=0&&i<o.length){return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+o[i]}else{return String(e)}}e.formatFileSize=o;function i(e,t,n){if(n){(n==="down"?c.caretDownIcon:c.caretUpIcon).element({container:e,tag:"span",stylesheet:"listingHeaderItem",float:t})}else{c.LabIcon.remove(e);e.className=M}}e.updateCaret=i})(re||(re={}));const oe="jp-FileBrowser";const ie="jp-FileBrowser-crumbs";const se="jp-FileBrowser-filterBox";const ae="jp-FileBrowser-toolbar";const le="jp-FileBrowser-listing";class ce extends s.Widget{constructor(e){super();this._showLastModifiedColumn=true;this._useFuzzyFilter=true;this._showHiddenFiles=false;this.addClass(oe);this.id=e.id;const t=this.model=e.model;const n=e.renderer;const o=this.translator;t.connectionFailure.connect(this._onConnectionFailure,this);this.translator=e.translator||i.nullTranslator;this._manager=t.manager;this._trans=this.translator.load("jupyterlab");this.crumbs=new C({model:t,translator:o});this.toolbar=new r.Toolbar;this.toolbar.node.setAttribute("role","navigation");this.toolbar.node.setAttribute("aria-label",this._trans.__("file browser"));this._directoryPending=false;this.listing=this.createDirListing({model:t,renderer:n,translator:this.translator});this._filenameSearcher=(0,r.FilenameSearcher)({updateFilter:(e,t)=>{this.listing.model.setFilter((t=>e(t.name.toLowerCase())))},useFuzzyFilter:this._useFuzzyFilter,placeholder:this._trans.__("Filter files by name")});this.crumbs.addClass(ie);this.toolbar.addClass(ae);this._filenameSearcher.addClass(se);this.listing.addClass(le);this.layout=new s.PanelLayout;this.layout.addWidget(this.toolbar);this.layout.addWidget(this._filenameSearcher);this.layout.addWidget(this.crumbs);this.layout.addWidget(this.listing);if(e.restore!==false){void t.restore(this.id)}}get navigateToCurrentDirectory(){return this._navigateToCurrentDirectory}set navigateToCurrentDirectory(e){this._navigateToCurrentDirectory=e}get showLastModifiedColumn(){return this._showLastModifiedColumn}set showLastModifiedColumn(e){if(this.listing.setColumnVisibility){this.listing.setColumnVisibility("last_modified",e);this._showLastModifiedColumn=e}else{console.warn("Listing does not support toggling column visibility")}}set useFuzzyFilter(e){this._useFuzzyFilter=e;this._filenameSearcher=(0,r.FilenameSearcher)({updateFilter:(e,t)=>{this.listing.model.setFilter((t=>e(t.name.toLowerCase())))},useFuzzyFilter:this._useFuzzyFilter,placeholder:this._trans.__("Filter files by name"),forceRefresh:true});this._filenameSearcher.addClass(se);this.layout.removeWidget(this._filenameSearcher);this.layout.removeWidget(this.crumbs);this.layout.removeWidget(this.listing);this.layout.addWidget(this._filenameSearcher);this.layout.addWidget(this.crumbs);this.layout.addWidget(this.listing)}get showHiddenFiles(){return this._showHiddenFiles}set showHiddenFiles(e){this.model.showHiddenFiles(e);this._showHiddenFiles=e}selectedItems(){return this.listing.selectedItems()}async selectItemByName(e){await this.listing.selectItemByName(e)}clearSelectedItems(){this.listing.clearSelectedItems()}rename(){return this.listing.rename()}cut(){this.listing.cut()}copy(){this.listing.copy()}paste(){return this.listing.paste()}createNewDirectory(){if(this._directoryPending===true){return}this._directoryPending=true;void this._manager.newUntitled({path:this.model.path,type:"directory"}).then((async e=>{await this.listing.selectItemByName(e.name);await this.rename();this._directoryPending=false})).catch((e=>{void(0,r.showErrorMessage)(this._trans.__("Error"),e);this._directoryPending=false}))}createNewFile(e){if(this._filePending===true){return}this._filePending=true;void this._manager.newUntitled({path:this.model.path,type:"file",ext:e.ext}).then((async e=>{await this.listing.selectItemByName(e.name);await this.rename();this._filePending=false})).catch((e=>{void(0,r.showErrorMessage)(this._trans.__("Error"),e);this._filePending=false}))}delete(){return this.listing.delete()}duplicate(){return this.listing.duplicate()}download(){return this.listing.download()}shutdownKernels(){return this.listing.shutdownKernels()}selectNext(){this.listing.selectNext()}selectPrevious(){this.listing.selectPrevious()}modelForClick(e){return this.listing.modelForClick(e)}createDirListing(e){return new ne(e)}_onConnectionFailure(e,t){if(t instanceof o.ServerConnection.ResponseError&&t.response.status===404){const e=this._trans.__("Directory not found");t.message=this._trans.__('Directory not found: "%1"',this.model.path);void(0,r.showErrorMessage)(e,t)}}}var de=n(6625);const ue=1e4;const he=15*1024*1024;const pe=1024*1024;class me{constructor(e){var t;this._connectionFailure=new x.Signal(this);this._fileChanged=new x.Signal(this);this._items=[];this._key="";this._pathChanged=new x.Signal(this);this._paths=new Set;this._pending=null;this._pendingPath=null;this._refreshed=new x.Signal(this);this._sessions=[];this._state=null;this._isDisposed=false;this._restored=new y.PromiseDelegate;this._uploads=[];this._uploadChanged=new x.Signal(this);this.manager=e.manager;this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._driveName=e.driveName||"";this._model={path:this.rootPath,name:a.PathExt.basename(this.rootPath),type:"directory",content:undefined,writable:false,created:"unknown",last_modified:"unknown",mimetype:"text/plain",format:"text"};this._state=e.state||null;const n=e.refreshInterval||ue;const{services:r}=e.manager;r.contents.fileChanged.connect(this.onFileChanged,this);r.sessions.runningChanged.connect(this.onRunningChanged,this);this._unloadEventListener=e=>{if(this._uploads.length>0){const t=this._trans.__("Files still uploading");e.returnValue=t;return t}};window.addEventListener("beforeunload",this._unloadEventListener);this._poll=new de.Poll({auto:(t=e.auto)!==null&&t!==void 0?t:true,name:"@jupyterlab/filebrowser:Model",factory:()=>this.cd("."),frequency:{interval:n,backoff:true,max:300*1e3},standby:"when-hidden"})}get connectionFailure(){return this._connectionFailure}get driveName(){return this._driveName}get restored(){return this._restored.promise}get fileChanged(){return this._fileChanged}get path(){return this._model?this._model.path:""}get rootPath(){return this._driveName?this._driveName+":":""}get pathChanged(){return this._pathChanged}get refreshed(){return this._refreshed}get specs(){return this.manager.services.kernelspecs.specs}get isDisposed(){return this._isDisposed}get uploadChanged(){return this._uploadChanged}uploads(){return new d.ArrayIterator(this._uploads)}dispose(){if(this.isDisposed){return}window.removeEventListener("beforeunload",this._unloadEventListener);this._isDisposed=true;this._poll.dispose();this._sessions.length=0;this._items.length=0;x.Signal.clearData(this)}items(){return new d.ArrayIterator(this._items)}sessions(){return new d.ArrayIterator(this._sessions)}async refresh(){await this._poll.refresh();await this._poll.tick;this._refreshed.emit(void 0)}async cd(e="."){if(e!=="."){e=this.manager.services.contents.resolvePath(this._model.path,e)}else{e=this._pendingPath||this._model.path}if(this._pending){if(e===this._pendingPath){return this._pending}await this._pending}const t=this.path;const n={content:true};this._pendingPath=e;if(t!==e){this._sessions.length=0}const r=this.manager.services;this._pending=r.contents.get(e,n).then((n=>{if(this.isDisposed){return}this.handleContents(n);this._pendingPath=null;this._pending=null;if(t!==e){if(this._state&&this._key){void this._state.save(this._key,{path:e})}this._pathChanged.emit({name:"path",oldValue:t,newValue:e})}this.onRunningChanged(r.sessions,r.sessions.running());this._refreshed.emit(void 0)})).catch((t=>{this._pendingPath=null;this._pending=null;if(t.response&&t.response.status===404&&e!=="/"){t.message=this._trans.__('Directory not found: "%1"',this._model.path);console.error(t);this._connectionFailure.emit(t);return this.cd("/")}else{this._connectionFailure.emit(t)}}));return this._pending}async download(e){const t=await this.manager.services.contents.getDownloadUrl(e);const n=document.createElement("a");n.href=t;n.download="";document.body.appendChild(n);n.click();document.body.removeChild(n);return void 0}async restore(e,t=true){const{manager:n}=this;const r=`file-browser-${e}:cwd`;const o=this._state;const i=!!this._key;if(i){return}this._key=r;if(!t||!o){this._restored.resolve(undefined);return}await n.services.ready;try{const e=await o.fetch(r);if(!e){this._restored.resolve(undefined);return}const t=e["path"];if(t){await this.cd("/")}const i=n.services.contents.localPath(t);await n.services.contents.get(t);await this.cd(i)}catch(s){await o.remove(r)}this._restored.resolve(undefined)}async upload(e){const t=a.PageConfig.getNotebookVersion();const n=t<[4,0,0]||t>=[5,1,0];const r=e.size>he;if(r&&!n){const t=this._trans.__("Cannot upload file (>%1 MB). %2",he/(1024*1024),e.name);console.warn(t);throw t}const o="File not uploaded";if(r&&!(await this._shouldUploadLarge(e))){throw"Cancelled large file upload"}await this._uploadCheckDisposed();await this.refresh();await this._uploadCheckDisposed();if((0,d.find)(this._items,(t=>t.name===e.name))&&!(await(0,l.shouldOverwrite)(e.name))){throw o}await this._uploadCheckDisposed();const i=n&&e.size>pe;return await this._upload(e,i)}async _shouldUploadLarge(e){const{button:t}=await(0,r.showDialog)({title:this._trans.__("Large file size warning"),body:this._trans.__("The file size is %1 MB. Do you still want to upload it?",Math.round(e.size/(1024*1024))),buttons:[r.Dialog.cancelButton({label:this._trans.__("Cancel")}),r.Dialog.warnButton({label:this._trans.__("Upload")})]});return t.accept}async _upload(e,t){let n=this._model.path;n=n?n+"/"+e.name:e.name;const r=e.name;const o="file";const i="base64";const s=async(t,s)=>{await this._uploadCheckDisposed();const a=new FileReader;a.readAsDataURL(t);await new Promise(((t,n)=>{a.onload=t;a.onerror=t=>n(`Failed to upload "${e.name}":`+t)}));await this._uploadCheckDisposed();const l=a.result.split(",")[1];const c={type:o,format:i,name:r,chunk:s,content:l};return await this.manager.services.contents.save(n,c)};if(!t){try{return await s(e)}catch(c){d.ArrayExt.removeFirstWhere(this._uploads,(t=>e.name===t.path));throw c}}let a;let l={path:n,progress:0};this._uploadChanged.emit({name:"start",newValue:l,oldValue:null});for(let u=0;!a;u+=pe){const t=u+pe;const r=t>=e.size;const o=r?-1:t/pe;const i={path:n,progress:u/e.size};this._uploads.splice(this._uploads.indexOf(l));this._uploads.push(i);this._uploadChanged.emit({name:"update",newValue:i,oldValue:l});l=i;let h;try{h=await s(e.slice(u,t),o)}catch(c){d.ArrayExt.removeFirstWhere(this._uploads,(t=>e.name===t.path));this._uploadChanged.emit({name:"failure",newValue:l,oldValue:null});throw c}if(r){a=h}}this._uploads.splice(this._uploads.indexOf(l));this._uploadChanged.emit({name:"finish",newValue:null,oldValue:l});return a}_uploadCheckDisposed(){if(this.isDisposed){return Promise.reject("Filemanager disposed. File upload canceled")}return Promise.resolve()}handleContents(e){this._model={name:e.name,path:e.path,type:e.type,content:undefined,writable:e.writable,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format};this._items=e.content;this._paths.clear();e.content.forEach((e=>{this._paths.add(e.path)}))}onRunningChanged(e,t){this._populateSessions(t);this._refreshed.emit(void 0)}onFileChanged(e,t){const n=this._model.path;const{sessions:r}=this.manager.services;const{oldValue:o,newValue:i}=t;const s=o&&o.path&&a.PathExt.dirname(o.path)===n?o:i&&i.path&&a.PathExt.dirname(i.path)===n?i:undefined;if(s){void this._poll.refresh();this._populateSessions(r.running());this._fileChanged.emit(t);return}}_populateSessions(e){this._sessions.length=0;(0,d.each)(e,(e=>{if(this._paths.has(e.path)){this._sessions.push(e)}}))}}class ge extends me{constructor(e){super(e);this._includeHiddenFiles=e.includeHiddenFiles||false}items(){return this._includeHiddenFiles?super.items():(0,d.filter)(super.items(),(e=>!e.name.startsWith(".")))}showHiddenFiles(e){this._includeHiddenFiles=e;void this.refresh()}}class fe extends ge{constructor(e){super(e);this._filter=e.filter?e.filter:e=>Object.freeze({})}items(){return(0,d.filter)(super.items(),((e,t)=>{if(e.type==="directory"){return true}else{const t=this._filter(e);if(typeof t!=="boolean"){e.indices=t===null||t===void 0?void 0:t.indices}return!!t}}))}setFilter(e){this._filter=e;void this.refresh()}}const Ae="jp-Open-Dialog";var ve;(function(e){function t(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");const o={title:e.title,buttons:[r.Dialog.cancelButton({label:n.__("Cancel")}),r.Dialog.okButton({label:n.__("Select")})],focusNodeSelector:e.focusNodeSelector,host:e.host,renderer:e.renderer,body:new Ce(e.manager,e.filter,t)};const s=new r.Dialog(o);return s.launch()}e.getOpenFiles=t;function n(e){return t(Object.assign(Object.assign({},e),{filter:e=>null}))}e.getExistingDirectory=n})(ve||(ve={}));class Ce extends s.Widget{constructor(e,t,n){super();n=n!==null&&n!==void 0?n:i.nullTranslator;const o=n.load("jupyterlab");this.addClass(Ae);this._browser=be.createFilteredFileBrowser("filtered-file-browser-dialog",e,t,{},n);(0,r.setToolbar)(this._browser,(e=>[{name:"new-folder",widget:new r.ToolbarButton({icon:c.newFolderIcon,onClick:()=>{e.createNewDirectory()},tooltip:o.__("New Folder")})},{name:"refresher",widget:new r.ToolbarButton({icon:c.refreshIcon,onClick:()=>{e.model.refresh().catch((e=>{console.error("Failed to refresh file browser in open dialog.",e)}))},tooltip:o.__("Refresh File List")})}]));const a=new s.PanelLayout;a.addWidget(this._browser);this.layout=a}getValue(){const e=(0,d.toArray)(this._browser.selectedItems());if(e.length===0){return[{path:this._browser.model.path,name:a.PathExt.basename(this._browser.model.path),type:"directory",content:undefined,writable:false,created:"unknown",last_modified:"unknown",mimetype:"text/plain",format:"text"}]}else{return e}}}var be;(function(e){e.createFilteredFileBrowser=(e,t,n,r={},o)=>{o=o||i.nullTranslator;const s=new fe({manager:t,filter:n,translator:o,driveName:r.driveName,refreshInterval:r.refreshInterval});const a=new ce({id:e,model:s,translator:o});return a}})(be||(be={}));const _e=new y.Token("@jupyterlab/filebrowser:IFileBrowserFactory");const ye=new y.Token("@jupyterlab/filebrowser:IFileBrowserCommands");class Ee extends r.ToolbarButton{constructor(e){super({icon:c.fileUploadIcon,onClick:()=>{this._input.click()},tooltip:we.translateToolTip(e.translator)});this._onInputChanged=()=>{const e=Array.prototype.slice.call(this._input.files);const t=e.map((e=>this.fileBrowserModel.upload(e)));void Promise.all(t).catch((e=>{void(0,r.showErrorMessage)(this._trans._p("showErrorMessage","Upload Error"),e)}))};this._onInputClicked=()=>{this._input.value=""};this._input=we.createUploadInput();this.fileBrowserModel=e.model;this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._input.onclick=this._onInputClicked;this._input.onchange=this._onInputChanged;this.addClass("jp-id-upload")}}var we;(function(e){function t(){const e=document.createElement("input");e.type="file";e.multiple=true;return e}e.createUploadInput=t;function n(e){e=e||i.nullTranslator;const t=e.load("jupyterlab");return t.__("Upload Files")}e.translateToolTip=n})(we||(we={}));var xe=n(85913);var je=n(77865);var ke=n.n(je);const Be=4;function Se(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");return ke().createElement(xe.GroupItem,{spacing:Be},ke().createElement(xe.TextItem,{source:n.__("Uploading")}),ke().createElement(xe.ProgressBar,{percentage:e.upload}))}const De=2e3;class Me extends r.VDomRenderer{constructor(e){super(new Me.Model(e.tracker.currentWidget&&e.tracker.currentWidget.model));this._onBrowserChange=(e,t)=>{if(t===null){this.model.browserModel=null}else{this.model.browserModel=t.model}};this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._tracker=e.tracker;this._tracker.currentChanged.connect(this._onBrowserChange)}render(){const e=this.model.items;if(e.length>0){const e=this.model.items[0];if(e.complete){return ke().createElement(xe.TextItem,{source:this._trans.__("Complete!")})}else{return ke().createElement(Se,{upload:this.model.items[0].progress,translator:this.translator})}}else{return ke().createElement(Se,{upload:100,translator:this.translator})}}dispose(){super.dispose();this._tracker.currentChanged.disconnect(this._onBrowserChange)}}(function(e){class t extends r.VDomModel{constructor(e){super();this._uploadChanged=(e,t)=>{if(t.name==="start"){this._items.push({path:t.newValue.path,progress:t.newValue.progress*100,complete:false})}else if(t.name==="update"){const e=d.ArrayExt.findFirstIndex(this._items,(e=>e.path===t.oldValue.path));if(e!==-1){this._items[e].progress=t.newValue.progress*100}}else if(t.name==="finish"){const e=d.ArrayExt.findFirstIndex(this._items,(e=>e.path===t.oldValue.path));if(e!==-1){this._items[e].complete=true;setTimeout((()=>{d.ArrayExt.removeAt(this._items,e);this.stateChanged.emit(void 0)}),De)}}else if(t.name==="failure"){d.ArrayExt.removeFirstWhere(this._items,(e=>e.path===t.newValue.path))}this.stateChanged.emit(void 0)};this._items=[];this._browserModel=null;this.browserModel=e}get items(){return this._items}get browserModel(){return this._browserModel}set browserModel(e){const t=this._browserModel;if(t){t.uploadChanged.disconnect(this._uploadChanged)}this._browserModel=e;this._items=[];if(this._browserModel!==null){this._browserModel.uploadChanged.connect(this._uploadChanged)}this.stateChanged.emit(void 0)}}e.Model=t})(Me||(Me={}))},59240:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(22748);var a=n(94683);var l=n(82401);var c=n(93379);var d=n.n(c);var u=n(36033);var h={};h.insert="head";h.singleton=false;var p=d()(u.Z,h);const m=u.Z.locals||{}},8863:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Commands:()=>w,default:()=>B,tabSpaceStatus:()=>j});var r=n(97577);var o=n(3378);var i=n(66934);var s=n(20452);var a=n(54917);var l=n(48767);var c=n(62608);var d=n(73704);var u=n(42014);var h=n(85913);var p=n(59768);var m=n(700);var g=n(69442);var f=n(25903);const A="notebook:toggle-autoclosing-brackets";const v="console:toggle-autoclosing-brackets";var C;(function(e){e.createNew="fileeditor:create-new";e.createNewMarkdown="fileeditor:create-new-markdown-file";e.changeFontSize="fileeditor:change-font-size";e.lineNumbers="fileeditor:toggle-line-numbers";e.lineWrap="fileeditor:toggle-line-wrap";e.changeTabs="fileeditor:change-tabs";e.matchBrackets="fileeditor:toggle-match-brackets";e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets";e.autoClosingBracketsUniversal="fileeditor:toggle-autoclosing-brackets-universal";e.createConsole="fileeditor:create-console";e.replaceSelection="fileeditor:replace-selection";e.runCode="fileeditor:run-code";e.runAllCode="fileeditor:run-all";e.markdownPreview="fileeditor:markdown-preview";e.undo="fileeditor:undo";e.redo="fileeditor:redo";e.cut="fileeditor:cut";e.copy="fileeditor:copy";e.paste="fileeditor:paste";e.selectAll="fileeditor:select-all"})(C||(C={}));const b="Editor";const _=["autoClosingBrackets","codeFolding","cursorBlinkRate","fontFamily","fontSize","insertSpaces","lineHeight","lineNumbers","lineWrap","matchBrackets","readOnly","rulers","showTrailingSpace","tabSize","wordWrapColumn"];function y(e){const t=Object.assign({},e);for(let n of Object.keys(e)){if(!_.includes(n)){delete e[n]}}return t}let E=y(i.CodeEditor.defaultConfig);var w;(function(e){function t(e){return async function t(n,r){var o;const i=r||{};const s=await e.execute("console:create",{activate:i["activate"],name:(o=n.context.contentsModel)===null||o===void 0?void 0:o.name,path:n.context.path,preferredLanguage:n.context.model.defaultKernelLanguage,ref:n.id,insertMode:"split-bottom"});n.context.pathChanged.connect(((e,t)=>{var r;s.session.setPath(t);s.session.setName((r=n.context.contentsModel)===null||r===void 0?void 0:r.name)}))}}function n(e,t){E=y(Object.assign(Object.assign({},i.CodeEditor.defaultConfig),e.get("editorConfig").composite));t.notifyCommandChanged()}e.updateSettings=n;function r(e){e.forEach((e=>{s(e.content)}))}e.updateTracker=r;function s(e){const t=e.editor;t.setOptions(Object.assign({},E))}e.updateWidget=s;function a(e,t,n,r,o,i,s){l(e,t,n,r);c(e,t,n,r,o);d(e,t,n,r,o);u(e,t,n,r);h(e,t,n,r,o);p(e,t,n,r);m(e,i,n,o);_(e,i,n,o);w(e,i,n,o);x(e,i,n,o);j(e,i,n);L(e,s,n);O(e,s,n);k(e,i,n,o);B(e,i,n,o);S(e,i,n,o);D(e,i,n,o);M(e,i,n,o);T(e,i,n,o)}e.addCommands=a;function l(e,t,n,r){e.addCommand(C.changeFontSize,{execute:e=>{const n=Number(e["delta"]);if(Number.isNaN(n)){console.error(`${C.changeFontSize}: delta arg must be a number`);return}const o=window.getComputedStyle(document.documentElement);const i=parseInt(o.getPropertyValue("--jp-code-font-size"),10);const s=E.fontSize||i;E.fontSize=s+n;return t.set(r,"editorConfig",E).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},label:e=>{var t;if(((t=e.delta)!==null&&t!==void 0?t:0)>0){return e.isMenu?n.__("Increase Text Editor Font Size"):n.__("Increase Font Size")}else{return e.isMenu?n.__("Decrease Text Editor Font Size"):n.__("Decrease Font Size")}}})}e.addChangeFontSizeCommand=l;function c(e,t,n,r,o){e.addCommand(C.lineNumbers,{execute:()=>{E.lineNumbers=!E.lineNumbers;return t.set(r,"editorConfig",E).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},isEnabled:o,isToggled:()=>E.lineNumbers,label:n.__("Line Numbers")})}e.addLineNumbersCommand=c;function d(e,t,n,r,o){e.addCommand(C.lineWrap,{execute:e=>{E.lineWrap=e["mode"]||"off";return t.set(r,"editorConfig",E).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},isEnabled:o,isToggled:e=>{const t=e["mode"]||"off";return E.lineWrap===t},label:n.__("Word Wrap")})}e.addWordWrapCommand=d;function u(e,t,n,r){e.addCommand(C.changeTabs,{label:e=>{var t;if(e.insertSpaces){return n._n("Spaces: %1","Spaces: %1",(t=e.size)!==null&&t!==void 0?t:0)}else{return n.__("Indent with Tab")}},execute:e=>{E.tabSize=e["size"]||4;E.insertSpaces=!!e["insertSpaces"];return t.set(r,"editorConfig",E).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},isToggled:e=>{const t=!!e["insertSpaces"];const n=e["size"]||4;return E.insertSpaces===t&&E.tabSize===n}})}e.addChangeTabsCommand=u;function h(e,t,n,r,o){e.addCommand(C.matchBrackets,{execute:()=>{E.matchBrackets=!E.matchBrackets;return t.set(r,"editorConfig",E).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},label:n.__("Match Brackets"),isEnabled:o,isToggled:()=>E.matchBrackets})}e.addMatchBracketsCommand=h;function p(e,t,n,r){e.addCommand(C.autoClosingBrackets,{execute:e=>{var n;E.autoClosingBrackets=!!((n=e["force"])!==null&&n!==void 0?n:!E.autoClosingBrackets);return t.set(r,"editorConfig",E).catch((e=>{console.error(`Failed to set ${r}: ${e.message}`)}))},label:n.__("Auto Close Brackets for Text Editor"),isToggled:()=>E.autoClosingBrackets});e.addCommand(C.autoClosingBracketsUniversal,{execute:()=>{const t=e.isToggled(C.autoClosingBrackets)||e.isToggled(A)||e.isToggled(v);if(t){void e.execute(C.autoClosingBrackets,{force:false});void e.execute(A,{force:false});void e.execute(v,{force:false})}else{void e.execute(C.autoClosingBrackets,{force:true});void e.execute(A,{force:true});void e.execute(v,{force:true})}},label:n.__("Auto Close Brackets"),isToggled:()=>e.isToggled(C.autoClosingBrackets)||e.isToggled(A)||e.isToggled(v)})}e.addAutoClosingBracketsCommand=p;function m(e,t,n,r){e.addCommand(C.replaceSelection,{execute:e=>{var n,r;const o=e["text"]||"";const i=t.currentWidget;if(!i){return}(r=(n=i.content.editor).replaceSelection)===null||r===void 0?void 0:r.call(n,o)},isEnabled:r,label:n.__("Replace Selection in Editor")})}e.addReplaceSelectionCommand=m;function _(e,n,r,o){e.addCommand(C.createConsole,{execute:r=>{const o=n.currentWidget;if(!o){return}return t(e)(o,r)},isEnabled:o,icon:f.consoleIcon,label:r.__("Create Console for Editor")})}e.addCreateConsoleCommand=_;function w(e,t,n,r){e.addCommand(C.runCode,{execute:()=>{var n;const r=(n=t.currentWidget)===null||n===void 0?void 0:n.content;if(!r){return}let o="";const i=r.editor;const s=r.context.path;const a=g.PathExt.extname(s);const l=i.getSelection();const{start:c,end:d}=l;let u=c.column!==d.column||c.line!==d.line;if(u){const e=i.getOffsetAt(l.start);const t=i.getOffsetAt(l.end);o=i.model.value.text.substring(e,t)}else if(g.MarkdownCodeBlocks.isMarkdown(a)){const{text:e}=i.model.value;const t=g.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const n of t){if(n.startLine<=c.line&&c.line<=n.endLine){o=n.code;u=true;break}}}if(!u){o=i.getLine(l.start.line);const e=i.getCursorPosition();if(e.line+1===i.lineCount){const e=i.model.value.text;i.model.value.text=e+"\n"}i.setCursorPosition({line:e.line+1,column:e.column})}const h=false;if(o){return e.execute("console:inject",{activate:h,code:o,path:s})}else{return Promise.resolve(void 0)}},isEnabled:r,label:n.__("Run Code")})}e.addRunCodeCommand=w;function x(e,t,n,r){e.addCommand(C.runAllCode,{execute:()=>{var n;const r=(n=t.currentWidget)===null||n===void 0?void 0:n.content;if(!r){return}let o="";const i=r.editor;const s=i.model.value.text;const a=r.context.path;const l=g.PathExt.extname(a);if(g.MarkdownCodeBlocks.isMarkdown(l)){const e=g.MarkdownCodeBlocks.findMarkdownCodeBlocks(s);for(const t of e){o+=t.code}}else{o=s}const c=false;if(o){return e.execute("console:inject",{activate:c,code:o,path:a})}else{return Promise.resolve(void 0)}},isEnabled:r,label:n.__("Run All Code")})}e.addRunAllCodeCommand=x;function j(e,t,n){e.addCommand(C.markdownPreview,{execute:()=>{const n=t.currentWidget;if(!n){return}const r=n.context.path;return e.execute("markdownviewer:open",{path:r,options:{mode:"split-right"}})},isVisible:()=>{const e=t.currentWidget;return e&&g.PathExt.extname(e.context.path)===".md"||false},icon:f.markdownIcon,label:n.__("Show Markdown Preview")})}e.addMarkdownPreviewCommand=j;function k(e,t,n,r){e.addCommand(C.undo,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}n.editor.undo()},isEnabled:()=>{var e;if(!r()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return true},icon:f.undoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Undo")})}e.addUndoCommand=k;function B(e,t,n,r){e.addCommand(C.redo,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}n.editor.redo()},isEnabled:()=>{var e;if(!r()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return true},icon:f.redoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Redo")})}e.addRedoCommand=B;function S(e,t,n,r){e.addCommand(C.cut,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const r=n.editor;const i=P(r);o.Clipboard.copyToSystem(i);r.replaceSelection&&r.replaceSelection("")},isEnabled:()=>{var e;if(!r()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return I(n.editor)},icon:f.cutIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Cut")})}e.addCutCommand=S;function D(e,t,n,r){e.addCommand(C.copy,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const r=n.editor;const i=P(r);o.Clipboard.copyToSystem(i)},isEnabled:()=>{var e;if(!r()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return I(n.editor)},icon:f.copyIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy")})}e.addCopyCommand=D;function M(e,t,n,r){e.addCommand(C.paste,{execute:async()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const r=n.editor;const o=window.navigator.clipboard;const i=await o.readText();if(i){r.replaceSelection&&r.replaceSelection(i)}},isEnabled:()=>{var e;return Boolean(r()&&((e=t.currentWidget)===null||e===void 0?void 0:e.content))},icon:f.pasteIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Paste")})}e.addPasteCommand=M;function T(e,t,n,r){e.addCommand(C.selectAll,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const r=n.editor;r.execCommand("selectAll")},isEnabled:()=>{var e;return Boolean(r()&&((e=t.currentWidget)===null||e===void 0?void 0:e.content))},label:n.__("Select All")})}e.addSelectAllCommand=T;function I(e){const t=e.getSelection();const{start:n,end:r}=t;const o=n.column!==r.column||n.line!==r.line;return o}function P(e){const t=e.getSelection();const n=e.getOffsetAt(t.start);const r=e.getOffsetAt(t.end);const o=e.model.value.text.substring(n,r);return o}function R(e,t,n="txt"){return e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n}).then((t=>{if(t!=undefined){return e.execute("docmanager:open",{path:t.path,factory:b})}}))}function L(e,t,n){e.addCommand(C.createNew,{label:e=>{var t,r;if(e.isPalette){return(t=e.paletteLabel)!==null&&t!==void 0?t:n.__("New Text File")}return(r=e.launcherLabel)!==null&&r!==void 0?r:n.__("Text File")},caption:e=>{var t;return(t=e.caption)!==null&&t!==void 0?t:n.__("Create a new text file")},icon:e=>{var t;return e.isPalette?undefined:f.LabIcon.resolve({icon:(t=e.iconName)!==null&&t!==void 0?t:f.textEditorIcon})},execute:n=>{var r;const o=n.cwd||t.defaultBrowser.model.path;return R(e,o,(r=n.fileExt)!==null&&r!==void 0?r:"txt")}})}e.addCreateNewCommand=L;function O(e,t,n){e.addCommand(C.createNewMarkdown,{label:e=>e["isPalette"]?n.__("New Markdown File"):n.__("Markdown File"),caption:n.__("Create a new markdown file"),icon:e=>e["isPalette"]?undefined:f.markdownIcon,execute:n=>{const r=n["cwd"]||t.defaultBrowser.model.path;return R(e,r,"md")}})}e.addCreateNewMarkdownCommand=O;function z(e,t){N(e,t);F(e,t)}e.addLauncherItems=z;function N(e,t){e.add({command:C.createNew,category:t.__("Other"),rank:1})}e.addCreateNewToLauncher=N;function F(e,t){e.add({command:C.createNewMarkdown,category:t.__("Other"),rank:2})}e.addCreateNewMarkdownToLauncher=F;function H(e,t,n){for(let r of n){e.add({command:C.createNew,category:t.__("Other"),rank:3,args:r})}}e.addKernelLanguageLauncherItems=H;function W(e,t){V(e,t);q(e,t);U(e,t);$(e,t)}e.addPaletteItems=W;function V(e,t){const n=t.__("Text Editor");const r={insertSpaces:false,size:4};const o=C.changeTabs;e.addItem({command:o,args:r,category:n});for(const i of[1,2,4,8]){const t={insertSpaces:true,size:i};e.addItem({command:o,args:t,category:n})}}e.addChangeTabsCommandsToPalette=V;function q(e,t){const n=t.__("Text Editor");e.addItem({command:C.createNew,args:{isPalette:true},category:n})}e.addCreateNewCommandToPalette=q;function U(e,t){const n=t.__("Text Editor");e.addItem({command:C.createNewMarkdown,args:{isPalette:true},category:n})}e.addCreateNewMarkdownCommandToPalette=U;function $(e,t){const n=t.__("Text Editor");const r=C.changeFontSize;let o={delta:1};e.addItem({command:r,args:o,category:n});o={delta:-1};e.addItem({command:r,args:o,category:n})}e.addChangeFontSizeCommandsToPalette=$;function K(e,t,n){const r=t.__("Text Editor");for(let o of n){e.addItem({command:C.createNew,args:Object.assign(Object.assign({},o),{isPalette:true}),category:r})}}e.addKernelLanguagePaletteItems=K;function Y(e,t,n,r,o,i){Z(e,n);J(e,n);X(e,t,n,r);if(o){Q(e,t,n,o,r,i)}}e.addMenuItems=Y;function G(e,t){for(let n of t){e.fileMenu.newMenu.addItem({command:C.createNew,args:n,rank:31})}}e.addKernelLanguageMenuItems=G;function Z(e,t){e.editMenu.undoers.add({tracker:t,undo:e=>{e.content.editor.undo()},redo:e=>{e.content.editor.redo()}})}e.addUndoRedoToEditMenu=Z;function J(e,t){e.viewMenu.editorViewers.add({tracker:t,toggleLineNumbers:e=>{const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},toggleWordWrap:e=>{const t=e.content.editor.getOption("lineWrap");const n=t==="off"?"on":"off";e.content.editor.setOption("lineWrap",n)},toggleMatchBrackets:e=>{const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},lineNumbersToggled:e=>e.content.editor.getOption("lineNumbers"),wordWrapToggled:e=>e.content.editor.getOption("lineWrap")!=="off",matchBracketsToggled:e=>e.content.editor.getOption("matchBrackets")})}e.addEditorViewerToViewMenu=J;function X(e,n,r,o){const i=t(n);e.fileMenu.consoleCreators.add({tracker:r,createConsoleLabel:e=>o.__("Create Console for Editor"),createConsole:i})}e.addConsoleCreatorToFileMenu=X;function Q(e,t,n,r,i,s){e.runMenu.codeRunners.add({tracker:n,runLabel:e=>i.__("Run Code"),runAllLabel:e=>i.__("Run All Code"),restartAndRunAllLabel:e=>i.__("Restart Kernel and Run All Code"),isEnabled:e=>!!r.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path})),run:()=>t.execute(C.runCode),runAll:()=>t.execute(C.runAllCode),restartAndRunAll:e=>{const n=r.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path}));if(n){return(s||o.sessionContextDialogs).restart(n.sessionContext).then((e=>{if(e){void t.execute(C.runAllCode)}return e}))}}})}e.addCodeRunnersToRunMenu=Q})(w||(w={}));const x={activate:S,id:"@jupyterlab/fileeditor-extension:plugin",requires:[i.IEditorServices,a.IFileBrowserFactory,u.ISettingRegistry,p.ITranslator],optional:[s.IConsoleTracker,o.ICommandPalette,c.ILauncher,d.IMainMenu,r.ILayoutRestorer,o.ISessionContextDialogs,o.IToolbarWidgetRegistry],provides:l.IEditorTracker,autoStart:true};const j={id:"@jupyterlab/fileeditor-extension:tab-space-status",autoStart:true,requires:[l.IEditorTracker,u.ISettingRegistry,p.ITranslator],optional:[h.IStatusBar],activate:(e,t,n,r,o)=>{const s=r.load("jupyterlab");if(!o){return}const a=new m.Menu({commands:e.commands});const c="fileeditor:change-tabs";const{shell:d}=e;const u={insertSpaces:false,size:4,name:s.__("Indent with Tab")};a.addItem({command:c,args:u});for(const i of[1,2,4,8]){const e={insertSpaces:true,size:i,name:s._n("Spaces: %1","Spaces: %1",i)};a.addItem({command:c,args:e})}const h=new l.TabSpaceStatus({menu:a,translator:r});const p=e=>{h.model.config=Object.assign(Object.assign({},i.CodeEditor.defaultConfig),e.get("editorConfig").composite)};void Promise.all([n.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{p(e);e.changed.connect(p)}));o.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:h,align:"right",rank:1,isActive:()=>!!d.currentWidget&&t.has(d.currentWidget)})}};const k=[x,j];const B=k;function S(e,t,n,r,i,s,a,c,d,u,h,p){const m=x.id;const g=i.load("jupyterlab");const f="editor";let A;if(p){A=(0,o.createToolbarFactory)(p,r,b,m,i)}const v=new l.FileEditorFactory({editorServices:t,factoryOptions:{name:b,fileTypes:["markdown","*"],defaultFor:["markdown","*"],toolbarFactory:A,translator:i}});const{commands:C,restored:_,shell:y}=e;const E=new o.WidgetTracker({namespace:f});const j=()=>E.currentWidget!==null&&E.currentWidget===y.currentWidget;const k=new Map([["python",[{fileExt:"py",iconName:"ui-components:python",launcherLabel:g.__("Python File"),paletteLabel:g.__("New Python File"),caption:g.__("Create a new Python file")}]],["julia",[{fileExt:"jl",iconName:"ui-components:julia",launcherLabel:g.__("Julia File"),paletteLabel:g.__("New Julia File"),caption:g.__("Create a new Julia file")}]],["R",[{fileExt:"r",iconName:"ui-components:r-kernel",launcherLabel:g.__("R File"),paletteLabel:g.__("New R File"),caption:g.__("Create a new R file")}]]]);const B=async()=>{var t,n;const r=e.serviceManager.kernelspecs;await r.ready;let o=new Set;const i=(n=(t=r.specs)===null||t===void 0?void 0:t.kernelspecs)!==null&&n!==void 0?n:{};Object.keys(i).forEach((e=>{const t=i[e];if(t){const e=k.get(t.language);e===null||e===void 0?void 0:e.forEach((e=>o.add(e)))}}));return o};if(u){void u.restore(E,{command:"docmanager:open",args:e=>({path:e.context.path,factory:b}),name:e=>e.context.path})}Promise.all([r.load(m),_]).then((([e])=>{w.updateSettings(e,C);w.updateTracker(E);e.changed.connect((()=>{w.updateSettings(e,C);w.updateTracker(E)}))})).catch((e=>{console.error(e.message);w.updateTracker(E)}));v.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void E.save(t)}));void E.add(t);w.updateWidget(t.content)}));e.docRegistry.addWidgetFactory(v);E.widgetAdded.connect(((e,t)=>{w.updateWidget(t.content)}));w.addCommands(C,r,g,m,j,E,n);if(c){w.addLauncherItems(c,g)}if(a){w.addPaletteItems(a,g)}if(d){w.addMenuItems(d,C,E,g,s,h)}B().then((e=>{if(c){w.addKernelLanguageLauncherItems(c,g,e)}if(a){w.addKernelLanguagePaletteItems(a,g,e)}if(d){w.addKernelLanguageMenuItems(d,e)}})).catch((e=>{console.error(e.message)}));return E}},71821:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(49914);var a=n(98328);var l=n(37935);var c=n(94683);var d=n(90516);var u=n(59240);var h=n(42650);var p=n(33379);var m=n(52812);var g=n(74518)},79378:(e,t,n)=>{"use strict";n.r(t);n.d(t,{FileEditor:()=>C,FileEditorCodeWrapper:()=>v,FileEditorFactory:()=>b,IEditorTracker:()=>u,TabSpaceStatus:()=>c});var r=n(3378);var o=n(85913);var i=n(59768);var s=n(77865);var a=n.n(s);function l(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");const r=e.isSpaces?n.__("Spaces"):n.__("Tab Size");return a().createElement(o.TextItem,{onClick:e.handleClick,source:`${r}: ${e.tabSpace}`,title:n.__("Change Tab indentation")})}class c extends r.VDomRenderer{constructor(e){super(new c.Model);this._popup=null;this._menu=e.menu;this.translator=e.translator||i.nullTranslator;this.addClass(o.interactiveItem)}render(){if(!this.model||!this.model.config){return null}else{return a().createElement(l,{isSpaces:this.model.config.insertSpaces,tabSpace:this.model.config.tabSize,handleClick:()=>this._handleClick(),translator:this.translator})}}_handleClick(){const e=this._menu;if(this._popup){this._popup.dispose()}e.aboutToClose.connect(this._menuClosed,this);this._popup=(0,o.showPopup)({body:e,anchor:this,align:"right"})}_menuClosed(){this.removeClass(o.clickedItem)}}(function(e){class t extends r.VDomModel{constructor(){super(...arguments);this._config=null}get config(){return this._config}set config(e){const t=this._config;this._config=e;this._triggerChange(t,this._config)}_triggerChange(e,t){const n=e&&e.insertSpaces;const r=e&&e.tabSize;const o=t&&t.insertSpaces;const i=t&&t.tabSize;if(n!==o||r!==i){this.stateChanged.emit(void 0)}}}e.Model=t})(c||(c={}));var d=n(91100);const u=new d.Token("@jupyterlab/fileeditor:IEditorTracker");var h=n(66934);var p=n(34576);var m=n(25903);var g=n(700);const f="jpCodeRunner";const A="jpUndoer";class v extends h.CodeEditorWrapper{constructor(e){super({factory:e.factory,model:e.context.model});this._ready=new d.PromiseDelegate;const t=this._context=e.context;this.addClass("jp-FileEditorCodeWrapper");this.node.dataset[f]="true";this.node.dataset[A]="true";void t.ready.then((()=>{this._onContextReady()}));if(t.model.modelDB.isCollaborative){const e=t.model.modelDB;void e.connected.then((()=>{const t=e.collaborators;if(!t){return}const n=t.localCollaborator;this.editor.uuid=n.sessionId;this.editor.selectionStyle=Object.assign(Object.assign({},h.CodeEditor.defaultSelectionStyle),{color:n.color});t.changed.connect(this._onCollaboratorsChanged,this);this._onCollaboratorsChanged()}))}}get context(){return this._context}get ready(){return this._ready.promise}_onContextReady(){if(this.isDisposed){return}this.editor.clearHistory();this._ready.resolve(undefined)}_onCollaboratorsChanged(){const e=this._context.model.modelDB.collaborators;if(!e){return}for(const t of this.editor.model.selections.keys()){if(!e.has(t)){this.editor.model.selections.delete(t)}}}}class C extends g.Widget{constructor(e){super();this.addClass("jp-FileEditor");const t=this._context=e.context;this._mimeTypeService=e.mimeTypeService;const n=this.editorWidget=new v(e);this.editor=n.editor;this.model=n.model;t.pathChanged.connect(this._onPathChanged,this);this._onPathChanged();const r=this.layout=new g.StackedLayout;r.addWidget(n)}get context(){return this.editorWidget.context}get ready(){return this.editorWidget.ready}handleEvent(e){if(!this.model){return}switch(e.type){case"mousedown":this._ensureFocus();break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("mousedown",this)}onBeforeDetach(e){const t=this.node;t.removeEventListener("mousedown",this)}onActivateRequest(e){this._ensureFocus()}_ensureFocus(){if(!this.editor.hasFocus()){this.editor.focus()}}_onPathChanged(){const e=this.editor;const t=this._context.localPath;e.model.mimeType=this._mimeTypeService.getMimeTypeByFilePath(t)}}class b extends p.ABCWidgetFactory{constructor(e){super(e.factoryOptions);this._services=e.editorServices}createNewWidget(e){const t=this._services.factoryService.newDocumentEditor;const n=e=>t(e);const r=new C({factory:n,context:e,mimeTypeService:this._services.mimeTypeService});r.title.icon=m.textEditorIcon;const o=new p.DocumentWidget({content:r,context:e});return o}}},33379:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(49914);var a=n(94683);var l=n(93379);var c=n.n(l);var d=n(5751);var u={};u.insert="head";u.singleton=false;var h=c()(d.Z,u);const p=d.Z.locals||{}},16783:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>x});var r=n(97577);var o=n(3378);var i=n(69442);var s=n(73704);var a=n(59768);var l=n(25903);var c=n(77865);var d=n(22248);var u=n(91100);var h=n(18987);var p=n(3967);var m=n(700);class g extends m.SplitPanel{constructor(e){super();this.addClass("jp-Licenses");this.model=e.model;this.initLeftPanel();this.initFilters();this.initBundles();this.initGrid();this.initLicenseText();this.setRelativeSizes([1,2,3]);void this.model.initLicenses().then((()=>this._updateBundles()));this.model.trackerDataChanged.connect((()=>{this.title.label=this.model.title}))}dispose(){if(this.isDisposed){return}this._bundles.currentChanged.disconnect(this.onBundleSelected,this);this.model.dispose();super.dispose()}initLeftPanel(){this._leftPanel=new m.Panel;this._leftPanel.addClass("jp-Licenses-FormArea");this.addWidget(this._leftPanel);m.SplitPanel.setStretch(this._leftPanel,1)}initFilters(){this._filters=new g.Filters(this.model);m.SplitPanel.setStretch(this._filters,1);this._leftPanel.addWidget(this._filters)}initBundles(){this._bundles=new m.TabBar({orientation:"vertical",renderer:new g.BundleTabRenderer(this.model)});this._bundles.addClass("jp-Licenses-Bundles");m.SplitPanel.setStretch(this._bundles,1);this._leftPanel.addWidget(this._bundles);this._bundles.currentChanged.connect(this.onBundleSelected,this);this.model.stateChanged.connect((()=>this._bundles.update()))}initGrid(){this._grid=new g.Grid(this.model);m.SplitPanel.setStretch(this._grid,1);this.addWidget(this._grid)}initLicenseText(){this._licenseText=new g.FullText(this.model);m.SplitPanel.setStretch(this._grid,1);this.addWidget(this._licenseText)}onBundleSelected(){var e;if((e=this._bundles.currentTitle)===null||e===void 0?void 0:e.label){this.model.currentBundleName=this._bundles.currentTitle.label}}_updateBundles(){this._bundles.clearTabs();let e=0;const{currentBundleName:t}=this.model;let n=0;for(const r of this.model.bundleNames){const o=new m.Widget;o.title.label=r;if(r===t){n=e}this._bundles.insertTab(++e,o.title)}this._bundles.currentIndex=n}}(function(e){e.REPORT_FORMATS={markdown:{id:"markdown",title:"Markdown",icon:l.markdownIcon},csv:{id:"csv",title:"CSV",icon:l.spreadsheetIcon},json:{id:"csv",title:"JSON",icon:l.jsonIcon}};e.DEFAULT_FORMAT="markdown";class t extends o.VDomModel{constructor(e){super();this._selectedPackageChanged=new h.Signal(this);this._trackerDataChanged=new h.Signal(this);this._currentPackageIndex=0;this._licensesReady=new u.PromiseDelegate;this._packageFilter={};this._trans=e.trans;this._licensesUrl=e.licensesUrl;this._serverSettings=e.serverSettings||d.ServerConnection.makeSettings();if(e.currentBundleName){this._currentBundleName=e.currentBundleName}if(e.packageFilter){this._packageFilter=e.packageFilter}if(e.currentPackageIndex){this._currentPackageIndex=e.currentPackageIndex}}async initLicenses(){try{const e=await d.ServerConnection.makeRequest(this._licensesUrl,{},this._serverSettings);this._serverResponse=await e.json();this._licensesReady.resolve();this.stateChanged.emit(void 0)}catch(e){this._licensesReady.reject(e)}}async download(e){const t=`${this._licensesUrl}?format=${e.format}&download=1`;const n=document.createElement("a");n.href=t;n.download="";document.body.appendChild(n);n.click();document.body.removeChild(n);return void 0}get selectedPackageChanged(){return this._selectedPackageChanged}get trackerDataChanged(){return this._trackerDataChanged}get bundleNames(){var e;return Object.keys(((e=this._serverResponse)===null||e===void 0?void 0:e.bundles)||{})}get currentBundleName(){if(this._currentBundleName){return this._currentBundleName}if(this.bundleNames.length){return this.bundleNames[0]}return null}set currentBundleName(e){if(this._currentBundleName!==e){this._currentBundleName=e;this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}}get licensesReady(){return this._licensesReady.promise}get bundles(){var e;return((e=this._serverResponse)===null||e===void 0?void 0:e.bundles)||{}}get currentPackageIndex(){return this._currentPackageIndex}set currentPackageIndex(e){if(this._currentPackageIndex===e){return}this._currentPackageIndex=e;this._selectedPackageChanged.emit(void 0);this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}get currentPackage(){var e;if(this.currentBundleName&&this.bundles&&this._currentPackageIndex!=null){return this.getFilteredPackages(((e=this.bundles[this.currentBundleName])===null||e===void 0?void 0:e.packages)||[])[this._currentPackageIndex]}return null}get trans(){return this._trans}get title(){return`${this._currentBundleName||""} ${this._trans.__("Licenses")}`.trim()}get packageFilter(){return this._packageFilter}set packageFilter(e){this._packageFilter=e;this.stateChanged.emit(void 0);this._trackerDataChanged.emit(void 0)}getFilteredPackages(e){let t=[];let n=Object.entries(this._packageFilter).filter((([e,t])=>t&&`${t}`.trim().length)).map((([e,t])=>[e,`${t}`.toLowerCase().trim().split(" ")]));for(const r of e){let e=0;for(const[t,o]of n){let n=0;let i=`${r[t]}`.toLowerCase();for(const e of o){if(i.includes(e)){n+=1}}if(n){e+=1}}if(e===n.length){t.push(r)}}return Object.values(t)}}e.Model=t;class n extends o.VDomRenderer{constructor(e){super(e);this.renderFilter=e=>{const t=this.model.packageFilter[e]||"";return c.createElement("input",{type:"text",name:e,defaultValue:t,className:"jp-mod-styled",onInput:this.onFilterInput})};this.onFilterInput=e=>{const t=e.currentTarget;const{name:n,value:r}=t;this.model.packageFilter=Object.assign(Object.assign({},this.model.packageFilter),{[n]:r})};this.addClass("jp-Licenses-Filters");this.addClass("jp-RenderedHTMLCommon")}render(){const{trans:e}=this.model;return c.createElement("div",null,c.createElement("label",null,c.createElement("strong",null,e.__("Filter Licenses By"))),c.createElement("ul",null,c.createElement("li",null,c.createElement("label",null,e.__("Package")),this.renderFilter("name")),c.createElement("li",null,c.createElement("label",null,e.__("Version")),this.renderFilter("versionInfo")),c.createElement("li",null,c.createElement("label",null,e.__("License")),this.renderFilter("licenseId"))),c.createElement("label",null,c.createElement("strong",null,e.__("Distributions"))))}}e.Filters=n;class r extends m.TabBar.Renderer{constructor(e){super();this.closeIconSelector=".lm-TabBar-tabCloseIcon";this.model=e}renderTab(e){let t=e.title.caption;let n=this.createTabKey(e);let r=this.createTabStyle(e);let o=this.createTabClass(e);let i=this.createTabDataset(e);return p.h.li({key:n,className:o,title:t,style:r,dataset:i},this.renderIcon(e),this.renderLabel(e),this.renderCountBadge(e))}renderCountBadge(e){const t=e.title.label;const{bundles:n}=this.model;const r=this.model.getFilteredPackages((n&&t?n[t].packages:[])||[]);return p.h.label({},`${r.length}`)}}e.BundleTabRenderer=r;class i extends o.VDomRenderer{constructor(e){super(e);this.renderRow=(e,t)=>{const n=t===this.model.currentPackageIndex;const r=()=>this.model.currentPackageIndex=t;return c.createElement("tr",{key:e.name,className:n?"jp-mod-selected":"",onClick:r},c.createElement("td",null,c.createElement("input",{type:"radio",name:"show-package-license",value:t,onChange:r,checked:n})),c.createElement("th",null,e.name),c.createElement("td",null,c.createElement("code",null,e.versionInfo)),c.createElement("td",null,c.createElement("code",null,e.licenseId)))};this.addClass("jp-Licenses-Grid");this.addClass("jp-RenderedHTMLCommon")}render(){var e;const{bundles:t,currentBundleName:n,trans:r}=this.model;const o=this.model.getFilteredPackages(t&&n?((e=t[n])===null||e===void 0?void 0:e.packages)||[]:[]);if(!o.length){return c.createElement("blockquote",null,c.createElement("em",null,r.__("No Packages found")))}return c.createElement("form",null,c.createElement("table",null,c.createElement("thead",null,c.createElement("tr",null,c.createElement("td",null),c.createElement("th",null,r.__("Package")),c.createElement("th",null,r.__("Version")),c.createElement("th",null,r.__("License")))),c.createElement("tbody",null,o.map(this.renderRow))))}}e.Grid=i;class s extends o.VDomRenderer{constructor(e){super(e);this.addClass("jp-Licenses-Text");this.addClass("jp-RenderedHTMLCommon");this.addClass("jp-RenderedMarkdown")}render(){const{currentPackage:e,trans:t}=this.model;let n="";let r=t.__("No Package selected");let o="";if(e){const{name:i,versionInfo:s,licenseId:a,extractedText:l}=e;n=`${i} v${s}`;r=`${t.__("License")}: ${a||t.__("No License ID found")}`;o=l||t.__("No License Text found")}return[c.createElement("h1",{key:"h1"},n),c.createElement("blockquote",{key:"quote"},c.createElement("em",null,r)),c.createElement("code",{key:"code"},o)]}}e.FullText=s})(g||(g={}));var f;(function(e){e.open="help:open";e.about="help:about";e.activate="help:activate";e.close="help:close";e.show="help:show";e.hide="help:hide";e.launchClassic="help:launch-classic-notebook";e.jupyterForum="help:jupyter-forum";e.licenses="help:licenses";e.licenseReport="help:license-report";e.refreshLicenses="help:licenses-refresh"})(f||(f={}));const A=window.location.protocol==="https:";const v="jp-Help";const C={id:"@jupyterlab/help-extension:about",autoStart:true,requires:[a.ITranslator],optional:[o.ICommandPalette],activate:(e,t,n)=>{const{commands:r}=e;const i=t.load("jupyterlab");const s=i.__("Help");r.addCommand(f.about,{label:i.__("About %1",e.name),execute:()=>{const t=i.__("Version %1",e.version);const n=c.createElement("span",{className:"jp-About-version-info"},c.createElement("span",{className:"jp-About-version"},t));const r=c.createElement("span",{className:"jp-About-header"},c.createElement(l.jupyterIcon.react,{margin:"7px 9.5px",height:"auto",width:"58px"}),c.createElement("div",{className:"jp-About-header-info"},c.createElement(l.jupyterlabWordmarkIcon.react,{height:"auto",width:"196px"}),n));const s="https://jupyter.org/about.html";const a="https://github.com/jupyterlab/jupyterlab/graphs/contributors";const d=c.createElement("span",{className:"jp-About-externalLinks"},c.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("CONTRIBUTOR LIST")),c.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"jp-Button-flat"},i.__("ABOUT PROJECT JUPYTER")));const u=c.createElement("span",{className:"jp-About-copyright"},i.__(" 2015-2022 Project Jupyter Contributors"));const h=c.createElement("div",{className:"jp-About-body"},d,u);return(0,o.showDialog)({title:r,body:h,buttons:[o.Dialog.createButton({label:i.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}});if(n){n.addItem({command:f.about,category:s})}}};const b={id:"@jupyterlab/help-extension:launch-classic",autoStart:true,requires:[a.ITranslator],optional:[o.ICommandPalette],activate:(e,t,n)=>{const{commands:r}=e;const o=t.load("jupyterlab");const s=o.__("Help");r.addCommand(f.launchClassic,{label:o.__("Launch Classic Notebook"),execute:()=>{window.open(i.PageConfig.getBaseUrl()+"tree")}});if(n){n.addItem({command:f.launchClassic,category:s})}}};const _={id:"@jupyterlab/help-extension:jupyter-forum",autoStart:true,requires:[a.ITranslator],optional:[o.ICommandPalette],activate:(e,t,n)=>{const{commands:r}=e;const o=t.load("jupyterlab");const i=o.__("Help");r.addCommand(f.jupyterForum,{label:o.__("Jupyter Forum"),execute:()=>{window.open("https://discourse.jupyter.org/c/jupyterlab")}});if(n){n.addItem({command:f.jupyterForum,category:i})}}};const y={id:"@jupyterlab/help-extension:resources",autoStart:true,requires:[s.IMainMenu,a.ITranslator],optional:[o.ICommandPalette,r.ILayoutRestorer],activate:(e,t,n,r,s)=>{const a=n.load("jupyterlab");let l=0;const d=a.__("Help");const u="help-doc";const{commands:h,shell:p,serviceManager:m}=e;const g=new o.WidgetTracker({namespace:u});const C=[{text:a.__("JupyterLab Reference"),url:"https://jupyterlab.readthedocs.io/en/3.4.x/"},{text:a.__("JupyterLab FAQ"),url:"https://jupyterlab.readthedocs.io/en/3.4.x/getting_started/faq.html"},{text:a.__("Jupyter Reference"),url:"https://jupyter.org/documentation"},{text:a.__("Markdown Reference"),url:"https://commonmark.org/help/"}];C.sort(((e,t)=>e.text.localeCompare(t.text)));if(s){void s.restore(g,{command:f.open,args:e=>({url:e.content.url,text:e.content.title.label}),name:e=>e.content.url})}function b(e,t){const n=new o.IFrame({sandbox:["allow-scripts","allow-forms"]});n.url=e;n.addClass(v);n.title.label=t;n.id=`${u}-${++l}`;const r=new o.MainAreaWidget({content:n});r.addClass("jp-Help");return r}const _=t.helpMenu;const y=C.map((e=>({args:e,command:f.open})));_.addGroup(y,10);const E=new Map;m.sessions.runningChanged.connect(((t,n)=>{var r;if(!n.length){return}const i=n[n.length-1];if(!i.kernel||E.has(i.kernel.name)){return}const s=m.sessions.connectTo({model:i,kernelConnectionOptions:{handleComms:false}});void((r=s.kernel)===null||r===void 0?void 0:r.info.then((t=>{var n,r;const i=s.kernel.name;if(E.has(i)){return}E.set(i,t);const l=()=>{let t=false;const n=e.shell.currentWidget;if(!n){return t}_.kernelUsers.forEach((e=>{var r;if(e.tracker.has(n)&&((r=e.getKernel(n))===null||r===void 0?void 0:r.name)===i){t=true}}));return t};const d=`help-menu-${i}:banner`;const u=(r=(n=m.kernelspecs)===null||n===void 0?void 0:n.specs)===null||r===void 0?void 0:r.kernelspecs[i];if(!u){return}const p=u.display_name;let g=u.resources["logo-64x64"];h.addCommand(d,{label:a.__("About the %1 Kernel",p),isVisible:l,isEnabled:l,execute:()=>{const e=c.createElement("img",{src:g});const n=c.createElement("span",{className:"jp-About-header"},e,c.createElement("div",{className:"jp-About-header-info"},p));const r=c.createElement("pre",null,t.banner);const i=c.createElement("div",{className:"jp-About-body"},r);return(0,o.showDialog)({title:n,body:i,buttons:[o.Dialog.createButton({label:a.__("Dismiss"),className:"jp-About-button jp-mod-reject jp-mod-styled"})]})}});_.addGroup([{command:d}],20);const A=[];(t.help_links||[]).forEach((e=>{const t=`help-menu-${i}:${e.text}`;h.addCommand(t,{label:e.text,isVisible:l,isEnabled:l,execute:()=>h.execute(f.open,e)});A.push({command:t})}));_.addGroup(A,21);s.dispose()})))}));h.addCommand(f.open,{label:e=>e["text"],execute:e=>{const t=e["url"];const n=e["text"];const r=e["newBrowserTab"]||false;if(r||A&&i.URLExt.parse(t).protocol!=="https:"){window.open(t);return}const o=b(t,n);void g.add(o);p.add(o,"main");return o}});if(r){C.forEach((e=>{r.addItem({args:e,command:f.open,category:d})}));r.addItem({args:{reload:true},command:"apputils:reset",category:d})}}};const E={id:"@jupyterlab/help-extension:licenses",autoStart:true,requires:[a.ITranslator],optional:[s.IMainMenu,o.ICommandPalette,r.ILayoutRestorer],activate:(e,t,n,r,s)=>{if(!i.PageConfig.getOption("licensesUrl")){return}const{commands:a,shell:c}=e;const d=t.load("jupyterlab");const u=d.__("Help");const h=d.__("Download All Licenses as");const p=d.__("Licenses");const m=d.__("Refresh Licenses");let A=0;const v=i.URLExt.join(i.PageConfig.getBaseUrl(),i.PageConfig.getOption("licensesUrl"))+"/";const C="help-licenses";const b=new o.WidgetTracker({namespace:C});function _(e){return g.REPORT_FORMATS[e]||g.REPORT_FORMATS[g.DEFAULT_FORMAT]}function y(t){const n=new g.Model(Object.assign(Object.assign({},t),{licensesUrl:v,trans:d,serverSettings:e.serviceManager.serverSettings}));const r=new g({model:n});r.id=`${C}-${++A}`;r.title.label=p;r.title.icon=l.copyrightIcon;const i=new o.MainAreaWidget({content:r,reveal:n.licensesReady});i.toolbar.addItem("refresh-licenses",new o.CommandToolbarButton({id:f.refreshLicenses,args:{noLabel:1},commands:a}));i.toolbar.addItem("spacer",o.Toolbar.createSpacerItem());for(const e of Object.keys(g.REPORT_FORMATS)){const t=new o.CommandToolbarButton({id:f.licenseReport,args:{format:e,noLabel:1},commands:a});i.toolbar.addItem(`download-${e}`,t)}return i}a.addCommand(f.licenses,{label:p,execute:e=>{const t=y(e);c.add(t,"main");void b.add(t);t.content.model.trackerDataChanged.connect((()=>{void b.save(t)}));return t}});a.addCommand(f.refreshLicenses,{label:e=>e.noLabel?"":m,caption:m,icon:l.refreshIcon,execute:async()=>{var e;return(e=b.currentWidget)===null||e===void 0?void 0:e.content.model.initLicenses()}});a.addCommand(f.licenseReport,{label:e=>{if(e.noLabel){return""}const t=_(`${e.format}`);return`${h} ${t.title}`},caption:e=>{const t=_(`${e.format}`);return`${h} ${t.title}`},icon:e=>{const t=_(`${e.format}`);return t.icon},execute:async e=>{var t;const n=_(`${e.format}`);return await((t=b.currentWidget)===null||t===void 0?void 0:t.content.model.download({format:n.id}))}});if(r){r.addItem({command:f.licenses,category:u})}if(n){const e=n.helpMenu;e.addGroup([{command:f.licenses}],0)}if(s){void s.restore(b,{command:f.licenses,name:e=>"licenses",args:e=>{const{currentBundleName:t,currentPackageIndex:n,packageFilter:r}=e.content.model;const o={currentBundleName:t,currentPackageIndex:n,packageFilter:r};return o}})}}};const w=[C,b,_,y,E];const x=w},13313:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(74518);var a=n(93379);var l=n.n(a);var c=n(30277);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{}},39899:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>C});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(78885);var l=n.n(a);var c=n(42014);var d=n.n(c);var u=n(59768);var h=n.n(u);var p=n(25903);var m=n.n(p);const g="HTML Viewer";var f;(function(e){e.trustHTML="htmlviewer:trust-html"})(f||(f={}));const A={activate:v,id:"@jupyterlab/htmlviewer-extension:plugin",provides:a.IHTMLViewerTracker,requires:[u.ITranslator],optional:[i.ICommandPalette,r.ILayoutRestorer,c.ISettingRegistry,i.IToolbarWidgetRegistry],autoStart:true};function v(e,t,n,r,o,s){let l;const c=t.load("jupyterlab");if(s){s.registerFactory(g,"refresh",(e=>a.ToolbarItems.createRefreshButton(e,t)));s.registerFactory(g,"trust",(e=>a.ToolbarItems.createTrustButton(e,t)));if(o){l=(0,i.createToolbarFactory)(s,o,g,A.id,t)}}const d={name:"html",contentType:"file",fileFormat:"text",displayName:c.__("HTML File"),extensions:[".html"],mimeTypes:["text/html"],icon:p.html5Icon};e.docRegistry.addFileType(d);const u=new a.HTMLViewerFactory({name:g,fileTypes:["html"],defaultFor:["html"],readOnly:true,toolbarFactory:l,translator:t});const h=new i.WidgetTracker({namespace:"htmlviewer"});if(r){void r.restore(h,{command:"docmanager:open",args:e=>({path:e.context.path,factory:"HTML Viewer"}),name:e=>e.context.path})}e.docRegistry.addWidgetFactory(u);u.widgetCreated.connect(((t,n)=>{var r,o;void h.add(n);n.context.pathChanged.connect((()=>{void h.save(n)}));n.trustedChanged.connect((()=>{e.commands.notifyCommandChanged(f.trustHTML)}));n.title.icon=d.icon;n.title.iconClass=(r=d.iconClass)!==null&&r!==void 0?r:"";n.title.iconLabel=(o=d.iconLabel)!==null&&o!==void 0?o:""}));e.commands.addCommand(f.trustHTML,{label:c.__("Trust HTML File"),caption:c.__(`Whether the HTML file is trusted.\n    Trusting the file allows scripts to run in it,\n    which may result in security risks.\n    Only enable for files you trust.`),isEnabled:()=>!!h.currentWidget,isToggled:()=>{const e=h.currentWidget;if(!e){return false}const t=e.content.sandbox;return t.indexOf("allow-scripts")!==-1},execute:()=>{const e=h.currentWidget;if(!e){return false}e.trusted=!e.trusted}});if(n){n.addItem({command:f.trustHTML,category:c.__("File Operations")})}return h}const C=A},23454:(e,t,n)=>{"use strict";var r=n(34849);var o=n(79536);var i=n(94683);var s=n(90516);var a=n(32902);var l=n(93379);var c=n.n(l);var d=n(37468);var u={};u.insert="head";u.singleton=false;var h=c()(d.Z,u);const p=d.Z.locals||{}},27048:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IHTMLViewerTracker:()=>C,HTMLViewer:()=>y,HTMLViewerFactory:()=>E,ToolbarItems:()=>w});var r=n(3378);var o=n.n(r);var i=n(69442);var s=n.n(i);var a=n(34576);var l=n.n(a);var c=n(59768);var d=n.n(c);var u=n(25903);var h=n.n(u);var p=n(91100);var m=n.n(p);var g=n(18987);var f=n.n(g);var A=n(77865);var v=n.n(A);const C=new p.Token("@jupyterlab/htmlviewer:IHTMLViewerTracker");const b=1e3;const _="jp-HTMLViewer";class y extends a.DocumentWidget{constructor(e){super(Object.assign(Object.assign({},e),{content:new r.IFrame({sandbox:["allow-same-origin"]})}));this._renderPending=false;this._parser=new DOMParser;this._monitor=null;this._objectUrl="";this._trustedChanged=new g.Signal(this);this.translator=e.translator||c.nullTranslator;this.content.addClass(_);void this.context.ready.then((()=>{this.update();this._monitor=new i.ActivityMonitor({signal:this.context.model.contentChanged,timeout:b});this._monitor.activityStopped.connect(this.update,this)}))}get trusted(){return this.content.sandbox.indexOf("allow-scripts")!==-1}set trusted(e){if(this.trusted===e){return}if(e){this.content.sandbox=x.trusted}else{this.content.sandbox=x.untrusted}this.content.url=this.content.url;this._trustedChanged.emit(e)}get trustedChanged(){return this._trustedChanged}dispose(){if(this._objectUrl){try{URL.revokeObjectURL(this._objectUrl)}catch(e){}}super.dispose()}onUpdateRequest(){if(this._renderPending){return}this._renderPending=true;void this._renderModel().then((()=>this._renderPending=false))}async _renderModel(){let e=this.context.model.toString();e=await this._setBase(e);const t=new Blob([e],{type:"text/html"});const n=this._objectUrl;this._objectUrl=URL.createObjectURL(t);this.content.url=this._objectUrl;if(n){try{URL.revokeObjectURL(n)}catch(r){}}return}async _setBase(e){const t=this._parser.parseFromString(e,"text/html");let n=t.querySelector("base");if(!n){n=t.createElement("base");t.head.insertBefore(n,t.head.firstChild)}const r=this.context.path;const o=await this.context.urlResolver.getDownloadUrl(r);n.href=o;n.target="_self";return t.documentElement.innerHTML}}class E extends a.ABCWidgetFactory{createNewWidget(e){return new y({context:e})}defaultToolbarFactory(e){return[{name:"refresh",widget:w.createRefreshButton(e,this.translator)},{name:"trust",widget:w.createTrustButton(e,this.translator)}]}}var w;(function(e){function t(e,t){const n=(t!==null&&t!==void 0?t:c.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:u.refreshIcon,onClick:async()=>{if(!e.context.model.dirty){await e.context.revert();e.update()}},tooltip:n.__("Rerender HTML Document")})}e.createRefreshButton=t;function n(e,t){return r.ReactWidget.create(A.createElement(x.TrustButtonComponent,{htmlDocument:e,translator:t}))}e.createTrustButton=n})(w||(w={}));var x;(function(e){e.untrusted=[];e.trusted=["allow-scripts"];function t(e){const t=e.translator||c.nullTranslator;const n=t.load("jupyterlab");return A.createElement(r.UseSignal,{signal:e.htmlDocument.trustedChanged,initialSender:e.htmlDocument},(()=>A.createElement(r.ToolbarButtonComponent,{className:"",onClick:()=>e.htmlDocument.trusted=!e.htmlDocument.trusted,tooltip:n.__(`Whether the HTML file is trusted.\nTrusting the file allows scripts to run in it,\nwhich may result in security risks.\nOnly enable for files you trust.`),label:e.htmlDocument.trusted?n.__("Distrust HTML"):n.__("Trust HTML")})))}e.TrustButtonComponent=t})(x||(x={}))},10313:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CommandIDs:()=>u,default:()=>f});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(69442);var l=n.n(a);var c=n(59768);var d=n.n(c);var u;(function(e){e.controlPanel="hub:control-panel";e.logout="hub:logout";e.restart="hub:restart"})(u||(u={}));function h(e,t,n,r){const o=n.load("jupyterlab");const i=t.urls.hubHost||"";const s=t.urls.hubPrefix||"";const l=t.urls.hubUser||"";const c=t.urls.hubServerName||"";const d=t.urls.base;if(!s){return}console.debug("hub-extension: Found configuration ",{hubHost:i,hubPrefix:s});const h=c?i+a.URLExt.join(s,"spawn",l,c):i+a.URLExt.join(s,"spawn");const{commands:p}=e;p.addCommand(u.restart,{label:o.__("Restart Server"),caption:o.__("Request that the Hub restart this server"),execute:()=>{window.open(h,"_blank")}});p.addCommand(u.controlPanel,{label:o.__("Hub Control Panel"),caption:o.__("Open the Hub control panel in a new browser tab"),execute:()=>{window.open(i+a.URLExt.join(s,"home"),"_blank")}});p.addCommand(u.logout,{label:o.__("Log Out"),caption:o.__("Log out of the Hub"),execute:()=>{window.location.href=i+a.URLExt.join(d,"logout")}});if(r){const e=o.__("Hub");r.addItem({category:e,command:u.controlPanel});r.addItem({category:e,command:u.logout})}}const p={activate:h,id:"jupyter.extensions.hub-extension",requires:[r.JupyterFrontEnd.IPaths,c.ITranslator],optional:[i.ICommandPalette],autoStart:true};const m={activate:()=>void 0,id:"jupyter.extensions.hub-extension:plugin",autoStart:true};const g={id:"@jupyterlab/apputils-extension:connectionlost",requires:[r.JupyterFrontEnd.IPaths,c.ITranslator],activate:(e,t,n)=>{const o=n.load("jupyterlab");const s=t.urls.hubPrefix||"";const a=t.urls.base;if(!s){return r.ConnectionLost}let l=false;const c=async(t,n)=>{if(l){return}l=true;const r=await(0,i.showDialog)({title:o.__("Server unavailable or unreachable"),body:o.__("Your server at %1 is not running.\nWould you like to restart it?",a),buttons:[i.Dialog.okButton({label:o.__("Restart")}),i.Dialog.cancelButton({label:o.__("Dismiss")})]});l=false;if(r.button.accept){await e.commands.execute(u.restart)}};return c},autoStart:true,provides:r.IConnectionLost};const f=[p,m,g]},34802:(e,t,n)=>{"use strict";var r=n(79536);var o=n(90516)},15453:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>v,addCommands:()=>b});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(84925);var l=n.n(a);var c=n(59768);var d=n.n(c);var u;(function(e){e.resetImage="imageviewer:reset-image";e.zoomIn="imageviewer:zoom-in";e.zoomOut="imageviewer:zoom-out";e.flipHorizontal="imageviewer:flip-horizontal";e.flipVertical="imageviewer:flip-vertical";e.rotateClockwise="imageviewer:rotate-clockwise";e.rotateCounterclockwise="imageviewer:rotate-counterclockwise";e.invertColors="imageviewer:invert-colors"})(u||(u={}));const h=["png","gif","jpeg","bmp","ico","tiff"];const p="Image";const m="Image (Text)";const g=["svg","xbm"];const f=new RegExp(`[.](${g.join("|")})$`);const A={activate:C,id:"@jupyterlab/imageviewer-extension:plugin",provides:a.IImageTracker,requires:[c.ITranslator],optional:[i.ICommandPalette,r.ILayoutRestorer],autoStart:true};const v=A;function C(e,t,n,r){const o=t.load("jupyterlab");const s="image-widget";function l(t,n){var r,o;n.context.pathChanged.connect((()=>{void A.save(n)}));void A.add(n);const i=e.docRegistry.getFileTypesForPath(n.context.path);if(i.length>0){n.title.icon=i[0].icon;n.title.iconClass=(r=i[0].iconClass)!==null&&r!==void 0?r:"";n.title.iconLabel=(o=i[0].iconLabel)!==null&&o!==void 0?o:""}}const c=new a.ImageViewerFactory({name:p,modelName:"base64",fileTypes:[...h,...g],defaultFor:h,readOnly:true});const d=new a.ImageViewerFactory({name:m,modelName:"text",fileTypes:g,defaultFor:g,readOnly:true});[c,d].forEach((t=>{e.docRegistry.addWidgetFactory(t);t.widgetCreated.connect(l)}));const A=new i.WidgetTracker({namespace:s});if(r){void r.restore(A,{command:"docmanager:open",args:e=>({path:e.context.path,factory:f.test(e.context.path)?m:p}),name:e=>e.context.path})}b(e,A,t);if(n){const e=o.__("Image Viewer");[u.zoomIn,u.zoomOut,u.resetImage,u.rotateClockwise,u.rotateCounterclockwise,u.flipHorizontal,u.flipVertical,u.invertColors].forEach((t=>{n.addItem({command:t,category:e})}))}return A}function b(e,t,n){const r=n.load("jupyterlab");const{commands:o,shell:i}=e;function s(){return t.currentWidget!==null&&t.currentWidget===i.currentWidget}o.addCommand("imageviewer:zoom-in",{execute:a,label:r.__("Zoom In"),isEnabled:s});o.addCommand("imageviewer:zoom-out",{execute:l,label:r.__("Zoom Out"),isEnabled:s});o.addCommand("imageviewer:reset-image",{execute:c,label:r.__("Reset Image"),isEnabled:s});o.addCommand("imageviewer:rotate-clockwise",{execute:d,label:r.__("Rotate Clockwise"),isEnabled:s});o.addCommand("imageviewer:rotate-counterclockwise",{execute:u,label:r.__("Rotate Counterclockwise"),isEnabled:s});o.addCommand("imageviewer:flip-horizontal",{execute:h,label:r.__("Flip image horizontally"),isEnabled:s});o.addCommand("imageviewer:flip-vertical",{execute:p,label:r.__("Flip image vertically"),isEnabled:s});o.addCommand("imageviewer:invert-colors",{execute:m,label:r.__("Invert Colors"),isEnabled:s});function a(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.scale=n.scale>1?n.scale+.5:n.scale*2}}function l(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.scale=n.scale>1?n.scale-.5:n.scale/2}}function c(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.scale=1;n.colorinversion=0;n.resetRotationFlip()}}function d(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.rotateClockwise()}}function u(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.rotateCounterclockwise()}}function h(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.flipHorizontal()}}function p(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.flipVertical()}}function m(){var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(n){n.colorinversion+=1;n.colorinversion%=2}}}},42584:(e,t,n)=>{"use strict";var r=n(79536);var o=n(94683);var i=n(90516);var s=n(32902);var a=n(93379);var l=n.n(a);var c=n(5235);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{}},32067:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IImageTracker:()=>o,ImageViewer:()=>d,ImageViewerFactory:()=>u});var r=n(91100);const o=new r.Token("@jupyterlab/imageviewer:IImageTracker");var i=n(69442);var s=n(3378);var a=n(34576);var l=n(700);const c="jp-ImageViewer";class d extends l.Widget{constructor(e){super();this._scale=1;this._matrix=[1,0,0,1];this._colorinversion=0;this._ready=new r.PromiseDelegate;this.context=e;this.node.tabIndex=0;this.addClass(c);this._img=document.createElement("img");this.node.appendChild(this._img);this._onTitleChanged();e.pathChanged.connect(this._onTitleChanged,this);void e.ready.then((()=>{if(this.isDisposed){return}const t=e.contentsModel;this._mimeType=t.mimetype;this._render();e.model.contentChanged.connect(this.update,this);e.fileChanged.connect(this.update,this);this._ready.resolve(void 0)}))}[s.Printing.symbol](){return()=>s.Printing.printWidget(this)}get ready(){return this._ready.promise}get scale(){return this._scale}set scale(e){if(e===this._scale){return}this._scale=e;this._updateStyle()}get colorinversion(){return this._colorinversion}set colorinversion(e){if(e===this._colorinversion){return}this._colorinversion=e;this._updateStyle()}dispose(){if(this._img.src){URL.revokeObjectURL(this._img.src||"")}super.dispose()}resetRotationFlip(){this._matrix=[1,0,0,1];this._updateStyle()}rotateCounterclockwise(){this._matrix=h.prod(this._matrix,h.rotateCounterclockwiseMatrix);this._updateStyle()}rotateClockwise(){this._matrix=h.prod(this._matrix,h.rotateClockwiseMatrix);this._updateStyle()}flipHorizontal(){this._matrix=h.prod(this._matrix,h.flipHMatrix);this._updateStyle()}flipVertical(){this._matrix=h.prod(this._matrix,h.flipVMatrix);this._updateStyle()}onUpdateRequest(e){if(this.isDisposed||!this.context.isReady){return}this._render()}onActivateRequest(e){this.node.focus()}_onTitleChanged(){this.title.label=i.PathExt.basename(this.context.localPath)}_render(){const e=this.context;const t=e.contentsModel;if(!t){return}const n=this._img.src||"";let r=e.model.toString();if(t.format==="base64"){this._img.src=`data:${this._mimeType};base64,${r}`}else{const e=new Blob([r],{type:this._mimeType});this._img.src=URL.createObjectURL(e)}URL.revokeObjectURL(n)}_updateStyle(){const[e,t,n,r]=this._matrix;const[o,i]=h.prodVec(this._matrix,[1,1]);const s=`matrix(${e}, ${t}, ${n}, ${r}, 0, 0) translate(${o<0?-100:0}%, ${i<0?-100:0}%) `;this._img.style.transform=`scale(${this._scale}) ${s}`;this._img.style.filter=`invert(${this._colorinversion})`}}class u extends a.ABCWidgetFactory{createNewWidget(e){const t=new d(e);const n=new a.DocumentWidget({content:t,context:e});return n}}var h;(function(e){function t([e,t,n,r],[o,i,s,a]){return[e*o+t*s,e*i+t*a,n*o+r*s,n*i+r*a]}e.prod=t;function n([e,t,n,r],[o,i]){return[e*o+t*i,n*o+r*i]}e.prodVec=n;e.rotateClockwiseMatrix=[0,1,-1,0];e.rotateCounterclockwiseMatrix=[0,-1,1,0];e.flipHMatrix=[-1,0,0,1];e.flipVMatrix=[1,0,0,-1]})(h||(h={}))},77407:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>w});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(20452);var l=n.n(a);var c=n(17450);var d=n.n(c);var u=n(62608);var h=n.n(u);var p=n(58267);var m=n.n(p);var g=n(59768);var f=n.n(g);var A=n(25903);var v=n.n(A);var C;(function(e){e.open="inspector:open"})(C||(C={}));const b={id:"@jupyterlab/inspector-extension:inspector",requires:[g.ITranslator],optional:[i.ICommandPalette,u.ILauncher,r.ILayoutRestorer],provides:c.IInspector,autoStart:true,activate:(e,t,n,r,o)=>{const s=t.load("jupyterlab");const{commands:a,shell:l}=e;const d=C.open;const u=s.__("Show Contextual Help");const h="inspector";const p=new i.WidgetTracker({namespace:h});function m(){return f&&!f.isDisposed}let g=null;let f;function v(e){var n;if(!m()){f=new i.MainAreaWidget({content:new c.InspectorPanel({translator:t})});f.id="jp-inspector";f.title.label=u;f.title.icon=A.inspectorIcon;void p.add(f);g=g&&!g.isDisposed?g:null;f.content.source=g;(n=f.content.source)===null||n===void 0?void 0:n.onEditorChange(e)}if(!f.isAttached){l.add(f,"main",{activate:false,mode:"split-right"})}l.activateById(f.id);return f}a.addCommand(d,{caption:s.__("Live updating code documentation from the active kernel"),isEnabled:()=>!f||f.isDisposed||!f.isAttached||!f.isVisible,label:u,icon:e=>e.isLauncher?A.inspectorIcon:undefined,execute:e=>{var t;const n=e&&e.text;const r=e&&e.refresh;if(m()&&r)(t=f.content.source)===null||t===void 0?void 0:t.onEditorChange(n);else v(n)}});if(n){n.addItem({command:d,category:u})}if(r){r.add({command:d,args:{isLauncher:true}})}if(o){void o.restore(p,{command:d,name:()=>"inspector"})}const b=Object.defineProperty({},"source",{get:()=>!f||f.isDisposed?null:f.content.source,set:e=>{g=e&&!e.isDisposed?e:null;if(f&&!f.isDisposed){f.content.source=g}}});return b}};const _={id:"@jupyterlab/inspector-extension:consoles",requires:[c.IInspector,a.IConsoleTracker,r.ILabShell],autoStart:true,activate:(e,t,n,r,o)=>{const i={};n.widgetAdded.connect(((e,t)=>{const n=t.console.sessionContext;const r=t.console.rendermime;const o=new c.KernelConnector({sessionContext:n});const s=new c.InspectionHandler({connector:o,rendermime:r});i[t.id]=s;const a=t.console.promptCell;s.editor=a&&a.editor;t.console.promptCellCreated.connect(((e,t)=>{s.editor=t&&t.editor}));t.disposed.connect((()=>{delete i[t.id];s.dispose()}))}));r.currentChanged.connect(((e,r)=>{const o=r.newValue;if(!o||!n.has(o)){return}const s=i[o.id];if(s){t.source=s}}))}};const y={id:"@jupyterlab/inspector-extension:notebooks",requires:[c.IInspector,p.INotebookTracker,r.ILabShell],autoStart:true,activate:(e,t,n,r)=>{const o={};n.widgetAdded.connect(((e,t)=>{const n=t.sessionContext;const r=t.content.rendermime;const i=new c.KernelConnector({sessionContext:n});const s=new c.InspectionHandler({connector:i,rendermime:r});o[t.id]=s;const a=t.content.activeCell;s.editor=a&&a.editor;t.content.activeCellChanged.connect(((e,t)=>{s.editor=t&&t.editor}));t.disposed.connect((()=>{delete o[t.id];s.dispose()}))}));r.currentChanged.connect(((e,r)=>{const i=r.newValue;if(!i||!n.has(i)){return}const s=o[i.id];if(s){t.source=s}}))}};const E=[b,_,y];const w=E},54244:(e,t,n)=>{"use strict";var r=n(34849);var o=n(79536);var i=n(90516);var s=n(42650);var a=n(70637);var l=n(52812);var c=n(88164)},55091:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IInspector:()=>v,InspectionHandler:()=>l,InspectorPanel:()=>g,KernelConnector:()=>A});var r=n(69442);var o=n(63833);var i=n(91100);var s=n(6625);var a=n(18987);class l{constructor(e){this._cleared=new a.Signal(this);this._disposed=new a.Signal(this);this._editor=null;this._inspected=new a.Signal(this);this._isDisposed=false;this._pending=0;this._standby=true;this._lastInspectedReply=null;this._connector=e.connector;this._rendermime=e.rendermime;this._debouncer=new s.Debouncer(this.onEditorChange.bind(this),250)}get cleared(){return this._cleared}get disposed(){return this._disposed}get inspected(){return this._inspected}get editor(){return this._editor}set editor(e){if(e===this._editor){return}a.Signal.disconnectReceiver(this);const t=this._editor=e;if(t){this._cleared.emit(void 0);this.onEditorChange();t.model.selections.changed.connect(this._onChange,this);t.model.value.changed.connect(this._onChange,this)}}get standby(){return this._standby}set standby(e){this._standby=e}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._disposed.emit(void 0);a.Signal.clearData(this)}onEditorChange(e){if(this._standby){return}const t=this.editor;if(!t){return}const n=e?e:t.model.value.text;const s=t.getCursorPosition();const a=r.Text.jsIndexToCharIndex(t.getOffsetAt(s),n);const l={content:null};const c=++this._pending;void this._connector.fetch({offset:a,text:n}).then((e=>{if(!e||this.isDisposed||c!==this._pending){this._lastInspectedReply=null;this._inspected.emit(l);return}const{data:t}=e;if(this._lastInspectedReply&&i.JSONExt.deepEqual(this._lastInspectedReply,t)){return}const n=this._rendermime.preferredMimeType(t);if(n){const e=this._rendermime.createRenderer(n);const r=new o.MimeModel({data:t});void e.renderModel(r);l.content=e}this._lastInspectedReply=e.data;this._inspected.emit(l)})).catch((e=>{this._lastInspectedReply=null;this._inspected.emit(l)}))}_onChange(){void this._debouncer.invoke()}}var c=n(3378);var d=n(59768);var u=n(700);const h="jp-Inspector";const p="jp-Inspector-content";const m="jp-Inspector-default-content";class g extends u.Panel{constructor(e={}){super();this._source=null;this.translator=e.translator||d.nullTranslator;this._trans=this.translator.load("jupyterlab");if(e.initialContent instanceof u.Widget){this._content=e.initialContent}else if(typeof e.initialContent==="string"){this._content=g._generateContentWidget(`<p>${e.initialContent}</p>`)}else{this._content=g._generateContentWidget("<p>"+this._trans.__("Click on a function to see documentation.")+"</p>")}this.addClass(h);this.layout.addWidget(this._content)}[c.Printing.symbol](){return()=>c.Printing.printWidget(this)}get source(){return this._source}set source(e){if(this._source===e){return}if(this._source){this._source.standby=true;this._source.inspected.disconnect(this.onInspectorUpdate,this);this._source.disposed.disconnect(this.onSourceDisposed,this)}if(e&&e.isDisposed){e=null}this._source=e;if(this._source){this._source.standby=false;this._source.inspected.connect(this.onInspectorUpdate,this);this._source.disposed.connect(this.onSourceDisposed,this)}}dispose(){if(this.isDisposed){return}this.source=null;super.dispose()}onInspectorUpdate(e,t){const{content:n}=t;if(!n||n===this._content){return}this._content.dispose();this._content=n;n.addClass(p);this.layout.addWidget(n)}onSourceDisposed(e,t){this.source=null}static _generateContentWidget(e){const t=new u.Widget;t.node.innerHTML=e;t.addClass(p);t.addClass(m);return t}}var f=n(42573);class A extends f.DataConnector{constructor(e){super();this._sessionContext=e.sessionContext}fetch(e){var t;const n=(t=this._sessionContext.session)===null||t===void 0?void 0:t.kernel;if(!n){return Promise.reject(new Error("Inspection fetch requires a kernel."))}const r={code:e.text,cursor_pos:e.offset,detail_level:1};return n.requestInspect(r).then((e=>{const t=e.content;if(t.status!=="ok"||!t.found){throw new Error("Inspection fetch failed to return successfully.")}return{data:t.data,metadata:t.metadata}}))}}const v=new i.Token("@jupyterlab/inspector:IInspector")},70637:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(49914);var s=n(98896);var a=n(93379);var l=n.n(a);var c=n(28279);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{}},48105:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{TEXT_JAVASCRIPT_MIMETYPE:()=>TEXT_JAVASCRIPT_MIMETYPE,APPLICATION_JAVASCRIPT_MIMETYPE:()=>APPLICATION_JAVASCRIPT_MIMETYPE,ExperimentalRenderedJavascript:()=>ExperimentalRenderedJavascript,rendererFactory:()=>rendererFactory,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(63833);var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__);const TEXT_JAVASCRIPT_MIMETYPE="text/javascript";const APPLICATION_JAVASCRIPT_MIMETYPE="application/javascript";function evalInContext(code,element,document,window){return eval(code)}class ExperimentalRenderedJavascript extends _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__.RenderedJavaScript{render(e){const t=this.translator.load("jupyterlab");const n=()=>{try{const t=e.data[this.mimeType];if(t){evalInContext(t,this.node,document,window)}return Promise.resolve()}catch(t){return Promise.reject(t)}};if(!e.trusted){const e=document.createElement("pre");e.textContent=t.__("Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const r=document.createElement("button");r.textContent=t.__("Run");this.node.appendChild(e);this.node.appendChild(r);r.onclick=e=>{this.node.textContent="";void n()};return Promise.resolve()}return n()}}const rendererFactory={safe:false,mimeTypes:[TEXT_JAVASCRIPT_MIMETYPE,APPLICATION_JAVASCRIPT_MIMETYPE],createRenderer:e=>new ExperimentalRenderedJavascript(e)};const extension={id:"@jupyterlab/javascript-extension:factory",rendererFactory,rank:0,dataType:"string"};const __WEBPACK_DEFAULT_EXPORT__=extension},93814:(e,t,n)=>{"use strict";var r=n(98896);var o=n(93379);var i=n.n(o);var s=n(11096);var a={};a.insert="head";a.singleton=false;var l=i()(s.Z,a);const c=s.Z.locals||{}},6373:(e,t,n)=>{"use strict";n.r(t);n.d(t,{MIME_TYPE:()=>C,RenderedJSON:()=>b,default:()=>E,rendererFactory:()=>_});var r=n(3378);var o=n(59768);var i=n(700);var s=n(77865);var a=n(21704);var l=n(25903);var c=n(91100);var d=n(77146);var u=n.n(d);var h=n(66660);var p=n.n(h);class m extends s.Component{constructor(){super(...arguments);this.state={filter:"",value:""};this.timer=0;this.handleChange=e=>{const{value:t}=e.target;this.setState({value:t});window.clearTimeout(this.timer);this.timer=window.setTimeout((()=>{this.setState({filter:t})}),300)}}render(){const e=this.props.translator||o.nullTranslator;const t=e.load("jupyterlab");const{data:n,metadata:r}=this.props;const i=r&&r.root?r.root:"root";const a=this.state.filter?A(n,this.state.filter,[i]):[i];return s.createElement("div",{className:"container"},s.createElement(l.InputGroup,{className:"filter",type:"text",placeholder:t.__("Filter"),onChange:this.handleChange,value:this.state.value,rightIcon:"ui-components:search"}),s.createElement(p(),{data:n,collectionLimit:100,theme:{extend:g,valueLabel:"cm-variable",valueText:"cm-string",nestedNodeItemString:"cm-comment"},invertTheme:false,keyPath:[i],getItemString:(e,t,n,r)=>Array.isArray(t)?s.createElement("span",null,n," ",r):Object.keys(t).length===0?s.createElement("span",null,n):null,labelRenderer:([e,t])=>s.createElement("span",{className:"cm-keyword"},s.createElement(u(),{search:this.state.filter,matchStyle:{backgroundColor:"yellow"}},`${e}: `)),valueRenderer:e=>{let t="cm-string";if(typeof e==="number"){t="cm-number"}if(e==="true"||e==="false"){t="cm-keyword"}return s.createElement("span",{className:t},s.createElement(u(),{search:this.state.filter,matchStyle:{backgroundColor:"yellow"}},`${e}`))},shouldExpandNode:(e,t,n)=>r&&r.expanded?true:a.join(",").includes(e.join(","))}))}}const g={scheme:"jupyter",base00:"invalid",base01:"invalid",base02:"invalid",base03:"invalid",base04:"invalid",base05:"invalid",base06:"invalid",base07:"invalid",base08:"invalid",base09:"invalid",base0A:"invalid",base0B:"invalid",base0C:"invalid",base0D:"invalid",base0E:"invalid",base0F:"invalid",author:"invalid"};function f(e,t){return JSON.stringify(e).includes(t)}function A(e,t,n=["root"]){if(c.JSONExt.isArray(e)){return e.reduce(((e,r,o)=>{if(r&&typeof r==="object"&&f(r,t)){return[...e,[o,...n].join(","),...A(r,t,[o,...n])]}return e}),[])}if(c.JSONExt.isObject(e)){return Object.keys(e).reduce(((r,o)=>{const i=e[o];if(i&&typeof i==="object"&&(o.includes(t)||f(i,t))){return[...r,[o,...n].join(","),...A(i,t,[o,...n])]}return r}),[])}return[]}const v="jp-RenderedJSON";const C="application/json";class b extends i.Widget{constructor(e){super();this.addClass(v);this.addClass("CodeMirror");this.addClass("cm-s-jupyter");this._mimeType=e.mimeType;this.translator=e.translator||o.nullTranslator}[r.Printing.symbol](){return()=>r.Printing.printWidget(this)}renderModel(e){const t=e.data[this._mimeType]||{};const n=e.metadata[this._mimeType]||{};return new Promise(((e,r)=>{a.render(s.createElement(m,{data:t,metadata:n,translator:this.translator}),this.node,(()=>{e()}))}))}onBeforeDetach(e){a.unmountComponentAtNode(this.node)}}const _={safe:true,mimeTypes:[C],createRenderer:e=>new b(e)};const y=[{id:"@jupyterlab/json-extension:factory",rendererFactory:_,rank:0,dataType:"json",documentWidgetFactoryOptions:{name:"JSON",primaryFileType:"json",fileTypes:["json","notebook","geojson"],defaultFor:["json"]}}];const E=y},64897:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(93379);var a=n.n(s);var l=n(2837);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},65392:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>A});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(62608);var l=n.n(a);var c=n(59768);var d=n.n(c);var u=n(25903);var h=n.n(u);var p=n(54522);var m=n.n(p);var g;(function(e){e.create="launcher:create"})(g||(g={}));const f={activate:v,id:"@jupyterlab/launcher-extension:plugin",requires:[c.ITranslator],optional:[r.ILabShell,i.ICommandPalette],provides:a.ILauncher,autoStart:true};const A=f;function v(e,t,n,r){const{commands:o,shell:s}=e;const l=t.load("jupyterlab");const c=new a.LauncherModel;o.addCommand(g.create,{label:l.__("New Launcher"),execute:e=>{const r=e["cwd"]?String(e["cwd"]):"";const d=`launcher-${C.id++}`;const h=e=>{s.add(e,"main",{ref:d})};const m=new a.Launcher({model:c,cwd:r,callback:h,commands:o,translator:t});m.model=c;m.title.icon=u.launcherIcon;m.title.label=l.__("Launcher");const g=new i.MainAreaWidget({content:m});g.title.closable=!!(0,p.toArray)(s.widgets("main")).length;g.id=d;s.add(g,"main",{activate:e["activate"],ref:e["ref"]});if(n){n.layoutModified.connect((()=>{g.title.closable=(0,p.toArray)(n.widgets("main")).length>1}),g)}return g}});if(r){r.addItem({command:g.create,category:l.__("Launcher")})}if(n){n.addButtonEnabled=true;n.addRequested.connect(((e,t)=>{var n;const r=((n=t.currentTitle)===null||n===void 0?void 0:n.owner.id)||t.titles[t.titles.length-1].owner.id;if(o.hasCommand("filebrowser:create-main-launcher")){return o.execute("filebrowser:create-main-launcher",{ref:r})}return o.execute(g.create,{ref:r})}))}return c}var C;(function(e){e.id=0})(C||(C={}))},72738:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(90516);var a=n(52812)},85850:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ILauncher:()=>y,LauncherModel:()=>E,Launcher:()=>w});var r=n(3378);var o=n.n(r);var i=n(59768);var s=n.n(i);var a=n(25903);var l=n.n(a);var c=n(54522);var d=n.n(c);var u=n(91100);var h=n.n(u);var p=n(64782);var m=n.n(p);var g=n(63577);var f=n.n(g);var A=n(700);var v=n.n(A);var C=n(77865);var b=n.n(C);const _="jp-Launcher";const y=new u.Token("@jupyterlab/launcher:ILauncher");class E extends r.VDomModel{constructor(){super(...arguments);this.itemsList=[]}add(e){const t=j.createItem(e);this.itemsList.push(t);this.stateChanged.emit(void 0);return new p.DisposableDelegate((()=>{c.ArrayExt.removeFirstOf(this.itemsList,t);this.stateChanged.emit(void 0)}))}items(){return new c.ArrayIterator(this.itemsList)}}class w extends r.VDomRenderer{constructor(e){super(e.model);this._pending=false;this._cwd="";this._cwd=e.cwd;this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._callback=e.callback;this._commands=e.commands;this.addClass(_)}get cwd(){return this._cwd}set cwd(e){this._cwd=e;this.update()}get pending(){return this._pending}set pending(e){this._pending=e}render(){if(!this.model){return null}const e=[this._trans.__("Notebook"),this._trans.__("Console"),this._trans.__("Other")];const t=[this._trans.__("Notebook"),this._trans.__("Console")];const n=Object.create(null);(0,c.each)(this.model.items(),((e,t)=>{const r=e.category||this._trans.__("Other");if(!(r in n)){n[r]=[]}n[r].push(e)}));for(const s in n){n[s]=n[s].sort(((e,t)=>j.sortCmp(e,t,this._cwd,this._commands)))}const r=[];let o;const i=[];(0,c.each)(e,((e,t)=>{i.push(e)}));for(const s in n){if(e.indexOf(s)===-1){i.push(s)}}i.forEach((e=>{if(!n[e]){return}const i=n[e][0];const s=Object.assign(Object.assign({},i.args),{cwd:this.cwd});const l=t.indexOf(e)>-1;const d=this._commands.iconClass(i.command,s);const u=this._commands.icon(i.command,s);const h=u===d?undefined:u;if(e in n){o=C.createElement("div",{className:"jp-Launcher-section",key:e},C.createElement("div",{className:"jp-Launcher-sectionHeader"},C.createElement(a.LabIcon.resolveReact,{icon:h,iconClass:(0,a.classes)(d,"jp-Icon-cover"),stylesheet:"launcherSection"}),C.createElement("h2",{className:"jp-Launcher-sectionTitle"},e)),C.createElement("div",{className:"jp-Launcher-cardContainer"},(0,c.toArray)((0,c.map)(n[e],(e=>x(l,e,this,this._commands,this._trans,this._callback))))));r.push(o)}}));return C.createElement("div",{className:"jp-Launcher-body"},C.createElement("div",{className:"jp-Launcher-content"},C.createElement("div",{className:"jp-Launcher-cwd"},C.createElement("h3",null,this.cwd)),r))}}function x(e,t,n,o,i,s){const l=t.command;const c=Object.assign(Object.assign({},t.args),{cwd:n.cwd});const d=o.caption(l,c);const u=o.label(l,c);const h=e?u:d||u;const p=()=>{if(n.pending===true){return}n.pending=true;void o.execute(l,Object.assign(Object.assign({},t.args),{cwd:n.cwd})).then((e=>{n.pending=false;if(e instanceof A.Widget){s(e);n.dispose()}})).catch((e=>{n.pending=false;void(0,r.showErrorMessage)(i._p("Error","Launcher Error"),e)}))};const m=e=>{if(e.key==="Enter"){p()}};const g=o.iconClass(l,c);const f=o.icon(l,c);const v=f===g?undefined:f;return C.createElement("div",{className:"jp-LauncherCard",title:h,onClick:p,onKeyPress:m,tabIndex:0,"data-category":t.category||i.__("Other"),key:j.keyProperty.get(t)},C.createElement("div",{className:"jp-LauncherCard-icon"},e?t.kernelIconUrl?C.createElement("img",{src:t.kernelIconUrl,className:"jp-Launcher-kernelIcon"}):C.createElement("div",{className:"jp-LauncherCard-noKernelIcon"},u[0].toUpperCase()):C.createElement(a.LabIcon.resolveReact,{icon:v,iconClass:(0,a.classes)(g,"jp-Icon-cover"),stylesheet:"launcherCard"})),C.createElement("div",{className:"jp-LauncherCard-label",title:h},C.createElement("p",null,u)))}var j;(function(e){let t=0;e.keyProperty=new g.AttachedProperty({name:"key",create:()=>t++});function n(e){return Object.assign(Object.assign({},e),{category:e.category||"",rank:e.rank!==undefined?e.rank:Infinity})}e.createItem=n;function r(e,t,n,r){const o=e.rank;const i=t.rank;if(o!==i&&o!==undefined&&i!==undefined){return o<i?-1:1}const s=r.label(e.command,Object.assign(Object.assign({},e.args),{cwd:n}));const a=r.label(t.command,Object.assign(Object.assign({},t.args),{cwd:n}));return s.localeCompare(a)}e.sortCmp=r})(j||(j={}))},52812:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(93379);var a=n.n(s);var l=n(41802);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},54780:(e,t,n)=>{"use strict";n.r(t);n.d(t,{LogLevelSwitcher:()=>y,default:()=>E});var r=n(97577);var o=n(3378);var i=n(51457);var s=n(58267);var a=n(63833);var l=n(42014);var c=n(85913);var d=n(59768);var u=n(25903);var h=n(91100);var p=n(77865);var m=n.n(p);var g=n(18987);function f(e){const t=e.translator||d.nullTranslator;const n=t.load("jupyterlab");let r="";if(e.newMessages>0){r=n.__("%1 new messages, %2 log entries for %3",e.newMessages,e.logEntries,e.source)}else{r+=n.__("%1 log entries for %2",e.logEntries,e.source)}return m().createElement(c.GroupItem,{spacing:0,onClick:e.handleClick,title:r},m().createElement(u.listIcon.react,{top:"2px",stylesheet:"statusBar"}),e.newMessages>0?m().createElement(c.TextItem,{source:e.newMessages}):m().createElement(m().Fragment,null))}class A extends o.VDomRenderer{constructor(e){super(new A.Model(e.loggerRegistry));this.translator=e.translator||d.nullTranslator;this._handleClick=e.handleClick;this.addClass(c.interactiveItem);this.addClass("jp-LogConsoleStatusItem")}render(){if(this.model===null||this.model.version===0){return null}const{flashEnabled:e,messages:t,source:n,version:r,versionDisplayed:o,versionNotified:i}=this.model;if(n!==null&&e&&r>i){this._flashHighlight();this.model.sourceNotified(n,r)}else if(n!==null&&e&&r>o){this._showHighlighted()}else{this._clearHighlight()}return m().createElement(f,{handleClick:this._handleClick,logEntries:t,newMessages:r-o,source:this.model.source,translator:this.translator})}_flashHighlight(){this._showHighlighted();this.removeClass("jp-LogConsole-flash");requestAnimationFrame((()=>{this.addClass("jp-LogConsole-flash")}))}_showHighlighted(){this.addClass("jp-mod-selected")}_clearHighlight(){this.removeClass("jp-LogConsole-flash");this.removeClass("jp-mod-selected")}}(function(e){class t extends o.VDomModel{constructor(e){super();this.flashEnabledChanged=new g.Signal(this);this._flashEnabled=true;this._source=null;this._sourceVersion=new Map;this._loggerRegistry=e;this._loggerRegistry.registryChanged.connect(this._handleLogRegistryChange,this);this._handleLogRegistryChange()}get messages(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.length}get version(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.version}get source(){return this._source}set source(e){if(this._source===e){return}this._source=e;this.stateChanged.emit()}get versionDisplayed(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastDisplayed)!==null&&t!==void 0?t:0}get versionNotified(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastNotified)!==null&&t!==void 0?t:0}get flashEnabled(){return this._flashEnabled}set flashEnabled(e){if(this._flashEnabled===e){return}this._flashEnabled=e;this.flashEnabledChanged.emit();this.stateChanged.emit()}sourceDisplayed(e,t){if(e===null||t===null){return}const n=this._sourceVersion.get(e);let r=false;if(n.lastDisplayed<t){n.lastDisplayed=t;r=true}if(n.lastNotified<t){n.lastNotified=t;r=true}if(r&&e===this._source){this.stateChanged.emit()}}sourceNotified(e,t){if(e===null){return}const n=this._sourceVersion.get(e);if(n.lastNotified<t){n.lastNotified=t;if(e===this._source){this.stateChanged.emit()}}}_handleLogRegistryChange(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(!this._sourceVersion.has(t.source)){t.contentChanged.connect(this._handleLogContentChange,this);this._sourceVersion.set(t.source,{lastDisplayed:0,lastNotified:0})}}}_handleLogContentChange({source:e},t){if(e===this._source){this.stateChanged.emit()}}}e.Model=t})(A||(A={}));const v="@jupyterlab/logconsole-extension:plugin";var C;(function(e){e.addCheckpoint="logconsole:add-checkpoint";e.clear="logconsole:clear";e.open="logconsole:open";e.setLevel="logconsole:set-level"})(C||(C={}));const b={activate:_,id:v,provides:i.ILoggerRegistry,requires:[r.ILabShell,a.IRenderMimeRegistry,s.INotebookTracker,d.ITranslator],optional:[o.ICommandPalette,r.ILayoutRestorer,l.ISettingRegistry,c.IStatusBar],autoStart:true};function _(e,t,n,r,s,a,l,c,d){const h=s.load("jupyterlab");let p=null;let m=null;const g=new i.LoggerRegistry({defaultRendermime:n,maxLength:1e3});const f=new o.WidgetTracker({namespace:"logconsole"});if(l){void l.restore(f,{command:C.open,name:()=>"logconsole"})}const b=new A({loggerRegistry:g,handleClick:()=>{var t;if(!p){_({insertMode:"split-bottom",ref:(t=e.shell.currentWidget)===null||t===void 0?void 0:t.id})}else{e.shell.activateById(p.id)}},translator:s});const _=(t={})=>{m=new i.LogConsolePanel(g,s);m.source=t.source!==undefined?t.source:r.currentWidget?r.currentWidget.context.path:null;p=new o.MainAreaWidget({content:m});p.addClass("jp-LogConsole");p.title.closable=true;p.title.icon=u.listIcon;p.title.label=h.__("Log Console");const n=new o.CommandToolbarButton({commands:e.commands,id:C.addCheckpoint});const a=new o.CommandToolbarButton({commands:e.commands,id:C.clear});p.toolbar.addItem("lab-log-console-add-checkpoint",n);p.toolbar.addItem("lab-log-console-clear",a);p.toolbar.addItem("level",new y(p.content,s));m.sourceChanged.connect((()=>{e.commands.notifyCommandChanged()}));m.sourceDisplayed.connect(((e,{source:t,version:n})=>{b.model.sourceDisplayed(t,n)}));p.disposed.connect((()=>{p=null;m=null;e.commands.notifyCommandChanged()}));e.shell.add(p,"down",{ref:t.ref,mode:t.insertMode});void f.add(p);e.shell.activateById(p.id);p.update();e.commands.notifyCommandChanged()};e.commands.addCommand(C.open,{label:h.__("Show Log Console"),execute:(e={})=>{if(p){p.dispose()}else{_(e)}},isToggled:()=>p!==null});e.commands.addCommand(C.addCheckpoint,{execute:()=>{var e;(e=m===null||m===void 0?void 0:m.logger)===null||e===void 0?void 0:e.checkpoint()},icon:u.addIcon,isEnabled:()=>!!m&&m.source!==null,label:h.__("Add Checkpoint")});e.commands.addCommand(C.clear,{execute:()=>{var e;(e=m===null||m===void 0?void 0:m.logger)===null||e===void 0?void 0:e.clear()},icon:u.clearIcon,isEnabled:()=>!!m&&m.source!==null,label:h.__("Clear Log")});function E(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}e.commands.addCommand(C.setLevel,{execute:e=>{if(m===null||m===void 0?void 0:m.logger){m.logger.level=e.level}},isEnabled:()=>!!m&&m.source!==null,label:e=>h.__("Set Log Level to %1",E(e.level))});if(a){a.addItem({command:C.open,category:h.__("Main Area")})}if(d){d.registerStatusItem("@jupyterlab/logconsole-extension:status",{item:b,align:"left",isActive:()=>{var e;return((e=b.model)===null||e===void 0?void 0:e.version)>0},activeStateChanged:b.model.stateChanged})}function w(e){if(p&&e===p){return}let t;if(e&&r.has(e)){t=e.context.path}else{t=null}if(m){m.source=t}b.model.source=t}void e.restored.then((()=>{w(t.currentWidget);t.currentChanged.connect(((e,{newValue:t})=>w(t)))}));if(c){const t=e=>{g.maxLength=e.get("maxLogEntries").composite;b.model.flashEnabled=e.get("flash").composite};Promise.all([c.load(v),e.restored]).then((([e])=>{t(e);e.changed.connect((e=>{t(e)}))})).catch((e=>{console.error(e.message)}))}return g}class y extends o.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(this._logConsole.logger){this._logConsole.logger.level=e.target.value}this.update()};this.handleKeyDown=e=>{if(e.keyCode===13){this._logConsole.activate()}};this._id=`level-${h.UUID.uuid4()}`;this.translator=t||d.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass("jp-LogConsole-toolbarLogLevel");this._logConsole=e;if(e.source){this.update()}e.sourceChanged.connect(this._updateSource,this)}_updateSource(e,{oldValue:t,newValue:n}){if(t!==null){const n=e.loggerRegistry.getLogger(t);n.stateChanged.disconnect(this.update,this)}if(n!==null){const t=e.loggerRegistry.getLogger(n);t.stateChanged.connect(this.update,this)}this.update()}render(){const e=this._logConsole.logger;return p.createElement(p.Fragment,null,p.createElement("label",{htmlFor:this._id,className:e===null?"jp-LogConsole-toolbarLogLevel-disabled":undefined},this._trans.__("Log Level:")),p.createElement(u.HTMLSelect,{id:this._id,className:"jp-LogConsole-toolbarLogLevelDropdown",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e===null||e===void 0?void 0:e.level,"aria-label":this._trans.__("Log level"),disabled:e===null,options:e===null?[]:[[this._trans.__("Critical"),"Critical"],[this._trans.__("Error"),"Error"],[this._trans.__("Warning"),"Warning"],[this._trans.__("Info"),"Info"],[this._trans.__("Debug"),"Debug"]].map((e=>({label:e[0],value:e[1].toLowerCase()})))}))}}const E=b},92121:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(98328);var a=n(98896);var l=n(90516);var c=n(70161);var d=n(88164);var u=n(93379);var h=n.n(u);var p=n(80392);var m={};m.insert="head";m.singleton=false;var g=h()(p.Z,m);const f=p.Z.locals||{}},28194:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ILoggerRegistry:()=>m,LogConsolePanel:()=>E,LogOutputModel:()=>a,Logger:()=>d,LoggerOutputAreaModel:()=>c,LoggerRegistry:()=>h,ScrollingWidget:()=>y});var r=n(27119);var o=n(63833);var i=n(18987);var s=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};class a extends o.OutputModel{constructor(e){super(e);this.timestamp=new Date(e.value.timestamp);this.level=e.value.level}}class l extends r.OutputAreaModel.ContentFactory{createOutputModel(e){return new a(e)}}class c extends r.OutputAreaModel{constructor(e){var{maxLength:t}=e,n=s(e,["maxLength"]);super(n);this.maxLength=t}add(e){super.add(e);this._applyMaxLength();return this.length}shouldCombine(e){const{value:t,lastModel:n}=e;const r=Math.trunc(n.timestamp.getTime()/1e3);const o=Math.trunc(t.timestamp/1e3);return r===o}get(e){return super.get(e)}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e;this._applyMaxLength()}_applyMaxLength(){if(this.list.length>this._maxLength){this.list.removeRange(0,this.list.length-this._maxLength)}}}class d{constructor(e){this._isDisposed=false;this._contentChanged=new i.Signal(this);this._stateChanged=new i.Signal(this);this._rendermime=null;this._version=0;this._level="warning";this.source=e.source;this.outputAreaModel=new c({contentFactory:new l,maxLength:e.maxLength})}get maxLength(){return this.outputAreaModel.maxLength}set maxLength(e){this.outputAreaModel.maxLength=e}get level(){return this._level}set level(e){const t=this._level;if(t===e){return}this._level=e;this._log({output:{output_type:"display_data",data:{"text/plain":`Log level set to ${e}`}},level:"metadata"});this._stateChanged.emit({name:"level",oldValue:t,newValue:e})}get length(){return this.outputAreaModel.length}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get rendermime(){return this._rendermime}set rendermime(e){if(e!==this._rendermime){const t=this._rendermime;const n=this._rendermime=e;this._stateChanged.emit({name:"rendermime",oldValue:t,newValue:n})}}get version(){return this._version}log(e){if(u.LogLevel[e.level]<u.LogLevel[this._level]){return}let t=null;switch(e.type){case"text":t={output_type:"display_data",data:{"text/plain":e.data}};break;case"html":t={output_type:"display_data",data:{"text/html":e.data}};break;case"output":t=e.data;break;default:break}if(t){this._log({output:t,level:e.level})}}clear(){this.outputAreaModel.clear(false);this._contentChanged.emit("clear")}checkpoint(){this._log({output:{output_type:"display_data",data:{"text/html":"<hr/>"}},level:"metadata"})}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.clear();this._rendermime=null;i.Signal.clearData(this)}_log(e){this._version++;this.outputAreaModel.add(Object.assign(Object.assign({},e.output),{timestamp:Date.now(),level:e.level}));this._contentChanged.emit("append")}}var u;(function(e){let t;(function(e){e[e["debug"]=0]="debug";e[e["info"]=1]="info";e[e["warning"]=2]="warning";e[e["error"]=3]="error";e[e["critical"]=4]="critical";e[e["metadata"]=5]="metadata"})(t=e.LogLevel||(e.LogLevel={}))})(u||(u={}));class h{constructor(e){this._loggers=new Map;this._registryChanged=new i.Signal(this);this._isDisposed=false;this._defaultRendermime=e.defaultRendermime;this._maxLength=e.maxLength}getLogger(e){const t=this._loggers;let n=t.get(e);if(n){return n}n=new d({source:e,maxLength:this.maxLength});n.rendermime=this._defaultRendermime;t.set(e,n);this._registryChanged.emit("append");return n}getLoggers(){return Array.from(this._loggers.values())}get registryChanged(){return this._registryChanged}get maxLength(){return this._maxLength}set maxLength(e){this._maxLength=e;this._loggers.forEach((t=>{t.maxLength=e}))}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this._loggers.forEach((e=>e.dispose()));i.Signal.clearData(this)}}var p=n(91100);const m=new p.Token("@jupyterlab/logconsole:ILoggerRegistry");var g=n(59768);var f=n(700);var A=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};function v(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}class C extends f.Widget{constructor(){super();this._timestampNode=document.createElement("div");this.node.append(this._timestampNode)}set timestamp(e){this._timestamp=e;this._timestampNode.innerHTML=this._timestamp.toLocaleTimeString();this.update()}set level(e){this._level=e;this.node.dataset.logLevel=e;this.update()}update(){if(this._level!==undefined&&this._timestamp!==undefined){this.node.title=`${this._timestamp.toLocaleString()}; ${v(this._level)} level`}}}class b extends r.OutputArea{createOutputItem(e){const t=super.createOutputItem(e);if(t===null){return null}const n=t.widgets[0];n.timestamp=e.timestamp;n.level=e.level;return t}onInputRequest(e,t){return}}class _ extends r.OutputArea.ContentFactory{createOutputPrompt(){return new C}}class y extends f.Widget{constructor(e){var{content:t}=e,n=A(e,["content"]);super(n);this._observer=null;this.addClass("jp-Scrolling");const r=this.layout=new f.PanelLayout;r.addWidget(t);this._content=t;this._sentinel=document.createElement("div");this.node.appendChild(this._sentinel)}get content(){return this._content}onAfterAttach(e){super.onAfterAttach(e);requestAnimationFrame((()=>{this._sentinel.scrollIntoView();this._scrollHeight=this.node.scrollHeight}));if(typeof IntersectionObserver!=="undefined"){this._observer=new IntersectionObserver((e=>{this._handleScroll(e)}),{root:this.node,threshold:1});this._observer.observe(this._sentinel)}}onBeforeDetach(e){if(this._observer){this._observer.disconnect()}}onAfterShow(e){if(this._tracking){this._sentinel.scrollIntoView()}}_handleScroll([e]){if(e.isIntersecting){this._tracking=true}else if(this.isVisible){const e=this.node.scrollHeight;if(e===this._scrollHeight){this._tracking=false}else{this._sentinel.scrollIntoView();this._scrollHeight=e;this._tracking=true}}}}class E extends f.StackedPanel{constructor(e,t){super();this._outputAreas=new Map;this._source=null;this._sourceChanged=new i.Signal(this);this._sourceDisplayed=new i.Signal(this);this._loggersWatched=new Set;this.translator=t||g.nullTranslator;this._trans=this.translator.load("jupyterlab");this._loggerRegistry=e;this.addClass("jp-LogConsolePanel");e.registryChanged.connect(((e,t)=>{this._bindLoggerSignals()}),this);this._bindLoggerSignals();this._placeholder=new f.Widget;this._placeholder.addClass("jp-LogConsoleListPlaceholder");this.addWidget(this._placeholder)}get loggerRegistry(){return this._loggerRegistry}get logger(){if(this.source===null){return null}return this.loggerRegistry.getLogger(this.source)}get source(){return this._source}set source(e){if(e===this._source){return}const t=this._source;const n=this._source=e;this._showOutputFromSource(n);this._handlePlaceholder();this._sourceChanged.emit({oldValue:t,newValue:n,name:"source"})}get sourceVersion(){const e=this.source;return e!==null?this._loggerRegistry.getLogger(e).version:null}get sourceChanged(){return this._sourceChanged}get sourceDisplayed(){return this._sourceDisplayed}onAfterAttach(e){super.onAfterAttach(e);this._updateOutputAreas();this._showOutputFromSource(this._source);this._handlePlaceholder()}onAfterShow(e){super.onAfterShow(e);if(this.source!==null){this._sourceDisplayed.emit({source:this.source,version:this.sourceVersion})}}_bindLoggerSignals(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(this._loggersWatched.has(t.source)){continue}t.contentChanged.connect(((e,t)=>{this._updateOutputAreas();this._handlePlaceholder()}),this);t.stateChanged.connect(((e,t)=>{if(t.name!=="rendermime"){return}const n=`source:${e.source}`;const r=this._outputAreas.get(n);if(r){if(t.newValue){r.rendermime=t.newValue}else{r.dispose()}}}),this);this._loggersWatched.add(t.source)}}_showOutputFromSource(e){const t=e===null?"null source":`source:${e}`;this._outputAreas.forEach(((e,n)=>{var r,o;if(e.id===t){(r=e.parent)===null||r===void 0?void 0:r.show();if(e.isVisible){this._sourceDisplayed.emit({source:this.source,version:this.sourceVersion})}}else{(o=e.parent)===null||o===void 0?void 0:o.hide()}}));const n=e===null?this._trans.__("Log Console"):this._trans.__("Log: %1",e);this.title.label=n;this.title.caption=n}_handlePlaceholder(){if(this.source===null){this._placeholder.node.textContent=this._trans.__("No source selected.");this._placeholder.show()}else if(this._loggerRegistry.getLogger(this.source).length===0){this._placeholder.node.textContent=this._trans.__("No log messages.");this._placeholder.show()}else{this._placeholder.hide();this._placeholder.node.textContent=""}}_updateOutputAreas(){const e=new Set;const t=this._loggerRegistry.getLoggers();for(const r of t){const t=r.source;const n=`source:${t}`;e.add(n);if(!this._outputAreas.has(n)){const e=new b({rendermime:r.rendermime,contentFactory:new _,model:r.outputAreaModel});e.id=n;const o=new y({content:e});this.addWidget(o);this._outputAreas.set(n,e);const i=e=>{if(this.source===t&&e.isVisible){this._sourceDisplayed.emit({source:this.source,version:this.sourceVersion})}};e.outputLengthChanged.connect(i,this);i(e)}}const n=this._outputAreas.keys();for(const r of n){if(!e.has(r)){const e=this._outputAreas.get(r);e===null||e===void 0?void 0:e.dispose();this._outputAreas.delete(r)}}}}},70161:(e,t,n)=>{"use strict";var r=n(32902);var o=n(98896);var i=n(5333);var s=n(93379);var a=n.n(s);var l=n(27888);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},66147:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CommandIDs:()=>j,createEditMenu:()=>B,createFileMenu:()=>S,createKernelMenu:()=>D,createViewMenu:()=>M,createRunMenu:()=>T,createTabsMenu:()=>I,default:()=>P});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(69442);var l=n.n(a);var c=n(73704);var d=n.n(c);var u=n(22248);var h=n.n(u);var p=n(42014);var m=n.n(p);var g=n(59768);var f=n.n(g);var A=n(25903);var v=n.n(A);var C=n(54522);var b=n.n(C);var _=n(91100);var y=n.n(_);var E=n(700);var w=n.n(E);const x="@jupyterlab/mainmenu-extension:plugin";var j;(function(e){e.openEdit="editmenu:open";e.undo="editmenu:undo";e.redo="editmenu:redo";e.clearCurrent="editmenu:clear-current";e.clearAll="editmenu:clear-all";e.find="editmenu:find";e.goToLine="editmenu:go-to-line";e.openFile="filemenu:open";e.closeAndCleanup="filemenu:close-and-cleanup";e.createConsole="filemenu:create-console";e.shutdown="filemenu:shutdown";e.logout="filemenu:logout";e.openKernel="kernelmenu:open";e.interruptKernel="kernelmenu:interrupt";e.reconnectToKernel="kernelmenu:reconnect-to-kernel";e.restartKernel="kernelmenu:restart";e.restartKernelAndClear="kernelmenu:restart-and-clear";e.changeKernel="kernelmenu:change";e.shutdownKernel="kernelmenu:shutdown";e.shutdownAllKernels="kernelmenu:shutdownAll";e.openView="viewmenu:open";e.wordWrap="viewmenu:word-wrap";e.lineNumbering="viewmenu:line-numbering";e.matchBrackets="viewmenu:match-brackets";e.openRun="runmenu:open";e.run="runmenu:run";e.runAll="runmenu:run-all";e.restartAndRunAll="runmenu:restart-and-run-all";e.runAbove="runmenu:run-above";e.runBelow="runmenu:run-below";e.openTabs="tabsmenu:open";e.activateById="tabsmenu:activate-by-id";e.activatePreviouslyUsedTab="tabsmenu:activate-previously-used-tab";e.openSettings="settingsmenu:open";e.openHelp="helpmenu:open";e.openFirst="mainmenu:open-first"})(j||(j={}));const k={id:x,requires:[r.IRouter,g.ITranslator],optional:[i.ICommandPalette,r.ILabShell,p.ISettingRegistry],provides:c.IMainMenu,activate:async(e,t,n,r,o,i)=>{const{commands:s}=e;const l=n.load("jupyterlab");const d=new c.MainMenu(s);d.id="jp-MainMenu";d.addClass("jp-scrollbar-tiny");if(i){await R.loadSettingsMenu(i,(e=>{d.addMenu(e,{rank:e.rank})}),(e=>c.MainMenu.generateMenu(s,e,l)),n)}const u=a.PageConfig.getOption("quitButton").toLowerCase();d.fileMenu.quitEntry=u==="true";B(e,d.editMenu,l);S(e,d.fileMenu,t,l);D(e,d.kernelMenu,l);T(e,d.runMenu,l);M(e,d.viewMenu,l);if(o){I(e,d.tabsMenu,o,l)}const h=e=>{d.activeMenu=e;d.openActiveMenu()};s.addCommand(j.openEdit,{label:l.__("Open Edit Menu"),execute:()=>h(d.editMenu)});s.addCommand(j.openFile,{label:l.__("Open File Menu"),execute:()=>h(d.fileMenu)});s.addCommand(j.openKernel,{label:l.__("Open Kernel Menu"),execute:()=>h(d.kernelMenu)});s.addCommand(j.openRun,{label:l.__("Open Run Menu"),execute:()=>h(d.runMenu)});s.addCommand(j.openView,{label:l.__("Open View Menu"),execute:()=>h(d.viewMenu)});s.addCommand(j.openSettings,{label:l.__("Open Settings Menu"),execute:()=>h(d.settingsMenu)});s.addCommand(j.openTabs,{label:l.__("Open Tabs Menu"),execute:()=>h(d.tabsMenu)});s.addCommand(j.openHelp,{label:l.__("Open Help Menu"),execute:()=>h(d.helpMenu)});s.addCommand(j.openFirst,{label:l.__("Open First Menu"),execute:()=>{d.activeIndex=0;d.openActiveMenu()}});if(r){r.addItem({command:j.shutdown,category:l.__("Main Area")});r.addItem({command:j.logout,category:l.__("Main Area")});r.addItem({command:j.shutdownAllKernels,category:l.__("Kernel Operations")});r.addItem({command:j.activatePreviouslyUsedTab,category:l.__("Main Area")})}e.shell.add(d,"menu",{rank:100});return d}};function B(e,t,n){const r=e.commands;r.addCommand(j.undo,{label:n.__("Undo"),isEnabled:R.delegateEnabled(e,t.undoers,"undo"),execute:R.delegateExecute(e,t.undoers,"undo")});r.addCommand(j.redo,{label:n.__("Redo"),isEnabled:R.delegateEnabled(e,t.undoers,"redo"),execute:R.delegateExecute(e,t.undoers,"redo")});r.addCommand(j.clearCurrent,{label:()=>{const r=R.delegateEnabled(e,t.clearers,"clearCurrent")();let o=n.__("Clear");if(r){o=R.delegateLabel(e,t.clearers,"clearCurrentLabel")}return o},isEnabled:R.delegateEnabled(e,t.clearers,"clearCurrent"),execute:R.delegateExecute(e,t.clearers,"clearCurrent")});r.addCommand(j.clearAll,{label:()=>{const r=R.delegateEnabled(e,t.clearers,"clearAll")();let o=n.__("Clear All");if(r){o=R.delegateLabel(e,t.clearers,"clearAllLabel")}return o},isEnabled:R.delegateEnabled(e,t.clearers,"clearAll"),execute:R.delegateExecute(e,t.clearers,"clearAll")});r.addCommand(j.goToLine,{label:n.__("Go to Line"),isEnabled:R.delegateEnabled(e,t.goToLiners,"goToLine"),execute:R.delegateExecute(e,t.goToLiners,"goToLine")})}function S(e,t,n,r){const o=e.commands;o.addCommand(j.closeAndCleanup,{label:()=>{const n=R.delegateLabel(e,t.closeAndCleaners,"closeAndCleanupLabel");return n?n:r.__("Close and Shutdown")},isEnabled:()=>!!e.shell.currentWidget&&!!e.shell.currentWidget.title.closable,execute:()=>{if(R.delegateEnabled(e,t.closeAndCleaners,"closeAndCleanup")()){return R.delegateExecute(e,t.closeAndCleaners,"closeAndCleanup")()}return e.commands.execute("application:close")}});o.addCommand(j.createConsole,{label:()=>{const n=R.delegateLabel(e,t.consoleCreators,"createConsoleLabel");return n?n:r.__("New Console for Activity")},isEnabled:R.delegateEnabled(e,t.consoleCreators,"createConsole"),execute:R.delegateExecute(e,t.consoleCreators,"createConsole")});o.addCommand(j.shutdown,{label:r.__("Shut Down"),caption:r.__("Shut down JupyterLab"),isVisible:()=>t.quitEntry,isEnabled:()=>t.quitEntry,execute:()=>(0,i.showDialog)({title:r.__("Shutdown confirmation"),body:r.__("Please confirm you want to shut down JupyterLab."),buttons:[i.Dialog.cancelButton(),i.Dialog.warnButton({label:r.__("Shut Down")})]}).then((async t=>{if(t.button.accept){const t=u.ServerConnection.makeSettings();const o=a.URLExt.join(t.baseUrl,"api/shutdown");try{await Promise.all([e.serviceManager.sessions.shutdownAll(),e.serviceManager.terminals.shutdownAll()])}catch(n){console.log(`Failed to shutdown sessions and terminals: ${n}`)}return u.ServerConnection.makeRequest(o,{method:"POST"},t).then((e=>{if(e.ok){const e=document.createElement("div");const t=document.createElement("p");t.textContent=r.__("You have shut down the Jupyter server. You can now close this tab.");const n=document.createElement("p");n.textContent=r.__("To use JupyterLab again, you will need to relaunch it.");e.appendChild(t);e.appendChild(n);void(0,i.showDialog)({title:r.__("Server stopped"),body:new E.Widget({node:e}),buttons:[]});window.close()}else{throw new u.ServerConnection.ResponseError(e)}})).catch((e=>{throw new u.ServerConnection.NetworkError(e)}))}}))});o.addCommand(j.logout,{label:r.__("Log Out"),caption:r.__("Log out of JupyterLab"),isVisible:()=>t.quitEntry,isEnabled:()=>t.quitEntry,execute:()=>{n.navigate("/logout",{hard:true})}})}function D(e,t,n){const r=e.commands;r.addCommand(j.interruptKernel,{label:n.__("Interrupt Kernel"),caption:n.__("Interrupt the kernel"),icon:e=>e.toolbar?A.stopIcon:undefined,isEnabled:R.delegateEnabled(e,t.kernelUsers,"interruptKernel"),execute:R.delegateExecute(e,t.kernelUsers,"interruptKernel")});r.addCommand(j.reconnectToKernel,{label:n.__("Reconnect to Kernel"),isEnabled:R.delegateEnabled(e,t.kernelUsers,"reconnectToKernel"),execute:R.delegateExecute(e,t.kernelUsers,"reconnectToKernel")});r.addCommand(j.restartKernel,{label:n.__("Restart Kernel"),caption:n.__("Restart the kernel"),icon:e=>e.toolbar?A.refreshIcon:undefined,isEnabled:R.delegateEnabled(e,t.kernelUsers,"restartKernel"),execute:R.delegateExecute(e,t.kernelUsers,"restartKernel")});r.addCommand(j.restartKernelAndClear,{label:()=>{const r=R.delegateEnabled(e,t.kernelUsers,"restartKernelAndClear")();let o=n.__("Restart Kernel and Clear");if(r){o=R.delegateLabel(e,t.kernelUsers,"restartKernelAndClearLabel")}return o},isEnabled:R.delegateEnabled(e,t.kernelUsers,"restartKernelAndClear"),execute:R.delegateExecute(e,t.kernelUsers,"restartKernelAndClear")});r.addCommand(j.changeKernel,{label:n.__("Change Kernel"),isEnabled:R.delegateEnabled(e,t.kernelUsers,"changeKernel"),execute:R.delegateExecute(e,t.kernelUsers,"changeKernel")});r.addCommand(j.shutdownKernel,{label:n.__("Shut Down Kernel"),isEnabled:R.delegateEnabled(e,t.kernelUsers,"shutdownKernel"),execute:R.delegateExecute(e,t.kernelUsers,"shutdownKernel")});r.addCommand(j.shutdownAllKernels,{label:n.__("Shut Down All Kernels"),isEnabled:()=>e.serviceManager.sessions.running().next()!==undefined,execute:()=>(0,i.showDialog)({title:n.__("Shut Down All?"),body:n.__("Shut down all kernels?"),buttons:[i.Dialog.cancelButton({label:n.__("Dismiss")}),i.Dialog.warnButton({label:n.__("Shut Down All")})]}).then((t=>{if(t.button.accept){return e.serviceManager.sessions.shutdownAll()}}))})}function M(e,t,n){const r=e.commands;r.addCommand(j.lineNumbering,{label:n.__("Show Line Numbers"),isEnabled:R.delegateEnabled(e,t.editorViewers,"toggleLineNumbers"),isToggled:R.delegateToggled(e,t.editorViewers,"lineNumbersToggled"),execute:R.delegateExecute(e,t.editorViewers,"toggleLineNumbers")});r.addCommand(j.matchBrackets,{label:n.__("Match Brackets"),isEnabled:R.delegateEnabled(e,t.editorViewers,"toggleMatchBrackets"),isToggled:R.delegateToggled(e,t.editorViewers,"matchBracketsToggled"),execute:R.delegateExecute(e,t.editorViewers,"toggleMatchBrackets")});r.addCommand(j.wordWrap,{label:n.__("Wrap Words"),isEnabled:R.delegateEnabled(e,t.editorViewers,"toggleWordWrap"),isToggled:R.delegateToggled(e,t.editorViewers,"wordWrapToggled"),execute:R.delegateExecute(e,t.editorViewers,"toggleWordWrap")})}function T(e,t,n){const r=e.commands;r.addCommand(j.run,{label:()=>{const r=R.delegateLabel(e,t.codeRunners,"runLabel");const o=R.delegateEnabled(e,t.codeRunners,"run")();return o?r:n.__("Run Selected")},caption:()=>{const r=R.delegateLabel(e,t.codeRunners,"runCaption");const o=R.delegateEnabled(e,t.codeRunners,"run")();return o?r:n.__("Run Selected")},icon:e=>e.toolbar?A.runIcon:undefined,isEnabled:R.delegateEnabled(e,t.codeRunners,"run"),execute:R.delegateExecute(e,t.codeRunners,"run")});r.addCommand(j.runAll,{label:()=>{let r=n.__("Run All");const o=R.delegateEnabled(e,t.codeRunners,"runAll")();if(o){r=R.delegateLabel(e,t.codeRunners,"runAllLabel")}return r},caption:()=>{let r=n.__("Run All");const o=R.delegateEnabled(e,t.codeRunners,"runAll")();if(o){r=R.delegateLabel(e,t.codeRunners,"runAllCaption")}return r},isEnabled:R.delegateEnabled(e,t.codeRunners,"runAll"),execute:R.delegateExecute(e,t.codeRunners,"runAll")});r.addCommand(j.restartAndRunAll,{label:()=>{let r=n.__("Restart Kernel and Run All");const o=R.delegateEnabled(e,t.codeRunners,"restartAndRunAll")();if(o){r=R.delegateLabel(e,t.codeRunners,"restartAndRunAllLabel")}return r},caption:()=>{let r=n.__("Restart Kernel and Run All");const o=R.delegateEnabled(e,t.codeRunners,"restartAndRunAll")();if(o){r=R.delegateLabel(e,t.codeRunners,"restartAndRunAllLabel")}return r},icon:e=>e.toolbar?A.fastForwardIcon:undefined,isEnabled:R.delegateEnabled(e,t.codeRunners,"restartAndRunAll"),execute:R.delegateExecute(e,t.codeRunners,"restartAndRunAll")})}function I(e,t,n,r){const o=e.commands;const i=[];let s;o.addCommand(j.activateById,{label:t=>{const n=t["id"]||"";const r=(0,C.find)(e.shell.widgets("main"),(e=>e.id===n));return r&&r.title.label||""},isToggled:t=>{const n=t["id"]||"";return!!e.shell.currentWidget&&e.shell.currentWidget.id===n},execute:t=>e.shell.activateById(t["id"]||"")});let a="";o.addCommand(j.activatePreviouslyUsedTab,{label:r.__("Activate Previously Used Tab"),isEnabled:()=>!!a,execute:()=>o.execute(j.activateById,{id:a})});if(n){void e.restored.then((()=>{const r=()=>{if(s&&!s.isDisposed){s.dispose()}i.length=0;let n=false;(0,C.each)(e.shell.widgets("main"),(e=>{if(e.id===a){n=true}i.push({command:j.activateById,args:{id:e.id}})}));s=t.addGroup(i,1);a=n?a:""};r();n.layoutModified.connect((()=>{r()}));n.currentChanged.connect(((e,t)=>{const n=t.oldValue;if(!n){return}a=n.id}))}))}}const P=k;var R;(function(e){function t(e,t){for(const n of e){if(t(n)){return n}}return undefined}function n(e,n,r){const o=e.shell.currentWidget;const i=o?t(n,(e=>e.tracker.has(o))):undefined;if(!i||!i[r]){return""}else{const e=i.tracker.size;return i[r](e)}}e.delegateLabel=n;function r(e,n,r){return()=>{const o=e.shell.currentWidget;const i=o?t(n,(e=>e.tracker.has(o))):undefined;if(!i){return Promise.resolve(void 0)}const s=i[r];return s(o)}}e.delegateExecute=r;function o(e,n,r){return()=>{const o=e.shell.currentWidget;const i=o?t(n,(e=>e.tracker.has(o))):undefined;return!!i&&!!i[r]&&(i.isEnabled&&o?i.isEnabled(o):true)}}e.delegateEnabled=o;function s(e,n,r){return()=>{const o=e.shell.currentWidget;const i=o?t(n,(e=>e.tracker.has(o))):undefined;return!!i&&!!i[r]&&!!o&&!!i[r](o)}}e.delegateToggled=s;async function a(e){const t=await(0,i.showDialog)({title:e.__("Information"),body:e.__("Menu customization has changed. You will need to reload JupyterLab to see the changes."),buttons:[i.Dialog.cancelButton(),i.Dialog.okButton({label:e.__("Reload")})]});if(t.button.accept){location.reload()}}async function l(e,t,n,r){var o;const s=r.load("jupyterlab");let l=null;let c={};function d(t){var n,r;c={};const o=Object.keys(e.plugins).map((t=>{var n,r;const o=(r=(n=e.plugins[t].schema["jupyter.lab.menus"])===null||n===void 0?void 0:n.main)!==null&&r!==void 0?r:[];c[t]=o;return o})).concat([(r=(n=t["jupyter.lab.menus"])===null||n===void 0?void 0:n.main)!==null&&r!==void 0?r:[]]).reduceRight(((e,t)=>p.SettingRegistry.reconcileMenus(e,t,true)),t.properties.menus.default);t.properties.menus.default=p.SettingRegistry.reconcileMenus(o,t.properties.menus.default,true).sort(((e,t)=>{var n,r;return((n=e.rank)!==null&&n!==void 0?n:Infinity)-((r=t.rank)!==null&&r!==void 0?r:Infinity)}))}e.transform(x,{compose:e=>{var t,n,r,o;if(!l){l=_.JSONExt.deepCopy(e.schema);d(l)}const i=(r=(n=(t=l.properties)===null||t===void 0?void 0:t.menus)===null||n===void 0?void 0:n.default)!==null&&r!==void 0?r:[];const s=Object.assign(Object.assign({},e.data.user),{menus:(o=e.data.user.menus)!==null&&o!==void 0?o:[]});const a=Object.assign(Object.assign({},e.data.composite),{menus:p.SettingRegistry.reconcileMenus(i,s.menus)});e.data={composite:a,user:s};return e},fetch:e=>{if(!l){l=_.JSONExt.deepCopy(e.schema);d(l)}return{data:e.data,id:e.id,raw:e.raw,schema:l,version:e.version}}});const u=await e.load(x);const h=(o=_.JSONExt.deepCopy(u.composite.menus))!==null&&o!==void 0?o:[];const m=new Array;i.MenuFactory.createMenus(h.filter((e=>!e.disabled)).map((e=>{var t;return Object.assign(Object.assign({},e),{items:p.SettingRegistry.filterDisabledItems((t=e.items)!==null&&t!==void 0?t:[])})})),n).forEach((e=>{m.push(e);t(e)}));u.changed.connect((()=>{var e;const t=(e=u.composite.menus)!==null&&e!==void 0?e:[];if(!_.JSONExt.deepEqual(h,t)){void a(s)}}));e.pluginChanged.connect((async(r,o)=>{var l,d,u;if(o!==x){const r=(l=c[o])!==null&&l!==void 0?l:[];const g=(u=(d=e.plugins[o].schema["jupyter.lab.menus"])===null||d===void 0?void 0:d.main)!==null&&u!==void 0?u:[];if(!_.JSONExt.deepEqual(r,g)){if(c[o]){await a(s)}else{c[o]=_.JSONExt.deepCopy(g);const e=p.SettingRegistry.reconcileMenus(g,h,false,false).filter((e=>!e.disabled)).map((e=>{var t;return Object.assign(Object.assign({},e),{items:p.SettingRegistry.filterDisabledItems((t=e.items)!==null&&t!==void 0?t:[])})}));i.MenuFactory.updateMenus(m,e,n).forEach((e=>{t(e)}))}}}}))}e.loadSettingsMenu=l})(R||(R={}))},83344:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(90516);var a=n(74518)},97630:(e,t,n)=>{"use strict";n.r(t);n.d(t,{EditMenu:()=>s,FileMenu:()=>a,HelpMenu:()=>l,IJupyterLabMenu:()=>r.IRankedMenu,IMainMenu:()=>A,JupyterLabMenu:()=>r.RankedMenu,KernelMenu:()=>c,MainMenu:()=>m,RunMenu:()=>d,SettingsMenu:()=>u,TabsMenu:()=>h,ViewMenu:()=>p});var r=n(25903);var o=n(54522);var i=n(700);class s extends r.RankedMenu{constructor(e){super(e);this.undoers=new Set;this.clearers=new Set;this.goToLiners=new Set}dispose(){this.undoers.clear();this.clearers.clear();super.dispose()}}class a extends r.RankedMenu{constructor(e){super(e);this.quitEntry=false;this.closeAndCleaners=new Set;this.consoleCreators=new Set}get newMenu(){var e,t;if(!this._newMenu){this._newMenu=(t=(e=(0,o.find)(this.items,(e=>{var t;return((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-file-new"})))===null||e===void 0?void 0:e.submenu)!==null&&t!==void 0?t:new r.RankedMenu({commands:this.commands})}return this._newMenu}dispose(){var e;(e=this._newMenu)===null||e===void 0?void 0:e.dispose();this.consoleCreators.clear();super.dispose()}}class l extends r.RankedMenu{constructor(e){super(e);this.kernelUsers=new Set}}class c extends r.RankedMenu{constructor(e){super(e);this.kernelUsers=new Set}dispose(){this.kernelUsers.clear();super.dispose()}}class d extends r.RankedMenu{constructor(e){super(e);this.codeRunners=new Set}dispose(){this.codeRunners.clear();super.dispose()}}class u extends r.RankedMenu{constructor(e){super(e)}}class h extends r.RankedMenu{constructor(e){super(e)}}class p extends r.RankedMenu{constructor(e){super(e);this.editorViewers=new Set}dispose(){this.editorViewers.clear();super.dispose()}}class m extends i.MenuBar{constructor(e){super();this._items=[];this._commands=e}get editMenu(){if(!this._editMenu){this._editMenu=new s({commands:this._commands,rank:2,renderer:r.MenuSvg.defaultRenderer})}return this._editMenu}get fileMenu(){if(!this._fileMenu){this._fileMenu=new a({commands:this._commands,rank:1,renderer:r.MenuSvg.defaultRenderer})}return this._fileMenu}get helpMenu(){if(!this._helpMenu){this._helpMenu=new l({commands:this._commands,rank:1e3,renderer:r.MenuSvg.defaultRenderer})}return this._helpMenu}get kernelMenu(){if(!this._kernelMenu){this._kernelMenu=new c({commands:this._commands,rank:5,renderer:r.MenuSvg.defaultRenderer})}return this._kernelMenu}get runMenu(){if(!this._runMenu){this._runMenu=new d({commands:this._commands,rank:4,renderer:r.MenuSvg.defaultRenderer})}return this._runMenu}get settingsMenu(){if(!this._settingsMenu){this._settingsMenu=new u({commands:this._commands,rank:999,renderer:r.MenuSvg.defaultRenderer})}return this._settingsMenu}get viewMenu(){if(!this._viewMenu){this._viewMenu=new p({commands:this._commands,rank:3,renderer:r.MenuSvg.defaultRenderer})}return this._viewMenu}get tabsMenu(){if(!this._tabsMenu){this._tabsMenu=new h({commands:this._commands,rank:500,renderer:r.MenuSvg.defaultRenderer})}return this._tabsMenu}addMenu(e,t={}){if(o.ArrayExt.firstIndexOf(this.menus,e)>-1){return}r.MenuSvg.overrideDefaultRenderer(e);const n="rank"in t?t.rank:"rank"in e?e.rank:r.IRankedMenu.DEFAULT_RANK;const i={menu:e,rank:n};const m=o.ArrayExt.upperBound(this._items,i,g.itemCmp);e.disposed.connect(this._onMenuDisposed,this);o.ArrayExt.insert(this._items,m,i);this.insertMenu(m,e);switch(e.id){case"jp-mainmenu-file":if(!this._fileMenu&&e instanceof a){this._fileMenu=e}break;case"jp-mainmenu-edit":if(!this._editMenu&&e instanceof s){this._editMenu=e}break;case"jp-mainmenu-view":if(!this._viewMenu&&e instanceof p){this._viewMenu=e}break;case"jp-mainmenu-run":if(!this._runMenu&&e instanceof d){this._runMenu=e}break;case"jp-mainmenu-kernel":if(!this._kernelMenu&&e instanceof c){this._kernelMenu=e}break;case"jp-mainmenu-tabs":if(!this._tabsMenu&&e instanceof h){this._tabsMenu=e}break;case"jp-mainmenu-settings":if(!this._settingsMenu&&e instanceof u){this._settingsMenu=e}break;case"jp-mainmenu-help":if(!this._helpMenu&&e instanceof l){this._helpMenu=e}break}}dispose(){var e,t,n,r,o,i,s,a;(e=this._editMenu)===null||e===void 0?void 0:e.dispose();(t=this._fileMenu)===null||t===void 0?void 0:t.dispose();(n=this._helpMenu)===null||n===void 0?void 0:n.dispose();(r=this._kernelMenu)===null||r===void 0?void 0:r.dispose();(o=this._runMenu)===null||o===void 0?void 0:o.dispose();(i=this._settingsMenu)===null||i===void 0?void 0:i.dispose();(s=this._viewMenu)===null||s===void 0?void 0:s.dispose();(a=this._tabsMenu)===null||a===void 0?void 0:a.dispose();super.dispose()}static generateMenu(e,t,n){let o;const{id:i,label:m,rank:g}=t;switch(i){case"jp-mainmenu-file":o=new a({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-edit":o=new s({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-view":o=new p({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-run":o=new d({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-kernel":o=new c({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-tabs":o=new h({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-settings":o=new u({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;case"jp-mainmenu-help":o=new l({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer});break;default:o=new r.RankedMenu({commands:e,rank:g,renderer:r.MenuSvg.defaultRenderer})}if(m){o.title.label=n._p("menu",m)}return o}_onMenuDisposed(e){this.removeMenu(e);const t=o.ArrayExt.findFirstIndex(this._items,(t=>t.menu===e));if(t!==-1){o.ArrayExt.removeAt(this._items,t)}}}var g;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t})(g||(g={}));var f=n(91100);const A=new f.Token("@jupyterlab/mainmenu:IMainMenu")},74518:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536)},32824:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>_});var r=n(97577);var o=n.n(r);var i=n(3378);var s=n.n(i);var a=n(69442);var l=n.n(a);var c=n(37775);var d=n.n(c);var u=n(63833);var h=n.n(u);var p=n(42014);var m=n.n(p);var g=n(59768);var f=n.n(g);var A;(function(e){e.markdownPreview="markdownviewer:open";e.markdownEditor="markdownviewer:edit"})(A||(A={}));const v="Markdown Preview";const C={activate:b,id:"@jupyterlab/markdownviewer-extension:plugin",provides:c.IMarkdownViewerTracker,requires:[u.IRenderMimeRegistry,g.ITranslator],optional:[r.ILayoutRestorer,p.ISettingRegistry],autoStart:true};function b(e,t,n,r,o){const s=n.load("jupyterlab");const{commands:l,docRegistry:d}=e;t.addFactory(u.markdownRendererFactory);const h="markdownviewer-widget";const p=new i.WidgetTracker({namespace:h});let m=Object.assign({},c.MarkdownViewer.defaultConfig);function g(e){Object.keys(m).forEach((t=>{var n;e.setOption(t,(n=m[t])!==null&&n!==void 0?n:null)}))}if(o){const e=e=>{m=e.composite;p.forEach((e=>{g(e.content)}))};o.load(C.id).then((t=>{t.changed.connect((()=>{e(t)}));e(t)})).catch((e=>{console.error(e.message)}))}const f=new c.MarkdownViewerFactory({rendermime:t,name:v,primaryFileType:d.getFileType("markdown"),fileTypes:["markdown"],defaultRendered:["markdown"]});f.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void p.save(t)}));g(t.content);void p.add(t)}));d.addWidgetFactory(f);if(r){void r.restore(p,{command:"docmanager:open",args:e=>({path:e.context.path,factory:v}),name:e=>e.context.path})}l.addCommand(A.markdownPreview,{label:s.__("Markdown Preview"),execute:e=>{const t=e["path"];if(typeof t!=="string"){return}return l.execute("docmanager:open",{path:t,factory:v,options:e["options"]})}});l.addCommand(A.markdownEditor,{execute:()=>{const e=p.currentWidget;if(!e){return}const t=e.context.path;return l.execute("docmanager:open",{path:t,factory:"Editor",options:{mode:"split-right"}})},isVisible:()=>{const e=p.currentWidget;return e&&a.PathExt.extname(e.context.path)===".md"||false},label:s.__("Show Markdown Editor")});return p}const _=C},11706:(e,t,n)=>{"use strict";var r=n(79536);var o=n(98896);var i=n(90516);var s=n(31180)},41703:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IMarkdownViewerTracker:()=>o,MarkdownDocument:()=>m,MarkdownViewer:()=>p,MarkdownViewerFactory:()=>g});var r=n(91100);const o=new r.Token("@jupyterlab/markdownviewer:IMarkdownViewerTracker");var i=n(3378);var s=n(69442);var a=n(34576);var l=n(63833);var c=n(59768);var d=n(700);const u="jp-MarkdownViewer";const h="text/markdown";class p extends d.Widget{constructor(e){super();this._config=Object.assign({},p.defaultConfig);this._fragment="";this._ready=new r.PromiseDelegate;this._isRendering=false;this._renderRequested=false;this.context=e.context;this.translator=e.translator||c.nullTranslator;this._trans=this.translator.load("jupyterlab");this.renderer=e.renderer;this.node.tabIndex=0;this.addClass(u);const t=this.layout=new d.StackedLayout;t.addWidget(this.renderer);void this.context.ready.then((async()=>{await this._render();this._monitor=new s.ActivityMonitor({signal:this.context.model.contentChanged,timeout:this._config.renderTimeout});this._monitor.activityStopped.connect(this.update,this);this._ready.resolve(undefined)}))}get ready(){return this._ready.promise}setFragment(e){this._fragment=e;this.update()}setOption(e,t){if(this._config[e]===t){return}this._config[e]=t;const{style:n}=this.renderer.node;switch(e){case"fontFamily":n.setProperty("font-family",t);break;case"fontSize":n.setProperty("font-size",t?t+"px":null);break;case"hideFrontMatter":this.update();break;case"lineHeight":n.setProperty("line-height",t?t.toString():null);break;case"lineWidth":{const e=t?`calc(50% - ${t/2}ch)`:null;n.setProperty("padding-left",e);n.setProperty("padding-right",e);break}case"renderTimeout":if(this._monitor){this._monitor.timeout=t}break;default:break}}dispose(){if(this.isDisposed){return}if(this._monitor){this._monitor.dispose()}this._monitor=null;super.dispose()}onUpdateRequest(e){if(this.context.isReady&&!this.isDisposed){void this._render();this._fragment=""}}onActivateRequest(e){this.node.focus()}async _render(){if(this.isDisposed){return}if(this._isRendering){this._renderRequested=true;return}this._renderRequested=false;const{context:e}=this;const{model:t}=e;const n=t.toString();const r={};r[h]=this._config.hideFrontMatter?f.removeFrontMatter(n):n;const o=new l.MimeModel({data:r,metadata:{fragment:this._fragment}});try{this._isRendering=true;await this.renderer.renderModel(o);this._isRendering=false;if(this._renderRequested){return this._render()}}catch(s){requestAnimationFrame((()=>{this.dispose()}));void(0,i.showErrorMessage)(this._trans.__("Renderer Failure: %1",e.path),s)}}}(function(e){e.defaultConfig={fontFamily:null,fontSize:null,lineHeight:null,lineWidth:null,hideFrontMatter:true,renderTimeout:1e3}})(p||(p={}));class m extends a.DocumentWidget{setFragment(e){this.content.setFragment(e)}}class g extends a.ABCWidgetFactory{constructor(e){super(f.createRegistryOptions(e));this._fileType=e.primaryFileType;this._rendermime=e.rendermime}createNewWidget(e){var t,n,r,o,i;const s=this._rendermime.clone({resolver:e.urlResolver});const a=s.createRenderer(h);const l=new p({context:e,renderer:a});l.title.icon=(t=this._fileType)===null||t===void 0?void 0:t.icon;l.title.iconClass=(r=(n=this._fileType)===null||n===void 0?void 0:n.iconClass)!==null&&r!==void 0?r:"";l.title.iconLabel=(i=(o=this._fileType)===null||o===void 0?void 0:o.iconLabel)!==null&&i!==void 0?i:"";const c=new m({content:l,context:e});return c}}var f;(function(e){function t(e){return Object.assign(Object.assign({},e),{readOnly:true})}e.createRegistryOptions=t;function n(e){const t=/^---\n[^]*?\n(---|...)\n/;const n=e.match(t);if(!n){return e}const{length:r}=n[0];return e.slice(r)}e.removeFrontMatter=n})(f||(f={}))},31180:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(98896);var s=n(94683);var a=n(93379);var l=n.n(a);var c=n(36964);var d={};d.insert="head";d.singleton=false;var u=l()(c.Z,d);const h=c.Z.locals||{}},65087:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>d});var r=n(69442);var o=n.n(r);var i=n(81371);var s=n.n(i);var a=n(63833);var l=n.n(a);const c={id:"@jupyterlab/mathjax2-extension:plugin",autoStart:true,provides:a.ILatexTypesetter,activate:()=>{const[e,t]=["fullMathjaxUrl","mathjaxConfig"];const n=r.PageConfig.getOption(e);const o=r.PageConfig.getOption(t);if(!n){const n=`${c.id} uses '${e}' and '${t}' in PageConfig `+`to operate but '${e}' was not found.`;throw new Error(n)}return new i.MathJaxTypesetter({url:n,config:o})}};const d=c},70987:(e,t,n)=>{"use strict";var r=n(98896);var o=n(90516);var i=n(93379);var s=n.n(i);var a=n(74414);var l={};l.insert="head";l.singleton=false;var c=s()(a.Z,l);const d=a.Z.locals||{}},98049:(e,t,n)=>{"use strict";n.r(t);n.d(t,{MathJaxTypesetter:()=>i});var r=n(91100);var o=n.n(r);class i{constructor(e){this._initPromise=new r.PromiseDelegate;this._initialized=false;this._url=e.url;this._config=e.config}typeset(e){if(!this._initialized){this._init()}void this._initPromise.promise.then((()=>{MathJax.Hub.Queue(["Typeset",MathJax.Hub,e]);try{MathJax.Hub.Queue(["Require",MathJax.Ajax,"[MathJax]/extensions/TeX/AMSmath.js"],(()=>{MathJax.InputJax.TeX.resetEquationNumbers()}))}catch(t){console.error("Error queueing resetEquationNumbers:",t)}}))}_init(){const e=document.getElementsByTagName("head")[0];const t=document.createElement("script");t.type="text/javascript";t.src=`${this._url}?config=${this._config}&amp;delayStartupUntil=configured`;t.charset="utf-8";e.appendChild(t);t.addEventListener("load",(()=>{this._onLoad()}));this._initialized=true}_onLoad(){MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:true,processEnvironments:true},displayAlign:"center",CommonHTML:{linebreaks:{automatic:true}},"HTML-CSS":{availableFonts:[],imageFont:null,preferredFont:null,webFont:"STIX-Web",styles:{".MathJax_Display":{margin:0}},linebreaks:{automatic:true}},skipStartupTypeset:true,messageStyle:"none"});MathJax.Hub.Configured();this._initPromise.resolve(void 0)}}},42302:(e,t,n)=>{"use strict";n.r(t);n.d(t,{MAJOR_VERSION:()=>i,MINOR_VERSION:()=>s,validateMimeValue:()=>a,isRaw:()=>l,isMarkdown:()=>c,isCode:()=>d,isExecuteResult:()=>u,isDisplayData:()=>h,isDisplayUpdate:()=>p,isStream:()=>m,isError:()=>g});var r=n(91100);var o=n.n(r);const i=4;const s=4;function a(e,t){const n=/^application\/(.*?)+\+json$/;const o=e==="application/json"||n.test(e);const i=e=>Object.prototype.toString.call(e)==="[object String]";if(Array.isArray(t)){if(o){return false}let e=true;t.forEach((t=>{if(!i(t)){e=false}}));return e}if(i(t)){return!o}if(!o){return false}return r.JSONExt.isObject(t)}function l(e){return e.cell_type==="raw"}function c(e){return e.cell_type==="markdown"}function d(e){return e.cell_type==="code"}function u(e){return e.output_type==="execute_result"}function h(e){return e.output_type==="display_data"}function p(e){return e.output_type==="update_display_data"}function m(e){return e.output_type==="stream"}function g(e){return e.output_type==="error"}},77343:(e,t,n)=>{"use strict";n.r(t);n.d(t,{commandEditItem:()=>z,default:()=>K,executionIndicator:()=>N,exportPlugin:()=>F,notebookTrustItem:()=>H});var r=n(97577);var o=n(3378);var i=n(76191);var s=n(66934);var a=n(69442);var l=n(71861);var c=n(5477);var d=n(54917);var u=n(62608);var h=n(73704);var p=n(58267);var m=n(3540);var g=n(63833);var f=n(42014);var A=n(42573);var v=n(85913);var C=n(59768);var b=n(25903);var _=n(54522);var y=n(91100);var E=n(64782);var w=n(46843);var x=n(700);var j=n(51457);var k=n(22248);const B={activate:S,id:"@jupyterlab/notebook-extension:log-output",requires:[p.INotebookTracker],optional:[j.ILoggerRegistry],autoStart:true};function S(e,t,n){if(!n){return}function r(e){function t(t,r,o){if(k.KernelMessage.isDisplayDataMsg(t)||k.KernelMessage.isStreamMsg(t)||k.KernelMessage.isErrorMsg(t)||k.KernelMessage.isExecuteResultMsg(t)){const i=n.getLogger(e.context.path);i.rendermime=e.content.rendermime;const s=Object.assign(Object.assign({},t.content),{output_type:t.header.msg_type});let a=r;if(k.KernelMessage.isErrorMsg(t)||k.KernelMessage.isStreamMsg(t)&&t.content.name==="stderr"){a=o}i.log({type:"output",data:s,level:a})}}e.context.sessionContext.iopubMessage.connect(((e,n)=>t(n,"info","info")));e.context.sessionContext.unhandledMessage.connect(((e,n)=>t(n,"warning","error")))}t.forEach((e=>r(e)));t.widgetAdded.connect(((e,t)=>r(t)))}var D;(function(e){e.createNew="notebook:create-new";e.interrupt="notebook:interrupt-kernel";e.restart="notebook:restart-kernel";e.restartClear="notebook:restart-clear-output";e.restartAndRunToSelected="notebook:restart-and-run-to-selected";e.restartRunAll="notebook:restart-run-all";e.reconnectToKernel="notebook:reconnect-to-kernel";e.changeKernel="notebook:change-kernel";e.createConsole="notebook:create-console";e.createOutputView="notebook:create-output-view";e.clearAllOutputs="notebook:clear-all-cell-outputs";e.closeAndShutdown="notebook:close-and-shutdown";e.trust="notebook:trust";e.exportToFormat="notebook:export-to-format";e.run="notebook:run-cell";e.runAndAdvance="notebook:run-cell-and-select-next";e.runAndInsert="notebook:run-cell-and-insert-below";e.runInConsole="notebook:run-in-console";e.runAll="notebook:run-all-cells";e.runAllAbove="notebook:run-all-above";e.runAllBelow="notebook:run-all-below";e.renderAllMarkdown="notebook:render-all-markdown";e.toCode="notebook:change-cell-to-code";e.toMarkdown="notebook:change-cell-to-markdown";e.toRaw="notebook:change-cell-to-raw";e.cut="notebook:cut-cell";e.copy="notebook:copy-cell";e.pasteAbove="notebook:paste-cell-above";e.pasteBelow="notebook:paste-cell-below";e.duplicateBelow="notebook:duplicate-below";e.pasteAndReplace="notebook:paste-and-replace-cell";e.moveUp="notebook:move-cell-up";e.moveDown="notebook:move-cell-down";e.clearOutputs="notebook:clear-cell-output";e.deleteCell="notebook:delete-cell";e.insertAbove="notebook:insert-cell-above";e.insertBelow="notebook:insert-cell-below";e.selectAbove="notebook:move-cursor-up";e.selectBelow="notebook:move-cursor-down";e.extendAbove="notebook:extend-marked-cells-above";e.extendTop="notebook:extend-marked-cells-top";e.extendBelow="notebook:extend-marked-cells-below";e.extendBottom="notebook:extend-marked-cells-bottom";e.selectAll="notebook:select-all";e.deselectAll="notebook:deselect-all";e.editMode="notebook:enter-edit-mode";e.merge="notebook:merge-cells";e.mergeAbove="notebook:merge-cell-above";e.mergeBelow="notebook:merge-cell-below";e.split="notebook:split-cell-at-cursor";e.commandMode="notebook:enter-command-mode";e.toggleAllLines="notebook:toggle-all-cell-line-numbers";e.undoCellAction="notebook:undo-cell-action";e.redoCellAction="notebook:redo-cell-action";e.markdown1="notebook:change-cell-to-heading-1";e.markdown2="notebook:change-cell-to-heading-2";e.markdown3="notebook:change-cell-to-heading-3";e.markdown4="notebook:change-cell-to-heading-4";e.markdown5="notebook:change-cell-to-heading-5";e.markdown6="notebook:change-cell-to-heading-6";e.hideCode="notebook:hide-cell-code";e.showCode="notebook:show-cell-code";e.hideAllCode="notebook:hide-all-cell-code";e.showAllCode="notebook:show-all-cell-code";e.hideOutput="notebook:hide-cell-outputs";e.showOutput="notebook:show-cell-outputs";e.hideAllOutputs="notebook:hide-all-cell-outputs";e.showAllOutputs="notebook:show-all-cell-outputs";e.toggleRenderSideBySideCurrentNotebook="notebook:toggle-render-side-by-side-current";e.setSideBySideRatio="notebook:set-side-by-side-ratio";e.enableOutputScrolling="notebook:enable-output-scrolling";e.disableOutputScrolling="notebook:disable-output-scrolling";e.selectLastRunCell="notebook:select-last-run-cell";e.replaceSelection="notebook:replace-selection";e.autoClosingBrackets="notebook:toggle-autoclosing-brackets";e.toggleCollapseCmd="Collapsible_Headings:Toggle_Collapse";e.collapseAllCmd="Collapsible_Headings:Collapse_All";e.expandAllCmd="Collapsible_Headings:Expand_All";e.copyToClipboard="notebook:copy-to-clipboard"})(D||(D={}));const M="Notebook";const T=["notebook","python","custom"];const I="@jupyterlab/notebook-extension:panel";const P="jp-NotebookExtension-sideBySideMargins";const R={id:"@jupyterlab/notebook-extension:tracker",provides:p.INotebookTracker,requires:[p.INotebookWidgetFactory,C.ITranslator],optional:[o.ICommandPalette,d.IFileBrowserFactory,u.ILauncher,r.ILayoutRestorer,h.IMainMenu,f.ISettingRegistry,o.ISessionContextDialogs],activate:Q,autoStart:true};const L={id:"@jupyterlab/notebook-extension:factory",provides:p.NotebookPanel.IContentFactory,requires:[s.IEditorServices],autoStart:true,activate:(e,t)=>{const n=t.factoryService.newInlineEditor;return new p.NotebookPanel.ContentFactory({editorFactory:n})}};const O={activate:Y,provides:p.INotebookTools,id:"@jupyterlab/notebook-extension:tools",autoStart:true,requires:[p.INotebookTracker,s.IEditorServices,A.IStateDB,C.ITranslator],optional:[m.IPropertyInspectorProvider]};const z={id:"@jupyterlab/notebook-extension:mode-status",autoStart:true,requires:[p.INotebookTracker,C.ITranslator],optional:[v.IStatusBar],activate:(e,t,n,r)=>{if(!r){return}const{shell:o}=e;const i=new p.CommandEditStatus(n);t.currentChanged.connect((()=>{const e=t.currentWidget;i.model.notebook=e&&e.content}));r.registerStatusItem("@jupyterlab/notebook-extension:mode-status",{item:i,align:"right",rank:4,isActive:()=>!!o.currentWidget&&!!t.currentWidget&&o.currentWidget===t.currentWidget})}};const N={id:"@jupyterlab/notebook-extension:execution-indicator",autoStart:true,requires:[p.INotebookTracker,r.ILabShell,C.ITranslator],optional:[v.IStatusBar,f.ISettingRegistry],activate:(e,t,n,r,o,i)=>{let s;let a;let l;const c=e=>{var i,c;let{showOnToolBar:d,showProgress:u}=e;if(!d){if(!o){return}if(!(s===null||s===void 0?void 0:s.model)){s=new p.ExecutionIndicator(r);a=(e,n)=>{const{newValue:r}=n;if(r&&t.has(r)){const e=r;s.model.attachNotebook({content:e.content,context:e.sessionContext})}};l=o.registerStatusItem("@jupyterlab/notebook-extension:execution-indicator",{item:s,align:"left",rank:3,isActive:()=>{const e=n.currentWidget;return!!e&&t.has(e)}});s.model.attachNotebook({content:(i=t.currentWidget)===null||i===void 0?void 0:i.content,context:(c=t.currentWidget)===null||c===void 0?void 0:c.sessionContext});n.currentChanged.connect(a);s.disposed.connect((()=>{n.currentChanged.disconnect(a)}))}s.model.displayOption={showOnToolBar:d,showProgress:u}}else{if(l){n.currentChanged.disconnect(a);l.dispose()}}};if(i){const t=i.load(R.id);Promise.all([t,e.restored]).then((([e])=>{c(p.ExecutionIndicator.getSettingValue(e));e.changed.connect((e=>c(p.ExecutionIndicator.getSettingValue(e))))})).catch((e=>{console.error(e.message)}))}}};const F={id:"@jupyterlab/notebook-extension:export",autoStart:true,requires:[C.ITranslator,p.INotebookTracker],optional:[h.IMainMenu,o.ICommandPalette],activate:(e,t,n,r,o)=>{var i;const s=t.load("jupyterlab");const{commands:l,shell:c}=e;const d=e.serviceManager;const u=()=>oe.isEnabled(c,n);l.addCommand(D.exportToFormat,{label:e=>{const t=e["label"];return e["isPalette"]?s.__("Save and Export Notebook: %1",t):t},execute:e=>{const t=ee(n,c,e);if(!t){return}const r=a.PageConfig.getNBConvertURL({format:e["format"],download:true,path:t.context.path});const{context:o}=t;if(o.model.dirty&&!o.model.readOnly){return o.save().then((()=>{window.open(r,"_blank","noopener")}))}return new Promise((e=>{window.open(r,"_blank","noopener");e(undefined)}))},isEnabled:u});let h;if(r){h=(i=r.fileMenu.items.find((e=>{var t;return e.type==="submenu"&&((t=e.submenu)===null||t===void 0?void 0:t.id)==="jp-mainmenu-file-notebookexport"})))===null||i===void 0?void 0:i.submenu}void d.nbconvert.getExportFormats().then((e=>{if(e){const n=oe.getFormatLabels(t);const r=Object.keys(e);r.forEach((function(e){const t=s.__(e[0].toUpperCase()+e.substr(1));const r=n[e]?n[e]:t;let i={format:e,label:r,isPalette:false};if(T.indexOf(e)===-1){if(h){h.addItem({command:D.exportToFormat,args:i})}if(o){i={format:e,label:r,isPalette:true};const t=s.__("Notebook Operations");o.addItem({command:D.exportToFormat,category:t,args:i})}}}))}}))}};const H={id:"@jupyterlab/notebook-extension:trust-status",autoStart:true,requires:[p.INotebookTracker,C.ITranslator],optional:[v.IStatusBar],activate:(e,t,n,r)=>{if(!r){return}const{shell:o}=e;const i=new p.NotebookTrustStatus(n);t.currentChanged.connect((()=>{const e=t.currentWidget;i.model.notebook=e&&e.content}));r.registerStatusItem("@jupyterlab/notebook-extension:trust-status",{item:i,align:"right",rank:3,isActive:()=>!!o.currentWidget&&!!t.currentWidget&&o.currentWidget===t.currentWidget})}};const W={id:"@jupyterlab/notebook-extension:widget-factory",provides:p.INotebookWidgetFactory,requires:[p.NotebookPanel.IContentFactory,s.IEditorServices,g.IRenderMimeRegistry,o.ISessionContextDialogs,o.IToolbarWidgetRegistry,C.ITranslator],optional:[f.ISettingRegistry],activate:G,autoStart:true};const V={id:"@jupyterlab/notebook-extension:cloned-outputs",requires:[l.IDocumentManager,p.INotebookTracker,C.ITranslator],optional:[r.ILayoutRestorer],activate:Z,autoStart:true};const q={id:"@jupyterlab/notebook-extension:code-console",requires:[p.INotebookTracker,C.ITranslator],activate:J,autoStart:true};const U={id:"@jupyterlab/notebook-extensions:copy-output",activate:X,requires:[C.ITranslator,p.INotebookTracker],autoStart:true};const $=[L,R,N,F,O,z,H,W,B,V,q,U];const K=$;function Y(e,t,n,r,o,i){const s=o.load("jupyterlab");const a="notebook-tools";const l=new p.NotebookTools({tracker:t,translator:o});const c=new p.NotebookTools.ActiveCellTool;const d=p.NotebookTools.createSlideShowSelector(o);const u=n.factoryService.newInlineEditor;const h=new p.NotebookTools.CellMetadataEditorTool({editorFactory:u,collapsed:false,translator:o});const m=new p.NotebookTools.NotebookMetadataEditorTool({editorFactory:u,translator:o});const g=e.serviceManager;const f=(e,t)=>{switch(t.type){case"activate-request":void r.save(a,{open:true});break;case"after-hide":case"close-request":void r.remove(a);break;default:break}return true};const A={};A.None=null;void g.nbconvert.getExportFormats().then((e=>{if(e){const t=["pdf","slides","script","notebook","custom"];let n=[[s.__("PDF"),"pdf"],[s.__("Slides"),"slides"],[s.__("Script"),"script"],[s.__("Notebook"),"notebook"],[s.__("Custom"),"custom"]];const r=Object.keys(e);const i=oe.getFormatLabels(o);r.forEach((function(r){if(t.indexOf(r)===-1){const t=s.__(r[0].toUpperCase()+r.substr(1));const o=i[r]?i[r]:t;const a=e[r].output_mimetype;n.push([o,a])}}));const a=p.NotebookTools.createNBConvertSelector(n,o);l.addItem({tool:a,section:"common",rank:3})}}));l.title.icon=b.buildIcon;l.title.caption=s.__("Notebook Tools");l.id=a;l.addItem({tool:c,section:"common",rank:1});l.addItem({tool:d,section:"common",rank:2});l.addItem({tool:h,section:"advanced",rank:1});l.addItem({tool:m,section:"advanced",rank:2});w.MessageLoop.installMessageHook(l,f);if(i){t.widgetAdded.connect(((e,t)=>{const n=i.register(t);n.render(l)}))}return l}function G(e,t,n,r,i,s,l,d){const u=a.PageConfig.getOption("notebookStartsKernel");const h=u===""||u.toLowerCase()==="true";const{commands:m}=e;let g;s.registerFactory(M,"save",(e=>c.ToolbarItems.createSaveButton(m,e.context.fileChanged)));s.registerFactory(M,"cellType",(e=>p.ToolbarItems.createCellTypeItem(e,l)));s.registerFactory(M,"kernelName",(e=>o.Toolbar.createKernelNameItem(e.sessionContext,i,l)));s.registerFactory(M,"executionProgress",(e=>p.ExecutionIndicator.createExecutionIndicatorItem(e,l,d===null||d===void 0?void 0:d.load(R.id))));if(d){g=(0,o.createToolbarFactory)(s,d,M,I,l)}const f=new p.NotebookWidgetFactory({name:M,fileTypes:["notebook"],modelName:"notebook",defaultFor:["notebook"],preferKernel:h,canStartKernel:true,rendermime:r,contentFactory:t,editorConfig:p.StaticNotebook.defaultEditorConfig,notebookConfig:p.StaticNotebook.defaultNotebookConfig,mimeTypeService:n.mimeTypeService,sessionDialogs:i,toolbarFactory:g,translator:l});e.docRegistry.addWidgetFactory(f);return f}function Z(e,t,n,r,i){const s=r.load("jupyterlab");const a=new o.WidgetTracker({namespace:"cloned-outputs"});if(i){void i.restore(a,{command:D.createOutputView,args:e=>({path:e.content.path,index:e.content.index}),name:e=>`${e.content.path}:${e.content.index}`,when:n.restored})}const{commands:l,shell:c}=e;const d=()=>oe.isEnabledAndSingleSelected(c,n);l.addCommand(D.createOutputView,{label:s.__("Create New View for Output"),execute:async e=>{var i;let s;let l;const c=e.path;let d=e.index;if(c&&d!==undefined&&d!==null){l=t.findWidget(c,M);if(!l){return}}else{l=n.currentWidget;if(!l){return}s=l.content.activeCell;d=l.content.activeCellIndex}const u=new oe.ClonedOutputArea({notebook:l,cell:s,index:d,translator:r});const h=new o.MainAreaWidget({content:u});l.context.addSibling(h,{ref:l.id,mode:"split-bottom"});const p=()=>{void a.save(h)};l.context.pathChanged.connect(p);(i=l.context.model)===null||i===void 0?void 0:i.cells.changed.connect(p);void a.add(h);l.content.disposed.connect((()=>{var e;l.context.pathChanged.disconnect(p);(e=l.context.model)===null||e===void 0?void 0:e.cells.changed.disconnect(p);h.dispose()}))},isEnabled:d})}function J(e,t,n){const r=n.load("jupyterlab");const{commands:o,shell:i}=e;const s=()=>oe.isEnabled(i,t);o.addCommand(D.createConsole,{label:r.__("New Console for Notebook"),execute:e=>{const n=t.currentWidget;if(!n){return}return oe.createConsole(o,n,e["activate"])},isEnabled:s});o.addCommand(D.runInConsole,{label:r.__("Run Selected Text or Current Line in Console"),execute:async e=>{var n,r;const i=t.currentWidget;if(!i){return}const{context:s,content:a}=i;const l=a.activeCell;const c=l===null||l===void 0?void 0:l.model.metadata.toJSON();const d=s.path;if(!l||l.model.type!=="code"){return}let u;const h=l.editor;const p=h.getSelection();const{start:m,end:g}=p;const f=m.column!==g.column||m.line!==g.line;if(f){const e=h.getOffsetAt(p.start);const t=h.getOffsetAt(p.end);u=h.model.value.text.substring(e,t)}else{const e=h.getCursorPosition();const t=h.model.value.text.split("\n");let o=p.start.line;while(o<h.lineCount&&!t[o].replace(/\s/g,"").length){o+=1}let s=o>0;let a=0;let l=a+1;while(true){u=t.slice(a,l).join("\n");const c=await((r=(n=i.context.sessionContext.session)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.requestIsComplete({code:u+"\n\n"}));if((c===null||c===void 0?void 0:c.content.status)==="complete"){if(o<l){while(l<h.lineCount&&!t[l].replace(/\s/g,"").length){l+=1}h.setCursorPosition({line:l,column:e.column});break}else{a=l;l=a+1}}else if(l<h.lineCount){l+=1}else if(s){a=o;l=o+1;s=false}else{u=t[o];while(o+1<h.lineCount&&!t[o+1].replace(/\s/g,"").length){o+=1}h.setCursorPosition({line:o+1,column:e.column});break}}}if(!u){return}await o.execute("console:open",{activate:false,insertMode:"split-bottom",path:d});await o.execute("console:inject",{activate:false,code:u,path:d,metadata:c})},isEnabled:s})}function X(e,t,n){const r=t.load("jupyterlab");function o(e){const t=window.getSelection();if(t==null){return}const n=[];for(let o=0;o<t.rangeCount;++o){n[o]=t.getRangeAt(o).cloneRange()}const r=document.createRange();r.selectNodeContents(e);t.removeAllRanges();t.addRange(r);document.execCommand("copy");t.removeAllRanges();n.forEach((e=>t.addRange(e)))}e.commands.addCommand(D.copyToClipboard,{label:r.__("Copy Output to Clipboard"),execute:e=>{var t;const r=(t=n.currentWidget)===null||t===void 0?void 0:t.content.activeCell;if(r==null){return}const i=r.outputArea.outputTracker.currentWidget;if(i==null){return}const s=i.node.getElementsByClassName("jp-OutputArea-output");if(s.length>0){const e=s[0];o(e)}}});e.contextMenu.addItem({command:D.copyToClipboard,selector:".jp-OutputArea-child",rank:0})}function Q(e,t,n,r,i,s,a,l,c,d){const u=n.load("jupyterlab");const h=e.serviceManager;const{commands:m}=e;const g=new p.NotebookTracker({namespace:"notebook"});const f=e=>document.documentElement.style.setProperty("--jp-side-by-side-output-size",`${e}fr`);const A=c?c.load(R.id):Promise.reject(new Error(`No setting registry for ${R.id}`));A.then((e=>{j(e);e.changed.connect((()=>{j(e)}));m.addCommand(D.autoClosingBrackets,{execute:t=>{var n;const r=e.get("codeCellConfig").composite;const o=e.get("markdownCellConfig").composite;const i=e.get("rawCellConfig").composite;const s=r.autoClosingBrackets||o.autoClosingBrackets||i.autoClosingBrackets;const a=!!((n=t["force"])!==null&&n!==void 0?n:!s);[r.autoClosingBrackets,o.autoClosingBrackets,i.autoClosingBrackets]=[a,a,a];void e.set("codeCellConfig",r);void e.set("markdownCellConfig",o);void e.set("rawCellConfig",i)},label:u.__("Auto Close Brackets for All Notebook Cell Types"),isToggled:()=>["codeCellConfig","markdownCellConfig","rawCellConfig"].some((t=>e.get(t).composite.autoClosingBrackets))});m.addCommand(D.setSideBySideRatio,{label:u.__("Set side-by-side ratio"),execute:t=>{o.InputDialog.getNumber({title:u.__("Width of the output in side-by-side mode"),value:e.get("sideBySideOutputRatio").composite}).then((t=>{f(t.value);if(t.value){void e.set("sideBySideOutputRatio",t.value)}})).catch(console.error)}})})).catch((e=>{console.warn(e.message);x({editorConfig:t.editorConfig,notebookConfig:t.notebookConfig,kernelShutdown:t.shutdownOnClose})}));if(a){void a.restore(g,{command:"docmanager:open",args:e=>({path:e.context.path,factory:M}),name:e=>e.context.path,when:h.ready})}const v=e.docRegistry;const C=new p.NotebookModelFactory({disableDocumentWideUndoRedo:t.notebookConfig.disableDocumentWideUndoRedo});v.addModelFactory(C);te(e,g,n,d);if(r){ne(r,n)}let _=0;const w=e.docRegistry.getFileType("notebook");t.widgetCreated.connect(((e,t)=>{var n,r;t.id=t.id||`notebook-${++_}`;t.title.icon=w===null||w===void 0?void 0:w.icon;t.title.iconClass=(n=w===null||w===void 0?void 0:w.iconClass)!==null&&n!==void 0?n:"";t.title.iconLabel=(r=w===null||w===void 0?void 0:w.iconLabel)!==null&&r!==void 0?r:"";t.context.pathChanged.connect((()=>{void g.save(t)}));void g.add(t)}));function x(e){g.forEach((t=>{t.setConfig(e)}))}function j(e){const n=Object.assign(Object.assign({},p.StaticNotebook.defaultEditorConfig.code),e.get("codeCellConfig").composite);const r=Object.assign(Object.assign({},p.StaticNotebook.defaultEditorConfig.markdown),e.get("markdownCellConfig").composite);const o=Object.assign(Object.assign({},p.StaticNotebook.defaultEditorConfig.raw),e.get("rawCellConfig").composite);t.editorConfig={code:n,markdown:r,raw:o};t.notebookConfig={scrollPastEnd:e.get("scrollPastEnd").composite,defaultCell:e.get("defaultCell").composite,recordTiming:e.get("recordTiming").composite,numberCellsToRenderDirectly:e.get("numberCellsToRenderDirectly").composite,remainingTimeBeforeRescheduling:e.get("remainingTimeBeforeRescheduling").composite,renderCellOnIdle:e.get("renderCellOnIdle").composite,observedTopMargin:e.get("observedTopMargin").composite,observedBottomMargin:e.get("observedBottomMargin").composite,maxNumberOutputs:e.get("maxNumberOutputs").composite,showEditorForReadOnlyMarkdown:e.get("showEditorForReadOnlyMarkdown").composite,disableDocumentWideUndoRedo:e.get("experimentalDisableDocumentWideUndoRedo").composite,renderingLayout:e.get("renderingLayout").composite,sideBySideLeftMarginOverride:e.get("sideBySideLeftMarginOverride").composite,sideBySideRightMarginOverride:e.get("sideBySideRightMarginOverride").composite,sideBySideOutputRatio:e.get("sideBySideOutputRatio").composite};f(t.notebookConfig.sideBySideOutputRatio);const i=`.jp-mod-sideBySide.jp-Notebook .jp-Notebook-cell { \n      margin-left: ${t.notebookConfig.sideBySideLeftMarginOverride} !important;\n      margin-right: ${t.notebookConfig.sideBySideRightMarginOverride} !important;`;const s=document.getElementById(P);if(s){s.innerText=i}else{document.head.insertAdjacentHTML("beforeend",`<style id="${P}">${i}}</style>`)}t.shutdownOnClose=e.get("kernelShutdown").composite;C.disableDocumentWideUndoRedo=e.get("experimentalDisableDocumentWideUndoRedo").composite;x({editorConfig:t.editorConfig,notebookConfig:t.notebookConfig,kernelShutdown:t.shutdownOnClose})}if(l){re(e,l,g,n,d)}const k=(e,t)=>m.execute("docmanager:new-untitled",{path:e,type:"notebook"}).then((e=>{if(e!=undefined){return m.execute("docmanager:open",{path:e.path,factory:M,kernel:{name:t}})}}));m.addCommand(D.createNew,{label:e=>{var t,n,r;const o=e["kernelName"]||"";if(e["isLauncher"]&&e["kernelName"]&&h.kernelspecs){return(r=(n=(t=h.kernelspecs.specs)===null||t===void 0?void 0:t.kernelspecs[o])===null||n===void 0?void 0:n.display_name)!==null&&r!==void 0?r:""}if(e["isPalette"]||e["isContextMenu"]){return u.__("New Notebook")}return u.__("Notebook")},caption:u.__("Create a new notebook"),icon:e=>e["isPalette"]?undefined:b.notebookIcon,execute:e=>{const t=e["cwd"]||(i?i.defaultBrowser.model.path:"");const n=e["kernelName"]||"";return k(t,n)}});if(s){void h.ready.then((()=>{let e=null;const t=()=>{if(e){e.dispose();e=null}const t=h.kernelspecs.specs;if(!t){return}e=new E.DisposableSet;for(const n in t.kernelspecs){const r=n===t.default?0:Infinity;const o=t.kernelspecs[n];let i=o.resources["logo-64x64"];e.add(s.add({command:D.createNew,args:{isLauncher:true,kernelName:n},category:u.__("Notebook"),rank:r,kernelIconUrl:i,metadata:{kernel:y.JSONExt.deepCopy(o.metadata||{})}}))}};t();h.kernelspecs.specsChanged.connect(t)}))}return g}function ee(e,t,n){const r=e.currentWidget;const o=n["activate"]!==false;if(o&&r){t.activateById(r.id)}return r}function te(e,t,n,r){const s=n.load("jupyterlab");const{commands:a,shell:l}=e;r=r!==null&&r!==void 0?r:o.sessionContextDialogs;const c=()=>oe.isEnabled(l,t);const d=()=>oe.isEnabledAndSingleSelected(l,t);const u=e=>{var t,n;for(const r of e.widgets){if(r instanceof i.MarkdownCell&&r.headingCollapsed){p.NotebookActions.setHeadingCollapse(r,true,e)}if(r.model.id===((n=(t=e.activeCell)===null||t===void 0?void 0:t.model)===null||n===void 0?void 0:n.id)){p.NotebookActions.expandParent(r,e)}}};const h=()=>oe.isEnabledAndHeadingSelected(l,t);t.currentChanged.connect(((e,t)=>{var n,r;if(!((r=(n=t===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.model)===null||r===void 0?void 0:r.cells)){return}t.content.model.cells.changed.connect(((e,n)=>{u(t.content)}));t.content.activeCellChanged.connect(((e,t)=>{p.NotebookActions.expandParent(t,e)}))}));a.addCommand(D.runAndAdvance,{label:s.__("Run Selected Cells"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.runAndAdvance(t,e.sessionContext)}},isEnabled:c});a.addCommand(D.run,{label:s.__("Run Selected Cells and Don't Advance"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.run(t,e.sessionContext)}},isEnabled:c});a.addCommand(D.runAndInsert,{label:s.__("Run Selected Cells and Insert Below"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.runAndInsert(t,e.sessionContext)}},isEnabled:c});a.addCommand(D.runAll,{label:s.__("Run All Cells"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.runAll(t,e.sessionContext)}},isEnabled:c});a.addCommand(D.runAllAbove,{label:s.__("Run All Above Selected Cell"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.runAllAbove(t,e.sessionContext)}},isEnabled:()=>d()&&t.currentWidget.content.activeCellIndex!==0});a.addCommand(D.runAllBelow,{label:s.__("Run Selected Cell and All Below"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.runAllBelow(t,e.sessionContext)}},isEnabled:()=>d()&&t.currentWidget.content.activeCellIndex!==t.currentWidget.content.widgets.length-1});a.addCommand(D.renderAllMarkdown,{label:s.__("Render All Markdown Cells"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.renderAllMarkdown(t,e.sessionContext)}},isEnabled:c});a.addCommand(D.restart,{label:s.__("Restart Kernel"),execute:e=>{const o=ee(t,l,e);if(o){return r.restart(o.sessionContext,n)}},isEnabled:c});a.addCommand(D.closeAndShutdown,{label:s.__("Close and Shut Down"),execute:e=>{const n=ee(t,l,e);if(!n){return}const r=n.title.label;return(0,o.showDialog)({title:s.__("Shut down the notebook?"),body:s.__('Are you sure you want to close "%1"?',r),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton()]}).then((e=>{if(e.button.accept){return n.context.sessionContext.shutdown().then((()=>{n.dispose()}))}}))},isEnabled:c});a.addCommand(D.trust,{label:()=>s.__("Trust Notebook"),execute:e=>{const n=ee(t,l,e);if(n){const{context:e,content:t}=n;return p.NotebookActions.trust(t).then((()=>e.save()))}},isEnabled:c});a.addCommand(D.restartClear,{label:s.__("Restart Kernel and Clear All Outputs"),execute:e=>{const o=ee(t,l,e);if(o){const{content:e,sessionContext:t}=o;return r.restart(t,n).then((()=>{p.NotebookActions.clearAllOutputs(e)}))}},isEnabled:c});a.addCommand(D.restartAndRunToSelected,{label:s.__("Restart Kernel and Run up to Selected Cell"),execute:e=>{const o=ee(t,l,e);if(o){const{context:e,content:t}=o;return r.restart(o.sessionContext,n).then((n=>{if(n){void p.NotebookActions.runAllAbove(t,e.sessionContext).then((n=>{if(n||t.activeCellIndex===0){void p.NotebookActions.run(t,e.sessionContext)}}))}}))}},isEnabled:d});a.addCommand(D.restartRunAll,{label:s.__("Restart Kernel and Run All Cells"),execute:e=>{const o=ee(t,l,e);if(o){const{context:e,content:t,sessionContext:i}=o;return r.restart(i,n).then((n=>{if(n){void p.NotebookActions.runAll(t,e.sessionContext)}return n}))}},isEnabled:c});a.addCommand(D.clearAllOutputs,{label:s.__("Clear All Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.clearAllOutputs(n.content)}},isEnabled:c});a.addCommand(D.clearOutputs,{label:s.__("Clear Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.clearOutputs(n.content)}},isEnabled:c});a.addCommand(D.interrupt,{label:s.__("Interrupt Kernel"),execute:e=>{var n;const r=ee(t,l,e);if(!r){return}const o=(n=r.context.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(o){return o.interrupt()}},isEnabled:c});a.addCommand(D.toCode,{label:s.__("Change to Code Cell Type"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.changeCellType(n.content,"code")}},isEnabled:c});a.addCommand(D.toMarkdown,{label:s.__("Change to Markdown Cell Type"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.changeCellType(n.content,"markdown")}},isEnabled:c});a.addCommand(D.toRaw,{label:s.__("Change to Raw Cell Type"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.changeCellType(n.content,"raw")}},isEnabled:c});a.addCommand(D.cut,{label:s.__("Cut Cells"),caption:s.__("Cut the selected cells"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.cut(n.content)}},icon:e=>e.toolbar?b.cutIcon:undefined,isEnabled:c});a.addCommand(D.copy,{label:s.__("Copy Cells"),caption:s.__("Copy the selected cells"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.copy(n.content)}},icon:e=>e.toolbar?b.copyIcon:"",isEnabled:c});a.addCommand(D.pasteBelow,{label:s.__("Paste Cells Below"),caption:s.__("Paste cells from the clipboard"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.paste(n.content,"below")}},icon:e=>e.toolbar?b.pasteIcon:undefined,isEnabled:c});a.addCommand(D.pasteAbove,{label:s.__("Paste Cells Above"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.paste(n.content,"above")}},isEnabled:c});a.addCommand(D.duplicateBelow,{label:s.__("Duplicate Cells Below"),caption:s.__("Copy the selected cells and paste them below the selection"),execute:e=>{const n=ee(t,l,e);if(n){p.NotebookActions.duplicate(n.content,"belowSelected")}},icon:e=>e.toolbar?b.duplicateIcon:"",isEnabled:c});a.addCommand(D.pasteAndReplace,{label:s.__("Paste Cells and Replace"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.paste(n.content,"replace")}},isEnabled:c});a.addCommand(D.deleteCell,{label:s.__("Delete Cells"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.deleteCells(n.content)}},isEnabled:c});a.addCommand(D.split,{label:s.__("Split Cell"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.splitCell(n.content)}},isEnabled:c});a.addCommand(D.merge,{label:s.__("Merge Selected Cells"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.mergeCells(n.content)}},isEnabled:c});a.addCommand(D.mergeAbove,{label:s.__("Merge Cell Above"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.mergeCells(n.content,true)}},isEnabled:c});a.addCommand(D.mergeBelow,{label:s.__("Merge Cell Below"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.mergeCells(n.content,false)}},isEnabled:c});a.addCommand(D.insertAbove,{label:s.__("Insert Cell Above"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.insertAbove(n.content)}},icon:e=>e.toolbar?b.addAboveIcon:undefined,isEnabled:c});a.addCommand(D.insertBelow,{label:s.__("Insert Cell Below"),caption:s.__("Insert a cell below"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.insertBelow(n.content)}},icon:e=>e.toolbar?b.addBelowIcon:undefined,isEnabled:c});a.addCommand(D.selectAbove,{label:s.__("Select Cell Above"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.selectAbove(n.content)}},isEnabled:c});a.addCommand(D.selectBelow,{label:s.__("Select Cell Below"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.selectBelow(n.content)}},isEnabled:c});a.addCommand(D.extendAbove,{label:s.__("Extend Selection Above"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.extendSelectionAbove(n.content)}},isEnabled:c});a.addCommand(D.extendTop,{label:s.__("Extend Selection to Top"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.extendSelectionAbove(n.content,true)}},isEnabled:c});a.addCommand(D.extendBelow,{label:s.__("Extend Selection Below"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.extendSelectionBelow(n.content)}},isEnabled:c});a.addCommand(D.extendBottom,{label:s.__("Extend Selection to Bottom"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.extendSelectionBelow(n.content,true)}},isEnabled:c});a.addCommand(D.selectAll,{label:s.__("Select All Cells"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.selectAll(n.content)}},isEnabled:c});a.addCommand(D.deselectAll,{label:s.__("Deselect All Cells"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.deselectAll(n.content)}},isEnabled:c});a.addCommand(D.moveUp,{label:s.__("Move Cells Up"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.moveUp(n.content)}},isEnabled:c,icon:e=>e.toolbar?b.moveUpIcon:undefined});a.addCommand(D.moveDown,{label:s.__("Move Cells Down"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.moveDown(n.content)}},isEnabled:c,icon:e=>e.toolbar?b.moveDownIcon:undefined});a.addCommand(D.toggleAllLines,{label:s.__("Toggle All Line Numbers"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.toggleAllLineNumbers(n.content)}},isEnabled:c});a.addCommand(D.commandMode,{label:s.__("Enter Command Mode"),execute:e=>{const n=ee(t,l,e);if(n){n.content.mode="command"}},isEnabled:c});a.addCommand(D.editMode,{label:s.__("Enter Edit Mode"),execute:e=>{const n=ee(t,l,e);if(n){n.content.mode="edit"}},isEnabled:c});a.addCommand(D.undoCellAction,{label:s.__("Undo Cell Operation"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.undo(n.content)}},isEnabled:c});a.addCommand(D.redoCellAction,{label:s.__("Redo Cell Operation"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.redo(n.content)}},isEnabled:c});a.addCommand(D.changeKernel,{label:s.__("Change Kernel"),execute:e=>{const o=ee(t,l,e);if(o){return r.selectKernel(o.context.sessionContext,n)}},isEnabled:c});a.addCommand(D.reconnectToKernel,{label:s.__("Reconnect To Kernel"),execute:e=>{var n;const r=ee(t,l,e);if(!r){return}const o=(n=r.context.sessionContext.session)===null||n===void 0?void 0:n.kernel;if(o){return o.reconnect()}},isEnabled:c});a.addCommand(D.markdown1,{label:s.__("Change to Heading 1"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.setMarkdownHeader(n.content,1)}},isEnabled:c});a.addCommand(D.markdown2,{label:s.__("Change to Heading 2"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.setMarkdownHeader(n.content,2)}},isEnabled:c});a.addCommand(D.markdown3,{label:s.__("Change to Heading 3"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.setMarkdownHeader(n.content,3)}},isEnabled:c});a.addCommand(D.markdown4,{label:s.__("Change to Heading 4"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.setMarkdownHeader(n.content,4)}},isEnabled:c});a.addCommand(D.markdown5,{label:s.__("Change to Heading 5"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.setMarkdownHeader(n.content,5)}},isEnabled:c});a.addCommand(D.markdown6,{label:s.__("Change to Heading 6"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.setMarkdownHeader(n.content,6)}},isEnabled:c});a.addCommand(D.hideCode,{label:s.__("Collapse Selected Code"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.hideCode(n.content)}},isEnabled:c});a.addCommand(D.showCode,{label:s.__("Expand Selected Code"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.showCode(n.content)}},isEnabled:c});a.addCommand(D.hideAllCode,{label:s.__("Collapse All Code"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.hideAllCode(n.content)}},isEnabled:c});a.addCommand(D.showAllCode,{label:s.__("Expand All Code"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.showAllCode(n.content)}},isEnabled:c});a.addCommand(D.hideOutput,{label:s.__("Collapse Selected Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.hideOutput(n.content)}},isEnabled:c});a.addCommand(D.showOutput,{label:s.__("Expand Selected Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.showOutput(n.content)}},isEnabled:c});a.addCommand(D.hideAllOutputs,{label:s.__("Collapse All Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.hideAllOutputs(n.content)}},isEnabled:c});a.addCommand(D.toggleRenderSideBySideCurrentNotebook,{label:s.__("Render Side-by-Side"),execute:e=>{const n=ee(t,l,e);if(n){if(n.content.renderingLayout==="side-by-side"){return p.NotebookActions.renderDefault(n.content)}return p.NotebookActions.renderSideBySide(n.content)}},isEnabled:c,isToggled:e=>{const n=ee(t,l,Object.assign(Object.assign({},e),{activate:false}));if(n){return n.content.renderingLayout==="side-by-side"}else{return false}}});a.addCommand(D.showAllOutputs,{label:s.__("Expand All Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.showAllOutputs(n.content)}},isEnabled:c});a.addCommand(D.enableOutputScrolling,{label:s.__("Enable Scrolling for Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.enableOutputScrolling(n.content)}},isEnabled:c});a.addCommand(D.disableOutputScrolling,{label:s.__("Disable Scrolling for Outputs"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.disableOutputScrolling(n.content)}},isEnabled:c});a.addCommand(D.selectLastRunCell,{label:s.__("Select current running or last run cell"),execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.selectLastRunCell(n.content)}},isEnabled:c});a.addCommand(D.replaceSelection,{label:s.__("Replace Selection in Notebook Cell"),execute:e=>{const n=ee(t,l,e);const r=e["text"]||"";if(n){return p.NotebookActions.replaceSelection(n.content,r)}},isEnabled:c});a.addCommand(D.toggleCollapseCmd,{label:"Toggle Collapse Notebook Heading",execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.toggleCurrentHeadingCollapse(n.content)}},isEnabled:h});a.addCommand(D.collapseAllCmd,{label:"Collapse All Cells",execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.collapseAll(n.content)}}});a.addCommand(D.expandAllCmd,{label:"Expand All Headings",execute:e=>{const n=ee(t,l,e);if(n){return p.NotebookActions.expandAllHeadings(n.content)}}})}function ne(e,t){const n=t.load("jupyterlab");let r=n.__("Notebook Operations");[D.interrupt,D.restart,D.restartClear,D.restartRunAll,D.runAll,D.renderAllMarkdown,D.runAllAbove,D.runAllBelow,D.restartAndRunToSelected,D.selectAll,D.deselectAll,D.clearAllOutputs,D.toggleAllLines,D.editMode,D.commandMode,D.changeKernel,D.reconnectToKernel,D.createConsole,D.closeAndShutdown,D.trust,D.toggleCollapseCmd,D.collapseAllCmd,D.expandAllCmd].forEach((t=>{e.addItem({command:t,category:r})}));e.addItem({command:D.createNew,category:r,args:{isPalette:true}});r=n.__("Notebook Cell Operations");[D.run,D.runAndAdvance,D.runAndInsert,D.runInConsole,D.clearOutputs,D.toCode,D.toMarkdown,D.toRaw,D.cut,D.copy,D.pasteBelow,D.pasteAbove,D.pasteAndReplace,D.deleteCell,D.split,D.merge,D.mergeAbove,D.mergeBelow,D.insertAbove,D.insertBelow,D.selectAbove,D.selectBelow,D.extendAbove,D.extendTop,D.extendBelow,D.extendBottom,D.moveDown,D.moveUp,D.undoCellAction,D.redoCellAction,D.markdown1,D.markdown2,D.markdown3,D.markdown4,D.markdown5,D.markdown6,D.hideCode,D.showCode,D.hideAllCode,D.showAllCode,D.hideOutput,D.showOutput,D.hideAllOutputs,D.showAllOutputs,D.toggleRenderSideBySideCurrentNotebook,D.setSideBySideRatio,D.enableOutputScrolling,D.disableOutputScrolling].forEach((t=>{e.addItem({command:t,category:r})}))}function re(e,t,n,r,i){const s=r.load("jupyterlab");const{commands:a}=e;i=i||o.sessionContextDialogs;t.editMenu.undoers.add({tracker:n,undo:e=>{var t;(t=e.content.activeCell)===null||t===void 0?void 0:t.editor.undo()},redo:e=>{var t;(t=e.content.activeCell)===null||t===void 0?void 0:t.editor.redo()}});t.editMenu.clearers.add({tracker:n,clearCurrentLabel:e=>s.__("Clear Output"),clearAllLabel:e=>s.__("Clear All Outputs"),clearCurrent:e=>p.NotebookActions.clearOutputs(e.content),clearAll:e=>p.NotebookActions.clearAllOutputs(e.content)});t.fileMenu.closeAndCleaners.add({tracker:n,closeAndCleanupLabel:e=>s.__("Close and Shutdown Notebook"),closeAndCleanup:e=>{const t=e.title.label;return(0,o.showDialog)({title:s.__("Shut down the Notebook?"),body:s.__('Are you sure you want to close "%1"?',t),buttons:[o.Dialog.cancelButton(),o.Dialog.warnButton()]}).then((t=>{if(t.button.accept){return e.context.sessionContext.shutdown().then((()=>{e.dispose()}))}}))}});t.kernelMenu.kernelUsers.add({tracker:n,interruptKernel:e=>{var t;const n=(t=e.sessionContext.session)===null||t===void 0?void 0:t.kernel;if(n){return n.interrupt()}return Promise.resolve(void 0)},reconnectToKernel:e=>{var t;const n=(t=e.sessionContext.session)===null||t===void 0?void 0:t.kernel;if(n){return n.reconnect()}return Promise.resolve(void 0)},restartKernelAndClearLabel:e=>s.__("Restart Kernel and Clear All Outputs"),restartKernel:e=>i.restart(e.sessionContext,r),restartKernelAndClear:e=>i.restart(e.sessionContext,r).then((t=>{if(t){p.NotebookActions.clearAllOutputs(e.content)}return t})),changeKernel:e=>i.selectKernel(e.sessionContext,r),shutdownKernel:e=>e.sessionContext.shutdown()});t.fileMenu.consoleCreators.add({tracker:n,createConsoleLabel:e=>s.__("New Console for Notebook"),createConsole:e=>oe.createConsole(a,e,true)});t.viewMenu.editorViewers.add({tracker:n,toggleLineNumbers:e=>{p.NotebookActions.toggleAllLineNumbers(e.content)},lineNumbersToggled:e=>{const t=e.content.editorConfig;return!!(t.code.lineNumbers&&t.markdown.lineNumbers&&t.raw.lineNumbers)}});t.runMenu.codeRunners.add({tracker:n,runLabel:e=>s.__("Run Selected Cells"),runCaption:e=>s.__("Run the selected cells and advance"),runAllLabel:e=>s.__("Run All Cells"),runAllCaption:e=>s.__("Run the all notebook cells"),restartAndRunAllLabel:e=>s.__("Restart Kernel and Run All Cells"),restartAndRunAllCaption:e=>s.__("Restart the kernel, then re-run the whole notebook"),run:e=>{const{context:t,content:n}=e;return p.NotebookActions.runAndAdvance(n,t.sessionContext).then((()=>void 0))},runAll:e=>{const{context:t,content:n}=e;return p.NotebookActions.runAll(n,t.sessionContext).then((()=>void 0))},restartAndRunAll:e=>{const{context:t,content:n}=e;return i.restart(t.sessionContext,r).then((e=>{if(e){void p.NotebookActions.runAll(n,t.sessionContext)}return e}))}});t.helpMenu.kernelUsers.add({tracker:n,getKernel:e=>{var t;return(t=e.sessionContext.session)===null||t===void 0?void 0:t.kernel}})}var oe;(function(e){function t(e,t,n){const r={path:t.context.path,preferredLanguage:t.context.model.defaultKernelLanguage,activate:n,ref:t.id,insertMode:"split-bottom"};return e.execute("console:create",r)}e.createConsole=t;function n(e,t){return t.currentWidget!==null&&t.currentWidget===e.currentWidget}e.isEnabled=n;function r(t,n){if(!e.isEnabled(t,n)){return false}const{content:r}=n.currentWidget;const o=r.activeCellIndex;for(let e=0;e<r.widgets.length;++e){if(r.isSelected(r.widgets[e])&&e!==o){return false}}return true}e.isEnabledAndSingleSelected=r;function o(t,n){if(!e.isEnabled(t,n)){return false}const{content:r}=n.currentWidget;const o=r.activeCellIndex;if(!(r.activeCell instanceof i.MarkdownCell)){return false}for(let e=0;e<r.widgets.length;++e){if(r.isSelected(r.widgets[e])&&e!==o){return false}}return true}e.isEnabledAndHeadingSelected=o;function s(e){e=e||C.nullTranslator;const t=e.load("jupyterlab");return{html:t.__("HTML"),latex:t.__("LaTeX"),markdown:t.__("Markdown"),pdf:t.__("PDF"),rst:t.__("ReStructured Text"),script:t.__("Executable Script"),slides:t.__("Reveal.js Slides")}}e.getFormatLabels=s;class a extends x.Panel{constructor(e){super();this._cell=null;const t=(e.translator||C.nullTranslator).load("jupyterlab");this._notebook=e.notebook;this._index=e.index!==undefined?e.index:-1;this._cell=e.cell||null;this.id=`LinkedOutputView-${y.UUID.uuid4()}`;this.title.label="Output View";this.title.icon=b.notebookIcon;this.title.caption=this._notebook.title.label?t.__("For Notebook: %1",this._notebook.title.label):t.__("For Notebook:");this.addClass("jp-LinkedOutputView");void this._notebook.context.ready.then((()=>{if(!this._cell){this._cell=this._notebook.content.widgets[this._index]}if(!this._cell||this._cell.model.type!=="code"){this.dispose();return}const e=this._cell.cloneOutputArea();this.addWidget(e)}))}get index(){return this._cell?_.ArrayExt.findFirstIndex(this._notebook.content.widgets,(e=>e===this._cell)):this._index}get path(){return this._notebook.context.path}}e.ClonedOutputArea=a})(oe||(oe={}))},55337:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(49914);var a=n(98328);var l=n(98896);var c=n(94683);var d=n(90516);var u=n(82401);var h=n(59240);var p=n(5956);var m=n(38710);var g=n(52812);var f=n(70161);var A=n(74518);var v=n(88164);var C=n(9469)},14502:(e,t,n)=>{"use strict";n.r(t);n.d(t,{CellTypeSwitcher:()=>b,CommandEditStatus:()=>D,ExecutionIndicator:()=>Be,ExecutionIndicatorComponent:()=>ke,INotebookTools:()=>Ce,INotebookTracker:()=>be,INotebookWidgetFactory:()=>ve,KernelError:()=>p,Notebook:()=>ue,NotebookActions:()=>m,NotebookModel:()=>j,NotebookModelFactory:()=>k,NotebookPanel:()=>Ae,NotebookTools:()=>L,NotebookTracker:()=>_e,NotebookTrustStatus:()=>we,NotebookWidgetFactory:()=>xe,StaticNotebook:()=>de,ToolbarItems:()=>C});var r=n(3378);var o=n(76191);var i=n(59768);var s=n(54522);var a=n(91100);var l=n(45187);var c=n(18987);var d=n(77865);var u=n.n(d);const h="application/vnd.jupyter.cells";class p extends Error{constructor(e){const t=e;const n=t.ename;const r=t.evalue;super(`KernelReplyNotOK: ${n} ${r}`);this.errorName=n;this.errorValue=r;this.traceback=t.traceback;Object.setPrototypeOf(this,p.prototype)}}class m{static get executed(){return g.executed}static get executionScheduled(){return g.executionScheduled}static get selectionExecuted(){return g.selectionExecuted}constructor(){}}(function(e){function t(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);e.deselectAll();const n=e.model;const r=e.activeCellIndex;const o=e.widgets[r];const i=o.editor;const s=i.getSelections();const a=o.model.value.text;const l=[0];let c=-1;let d=-1;for(let g=0;g<s.length;g++){c=i.getOffsetAt(s[g].start);d=i.getOffsetAt(s[g].end);if(c<d){l.push(c);l.push(d)}else if(d<c){l.push(d);l.push(c)}else{l.push(c)}}l.push(a.length);const u=[];for(let f=0;f+1<l.length;f++){const e=g.cloneCell(n,o.model);u.push(e)}for(let g=0;g<u.length;g++){if(g!==u.length-1&&u[g].type==="code"){u[g].outputs.clear()}u[g].value.text=a.slice(l[g],l[g+1]).replace(/^\n+/,"").replace(/\n+$/,"")}const h=n.cells;h.beginCompoundOperation();for(let g=0;g<u.length;g++){if(g===0){h.set(r,u[g])}else{h.insert(r+g,u[g])}}h.endCompoundOperation();const p=c!==d?2:1;e.activeCellIndex=r+u.length-p;const m=e.activeCell.editor;m.focus();g.handleState(e,t)}e.splitCell=t;function n(e,t=false){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const n=g.getState(e);const r=[];const i=[];const s=e.model;const a=s.cells;const l=e.activeCell;const c=e.activeCellIndex;const d={};e.widgets.forEach(((t,n)=>{if(e.isSelectedOrActive(t)){r.push(t.model.value.text);if(n!==c){i.push(t.model)}const e=t.model;if((0,o.isRawCellModel)(e)||(0,o.isMarkdownCellModel)(e)){for(const t of e.attachments.keys){d[t]=e.attachments.get(t).toJSON()}}}}));if(r.length===1){if(t===true){if(c===0){return}const e=a.get(c-1);r.unshift(e.value.text);i.push(e)}else if(t===false){if(c===a.length-1){return}const e=a.get(c+1);r.push(e.value.text);i.push(e)}}e.deselectAll();const u=g.cloneCell(s,l.model);u.value.text=r.join("\n\n");if((0,o.isCodeCellModel)(u)){u.outputs.clear()}else if((0,o.isMarkdownCellModel)(u)||(0,o.isRawCellModel)(u)){u.attachments.fromJSON(d)}a.beginCompoundOperation();a.set(c,u);i.forEach((e=>{a.removeValue(e)}));a.endCompoundOperation();if(l instanceof o.MarkdownCell){e.activeCell.rendered=false}g.handleState(e,n)}e.mergeCells=n;function c(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);g.deleteCells(e);g.handleState(e,t,true)}e.deleteCells=c;function u(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);const n=e.model;const r=n.contentFactory.createCell(e.notebookConfig.defaultCell,{});const o=e.activeCellIndex;n.cells.insert(o,r);e.activeCellIndex=o;e.deselectAll();g.handleState(e,t,true)}e.insertAbove=u;function p(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);const n=e.model;const r=n.contentFactory.createCell(e.notebookConfig.defaultCell,{});n.cells.insert(e.activeCellIndex+1,r);e.activeCellIndex++;e.deselectAll();g.handleState(e,t,true)}e.insertBelow=p;function m(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);const n=e.model.cells;const r=e.widgets;n.beginCompoundOperation();for(let o=n.length-2;o>-1;o--){if(e.isSelectedOrActive(r[o])){if(!e.isSelectedOrActive(r[o+1])){n.move(o,o+1);if(e.activeCellIndex===o){e.activeCellIndex++}e.select(r[o+1]);e.deselect(r[o])}}}n.endCompoundOperation();g.handleState(e,t,true)}e.moveDown=m;function f(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);const n=e.model.cells;const r=e.widgets;n.beginCompoundOperation();for(let o=1;o<n.length;o++){if(e.isSelectedOrActive(r[o])){if(!e.isSelectedOrActive(r[o-1])){n.move(o,o-1);if(e.activeCellIndex===o){e.activeCellIndex--}e.select(r[o-1]);e.deselect(r[o])}}}n.endCompoundOperation();g.handleState(e,t,true)}e.moveUp=f;function A(e,t){if(!e.model||!e.activeCell){return}const n=g.getState(e);g.changeCellType(e,t);g.handleState(e,n)}e.changeCellType=A;function v(e,t){if(!e.model||!e.activeCell){return Promise.resolve(false)}const n=g.getState(e);const r=g.runSelected(e,t);g.handleRunState(e,n,false);return r}e.run=v;function C(e,t){if(!e.model||!e.activeCell){return Promise.resolve(false)}const n=g.getState(e);const r=g.runSelected(e,t);const o=e.model;if(e.activeCellIndex===e.widgets.length-1){const t=o.contentFactory.createCell(e.notebookConfig.defaultCell,{});o.cells.insert(e.widgets.length,t);e.activeCellIndex++;e.mode="edit"}else{e.activeCellIndex++}g.handleRunState(e,n,true);return r}e.runAndAdvance=C;function b(e,t){if(!e.model||!e.activeCell){return Promise.resolve(false)}if(!g.isNotebookRendered(e)){return Promise.resolve(false)}const n=g.getState(e);const r=g.runSelected(e,t);const o=e.model;const i=o.contentFactory.createCell(e.notebookConfig.defaultCell,{});o.cells.insert(e.activeCellIndex+1,i);e.activeCellIndex++;e.mode="edit";g.handleRunState(e,n,true);return r}e.runAndInsert=b;function _(e,t){if(!e.model||!e.activeCell){return Promise.resolve(false)}const n=g.getState(e);e.widgets.forEach((t=>{e.select(t)}));const r=g.runSelected(e,t);g.handleRunState(e,n,true);return r}e.runAll=_;function y(e,t){if(!e.model||!e.activeCell){return Promise.resolve(false)}const n=e.activeCellIndex;const r=g.getState(e);e.widgets.forEach(((t,n)=>{if(t.model.type==="markdown"){e.select(t);e.activeCellIndex=n}}));if(e.activeCell.model.type!=="markdown"){return Promise.resolve(true)}const o=g.runSelected(e,t);e.activeCellIndex=n;g.handleRunState(e,r,true);return o}e.renderAllMarkdown=y;function E(e,t){const{activeCell:n,activeCellIndex:r,model:o}=e;if(!o||!n||r<1){return Promise.resolve(false)}const i=g.getState(e);e.activeCellIndex--;e.deselectAll();for(let a=0;a<e.activeCellIndex;++a){e.select(e.widgets[a])}const s=g.runSelected(e,t);e.activeCellIndex++;g.handleRunState(e,i,true);return s}e.runAllAbove=E;function w(e,t){if(!e.model||!e.activeCell){return Promise.resolve(false)}const n=g.getState(e);e.deselectAll();for(let o=e.activeCellIndex;o<e.widgets.length;++o){e.select(e.widgets[o])}const r=g.runSelected(e,t);g.handleRunState(e,n,true);return r}e.runAllBelow=w;function x(e,t){var n,r;if(!e.model||!e.activeCell){return}(r=(n=e.activeCell.editor).replaceSelection)===null||r===void 0?void 0:r.call(n,t)}e.replaceSelection=x;function j(e){if(!e.model||!e.activeCell){return}if(e.activeCellIndex===0){return}let t=e.activeCellIndex-1;while(t>=0){const n=e.widgets[t];if(!n.inputHidden&&!n.isHidden){break}t-=1}const n=g.getState(e);e.activeCellIndex=t;e.deselectAll();g.handleState(e,n,true)}e.selectAbove=j;function k(e){if(!e.model||!e.activeCell){return}let t=e.widgets.length-1;while(e.widgets[t].isHidden||e.widgets[t].inputHidden){t-=1}if(e.activeCellIndex===t){return}let n=e.activeCellIndex+1;while(n<t){let t=e.widgets[n];if(!t.inputHidden&&!t.isHidden){break}n+=1}const r=g.getState(e);e.activeCellIndex=n;e.deselectAll();g.handleState(e,r,true)}e.selectBelow=k;function B(e,t=false){if(!e.model||!e.activeCell){return}if(e.activeCellIndex===0){return}const n=g.getState(e);e.mode="command";if(t){e.extendContiguousSelectionTo(0)}else{e.extendContiguousSelectionTo(e.activeCellIndex-1)}g.handleState(e,n,true)}e.extendSelectionAbove=B;function S(e,t=false){if(!e.model||!e.activeCell){return}if(e.activeCellIndex===e.widgets.length-1){return}const n=g.getState(e);e.mode="command";if(t){e.extendContiguousSelectionTo(e.widgets.length-1)}else{e.extendContiguousSelectionTo(e.activeCellIndex+1)}g.handleState(e,n,true)}e.extendSelectionBelow=S;function D(e){if(!e.model||!e.activeCell){return}e.widgets.forEach((t=>{e.select(t)}))}e.selectAll=D;function M(e){if(!e.model||!e.activeCell){return}e.deselectAll()}e.deselectAll=M;function T(e){g.copyOrCut(e,false)}e.copy=T;function I(e){if(!g.isNotebookRendered(e)){return}g.copyOrCut(e,true)}e.cut=I;function P(e,t="below"){if(!g.isNotebookRendered(e)){return}const n=r.Clipboard.getInstance();if(!n.hasData(h)){return}const o=n.getData(h);L(e,t,o,true)}e.paste=P;function R(e,t="below"){const n=g.selectedCells(e);if(!n||n.length===0){return}L(e,t,n,false)}e.duplicate=R;function L(e,t="below",n,r=false){if(!e.model||!e.activeCell){return}const o=g.getState(e);const i=e.model;e.mode="command";const s=n.map((t=>{switch(t.cell_type){case"code":if(e.lastClipboardInteraction==="cut"&&typeof t.id==="string"){let e=t.id;return i.contentFactory.createCodeCell({id:e,cell:t})}else{return i.contentFactory.createCodeCell({cell:t})}case"markdown":return i.contentFactory.createMarkdownCell({cell:t});default:return i.contentFactory.createRawCell({cell:t})}}));const a=e.model.cells;let l;a.beginCompoundOperation();switch(t){case"below":l=e.activeCellIndex;break;case"belowSelected":e.widgets.forEach(((t,n)=>{if(e.isSelectedOrActive(t)){l=n}}));break;case"above":l=e.activeCellIndex-1;break;case"replace":{const t=[];e.widgets.forEach(((n,r)=>{const o=n.model.metadata.get("deletable")!==false;if(e.isSelectedOrActive(n)&&o){t.push(r)}}));if(t.length>0){t.reverse().forEach((e=>{a.remove(e)}))}l=t[0];break}default:break}s.forEach((e=>{a.insert(++l,e)}));a.endCompoundOperation();e.activeCellIndex+=s.length;e.deselectAll();if(r){e.lastClipboardInteraction="paste"}g.handleState(e,o)}function O(e){if(!e.model||!e.activeCell){return}if(!g.isNotebookRendered(e)){return}const t=g.getState(e);e.mode="command";e.model.sharedModel.undo();e.deselectAll();g.handleState(e,t)}e.undo=O;function z(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.mode="command";e.model.sharedModel.redo();e.deselectAll();g.handleState(e,t)}e.redo=z;function N(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);const n=e.editorConfig;const r=!(n.code.lineNumbers&&n.markdown.lineNumbers&&n.raw.lineNumbers);const o={code:Object.assign(Object.assign({},n.code),{lineNumbers:r}),markdown:Object.assign(Object.assign({},n.markdown),{lineNumbers:r}),raw:Object.assign(Object.assign({},n.raw),{lineNumbers:r})};e.editorConfig=o;g.handleState(e,t)}e.toggleAllLineNumbers=N;function F(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);(0,s.each)(e.model.cells,((t,n)=>{const r=e.widgets[n];if(e.isSelectedOrActive(r)&&t.type==="code"){t.clearExecution();r.outputHidden=false}}));g.handleState(e,t,true)}e.clearOutputs=F;function H(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);(0,s.each)(e.model.cells,((t,n)=>{const r=e.widgets[n];if(t.type==="code"){t.clearExecution();r.outputHidden=false}}));g.handleState(e,t,true)}e.clearAllOutputs=H;function W(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.inputHidden=true}}));g.handleState(e,t)}e.hideCode=W;function V(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.inputHidden=false}}));g.handleState(e,t)}e.showCode=V;function q(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.inputHidden=true}}));g.handleState(e,t)}e.hideAllCode=q;function U(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.inputHidden=false}}));g.handleState(e,t)}e.showAllCode=U;function $(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputHidden=true}}));g.handleState(e,t,true)}e.hideOutput=$;function K(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputHidden=false}}));g.handleState(e,t)}e.showOutput=K;function Y(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.outputHidden=true}}));g.handleState(e,t,true)}e.hideAllOutputs=Y;function G(e){e.renderingLayout="side-by-side"}e.renderSideBySide=G;function Z(e){e.renderingLayout="default"}e.renderDefault=Z;function J(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((e=>{if(e.model.type==="code"){e.outputHidden=false}}));g.handleState(e,t)}e.showAllOutputs=J;function X(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputsScrolled=true}}));g.handleState(e,t,true)}e.enableOutputScrolling=X;function Q(e){if(!e.model||!e.activeCell){return}const t=g.getState(e);e.widgets.forEach((t=>{if(e.isSelectedOrActive(t)&&t.model.type==="code"){t.outputsScrolled=false}}));g.handleState(e,t)}e.disableOutputScrolling=Q;function ee(e){let t=null;let n=null;e.widgets.forEach(((e,r)=>{if(e.model.type==="code"){const o=e.model.metadata.get("execution");if(o&&a.JSONExt.isObject(o)&&o["iopub.status.busy"]!==undefined){const e=o["iopub.status.busy"].toString();if(e){const o=new Date(e);if(!t||o>=t){t=o;n=r}}}}}));if(n!==null){e.activeCellIndex=n}}e.selectLastRunCell=ee;function te(e,t){if(!e.model||!e.activeCell){return}const n=g.getState(e);const r=e.model.cells;t=Math.min(Math.max(t,1),6);e.widgets.forEach(((n,o)=>{if(e.isSelectedOrActive(n)){g.setMarkdownHeader(r.get(o),t)}}));g.changeCellType(e,"markdown");g.handleState(e,n)}e.setMarkdownHeader=te;function ne(t){for(const n of t.widgets){if(e.getHeadingInfo(n).isHeading){e.setHeadingCollapse(n,true,t);e.setCellCollapse(n,true)}}}e.collapseAll=ne;function re(t){for(const n of t.widgets){if(e.getHeadingInfo(n).isHeading){e.setHeadingCollapse(n,false,t);e.setCellCollapse(n,false)}}}e.expandAllHeadings=re;function oe(e,t){const n=(0,s.findIndex)(t.widgets,((t,n)=>e.model.id===t.model.id));if(n===-1){return}if(n>=t.widgets.length){return}let r=de(t.widgets[n]);for(let o=n-1;o>=0;o--){if(o<t.widgets.length){let e=de(t.widgets[o]);if(e.isHeading&&e.headingLevel<r.headingLevel){return t.widgets[o]}}}return}function ie(e,t){let n=oe(e,t);if(!n){return}if(!de(n).collapsed&&!n.isHidden){return}if(n.isHidden){ie(n,t)}if(de(n).collapsed){ae(n,false,t)}}e.expandParent=ie;function se(e,t){let n=(0,s.findIndex)(t.widgets,((t,n)=>e.model.id===t.model.id));if(n===-1){return-1}let r=de(e);for(n=n+1;n<t.widgets.length;n++){let e=de(t.widgets[n]);if(e.isHeading&&e.headingLevel<=r.headingLevel){return n}}return t.widgets.length}e.findNextParentHeading=se;function ae(t,n,r){const i=(0,s.findIndex)(r.widgets,((e,n)=>t.model.id===e.model.id));if(i===-1){return-1}if(!r.widgets.length){return i+1}let a=e.getHeadingInfo(t);if(t.isHidden||!(t instanceof o.MarkdownCell)||!a.isHeading){return i+1}let l=false;let c=0;let d;for(d=i+1;d<r.widgets.length;d++){let t=r.widgets[d];let o=e.getHeadingInfo(t);if(o.isHeading&&o.headingLevel<=a.headingLevel){d-=1;break}if(l&&o.isHeading&&o.headingLevel<=c){l=false}if(n||l){t.setHidden(true);continue}if(o.collapsed&&o.isHeading){l=true;c=o.headingLevel}t.setHidden(false)}if(d===r.widgets.length){t.numberChildNodes=d-i-1}else{t.numberChildNodes=d-i}e.setCellCollapse(t,n);return d+1}e.setHeadingCollapse=ae;function le(t){if(!t.activeCell||t.activeCellIndex===undefined){return}let n=e.getHeadingInfo(t.activeCell);if(n.isHeading){e.setHeadingCollapse(t.activeCell,!n.collapsed,t)}l.ElementExt.scrollIntoViewIfNeeded(t.node,t.activeCell.node)}e.toggleCurrentHeadingCollapse=le;function ce(e,t){if(e instanceof o.MarkdownCell){e.headingCollapsed=t}else{e.setHidden(t)}}e.setCellCollapse=ce;function de(e){if(!(e instanceof o.MarkdownCell)){return{isHeading:false,headingLevel:7}}let t=e.headingInfo.level;let n=e.headingCollapsed;return{isHeading:t>0,headingLevel:t,collapsed:n}}e.getHeadingInfo=de;function ue(e,t){t=t||i.nullTranslator;const n=t.load("jupyterlab");if(!e.model){return Promise.resolve()}const o=(0,s.toArray)(e.model.cells);const a=o.every((e=>e.trusted));const l=d.createElement("p",null,n.__("A trusted Jupyter notebook may execute hidden malicious code when you open it."),d.createElement("br",null),n.__("Selecting trust will re-render this notebook in a trusted state."),d.createElement("br",null),n.__("For more information, see")," ",d.createElement("a",{href:"https://jupyter-server.readthedocs.io/en/stable/operators/security.html",target:"_blank",rel:"noopener noreferrer"},n.__("the Jupyter security documentation")));if(a){return(0,r.showDialog)({body:n.__("Notebook is already trusted"),buttons:[r.Dialog.okButton({label:n.__("Ok")})]}).then((()=>undefined))}return(0,r.showDialog)({body:l,title:n.__("Trust this notebook?"),buttons:[r.Dialog.cancelButton({label:n.__("Cancel")}),r.Dialog.warnButton({label:n.__("Ok")})]}).then((e=>{if(e.button.accept){o.forEach((e=>{e.trusted=true}))}}))}e.trust=ue})(m||(m={}));var g;(function(e){e.executed=new c.Signal({});e.executionScheduled=new c.Signal({});e.selectionExecuted=new c.Signal({});function t(e){const t=e.translator;const n=t.load("jupyterlab");if(e.remainingCellToRenderCount!==0){(0,r.showDialog)({body:n.__(`Notebook is still rendering and has for now (%1) remaining cells to render.\n\nPlease wait for the complete rendering before invoking that action.`,e.remainingCellToRenderCount),buttons:[r.Dialog.okButton({label:n.__("Ok")})]}).catch((e=>{console.error("An error occurred when displaying notebook rendering warning",e)}));return false}return true}e.isNotebookRendered=t;function n(e){return{wasFocused:e.node.contains(document.activeElement),activeCell:e.activeCell}}e.getState=n;function a(e,t,n=false){const{activeCell:r,node:o}=e;if(t.wasFocused||e.mode==="edit"){e.activate()}if(n&&r){l.ElementExt.scrollIntoViewIfNeeded(o,r.node)}}e.handleState=a;function d(e,t,n=false){if(t.wasFocused||e.mode==="edit"){e.activate()}if(n&&t.activeCell){const n=t.activeCell.inputArea.node.getBoundingClientRect();e.scrollToPosition(n.bottom,45)}}e.handleRunState=d;function u(e,t){switch(t.type){case"code":return e.contentFactory.createCodeCell({cell:t.toJSON()});case"markdown":return e.contentFactory.createMarkdownCell({cell:t.toJSON()});default:return e.contentFactory.createRawCell({cell:t.toJSON()})}}e.cloneCell=u;function m(t,n){t.mode="command";let r=t.activeCellIndex;const o=t.widgets.filter(((e,n)=>{const o=t.isSelectedOrActive(e);if(o){r=n}return o}));t.activeCellIndex=r;t.deselectAll();return Promise.all(o.map((e=>g(t,e,n)))).then((n=>{if(t.isDisposed){return false}e.selectionExecuted.emit({notebook:t,lastCell:t.widgets[r]});t.update();return n.every((e=>e))})).catch((n=>{if(n.message.startsWith("KernelReplyNotOK")){o.map((e=>{if(e.model.type==="code"&&e.model.executionCount==null){e.setPrompt("")}}))}else{throw n}e.selectionExecuted.emit({notebook:t,lastCell:t.widgets[r]});t.update();return false}))}e.runSelected=m;function g(t,n,s,a){var l,c,d;a=a||i.nullTranslator;const u=a.load("jupyterlab");switch(n.model.type){case"markdown":n.rendered=true;n.inputHidden=false;e.executed.emit({notebook:t,cell:n,success:true});break;case"code":if(s){if(s.isTerminating){void(0,r.showDialog)({title:u.__("Kernel Terminating"),body:u.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",(l=s.session)===null||l===void 0?void 0:l.path),buttons:[r.Dialog.okButton({label:u.__("Ok")})]});break}if(s.pendingInput){void(0,r.showDialog)({title:u.__("Cell not executed due to pending input"),body:u.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[r.Dialog.okButton({label:u.__("Ok")})]});return Promise.resolve(false)}if(s.hasNoKernel){void r.sessionContextDialogs.selectKernel(s);return Promise.resolve(false)}const i=(d=(c=t.model)===null||c===void 0?void 0:c.deletedCells)!==null&&d!==void 0?d:[];e.executionScheduled.emit({notebook:t,cell:n});return o.CodeCell.execute(n,s,{deletedCells:i,recordTiming:t.notebookConfig.recordTiming}).then((e=>{i.splice(0,i.length);if(n.isDisposed){return false}if(!e){return true}if(e.content.status==="ok"){const r=e.content;if(r.payload&&r.payload.length){f(r,t,n)}return true}else{throw new p(e.content)}})).catch((r=>{if(n.isDisposed||r.message.startsWith("Canceled")){return false}e.executed.emit({notebook:t,cell:n,success:false,error:r});throw r})).then((r=>{if(r){e.executed.emit({notebook:t,cell:n,success:true})}return r}))}n.model.clearExecution();break;default:break}return Promise.resolve(true)}function f(e,t,n){var r;const o=(r=e.payload)===null||r===void 0?void 0:r.filter((e=>e.source==="set_next_input"))[0];if(!o){return}const i=o.text;const a=o.replace;if(a){n.model.value.text=i;return}const l=t.model.contentFactory.createCodeCell({});const c=t.model.cells;const d=s.ArrayExt.firstIndexOf((0,s.toArray)(c),n.model);l.value.text=i;if(d===-1){c.push(l)}else{c.insert(d+1,l)}}function A(e){return e.widgets.filter((t=>e.isSelectedOrActive(t))).map((e=>e.model.toJSON())).map((e=>{if(e.metadata.deletable!==undefined){delete e.metadata.deletable}return e}))}e.selectedCells=A;function v(t,o){if(!t.model||!t.activeCell){return}const i=n(t);const s=r.Clipboard.getInstance();t.mode="command";s.clear();const l=e.selectedCells(t);s.setData(h,l);if(o){b(t)}else{t.deselectAll()}if(o){t.lastClipboardInteraction="cut"}else{t.lastClipboardInteraction="copy"}a(t,i)}e.copyOrCut=v;function C(e,t){const n=e.model;const r=n.cells;r.beginCompoundOperation();e.widgets.forEach(((o,i)=>{if(!e.isSelectedOrActive(o)){return}if(o.model.type!==t){const e=o.model.toJSON();let s;switch(t){case"code":s=n.contentFactory.createCodeCell({cell:e});break;case"markdown":s=n.contentFactory.createMarkdownCell({cell:e});if(o.model.type==="code"){s.trusted=false}break;default:s=n.contentFactory.createRawCell({cell:e});if(o.model.type==="code"){s.trusted=false}}r.set(i,s)}if(t==="markdown"){o=e.widgets[i];o.rendered=false}}));r.endCompoundOperation();e.deselectAll()}e.changeCellType=C;function b(e){const t=e.model;const n=t.cells;const r=[];e.mode="command";e.widgets.forEach(((n,o)=>{const i=n.model.metadata.get("deletable")!==false;if(e.isSelectedOrActive(n)&&i){r.push(o);t.deletedCells.push(n.model.id)}}));if(r.length>0){n.beginCompoundOperation();r.reverse().forEach((e=>{n.remove(e)}));if(!n.length){n.push(t.contentFactory.createCell(e.notebookConfig.defaultCell,{}))}n.endCompoundOperation();e.activeCellIndex=r[0]-r.length+1}e.deselectAll()}e.deleteCells=b;function _(e,t){let n=e.value.text;const r=/^(#+\s*)|^(\s*)/;const o=Array(t+1).join("#")+" ";const i=r.exec(n);if(i){n=n.slice(i[0].length)}e.value.text=o+n}e.setMarkdownHeader=_})(g||(g={}));var f=n(25903);const A="jp-Notebook-toolbarCellType";const v="jp-Notebook-toolbarCellTypeDropdown";var C;(function(e){function t(e,t){const n=(t||i.nullTranslator).load("jupyterlab");function o(){if(e.context.model.readOnly){return(0,r.showDialog)({title:n.__("Cannot Save"),body:n.__("Document is read-only"),buttons:[r.Dialog.okButton({label:n.__("Ok")})]})}void e.context.save().then((()=>{if(!e.isDisposed){return e.context.createCheckpoint()}}))}return(0,r.addToolbarButtonClass)(r.ReactWidget.create(d.createElement(r.UseSignal,{signal:e.context.fileChanged},(()=>d.createElement(r.ToolbarButtonComponent,{icon:f.saveIcon,onClick:o,tooltip:n.__("Save the notebook contents and create checkpoint"),enabled:!!(e&&e.context&&e.context.contentsModel&&e.context.contentsModel.writable)})))))}e.createSaveButton=t;function n(e,t){const n=(t||i.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:f.addIcon,onClick:()=>{m.insertBelow(e.content)},tooltip:n.__("Insert a cell below")})}e.createInsertButton=n;function o(e,t){const n=(t||i.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:f.cutIcon,onClick:()=>{m.cut(e.content)},tooltip:n.__("Cut the selected cells")})}e.createCutButton=o;function s(e,t){const n=(t||i.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:f.copyIcon,onClick:()=>{m.copy(e.content)},tooltip:n.__("Copy the selected cells")})}e.createCopyButton=s;function a(e,t){const n=(t||i.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:f.pasteIcon,onClick:()=>{m.paste(e.content)},tooltip:n.__("Paste cells from the clipboard")})}e.createPasteButton=a;function l(e,t){const n=(t||i.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:f.runIcon,onClick:()=>{void m.runAndAdvance(e.content,e.sessionContext)},tooltip:n.__("Run the selected cells and advance")})}e.createRunButton=l;function c(e,t,n){const o=(n||i.nullTranslator).load("jupyterlab");return new r.ToolbarButton({icon:f.fastForwardIcon,onClick:()=>{void(t!==null&&t!==void 0?t:r.sessionContextDialogs).restart(e.sessionContext,n).then((t=>{if(t){void m.runAll(e.content,e.sessionContext)}return t}))},tooltip:o.__("Restart the kernel, then re-run the whole notebook")})}e.createRestartRunAllButton=c;function u(e,t){return new b(e.content,t)}e.createCellTypeItem=u;function h(e,i,d){return[{name:"save",widget:t(e,d)},{name:"insert",widget:n(e,d)},{name:"cut",widget:o(e,d)},{name:"copy",widget:s(e,d)},{name:"paste",widget:a(e,d)},{name:"run",widget:l(e,d)},{name:"interrupt",widget:r.Toolbar.createInterruptButton(e.sessionContext,d)},{name:"restart",widget:r.Toolbar.createRestartButton(e.sessionContext,i,d)},{name:"restart-and-run",widget:c(e,i,d)},{name:"cellType",widget:u(e,d)},{name:"spacer",widget:r.Toolbar.createSpacerItem()},{name:"kernelName",widget:r.Toolbar.createKernelNameItem(e.sessionContext,i,d)}]}e.getDefaultItems=h})(C||(C={}));class b extends r.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(e.target.value!=="-"){m.changeCellType(this._notebook,e.target.value);this._notebook.activate()}};this.handleKeyDown=e=>{if(e.keyCode===13){this._notebook.activate()}};this._trans=(t||i.nullTranslator).load("jupyterlab");this.addClass(A);this._notebook=e;if(e.model){this.update()}e.activeCellChanged.connect(this.update,this);e.selectionChanged.connect(this.update,this)}render(){let e="-";if(this._notebook.activeCell){e=this._notebook.activeCell.model.type}for(const t of this._notebook.widgets){if(this._notebook.isSelectedOrActive(t)){if(t.model.type!==e){e="-";break}}}return d.createElement(f.HTMLSelect,{className:v,onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e,"aria-label":this._trans.__("Cell type"),title:this._trans.__("Select the cell type")},d.createElement("option",{value:"-"},"-"),d.createElement("option",{value:"code"},this._trans.__("Code")),d.createElement("option",{value:"markdown"},this._trans.__("Markdown")),d.createElement("option",{value:"raw"},this._trans.__("Raw")))}}var _=n(23465);var y=n(82714);var E=n(73967);class w{constructor(e,t,n){this._mutex=E.createMutex();this._isDisposed=false;this._changed=new c.Signal(this);this._factory=t;this._cellOrder=e.createList("cellOrder");this._cellMap=new y.ObservableMap;this._cellOrder.changed.connect(this._onOrderChanged,this);this.nbmodel=n;this.nbmodel.changed.connect(this.onSharedModelChanged,this);this.changed.connect(this.onModelDBChanged,this)}onModelDBChanged(e,t){this._mutex((()=>{const e=this.nbmodel;e.transact((()=>{if(t.type==="set"||t.type==="remove"){e.deleteCellRange(t.oldIndex,t.oldIndex+t.oldValues.length)}if(t.type==="set"||t.type==="add"||t.type==="move"){const n=t.newValues.map((e=>e.sharedModel.clone()));let r=t.newIndex;if(t.type==="move"&&r>t.oldIndex){r+=t.oldValues.length}e.insertCells(r,n);t.newValues.forEach(((e,t)=>{e.switchSharedModel(n[t],false)}))}if(t.type==="move"){let n=t.oldIndex;if(n>=t.newIndex){n+=t.oldValues.length}e.deleteCellRange(n,n+t.oldValues.length)}}))}))}onSharedModelChanged(e,t){this._mutex((()=>{var e;let n=0;(e=t.cellsChange)===null||e===void 0?void 0:e.forEach((e=>{if(e.insert!=null){const t=e.insert.map((e=>{const t=this._factory.createCell(e.cell_type,{});t.switchSharedModel(e,true);return t}));this.insertAll(n,t);n+=e.insert.length}else if(e.delete!=null){this.removeRange(n,n+e.delete)}else if(e.retain!=null){n+=e.retain}}))}))}get changed(){return this._changed}get isDisposed(){return this._isDisposed}get isEmpty(){return this._cellOrder.length===0}get length(){return this._cellOrder.length}iter(){const e=[];for(const t of(0,s.toArray)(this._cellOrder)){e.push(this._cellMap.get(t))}return new s.ArrayIterator(e)}dispose(){if(this._isDisposed){return}this._isDisposed=true;c.Signal.clearData(this);for(const e of this._cellMap.values()){e.dispose()}this._cellMap.dispose();this._cellOrder.dispose()}get(e){return this._cellMap.get(this._cellOrder.get(e))}set(e,t){this._cellMap.set(t.id,t);this._cellOrder.set(e,t.id)}push(e){this._cellMap.set(e.id,e);const t=this._cellOrder.push(e.id);return t}insert(e,t){this._cellMap.set(t.id,t);this._cellOrder.insert(e,t.id)}removeValue(e){const t=s.ArrayExt.findFirstIndex((0,s.toArray)(this._cellOrder),(t=>this._cellMap.get(t)===e));this.remove(t);return t}remove(e){const t=this._cellOrder.get(e);this._cellOrder.remove(e);const n=this._cellMap.get(t);return n}clear(){this._cellOrder.clear()}move(e,t){this._cellOrder.move(e,t)}pushAll(e){const t=(0,s.toArray)(e);(0,s.each)(t,(e=>{this._cellMap.set(e.id,e);this._cellOrder.push(e.id)}));return this.length}insertAll(e,t){const n=(0,s.toArray)(t);(0,s.each)(n,(t=>{this._cellMap.set(t.id,t);this._cellOrder.beginCompoundOperation();this._cellOrder.insert(e++,t.id);this._cellOrder.endCompoundOperation()}));return this.length}removeRange(e,t){this._cellOrder.removeRange(e,t);return this.length}get canRedo(){return this.nbmodel.canRedo()}get canUndo(){return this.nbmodel.canUndo()}beginCompoundOperation(e){this._cellOrder.beginCompoundOperation(e)}endCompoundOperation(){this._cellOrder.endCompoundOperation()}undo(){this.nbmodel.undo()}redo(){this.nbmodel.redo()}clearUndo(){this.nbmodel.clearUndoHistory()}_onOrderChanged(e,t){if(t.type==="add"||t.type==="set"){(0,s.each)(t.newValues,(e=>{const t=this._cellMap.get(e);if(t==null){const t=this._factory.modelDB;const n=t.createValue(e+".type");let r;switch(n.get()){case"code":r=this._factory.createCodeCell({id:e});break;case"markdown":r=this._factory.createMarkdownCell({id:e});break;default:r=this._factory.createRawCell({id:e});break}this._cellMap.set(e,r)}else if(!t.sharedModel.isStandalone){this._mutex((()=>{const n=t.toJSON();let r=null;switch(n.cell_type){case"code":r=this._factory.createCodeCell({cell:n});break;case"markdown":r=this._factory.createMarkdownCell({cell:n});break;default:r=this._factory.createRawCell({cell:n});break}this._cellMap.set(e,r)}))}}))}const n=[];const r=[];(0,s.each)(t.newValues,(e=>{n.push(this._cellMap.get(e))}));(0,s.each)(t.oldValues,(e=>{r.push(this._cellMap.get(e))}));this._changed.emit({type:t.type,oldIndex:t.oldIndex,newIndex:t.newIndex,oldValues:r,newValues:n})}}const x=["kernelspec","language_info"];class j{constructor(e={}){this._modelDBMutex=E.createMutex();this._readOnly=false;this._contentChanged=new c.Signal(this);this._stateChanged=new c.Signal(this);this._nbformat=_.MAJOR_VERSION;this._nbformatMinor=_.MINOR_VERSION;this._isDisposed=false;if(e.modelDB){this.modelDB=e.modelDB}else{this.modelDB=new y.ModelDB}this.sharedModel=E.YNotebook.create(e.disableDocumentWideUndoRedo||false);this._isInitialized=e.isInitialized===false?false:true;const t=e.contentFactory||j.defaultContentFactory;this.contentFactory=t.clone(this.modelDB.view("cells"));this._cells=new w(this.modelDB,this.contentFactory,this.sharedModel);this._trans=(e.translator||i.nullTranslator).load("jupyterlab");this._cells.changed.connect(this._onCellsChanged,this);const n=this.modelDB.createMap("metadata");if(!n.has("language_info")){const t=e.languagePreference||"";n.set("language_info",{name:t})}this._ensureMetadata();n.changed.connect(this._onMetadataChanged,this);this._deletedCells=[];this.sharedModel.dirty=false;this.sharedModel.changed.connect(this._onStateChanged,this)}get contentChanged(){return this._contentChanged}get stateChanged(){return this._stateChanged}get dirty(){return this.sharedModel.dirty}set dirty(e){if(e===this.dirty){return}this.sharedModel.dirty=e}get readOnly(){return this._readOnly}set readOnly(e){if(e===this._readOnly){return}const t=this._readOnly;this._readOnly=e;this.triggerStateChange({name:"readOnly",oldValue:t,newValue:e})}get metadata(){return this.modelDB.get("metadata")}get cells(){return this._cells}get nbformat(){return this._nbformat}get nbformatMinor(){return this._nbformatMinor}get defaultKernelName(){const e=this.metadata.get("kernelspec");return e?e.name:""}get deletedCells(){return this._deletedCells}get isInitialized(){return this._isInitialized}get defaultKernelLanguage(){const e=this.metadata.get("language_info");return e?e.name:""}dispose(){if(this.isDisposed){return}const e=this.cells;this._cells=null;e.dispose();this._isDisposed=true;c.Signal.clearData(this)}toString(){return JSON.stringify(this.toJSON())}fromString(e){this.fromJSON(JSON.parse(e))}toJSON(){var e,t;const n=[];for(let o=0;o<((t=(e=this.cells)===null||e===void 0?void 0:e.length)!==null&&t!==void 0?t:0);o++){const e=this.cells.get(o).toJSON();if(this._nbformat===4&&this._nbformatMinor<=4){delete e.id}n.push(e)}this._ensureMetadata();const r=this.sharedModel.getMetadata();for(const o of this.metadata.keys()){r[o]=JSON.parse(JSON.stringify(this.metadata.get(o)))}return{metadata:r,nbformat_minor:this._nbformatMinor,nbformat:this._nbformat,cells:n}}fromJSON(e){const t=[];const n=this.contentFactory;const o=e.nbformat===4&&e.nbformat_minor>=5;for(const r of e.cells){const e={cell:r};if(o){e.id=r.id}switch(r.cell_type){case"code":t.push(n.createCodeCell(e));break;case"markdown":t.push(n.createMarkdownCell(e));break;case"raw":t.push(n.createRawCell(e));break;default:continue}}this.cells.beginCompoundOperation();this.cells.clear();this.cells.pushAll(t);this.cells.endCompoundOperation();this.sharedModel.nbformat_minor=_.MINOR_VERSION;this.sharedModel.nbformat=_.MAJOR_VERSION;const i=e.metadata.orig_nbformat;if(e.nbformat!==this._nbformat){this.sharedModel.nbformat=e.nbformat}if(e.nbformat_minor>this._nbformatMinor){this.sharedModel.nbformat_minor=e.nbformat_minor}if(i!==undefined&&this._nbformat!==i){const e=this._nbformat>i;let t;if(e){t=this._trans.__(`This notebook has been converted from an older notebook format (v%1)\nto the current notebook format (v%2).\nThe next time you save this notebook, the current notebook format (v%2) will be used.\n'Older versions of Jupyter may not be able to read the new format.' To preserve the original format version,\nclose the notebook without saving it.`,i,this._nbformat)}else{t=this._trans.__(`This notebook has been converted from an newer notebook format (v%1)\nto the current notebook format (v%2).\nThe next time you save this notebook, the current notebook format (v%2) will be used.\nSome features of the original notebook may not be available.' To preserve the original format version,\nclose the notebook without saving it.`,i,this._nbformat)}void(0,r.showDialog)({title:this._trans.__("Notebook converted"),body:t,buttons:[r.Dialog.okButton({label:this._trans.__("Ok")})]})}this.metadata.clear();const s=e.metadata;for(const r in s){if(r==="orig_nbformat"){continue}this.metadata.set(r,s[r])}this._ensureMetadata();this.dirty=true}initialize(){if(!this.cells.length){const e=this.contentFactory;this.cells.push(e.createCodeCell({}))}this._isInitialized=true;this.cells.clearUndo()}_onCellsChanged(e,t){switch(t.type){case"add":t.newValues.forEach((e=>{e.contentChanged.connect(this.triggerContentChange,this)}));break;case"remove":break;case"set":t.newValues.forEach((e=>{e.contentChanged.connect(this.triggerContentChange,this)}));break;default:break}this.triggerContentChange()}_onStateChanged(e,t){if(t.stateChange){t.stateChange.forEach((e=>{if(e.name==="nbformat"){this._nbformat=e.newValue}if(e.name==="nbformatMinor"){this._nbformatMinor=e.newValue}if(e.name!=="dirty"||e.oldValue!==e.newValue){this.triggerStateChange(e)}}))}if(t.metadataChange){const e=t.metadataChange.newValue;this._modelDBMutex((()=>{Object.entries(e).forEach((([e,t])=>{this.metadata.set(e,t)}))}))}}_onMetadataChanged(e,t){if(!x.includes(t.key)){this._modelDBMutex((()=>{this.sharedModel.updateMetadata(e.toJSON())}))}this.triggerContentChange()}_ensureMetadata(){const e=this.metadata;if(!e.has("language_info")){e.set("language_info",{name:""})}if(!e.has("kernelspec")){e.set("kernelspec",{name:"",display_name:""})}}triggerStateChange(e){this._stateChanged.emit(e)}triggerContentChange(){this._contentChanged.emit(void 0);this.dirty=true}get isDisposed(){return this._isDisposed}}(function(e){class t{constructor(e){this.codeCellContentFactory=e.codeCellContentFactory||o.CodeCellModel.defaultContentFactory;this.modelDB=e.modelDB}createCell(e,t){switch(e){case"code":return this.createCodeCell(t);case"markdown":return this.createMarkdownCell(t);case"raw":default:return this.createRawCell(t)}}createCodeCell(e){if(e.contentFactory){e.contentFactory=this.codeCellContentFactory}if(this.modelDB){if(!e.id){e.id=a.UUID.uuid4()}e.modelDB=this.modelDB.view(e.id)}return new o.CodeCellModel(e)}createMarkdownCell(e){if(this.modelDB){if(!e.id){e.id=a.UUID.uuid4()}e.modelDB=this.modelDB.view(e.id)}return new o.MarkdownCellModel(e)}createRawCell(e){if(this.modelDB){if(!e.id){e.id=a.UUID.uuid4()}e.modelDB=this.modelDB.view(e.id)}return new o.RawCellModel(e)}clone(e){return new t({modelDB:e,codeCellContentFactory:this.codeCellContentFactory})}}e.ContentFactory=t;e.defaultContentFactory=new t({})})(j||(j={}));class k{constructor(e){this._disposed=false;this._disableDocumentWideUndoRedo=e.disableDocumentWideUndoRedo||false;const t=e.codeCellContentFactory;this.contentFactory=e.contentFactory||new j.ContentFactory({codeCellContentFactory:t})}set disableDocumentWideUndoRedo(e){this._disableDocumentWideUndoRedo=e}get name(){return"notebook"}get contentType(){return"notebook"}get fileFormat(){return"json"}get isDisposed(){return this._disposed}dispose(){this._disposed=true}createNew(e,t,n){const r=this.contentFactory;return new j({languagePreference:e,contentFactory:r,modelDB:t,isInitialized:n,disableDocumentWideUndoRedo:this._disableDocumentWideUndoRedo})}preferredLanguage(e){return""}}var B=n(85913);function S(e){const t=(e.translator||i.nullTranslator).load("jupyterlab");return d.createElement(B.TextItem,{source:t.__("Mode: %1",e.modeNames[e.notebookMode])})}class D extends r.VDomRenderer{constructor(e){super(new D.Model);this.translator=e||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._modeNames={command:this._trans.__("Command"),edit:this._trans.__("Edit")}}render(){if(!this.model){return null}this.node.title=this._trans.__("Notebook is in %1 mode",this._modeNames[this.model.notebookMode]);return d.createElement(S,{notebookMode:this.model.notebookMode,translator:this.translator,modeNames:this._modeNames})}}(function(e){class t extends r.VDomModel{constructor(){super(...arguments);this._onChanged=e=>{const t=this._notebookMode;if(this._notebook){this._notebookMode=e.mode}else{this._notebookMode="command"}this._triggerChange(t,this._notebookMode)};this._notebookMode="command";this._notebook=null}get notebookMode(){return this._notebookMode}set notebook(e){const t=this._notebook;if(t!==null){t.stateChanged.disconnect(this._onChanged,this);t.activeCellChanged.disconnect(this._onChanged,this);t.modelContentChanged.disconnect(this._onChanged,this)}const n=this._notebookMode;this._notebook=e;if(this._notebook===null){this._notebookMode="command"}else{this._notebookMode=this._notebook.mode;this._notebook.stateChanged.connect(this._onChanged,this);this._notebook.activeCellChanged.connect(this._onChanged,this);this._notebook.modelContentChanged.connect(this._onChanged,this)}this._triggerChange(n,this._notebookMode)}_triggerChange(e,t){if(e!==t){this.stateChanged.emit(void 0)}}}e.Model=t})(D||(D={}));var M=n(66934);var T=n(46843);var I=n(3967);var P=n(700);class R extends P.Widget{constructor(){super();this._items=[];this.layout=new P.PanelLayout;this.addClass("jp-RankedPanel")}addWidget(e,t){const n={widget:e,rank:t};const r=s.ArrayExt.upperBound(this._items,n,O.itemCmp);s.ArrayExt.insert(this._items,r,n);const o=this.layout;o.insertWidget(r,e)}onChildRemoved(e){const t=s.ArrayExt.findFirstIndex(this._items,(t=>t.widget===e.child));if(t!==-1){s.ArrayExt.removeAt(this._items,t)}}}class L extends P.Widget{constructor(e){super();this.addClass("jp-NotebookTools");this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this._commonTools=new R;this._advancedTools=new R;this._advancedTools.title.label=this._trans.__("Advanced Tools");const t=this.layout=new P.PanelLayout;t.addWidget(this._commonTools);t.addWidget(new r.Collapse({widget:this._advancedTools}));this._tracker=e.tracker;this._tracker.currentChanged.connect(this._onActiveNotebookPanelChanged,this);this._tracker.activeCellChanged.connect(this._onActiveCellChanged,this);this._tracker.selectionChanged.connect(this._onSelectionChanged,this);this._onActiveNotebookPanelChanged();this._onActiveCellChanged();this._onSelectionChanged()}get activeCell(){return this._tracker.activeCell}get selectedCells(){const e=this._tracker.currentWidget;if(!e){return[]}const t=e.content;return t.widgets.filter((e=>t.isSelectedOrActive(e)))}get activeNotebookPanel(){return this._tracker.currentWidget}addItem(e){var t;const n=e.tool;const r=(t=e.rank)!==null&&t!==void 0?t:100;let o;if(e.section==="advanced"){o=this._advancedTools}else{o=this._commonTools}n.addClass("jp-NotebookTools-tool");o.addWidget(n,r);n.notebookTools=this;T.MessageLoop.sendMessage(n,L.ActiveNotebookPanelMessage);T.MessageLoop.sendMessage(n,L.ActiveCellMessage)}_onActiveNotebookPanelChanged(){if(this._prevActiveNotebookModel&&!this._prevActiveNotebookModel.isDisposed){this._prevActiveNotebookModel.metadata.changed.disconnect(this._onActiveNotebookPanelMetadataChanged,this)}const e=this.activeNotebookPanel&&this.activeNotebookPanel.content?this.activeNotebookPanel.content.model:null;this._prevActiveNotebookModel=e;if(e){e.metadata.changed.connect(this._onActiveNotebookPanelMetadataChanged,this)}(0,s.each)(this._toolChildren(),(e=>{T.MessageLoop.sendMessage(e,L.ActiveNotebookPanelMessage)}))}_onActiveCellChanged(){if(this._prevActiveCell&&!this._prevActiveCell.isDisposed){this._prevActiveCell.metadata.changed.disconnect(this._onActiveCellMetadataChanged,this)}const e=this.activeCell?this.activeCell.model:null;this._prevActiveCell=e;if(e){e.metadata.changed.connect(this._onActiveCellMetadataChanged,this)}(0,s.each)(this._toolChildren(),(e=>{T.MessageLoop.sendMessage(e,L.ActiveCellMessage)}))}_onSelectionChanged(){(0,s.each)(this._toolChildren(),(e=>{T.MessageLoop.sendMessage(e,L.SelectionMessage)}))}_onActiveNotebookPanelMetadataChanged(e,t){const n=new y.ObservableJSON.ChangeMessage("activenotebookpanel-metadata-changed",t);(0,s.each)(this._toolChildren(),(e=>{T.MessageLoop.sendMessage(e,n)}))}_onActiveCellMetadataChanged(e,t){const n=new y.ObservableJSON.ChangeMessage("activecell-metadata-changed",t);(0,s.each)(this._toolChildren(),(e=>{T.MessageLoop.sendMessage(e,n)}))}_toolChildren(){return(0,s.chain)(this._commonTools.children(),this._advancedTools.children())}}(function(e){e.ActiveNotebookPanelMessage=new T.ConflatableMessage("activenotebookpanel-changed");e.ActiveCellMessage=new T.ConflatableMessage("activecell-changed");e.SelectionMessage=new T.ConflatableMessage("selection-changed");class t extends P.Widget{dispose(){super.dispose();if(this.notebookTools){this.notebookTools=null}}processMessage(e){super.processMessage(e);switch(e.type){case"activenotebookpanel-changed":this.onActiveNotebookPanelChanged(e);break;case"activecell-changed":this.onActiveCellChanged(e);break;case"selection-changed":this.onSelectionChanged(e);break;case"activecell-metadata-changed":this.onActiveCellMetadataChanged(e);break;case"activenotebookpanel-metadata-changed":this.onActiveNotebookPanelMetadataChanged(e);break;default:break}}onActiveNotebookPanelChanged(e){}onActiveCellChanged(e){}onSelectionChanged(e){}onActiveCellMetadataChanged(e){}onActiveNotebookPanelMetadataChanged(e){}}e.Tool=t;class n extends t{constructor(){super();this._model=new M.CodeEditor.Model;this.addClass("jp-ActiveCellTool");this.addClass("jp-InputArea");this.layout=new P.PanelLayout}dispose(){if(this._model===null){return}this._model.dispose();this._model=null;super.dispose()}onActiveCellChanged(){const e=this.notebookTools.activeCell;const t=this.layout;const n=t.widgets.length;for(let c=0;c<n;c++){t.widgets[0].dispose()}if(this._cellModel&&!this._cellModel.isDisposed){this._cellModel.value.changed.disconnect(this._onValueChanged,this);this._cellModel.mimeTypeChanged.disconnect(this._onMimeTypeChanged,this)}if(!e){const e=new P.Widget;e.addClass("jp-InputArea-editor");e.addClass("jp-InputArea-editor");t.addWidget(e);this._cellModel=null;return}const r=e.promptNode?e.promptNode.cloneNode(true):undefined;const o=new P.Widget({node:r});const i=e.contentFactory.editorFactory;const s=this._cellModel=e.model;s.value.changed.connect(this._onValueChanged,this);s.mimeTypeChanged.connect(this._onMimeTypeChanged,this);this._model.value.text=s.value.text.split("\n")[0];this._model.mimeType=s.mimeType;const a=this._model;const l=new M.CodeEditorWrapper({model:a,factory:i});l.addClass("jp-InputArea-editor");l.addClass("jp-InputArea-editor");l.editor.setOption("readOnly",true);t.addWidget(o);t.addWidget(l)}_onValueChanged(){this._model.value.text=this._cellModel.value.text.split("\n")[0]}_onMimeTypeChanged(){this._model.mimeType=this._cellModel.mimeType}}e.ActiveCellTool=n;class r extends t{constructor(e){super();const{editorFactory:t}=e;this.addClass("jp-MetadataEditorTool");const n=this.layout=new P.PanelLayout;this.editor=new M.JSONEditor({editorFactory:t});this.editor.title.label=e.label||"Edit Metadata";const r=new P.Widget({node:document.createElement("label")});r.node.textContent=e.label||"Edit Metadata";n.addWidget(r);n.addWidget(this.editor)}}e.MetadataEditorTool=r;class o extends r{constructor(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");e.label=e.label||n.__("Notebook Metadata");super(e)}onActiveNotebookPanelChanged(e){this._update()}onActiveNotebookPanelMetadataChanged(e){this._update()}_update(){var e,t;const n=this.notebookTools.activeNotebookPanel&&this.notebookTools.activeNotebookPanel.content;this.editor.source=(t=(e=n===null||n===void 0?void 0:n.model)===null||e===void 0?void 0:e.metadata)!==null&&t!==void 0?t:null}}e.NotebookMetadataEditorTool=o;class s extends r{constructor(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");e.label=e.label||n.__("Cell Metadata");super(e)}onActiveCellChanged(e){this._update()}onActiveCellMetadataChanged(e){this._update()}_update(){const e=this.notebookTools.activeCell;this.editor.source=e?e.model.metadata:null}}e.CellMetadataEditorTool=s;class a extends t{constructor(e){super({node:O.createSelectorNode(e)});this._getValue=e=>{let t=e.model.metadata.get(this.key);if(t===undefined){t=this._default}return t};this._setValue=(e,t)=>{if(t===this._default){e.model.metadata.delete(this.key)}else{e.model.metadata.set(this.key,t)}};this._changeGuard=false;this.addClass("jp-KeySelector");this.key=e.key;this._default=e.default;this._validCellTypes=e.validCellTypes||[];this._getter=e.getter||this._getValue;this._setter=e.setter||this._setValue}get selectNode(){return this.node.getElementsByTagName("select")[0]}handleEvent(e){switch(e.type){case"change":this.onValueChanged();break;default:break}}onAfterAttach(e){const t=this.selectNode;t.addEventListener("change",this)}onBeforeDetach(e){const t=this.selectNode;t.removeEventListener("change",this)}onActiveCellChanged(e){const t=this.selectNode;const n=this.notebookTools.activeCell;if(!n){t.disabled=true;t.value="";return}const r=n.model.type;if(this._validCellTypes.length&&this._validCellTypes.indexOf(r)===-1){t.value="";t.disabled=true;return}t.disabled=false;this._changeGuard=true;const o=this._getter;t.value=JSON.stringify(o(n));this._changeGuard=false}onActiveCellMetadataChanged(e){if(this._changeGuard){return}const t=this.selectNode;const n=this.notebookTools.activeCell;if(e.args.key===this.key&&n){this._changeGuard=true;const e=this._getter;t.value=JSON.stringify(e(n));this._changeGuard=false}}onValueChanged(){const e=this.notebookTools.activeCell;if(!e||this._changeGuard){return}this._changeGuard=true;const t=this.selectNode;const n=this._setter;n(e,JSON.parse(t.value));this._changeGuard=false}}e.KeySelector=a;function l(e){e=e||i.nullTranslator;const t=e.load("jupyterlab");t.__("");const n={key:"slideshow",title:t.__("Slide Type"),optionValueArray:[["-",null],[t.__("Slide"),"slide"],[t.__("Sub-Slide"),"subslide"],[t.__("Fragment"),"fragment"],[t.__("Skip"),"skip"],[t.__("Notes"),"notes"]],getter:e=>{const t=e.model.metadata.get("slideshow");return t&&t["slide_type"]},setter:(e,t)=>{let n=e.model.metadata.get("slideshow")||Object.create(null);if(t===null){n=Object.assign({},n);delete n.slide_type}else{n=Object.assign(Object.assign({},n),{slide_type:t})}if(Object.keys(n).length>0){e.model.metadata.set("slideshow",n)}else{e.model.metadata.delete("slideshow")}}};return new a(n)}e.createSlideShowSelector=l;function c(e,t){t=t||i.nullTranslator;const n=t.load("jupyterlab");return new a({key:"raw_mimetype",title:n.__("Raw NBConvert Format"),optionValueArray:e,validCellTypes:["raw"]})}e.createNBConvertSelector=c})(L||(L={}));var O;(function(e){function t(e,t){return e.rank-t.rank}e.itemCmp=t;function n(e){const t=e.key;const n=e.title||t[0].toLocaleUpperCase()+t.slice(1);const o=[];let i;let a;(0,s.each)(e.optionValueArray,(e=>{a=e[0];i=JSON.stringify(e[1]);o.push(I.h.option({value:i},a))}));const l=I.VirtualDOM.realize(I.h.div({},I.h.label(n,I.h.select({},o))));r.Styling.styleNode(l);return l}e.createSelectorNode=n})(O||(O={}));var z=n(69442);var N=n(34576);var F=n(9004);var H=n(63577);const W="jpKernelUser";const V="jpCodeRunner";const q="jpUndoer";const U="jp-Notebook";const $="jp-Notebook-cell";const K="jp-mod-editMode";const Y="jp-mod-commandMode";const G="jp-mod-active";const Z="jp-mod-selected";const J="jp-mod-multiSelected";const X="jp-mod-unconfined";const Q="jp-mod-dropTarget";const ee="jp-mod-dropSource";const te="jp-dragImage";const ne="jp-dragImage-singlePrompt";const re="jp-dragImage-content";const oe="jp-dragImage-prompt";const ie="jp-dragImage-multipleBack";const se="application/vnd.jupyter.cells";const ae=5;const le="jp-collapseHeadingButton";const ce="jp-mod-sideBySide";if(window.requestIdleCallback===undefined){window.requestIdleCallback=function(e){let t=Date.now();return setTimeout((function(){e({didTimeout:false,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)};window.cancelIdleCallback=function(e){clearTimeout(e)}}class de extends P.Widget{constructor(e){var t,n;super();this._editorConfig=de.defaultEditorConfig;this._notebookConfig=de.defaultNotebookConfig;this._mimetype="text/plain";this._model=null;this._modelChanged=new c.Signal(this);this._modelContentChanged=new c.Signal(this);this._fullyRendered=new c.Signal(this);this._placeholderCellRendered=new c.Signal(this);this._renderedCellsCount=0;this.addClass(U);this.node.dataset[W]="true";this.node.dataset[q]="true";this.node.dataset[V]="true";this.rendermime=e.rendermime;this.translator=(t=e.translator)!==null&&t!==void 0?t:i.nullTranslator;this.layout=new he.NotebookPanelLayout;this.contentFactory=e.contentFactory||de.defaultContentFactory;this.editorConfig=e.editorConfig||de.defaultEditorConfig;this.notebookConfig=e.notebookConfig||de.defaultNotebookConfig;this._mimetypeService=e.mimeTypeService;this.renderingLayout=(n=e.notebookConfig)===null||n===void 0?void 0:n.renderingLayout;this._idleCallBack=null;this._toRenderMap=new Map;this._cellsArray=new Array;if("IntersectionObserver"in window){this._observer=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){t.unobserve(e.target);const n=this._toRenderMap.get(e.target.id);if(n){const{cell:e,index:t}=n;this._renderPlaceholderCell(e,t)}}}))}),{root:this.node,threshold:1,rootMargin:`${this.notebookConfig.observedTopMargin} 0px ${this.notebookConfig.observedBottomMargin} 0px`})}}get fullyRendered(){return this._fullyRendered}get placeholderCellRendered(){return this._placeholderCellRendered}get modelChanged(){return this._modelChanged}get modelContentChanged(){return this._modelContentChanged}get model(){return this._model}set model(e){e=e||null;if(this._model===e){return}const t=this._model;this._model=e;if(t&&t.modelDB.isCollaborative){void t.modelDB.connected.then((()=>{t.modelDB.collaborators.changed.disconnect(this._onCollaboratorsChanged,this)}))}if(e&&e.modelDB.isCollaborative){void e.modelDB.connected.then((()=>{e.modelDB.collaborators.changed.connect(this._onCollaboratorsChanged,this)}))}this._onModelChanged(t,e);this.onModelChanged(t,e);this._modelChanged.emit(void 0)}get codeMimetype(){return this._mimetype}get widgets(){return this.layout.widgets}get editorConfig(){return this._editorConfig}set editorConfig(e){this._editorConfig=e;this._updateEditorConfig()}get notebookConfig(){return this._notebookConfig}set notebookConfig(e){this._notebookConfig=e;this._updateNotebookConfig()}get renderingLayout(){return this._renderingLayout}set renderingLayout(e){this._renderingLayout=e;if(this._renderingLayout==="side-by-side"){this.node.classList.add(ce)}else{this.node.classList.remove(ce)}}dispose(){if(this.isDisposed){return}this._model=null;super.dispose()}onModelChanged(e,t){}onModelContentChanged(e,t){this._modelContentChanged.emit(void 0)}onMetadataChanged(e,t){switch(t.key){case"language_info":this._updateMimetype();break;default:break}}onCellInserted(e,t){}onCellMoved(e,t){}onCellRemoved(e,t){}_onModelChanged(e,t){const n=this.layout;if(e){e.cells.changed.disconnect(this._onCellsChanged,this);e.metadata.changed.disconnect(this.onMetadataChanged,this);e.contentChanged.disconnect(this.onModelContentChanged,this);while(n.widgets.length){this._removeCell(0)}}if(!t){this._mimetype="text/plain";return}this._updateMimetype();const r=t.cells;if(!r.length&&t.isInitialized){r.push(t.contentFactory.createCell(this.notebookConfig.defaultCell,{}))}(0,s.each)(r,((e,t)=>{this._insertCell(t,e,"set")}));r.changed.connect(this._onCellsChanged,this);t.contentChanged.connect(this.onModelContentChanged,this);t.metadata.changed.connect(this.onMetadataChanged,this)}_onCellsChanged(e,t){let n=0;switch(t.type){case"add":n=t.newIndex;const r=t.oldIndex==-1?"push":"insert";(0,s.each)(t.newValues,(e=>{this._insertCell(n++,e,r)}));break;case"move":this._moveCell(t.oldIndex,t.newIndex);break;case"remove":(0,s.each)(t.oldValues,(e=>{this._removeCell(t.oldIndex)}));if(!e.length){const e=this.model;requestAnimationFrame((()=>{if(e&&!e.isDisposed&&!e.cells.length){e.cells.push(e.contentFactory.createCell(this.notebookConfig.defaultCell,{}))}}))}break;case"set":n=t.newIndex;(0,s.each)(t.newValues,(e=>{this._insertCell(n,e,"set");this._removeCell(n+1);n++}));break;default:return}}_insertCell(e,t,n){let r;switch(t.type){case"code":r=this._createCodeCell(t);r.model.mimeType=this._mimetype;break;case"markdown":r=this._createMarkdownCell(t);if(t.value.text===""){r.rendered=false}break;default:r=this._createRawCell(t)}r.addClass($);const o=this.layout;this._cellsArray.push(r);if(this._observer&&n==="push"&&this._renderedCellsCount>=this.notebookConfig.numberCellsToRenderDirectly&&t.type!=="markdown"){this._toRenderMap.set(r.model.id,{index:e,cell:r});const n=this._createPlaceholderCell(t,e);n.node.id=r.model.id;o.insertWidget(e,n);this.onCellInserted(e,n);this._fullyRendered.emit(false);this._observer.observe(n.node)}else{o.insertWidget(e,r);this.onCellInserted(e,r);this._incrementRenderedCount()}this._scheduleCellRenderOnIdle()}_scheduleCellRenderOnIdle(){if(this._observer&&this.notebookConfig.renderCellOnIdle&&!this.isDisposed){if(!this._idleCallBack){const e=this._renderPlaceholderCells.bind(this);this._idleCallBack=window.requestIdleCallback(e,{timeout:3e3})}}}_renderPlaceholderCells(e){if(this.notebookConfig.remainingTimeBeforeRescheduling>0){const t=e.timeRemaining();if(e.didTimeout||t<this.notebookConfig.remainingTimeBeforeRescheduling){if(this._idleCallBack){window.cancelIdleCallback(this._idleCallBack);this._idleCallBack=null}this._scheduleCellRenderOnIdle()}}if(this._renderedCellsCount<this._cellsArray.length&&this._renderedCellsCount>=this.notebookConfig.numberCellsToRenderDirectly){const e=this._toRenderMap.entries().next();this._renderPlaceholderCell(e.value[1].cell,e.value[1].index)}}_renderPlaceholderCell(e,t){if(!this.layout){return}const n=this.layout;n.removeWidgetAt(t);n.insertWidget(t,e);this._toRenderMap.delete(e.model.id);this._incrementRenderedCount();this.onCellInserted(t,e);this._placeholderCellRendered.emit(e)}_createCodeCell(e){const t=this.rendermime;const n=this.contentFactory;const r=this.editorConfig.code;const o={editorConfig:r,model:e,rendermime:t,contentFactory:n,updateEditorOnShow:false,placeholder:false,maxNumberOutputs:this.notebookConfig.maxNumberOutputs};const i=this.contentFactory.createCodeCell(o,this);i.syncCollapse=true;i.syncEditable=true;i.syncScrolled=true;return i}_createMarkdownCell(e){const t=this.rendermime;const n=this.contentFactory;const r=this.editorConfig.markdown;const o={editorConfig:r,model:e,rendermime:t,contentFactory:n,updateEditorOnShow:false,placeholder:false,showEditorForReadOnlyMarkdown:this._notebookConfig.showEditorForReadOnlyMarkdown};const i=this.contentFactory.createMarkdownCell(o,this);i.syncCollapse=true;i.syncEditable=true;i.toggleCollapsedSignal.connect(((e,t)=>{m.setHeadingCollapse(e,t,this)}));return i}_createPlaceholderCell(e,t){const n=this.contentFactory;const r=this.editorConfig.raw;const o={editorConfig:r,model:e,contentFactory:n,updateEditorOnShow:false,placeholder:true};const i=this.contentFactory.createRawCell(o,this);i.node.innerHTML=`\n      <div class="jp-Cell-Placeholder">\n        <div class="jp-Cell-Placeholder-wrapper">\n        </div>\n      </div>`;i.inputHidden=true;i.syncCollapse=true;i.syncEditable=true;return i}_createRawCell(e){const t=this.contentFactory;const n=this.editorConfig.raw;const r={editorConfig:n,model:e,contentFactory:t,updateEditorOnShow:false,placeholder:false};const o=this.contentFactory.createRawCell(r,this);o.syncCollapse=true;o.syncEditable=true;return o}_moveCell(e,t){const n=this.layout;n.insertWidget(t,n.widgets[e]);this.onCellMoved(e,t)}_removeCell(e){const t=this.layout;const n=t.widgets[e];n.parent=null;this.onCellRemoved(e,n);n.dispose()}_updateMimetype(){var e;const t=(e=this._model)===null||e===void 0?void 0:e.metadata.get("language_info");if(!t){return}this._mimetype=this._mimetypeService.getMimeTypeByLanguage(t);(0,s.each)(this.widgets,(e=>{if(e.model.type==="code"){e.model.mimeType=this._mimetype}}))}_onCollaboratorsChanged(){var e,t,n;for(let r=0;r<this.widgets.length;r++){const o=this.widgets[r];for(const r of o.model.selections.keys()){if(false===((n=(t=(e=this._model)===null||e===void 0?void 0:e.modelDB)===null||t===void 0?void 0:t.collaborators)===null||n===void 0?void 0:n.has(r))){o.model.selections.delete(r)}}}}_updateEditorConfig(){for(let e=0;e<this.widgets.length;e++){const t=this.widgets[e];let n={};switch(t.model.type){case"code":n=this._editorConfig.code;break;case"markdown":n=this._editorConfig.markdown;break;default:n=this._editorConfig.raw;break}t.editor.setOptions(Object.assign({},n));t.editor.refresh()}}_updateNotebookConfig(){this.toggleClass("jp-mod-scrollPastEnd",this._notebookConfig.scrollPastEnd);const e=this._notebookConfig.showEditorForReadOnlyMarkdown;if(e!==undefined&&this._cellsArray){for(const t of this._cellsArray){if(t.model.type==="markdown"){t.showEditorForReadOnly=e}}}}_incrementRenderedCount(){if(this._toRenderMap.size===0){this._fullyRendered.emit(true)}this._renderedCellsCount++}get remainingCellToRenderCount(){return this._toRenderMap.size}}(function(e){e.defaultEditorConfig={code:Object.assign(Object.assign({},M.CodeEditor.defaultConfig),{lineWrap:"off",matchBrackets:true,autoClosingBrackets:false}),markdown:Object.assign(Object.assign({},M.CodeEditor.defaultConfig),{lineWrap:"on",matchBrackets:false,autoClosingBrackets:false}),raw:Object.assign(Object.assign({},M.CodeEditor.defaultConfig),{lineWrap:"on",matchBrackets:false,autoClosingBrackets:false})};e.defaultNotebookConfig={scrollPastEnd:true,defaultCell:"code",recordTiming:false,numberCellsToRenderDirectly:99999,remainingTimeBeforeRescheduling:50,renderCellOnIdle:true,observedTopMargin:"1000px",observedBottomMargin:"1000px",maxNumberOutputs:50,showEditorForReadOnlyMarkdown:true,disableDocumentWideUndoRedo:false,renderingLayout:"default",sideBySideLeftMarginOverride:"10px",sideBySideRightMarginOverride:"10px",sideBySideOutputRatio:1};class t extends o.Cell.ContentFactory{createCodeCell(e,t){if(!e.contentFactory){e.contentFactory=this}return new o.CodeCell(e).initializeState()}createMarkdownCell(e,t){if(!e.contentFactory){e.contentFactory=this}return new o.MarkdownCell(e).initializeState()}createRawCell(e,t){if(!e.contentFactory){e.contentFactory=this}return new o.RawCell(e).initializeState()}}e.ContentFactory=t;e.defaultContentFactory=new t})(de||(de={}));class ue extends de{constructor(e){super(he.processNotebookOptions(e));this._activeCellIndex=-1;this._activeCell=null;this._mode="command";this._drag=null;this._fragment="";this._dragData=null;this._mouseMode=null;this._activeCellChanged=new c.Signal(this);this._stateChanged=new c.Signal(this);this._selectionChanged=new c.Signal(this);this._checkCacheOnNextResize=false;this._lastClipboardInteraction=null;this.node.tabIndex=0;this.node.setAttribute("data-lm-dragscroll","true")}get activeCellChanged(){return this._activeCellChanged}get stateChanged(){return this._stateChanged}get selectionChanged(){return this._selectionChanged}get mode(){return this._mode}set mode(e){const t=this.activeCell;if(!t){e="command"}if(e===this._mode){this._ensureFocus();return}this.update();const n=this._mode;this._mode=e;if(e==="edit"){(0,s.each)(this.widgets,(e=>{this.deselect(e)}));if(t instanceof o.MarkdownCell){t.rendered=false}t.inputHidden=false}else{this.node.focus()}this._stateChanged.emit({name:"mode",oldValue:n,newValue:e});this._ensureFocus()}get activeCellIndex(){if(!this.model){return-1}return this.model.cells.length?this._activeCellIndex:-1}set activeCellIndex(e){const t=this._activeCellIndex;if(!this.model||!this.model.cells.length){e=-1}else{e=Math.max(e,0);e=Math.min(e,this.model.cells.length-1)}this._activeCellIndex=e;const n=this.widgets[e];if(n!==this._activeCell){this.update();this._activeCell=n;this._activeCellChanged.emit(n)}if(this.mode==="edit"&&n instanceof o.MarkdownCell){n.rendered=false}this._ensureFocus();if(e===t){return}this._trimSelections();this._stateChanged.emit({name:"activeCellIndex",oldValue:t,newValue:e})}get activeCell(){return this._activeCell}get lastClipboardInteraction(){return this._lastClipboardInteraction}set lastClipboardInteraction(e){this._lastClipboardInteraction=e}dispose(){if(this.isDisposed){return}this._activeCell=null;super.dispose()}select(e){if(he.selectedProperty.get(e)){return}he.selectedProperty.set(e,true);this._selectionChanged.emit(void 0);this.update()}deselect(e){if(!he.selectedProperty.get(e)){return}he.selectedProperty.set(e,false);this._selectionChanged.emit(void 0);this.update()}isSelected(e){return he.selectedProperty.get(e)}isSelectedOrActive(e){if(e===this._activeCell){return true}return he.selectedProperty.get(e)}deselectAll(){let e=false;(0,s.each)(this.widgets,(t=>{if(he.selectedProperty.get(t)){e=true}he.selectedProperty.set(t,false)}));if(e){this._selectionChanged.emit(void 0)}this.activeCellIndex=this.activeCellIndex;this.update()}extendContiguousSelectionTo(e){let{head:t,anchor:n}=this.getContiguousSelection();let r;if(n===null||t===null){if(e===this.activeCellIndex){return}t=this.activeCellIndex;n=this.activeCellIndex}this.activeCellIndex=e;e=this.activeCellIndex;if(e===n){this.deselectAll();return}let o=false;if(t<e){if(t<n){he.selectedProperty.set(this.widgets[t],false);o=true}for(r=t+1;r<e;r++){if(r!==n){he.selectedProperty.set(this.widgets[r],!he.selectedProperty.get(this.widgets[r]));o=true}}}else if(e<t){if(n<t){he.selectedProperty.set(this.widgets[t],false);o=true}for(r=e+1;r<t;r++){if(r!==n){he.selectedProperty.set(this.widgets[r],!he.selectedProperty.get(this.widgets[r]));o=true}}}if(!he.selectedProperty.get(this.widgets[n])){o=true}he.selectedProperty.set(this.widgets[n],true);if(!he.selectedProperty.get(this.widgets[e])){o=true}he.selectedProperty.set(this.widgets[e],true);if(o){this._selectionChanged.emit(void 0)}}getContiguousSelection(){const e=this.widgets;const t=s.ArrayExt.findFirstIndex(e,(e=>this.isSelected(e)));if(t===-1){return{head:null,anchor:null}}const n=s.ArrayExt.findLastIndex(e,(e=>this.isSelected(e)),-1,t);for(let o=t;o<=n;o++){if(!this.isSelected(e[o])){throw new Error("Selection not contiguous")}}const r=this.activeCellIndex;if(t!==r&&n!==r){throw new Error("Active cell not at endpoint of selection")}if(t===r){return{head:t,anchor:n}}else{return{head:n,anchor:t}}}scrollToPosition(e,t=25){const n=this.node;const r=n.getBoundingClientRect();const o=e-r.top-r.height/2;if(Math.abs(o)>r.height*t/100){n.scrollTop+=o}}scrollToCell(e){l.ElementExt.scrollIntoViewIfNeeded(this.node,e.node);this.deselectAll();this.select(e);e.activate()}setFragment(e){void Promise.all(this.widgets.map((e=>e.ready))).then((()=>{this._fragment=e;this.update()}))}handleEvent(e){if(!this.model){return}switch(e.type){case"contextmenu":if(e.eventPhase===Event.CAPTURING_PHASE){this._evtContextMenuCapture(e)}break;case"mousedown":if(e.eventPhase===Event.CAPTURING_PHASE){this._evtMouseDownCapture(e)}else{this._evtMouseDown(e)}break;case"mouseup":if(e.currentTarget===document){this._evtDocumentMouseup(e)}break;case"mousemove":if(e.currentTarget===document){this._evtDocumentMousemove(e)}break;case"keydown":this._ensureFocus(true);break;case"dblclick":this._evtDblClick(e);break;case"focusin":this._evtFocusIn(e);break;case"focusout":this._evtFocusOut(e);break;case"lm-dragenter":this._evtDragEnter(e);break;case"lm-dragleave":this._evtDragLeave(e);break;case"lm-dragover":this._evtDragOver(e);break;case"lm-drop":this._evtDrop(e);break;default:break}}onAfterAttach(e){super.onAfterAttach(e);const t=this.node;t.addEventListener("contextmenu",this,true);t.addEventListener("mousedown",this,true);t.addEventListener("mousedown",this);t.addEventListener("keydown",this);t.addEventListener("dblclick",this);t.addEventListener("focusin",this);t.addEventListener("focusout",this);t.addEventListener("lm-dragenter",this,true);t.addEventListener("lm-dragleave",this,true);t.addEventListener("lm-dragover",this,true);t.addEventListener("lm-drop",this,true)}onBeforeDetach(e){const t=this.node;t.removeEventListener("contextmenu",this,true);t.removeEventListener("mousedown",this,true);t.removeEventListener("mousedown",this);t.removeEventListener("keydown",this);t.removeEventListener("dblclick",this);t.removeEventListener("focusin",this);t.removeEventListener("focusout",this);t.removeEventListener("lm-dragenter",this,true);t.removeEventListener("lm-dragleave",this,true);t.removeEventListener("lm-dragover",this,true);t.removeEventListener("lm-drop",this,true);document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true)}onAfterShow(e){this._checkCacheOnNextResize=true}onResize(e){if(!this._checkCacheOnNextResize){return super.onResize(e)}this._checkCacheOnNextResize=false;const t=this._cellLayoutStateCache;const n=parseInt(this.node.style.width,10);if(t){if(n===t.width){return}}this._cellLayoutStateCache={width:n};for(const r of this.widgets){if(r instanceof o.Cell){r.editorWidget.update()}}}onBeforeHide(e){const t=parseInt(this.node.style.width,10);this._cellLayoutStateCache={width:t}}onActivateRequest(e){this._ensureFocus(true)}onUpdateRequest(e){const t=this.activeCell;if(this.mode==="edit"){this.addClass(K);this.removeClass(Y)}else{this.addClass(Y);this.removeClass(K)}if(t){t.addClass(G)}let n=0;(0,s.each)(this.widgets,(e=>{if(e!==t){e.removeClass(G)}e.removeClass(J);if(this.isSelectedOrActive(e)){e.addClass(Z);n++}else{e.removeClass(Z)}}));if(n>1){t===null||t===void 0?void 0:t.addClass(J)}if(this._fragment){let e;try{e=this.node.querySelector(this._fragment.startsWith("#")?`#${CSS.escape(this._fragment.slice(1))}`:this._fragment)}catch(r){console.warn("Unable to set URI fragment identifier",r)}if(e){e.scrollIntoView()}this._fragment=""}}onCellInserted(e,t){if(this.model&&this.model.modelDB.isCollaborative){const e=this.model.modelDB;void e.connected.then((()=>{if(!t.isDisposed){const n=e.collaborators.localCollaborator;t.editor.uuid=n.sessionId;t.editor.selectionStyle=Object.assign(Object.assign({},M.CodeEditor.defaultSelectionStyle),{color:n.color})}}))}t.editor.edgeRequested.connect(this._onEdgeRequest,this);this.activeCellIndex=e<=this.activeCellIndex?this.activeCellIndex+1:this.activeCellIndex}onCellMoved(e,t){const n=this.activeCellIndex;if(e===n){this.activeCellIndex=t}else if(e<n&&n<=t){this.activeCellIndex--}else if(t<=n&&n<e){this.activeCellIndex++}}onCellRemoved(e,t){this.activeCellIndex=e<=this.activeCellIndex?this.activeCellIndex-1:this.activeCellIndex;if(this.isSelected(t)){this._selectionChanged.emit(void 0)}}onModelChanged(e,t){super.onModelChanged(e,t);this.activeCellIndex=0}_onEdgeRequest(e,t){const n=this.activeCellIndex;if(t==="top"){this.activeCellIndex--;if(this.activeCellIndex<n){const e=this.activeCell.editor;const t=e.lineCount-1;e.setCursorPosition({line:t,column:0})}}else if(t==="bottom"){this.activeCellIndex++;if(this.activeCellIndex>n){const e=this.activeCell.editor;e.setCursorPosition({line:0,column:0})}}this.mode="edit"}_ensureFocus(e=false){const t=this.activeCell;if(this.mode==="edit"&&t){if(!t.editor.hasFocus()){t.editor.focus()}}if(e&&!this.node.contains(document.activeElement)||t&&!t.node.contains(document.activeElement)){this.node.focus()}}_findCell(e){let t=e;while(t&&t!==this.node){if(t.classList.contains($)){const e=s.ArrayExt.findFirstIndex(this.widgets,(e=>e.node===t));if(e!==-1){return e}break}t=t.parentElement}return-1}_findEventTargetAndCell(e){let t=e.target;let n=this._findCell(t);if(n===-1){t=document.elementFromPoint(e.clientX,e.clientY);n=this._findCell(t)}return[t,n]}_evtContextMenuCapture(e){if(e.shiftKey){return}const[t,n]=this._findEventTargetAndCell(e);const r=this.widgets[n];if(r&&r.editorWidget.node.contains(t)){e.preventDefault()}}_evtMouseDownCapture(e){const{button:t,shiftKey:n}=e;const[r,o]=this._findEventTargetAndCell(e);const i=this.widgets[o];if(t===2&&!n&&i&&i.editorWidget.node.contains(r)){this.mode="command";e.preventDefault()}}_evtMouseDown(e){var t;const{button:n,shiftKey:r}=e;if(!(n===0||n===2)){return}if(r&&n===2){return}const[o,i]=this._findEventTargetAndCell(e);const s=this.widgets[i];let a;if(s){if(s.editorWidget.node.contains(o)){a="input"}else if(s.promptNode.contains(o)){a="prompt"}else{a="cell"}}else{a="notebook"}if(a!=="input"){this.mode="command"}if(a==="notebook"){this.deselectAll()}else if(a==="prompt"||a==="cell"){const o=((t=window.getSelection())!==null&&t!==void 0?t:"").toString()!=="";if(n===0&&r&&!o){e.preventDefault();try{this.extendContiguousSelectionTo(i)}catch(l){console.error(l);this.deselectAll();return}this._mouseMode="select";document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true)}else if(n===0&&!r){if(a==="prompt"){this._dragData={pressX:e.clientX,pressY:e.clientY,index:i};this._mouseMode="couldDrag";document.addEventListener("mouseup",this,true);document.addEventListener("mousemove",this,true);e.preventDefault()}if(!this.isSelectedOrActive(s)){this.deselectAll();this.activeCellIndex=i}}else if(n===2){if(!this.isSelectedOrActive(s)){this.deselectAll();this.activeCellIndex=i}e.preventDefault()}}else if(a==="input"){if(n===2&&!this.isSelectedOrActive(s)){this.deselectAll();this.activeCellIndex=i}}this._ensureFocus(true)}_evtDocumentMouseup(e){e.preventDefault();e.stopPropagation();document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);if(this._mouseMode==="couldDrag"){const[,t]=this._findEventTargetAndCell(e);this.deselectAll();this.activeCellIndex=t}this._mouseMode=null}_evtDocumentMousemove(e){e.preventDefault();e.stopPropagation();switch(this._mouseMode){case"select":{const t=e.target;const n=this._findCell(t);if(n!==-1){this.extendContiguousSelectionTo(n)}break}case"couldDrag":{const t=this._dragData;const n=Math.abs(e.clientX-t.pressX);const r=Math.abs(e.clientY-t.pressY);if(n>=ae||r>=ae){this._mouseMode=null;this._startDrag(t.index,e.clientX,e.clientY)}break}default:break}}_evtDragEnter(e){if(!e.mimeData.hasData(se)){return}e.preventDefault();e.stopPropagation();const t=e.target;const n=this._findCell(t);if(n===-1){return}const r=this.layout.widgets[n];r.node.classList.add(Q)}_evtDragLeave(e){if(!e.mimeData.hasData(se)){return}e.preventDefault();e.stopPropagation();const t=this.node.getElementsByClassName(Q);if(t.length){t[0].classList.remove(Q)}}_evtDragOver(e){if(!e.mimeData.hasData(se)){return}e.preventDefault();e.stopPropagation();e.dropAction=e.proposedAction;const t=this.node.getElementsByClassName(Q);if(t.length){t[0].classList.remove(Q)}const n=e.target;const r=this._findCell(n);if(r===-1){return}const o=this.layout.widgets[r];o.node.classList.add(Q)}_evtDrop(e){if(!e.mimeData.hasData(se)){return}e.preventDefault();e.stopPropagation();if(e.proposedAction==="none"){e.dropAction="none";return}let t=e.target;while(t&&t.parentElement){if(t.classList.contains(Q)){t.classList.remove(Q);break}t=t.parentElement}const n=this.model;const r=e.source;if(r===this){e.dropAction="move";const i=e.mimeData.getData("internal:cells");const a=i[i.length-1];if(a instanceof o.MarkdownCell&&a.headingCollapsed){const e=m.findNextParentHeading(a,r);if(e>0){const t=(0,s.findIndex)(r.widgets,(e=>a.model.id===e.model.id));i.push(...r.widgets.slice(t+1,e))}}let l=s.ArrayExt.firstIndexOf(this.widgets,i[0]);let c=this._findCell(t);if(c!==-1&&c>l){c-=1}else if(c===-1){c=this.widgets.length-1}if(c>=l&&c<l+i.length){return}n.cells.beginCompoundOperation();if(l<c){(0,s.each)(i,(e=>{n.cells.move(l,c)}))}else if(l>c){(0,s.each)(i,(e=>{n.cells.move(l++,c++)}))}n.cells.endCompoundOperation()}else{e.dropAction="copy";let r=this._findCell(t);if(r===-1){r=this.widgets.length}const o=r;const i=e.mimeData.getData(se);const a=n.contentFactory;n.cells.beginCompoundOperation();(0,s.each)(i,(e=>{let t;switch(e.cell_type){case"code":t=a.createCodeCell({cell:e});break;case"markdown":t=a.createMarkdownCell({cell:e});break;default:t=a.createRawCell({cell:e});break}n.cells.insert(r++,t)}));n.cells.endCompoundOperation();this.deselectAll();this.activeCellIndex=o;this.extendContiguousSelectionTo(r-1)}}_startDrag(e,t,n){var r;const o=this.model.cells;const i=[];const l=[];(0,s.each)(this.widgets,((e,t)=>{const n=o.get(t);if(this.isSelectedOrActive(e)){e.addClass(ee);i.push(n.toJSON());l.push(e)}}));const c=this.activeCell;let d=null;let u;if((c===null||c===void 0?void 0:c.model.type)==="code"){const e=c.model.executionCount;u=" ";if(e){u=e.toString()}}else{u=""}d=he.createDragImage(i.length,u,(r=c===null||c===void 0?void 0:c.model.value.text.split("\n")[0].slice(0,26))!==null&&r!==void 0?r:"");this._drag=new F.Drag({mimeData:new a.MimeData,dragImage:d,supportedActions:"copy-move",proposedAction:"copy",source:this});this._drag.mimeData.setData(se,i);this._drag.mimeData.setData("internal:cells",l);const h=l.map((e=>e.model.value.text)).join("\n");this._drag.mimeData.setData("text/plain",h);document.removeEventListener("mousemove",this,true);document.removeEventListener("mouseup",this,true);this._mouseMode=null;void this._drag.start(t,n).then((e=>{if(this.isDisposed){return}this._drag=null;(0,s.each)(l,(e=>{e.removeClass(ee)}))}))}_evtFocusIn(e){const t=e.target;const n=this._findCell(t);if(n!==-1){const e=this.widgets[n];if(!e.editorWidget.node.contains(t)){this.mode="command"}this.activeCellIndex=n;const r=e.editorWidget.node;if(r.contains(t)){this.mode="edit"}this.activeCellIndex=n}else{this.mode="command"}}_evtFocusOut(e){const t=e.relatedTarget;if(!t){return}const n=this._findCell(t);if(n!==-1){const e=this.widgets[n];if(e.editorWidget.node.contains(t)){return}}if(this.mode!=="command"){this.mode="command";if(t){t.focus()}}}_evtDblClick(e){const t=this.model;if(!t){return}this.deselectAll();const[n,r]=this._findEventTargetAndCell(e);if(e.target.classList.contains(le)){return}if(r===-1){return}this.activeCellIndex=r;if(t.cells.get(r).type==="markdown"){const e=this.widgets[r];e.rendered=false}else if(n.localName==="img"){n.classList.toggle(X)}}_trimSelections(){for(let e=0;e<this.widgets.length;e++){if(e!==this._activeCellIndex){const t=this.widgets[e];t.model.selections.delete(t.editor.uuid)}}}}(function(e){class t extends de.ContentFactory{}e.ContentFactory=t;e.defaultContentFactory=new t})(ue||(ue={}));var he;(function(e){e.selectedProperty=new H.AttachedProperty({name:"selected",create:()=>false});class t extends P.PanelLayout{onUpdateRequest(e){}}e.NotebookPanelLayout=t;function n(e,t,n){if(e>1){if(t!==""){return I.VirtualDOM.realize(I.h.div(I.h.div({className:te},I.h.span({className:oe},"["+t+"]:"),I.h.span({className:re},n)),I.h.div({className:ie},"")))}else{return I.VirtualDOM.realize(I.h.div(I.h.div({className:te},I.h.span({className:oe}),I.h.span({className:re},n)),I.h.div({className:ie},"")))}}else{if(t!==""){return I.VirtualDOM.realize(I.h.div(I.h.div({className:`${te} ${ne}`},I.h.span({className:oe},"["+t+"]:"),I.h.span({className:re},n))))}else{return I.VirtualDOM.realize(I.h.div(I.h.div({className:`${te} ${ne}`},I.h.span({className:oe}),I.h.span({className:re},n))))}}}e.createDragImage=n;function r(e){if(e.contentFactory){return e}else{return{rendermime:e.rendermime,languagePreference:e.languagePreference,contentFactory:ue.defaultContentFactory,mimeTypeService:e.mimeTypeService}}}e.processNotebookOptions=r})(he||(he={}));const pe="jp-NotebookPanel";const me="jp-NotebookPanel-toolbar";const ge="jp-NotebookPanel-notebook";const fe="jp-DocumentSearch-document-loaded";class Ae extends N.DocumentWidget{constructor(e){super(e);this._autorestarting=false;this.translator=e.translator||i.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass(pe);this.toolbar.addClass(me);this.content.addClass(ge);this.content.model=this.context.model;this.context.sessionContext.kernelChanged.connect(this._onKernelChanged,this);this.context.sessionContext.statusChanged.connect(this._onSessionStatusChanged,this);this.content.fullyRendered.connect(this._onFullyRendered,this);this.context.saveState.connect(this._onSave,this);void this.revealed.then((()=>{if(this.isDisposed){return}if(this.content.widgets.length===1){const e=this.content.widgets[0].model;if(e.type==="code"&&e.value.text===""){this.content.mode="edit"}}}))}_onSave(e,t){if(t==="started"&&this.model){const{cells:e}=this.model;(0,s.each)(e,(e=>{if((0,o.isMarkdownCellModel)(e)){for(const t of e.attachments.keys){if(!e.value.text.includes(t)){e.attachments.remove(t)}}}}))}}get sessionContext(){return this.context.sessionContext}get model(){return this.content.model}setConfig(e){this.content.editorConfig=e.editorConfig;this.content.notebookConfig=e.notebookConfig;const t=this.context.sessionContext.kernelPreference;this.context.sessionContext.kernelPreference=Object.assign(Object.assign({},t),{shutdownOnDispose:e.kernelShutdown})}setFragment(e){void this.context.ready.then((()=>{this.content.setFragment(e)}))}dispose(){this.content.dispose();super.dispose()}[r.Printing.symbol](){return async()=>{if(this.context.model.dirty&&!this.context.model.readOnly){await this.context.save()}await r.Printing.printURL(z.PageConfig.getNBConvertURL({format:"html",download:false,path:this.context.path}))}}_onFullyRendered(e,t){t?this.removeClass(fe):this.addClass(fe)}_onKernelChanged(e,t){if(!this.model||!t.newValue){return}const{newValue:n}=t;void n.info.then((e=>{var t;if(this.model&&((t=this.context.sessionContext.session)===null||t===void 0?void 0:t.kernel)===n){this._updateLanguage(e.language_info)}}));void this._updateSpec(n)}_onSessionStatusChanged(e,t){var n;if(t==="autorestarting"&&!this._autorestarting){void(0,r.showDialog)({title:this._trans.__("Kernel Restarting"),body:this._trans.__("The kernel for %1 appears to have died. It will restart automatically.",(n=this.sessionContext.session)===null||n===void 0?void 0:n.path),buttons:[r.Dialog.okButton({label:this._trans.__("Ok")})]});this._autorestarting=true}else if(t==="restarting"){}else{this._autorestarting=false}}_updateLanguage(e){this.model.metadata.set("language_info",e)}async _updateSpec(e){const t=await e.spec;if(this.isDisposed){return}this.model.metadata.set("kernelspec",{name:e.name,display_name:t===null||t===void 0?void 0:t.display_name,language:t===null||t===void 0?void 0:t.language})}}(function(e){class t extends ue.ContentFactory{createNotebook(e){return new ue(e)}}e.ContentFactory=t;e.defaultContentFactory=new t;e.IContentFactory=new a.Token("@jupyterlab/notebook:IContentFactory")})(Ae||(Ae={}));const ve=new a.Token("@jupyterlab/notebook:INotebookWidgetFactory");const Ce=new a.Token("@jupyterlab/notebook:INotebookTools");const be=new a.Token("@jupyterlab/notebook:INotebookTracker");class _e extends r.WidgetTracker{constructor(){super(...arguments);this._activeCell=null;this._activeCellChanged=new c.Signal(this);this._selectionChanged=new c.Signal(this)}get activeCell(){const e=this.currentWidget;if(!e){return null}return e.content.activeCell||null}get activeCellChanged(){return this._activeCellChanged}get selectionChanged(){return this._selectionChanged}add(e){const t=super.add(e);e.content.activeCellChanged.connect(this._onActiveCellChanged,this);e.content.selectionChanged.connect(this._onSelectionChanged,this);return t}dispose(){this._activeCell=null;super.dispose()}onCurrentChanged(e){const t=this.activeCell;if(t&&t===this._activeCell){return}this._activeCell=t;if(!e){return}this._activeCellChanged.emit(e.content.activeCell||null)}_onActiveCellChanged(e,t){if(this.currentWidget&&this.currentWidget.content===e){this._activeCell=t||null;this._activeCellChanged.emit(this._activeCell)}}_onSelectionChanged(e){if(this.currentWidget&&this.currentWidget.content===e){this._selectionChanged.emit(void 0)}}}function ye(e,t){t=t||i.nullTranslator;const n=t.load("jupyterlab");if(e.trustedCells===e.totalCells){return[n.__("Notebook trusted: %1 of %2 cells trusted.",e.trustedCells,e.totalCells),"jp-StatusItem-trusted"]}else if(e.activeCellTrusted){return[n.__("Active cell trusted: %1 of %2 cells trusted.",e.trustedCells,e.totalCells),"jp-StatusItem-trusted"]}else{return[n.__("Notebook not trusted: %1 of %2 cells trusted.",e.trustedCells,e.totalCells),"jp-StatusItem-untrusted"]}}function Ee(e){if(e.allCellsTrusted){return u().createElement(f.trustedIcon.react,{top:"2px",stylesheet:"statusBar"})}else{return u().createElement(f.notTrustedIcon.react,{top:"2px",stylesheet:"statusBar"})}}class we extends r.VDomRenderer{constructor(e){super(new we.Model);this.translator=e||i.nullTranslator}render(){if(!this.model){return null}this.node.title=ye(this.model,this.translator)[0];return u().createElement("div",null,u().createElement(Ee,{allCellsTrusted:this.model.trustedCells===this.model.totalCells,activeCellTrusted:this.model.activeCellTrusted,totalCells:this.model.totalCells,trustedCells:this.model.trustedCells}))}}(function(e){class t extends r.VDomModel{constructor(){super(...arguments);this._trustedCells=0;this._totalCells=0;this._activeCellTrusted=false;this._notebook=null}get trustedCells(){return this._trustedCells}get totalCells(){return this._totalCells}get activeCellTrusted(){return this._activeCellTrusted}get notebook(){return this._notebook}set notebook(e){const t=this._notebook;if(t!==null){t.activeCellChanged.disconnect(this._onActiveCellChanged,this);t.modelContentChanged.disconnect(this._onModelChanged,this)}const n=this._getAllState();this._notebook=e;if(this._notebook===null){this._trustedCells=0;this._totalCells=0;this._activeCellTrusted=false}else{this._notebook.activeCellChanged.connect(this._onActiveCellChanged,this);this._notebook.modelContentChanged.connect(this._onModelChanged,this);if(this._notebook.activeCell!==undefined){this._activeCellTrusted=this._notebook.activeCell.model.trusted}else{this._activeCellTrusted=false}const{total:e,trusted:t}=this._deriveCellTrustState(this._notebook.model);this._totalCells=e;this._trustedCells=t}this._triggerChange(n,this._getAllState())}_onModelChanged(e){const t=this._getAllState();const{total:n,trusted:r}=this._deriveCellTrustState(e.model);this._totalCells=n;this._trustedCells=r;this._triggerChange(t,this._getAllState())}_onActiveCellChanged(e,t){const n=this._getAllState();if(t){this._activeCellTrusted=t.model.trusted}else{this._activeCellTrusted=false}this._triggerChange(n,this._getAllState())}_deriveCellTrustState(e){if(e===null){return{total:0,trusted:0}}const t=(0,s.toArray)(e.cells);const n=t.reduce(((e,t)=>{if(t.trusted){return e+1}else{return e}}),0);const r=t.length;return{total:r,trusted:n}}_getAllState(){return[this._trustedCells,this._totalCells,this.activeCellTrusted]}_triggerChange(e,t){if(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]){this.stateChanged.emit(void 0)}}}e.Model=t})(we||(we={}));class xe extends N.ABCWidgetFactory{constructor(e){super(e);this.rendermime=e.rendermime;this.contentFactory=e.contentFactory||Ae.defaultContentFactory;this.mimeTypeService=e.mimeTypeService;this._editorConfig=e.editorConfig||de.defaultEditorConfig;this._notebookConfig=e.notebookConfig||de.defaultNotebookConfig;this._sessionDialogs=e.sessionDialogs||r.sessionContextDialogs}get editorConfig(){return this._editorConfig}set editorConfig(e){this._editorConfig=e}get notebookConfig(){return this._notebookConfig}set notebookConfig(e){this._notebookConfig=e}createNewWidget(e,t){const n={rendermime:t?t.content.rendermime:this.rendermime.clone({resolver:e.urlResolver}),contentFactory:this.contentFactory,mimeTypeService:this.mimeTypeService,editorConfig:t?t.content.editorConfig:this._editorConfig,notebookConfig:t?t.content.notebookConfig:this._notebookConfig,translator:this.translator};const r=this.contentFactory.createNotebook(n);return new Ae({context:e,content:r})}defaultToolbarFactory(e){return C.getDefaultItems(e,this._sessionDialogs,this.translator)}}var je=n(22248);function ke(e){const t=e.translator||i.nullTranslator;const n=(0,r.translateKernelStatuses)(t);const o=t.load("jupyterlab");const s=e.state;const a=e.displayOption.showOnToolBar;const l=e.displayOption.showProgress;const c=a?"down":"up";const d=u().createElement("div",null);if(!s){return d}const h=s.kernelStatus;const p={alignSelf:"normal",height:"24px"};const m=s.totalTime;const g=s.scheduledCellNumber||0;const A=s.scheduledCell.size||0;const v=g-A;let C=100*v/g;let b=l?"":"hidden";if(!l&&C<100){C=0}const _=e=>u().createElement(B.ProgressCircle,{progress:e,width:16,height:24});const y=e=>o.__("Kernel status: %1",e);const E=(e,t,r)=>u().createElement("div",{className:"jp-Notebook-ExecutionIndicator",title:l?"":y(n[e]),"data-status":e},t,u().createElement("div",{className:`jp-Notebook-ExecutionIndicator-tooltip ${c} ${b}`},u().createElement("span",null," ",y(n[e])," "),r));if(s.kernelStatus==="connecting"||s.kernelStatus==="disconnected"||s.kernelStatus==="unknown"){return E(h,u().createElement(f.offlineBoltIcon.react,Object.assign({},p)),[])}if(s.kernelStatus==="starting"||s.kernelStatus==="terminating"||s.kernelStatus==="restarting"||s.kernelStatus==="initializing"){return E(h,u().createElement(f.circleIcon.react,Object.assign({},p)),[])}if(s.executionStatus==="busy"){return E("busy",_(C),[u().createElement("span",{key:0},o.__(`Executed ${v}/${g} requests`)),u().createElement("span",{key:1},o._n("Elapsed time: %1 second","Elapsed time: %1 seconds",m))])}else{if(m===0){return E("idle",_(100),[])}else{return E("idle",_(100),[u().createElement("span",{key:0},o._n("Executed %1 request","Executed %1 requests",g)),u().createElement("span",{key:1},o._n("Elapsed time: %1 second","Elapsed time: %1 seconds",m))])}}}class Be extends r.VDomRenderer{constructor(e,t=true){super(new Be.Model);this.translator=e||i.nullTranslator;this.addClass(B.interactiveItem)}render(){if(this.model===null||!this.model.renderFlag){return u().createElement("div",null)}else{const e=this.model.currentNotebook;if(!e){return u().createElement(ke,{displayOption:this.model.displayOption,state:undefined,translator:this.translator})}return u().createElement(ke,{displayOption:this.model.displayOption,state:this.model.executionState(e),translator:this.translator})}}}(function(e){class t extends r.VDomModel{constructor(){super();this._notebookExecutionProgress=new WeakMap;this._displayOption={showOnToolBar:true,showProgress:true};this._renderFlag=true}attachNotebook(e){var t,n,r,o;if(e&&e.content&&e.context){const i=e.content;const s=e.context;this._currentNotebook=i;if(!this._notebookExecutionProgress.has(i)){this._notebookExecutionProgress.set(i,{executionStatus:"idle",kernelStatus:"idle",totalTime:0,interval:0,timeout:0,scheduledCell:new Set,scheduledCellNumber:0,needReset:true});const e=this._notebookExecutionProgress.get(i);const a=t=>{if(e){e.kernelStatus=t.kernelDisplayStatus}this.stateChanged.emit(void 0)};s.statusChanged.connect(a,this);const l=t=>{if(e){e.kernelStatus=t.kernelDisplayStatus}this.stateChanged.emit(void 0)};s.connectionStatusChanged.connect(l,this);s.disposed.connect((e=>{e.connectionStatusChanged.disconnect(l,this);e.statusChanged.disconnect(a,this)}));const c=(e,t)=>{const n=t.msg;const r=n.header.msg_id;if(je.KernelMessage.isCommMsgMsg(n)&&n.content.data["method"]){const e=n.content.data["method"];if(e!=="request_state"&&e!=="update"){this._cellScheduledCallback(i,r);this._startTimer(i)}}else if(n.header.msg_type==="execute_request"){this._cellScheduledCallback(i,r)}else if(je.KernelMessage.isStatusMsg(n)&&n.content.execution_state==="idle"){const e=n.parent_header.msg_id;this._cellExecutedCallback(i,e)}else if(n.header.msg_type==="execute_input"){this._startTimer(i)}};(n=(t=s.session)===null||t===void 0?void 0:t.kernel)===null||n===void 0?void 0:n.anyMessage.connect(c);(o=(r=s.session)===null||r===void 0?void 0:r.kernel)===null||o===void 0?void 0:o.disposed.connect((e=>e.anyMessage.disconnect(c)));const d=(t,n)=>{if(e){this._resetTime(e);this.stateChanged.emit(void 0);if(n.newValue){n.newValue.anyMessage.connect(c)}}};s.kernelChanged.connect(d);s.disposed.connect((e=>e.kernelChanged.disconnect(d)))}}}get currentNotebook(){return this._currentNotebook}get displayOption(){return this._displayOption}set displayOption(e){this._displayOption=e}executionState(e){return this._notebookExecutionProgress.get(e)}_cellExecutedCallback(e,t){const n=this._notebookExecutionProgress.get(e);if(n&&n.scheduledCell.has(t)){n.scheduledCell.delete(t);if(n.scheduledCell.size===0){window.setTimeout((()=>{n.executionStatus="idle";clearInterval(n.interval);this.stateChanged.emit(void 0)}),150);n.timeout=window.setTimeout((()=>{n.needReset=true}),1e3)}}}_startTimer(e){const t=this._notebookExecutionProgress.get(e);if(t){if(t.executionStatus!=="busy"){t.executionStatus="busy";clearTimeout(t.timeout);this.stateChanged.emit(void 0);t.interval=window.setInterval((()=>{this._tick(t)}),1e3)}}}_cellScheduledCallback(e,t){const n=this._notebookExecutionProgress.get(e);if(n&&!n.scheduledCell.has(t)){if(n.needReset){this._resetTime(n)}n.scheduledCell.add(t);n.scheduledCellNumber+=1}}_tick(e){e.totalTime+=1;this.stateChanged.emit(void 0)}_resetTime(e){e.totalTime=0;e.scheduledCellNumber=0;e.executionStatus="idle";e.scheduledCell=new Set;clearTimeout(e.timeout);clearInterval(e.interval);e.needReset=false}get renderFlag(){return this._renderFlag}updateRenderOption(e){if(this.displayOption.showOnToolBar){if(!e.showOnToolBar){this._renderFlag=false}else{this._renderFlag=true}}this.displayOption.showProgress=e.showProgress;this.stateChanged.emit(void 0)}}e.Model=t;function n(t,n,r){const i=new e(n);i.model.displayOption={showOnToolBar:true,showProgress:true};i.model.attachNotebook({content:t.content,context:t.sessionContext});t.disposed.connect((()=>{i.dispose()}));if(r){r.then((e=>{i.model.updateRenderOption(o(e));e.changed.connect((e=>{i.model.updateRenderOption(o(e))}))})).catch((e=>{console.error(e.message)}))}return i}e.createExecutionIndicatorItem=n;function o(e){let t=true;let n=true;const r=e.get("kernelStatus").composite;if(r){t=!r.showOnStatusBar;n=r.showProgress}return{showOnToolBar:t,showProgress:n}}e.getSettingValue=o})(Be||(Be={}))},88164:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(79536);var s=n(22748);var a=n(49914);var l=n(98328);var c=n(98896);var d=n(94683);var u=n(5956);var h=n(93379);var p=n.n(h);var m=n(20059);var g={};g.insert="head";g.singleton=false;var f=p()(m.Z,g);const A=m.Z.locals||{}},84691:(e,t,n)=>{"use strict";n.r(t);n.d(t,{ModelDB:()=>f,ObservableJSON:()=>c,ObservableList:()=>h,ObservableMap:()=>a,ObservableString:()=>d,ObservableUndoableList:()=>m,ObservableValue:()=>g});var r=n(91100);var o=n(64782);var i=n(18987);var s=n(46843);class a{constructor(e={}){this._map=new Map;this._changed=new i.Signal(this);this._isDisposed=false;this._itemCmp=e.itemCmp||l.itemCmp;if(e.values){for(const t in e.values){this._map.set(t,e.values[t])}}}get type(){return"Map"}get changed(){return this._changed}get isDisposed(){return this._isDisposed}get size(){return this._map.size}set(e,t){const n=this._map.get(e);if(t===undefined){throw Error("Cannot set an undefined value, use remove")}const r=this._itemCmp;if(n!==undefined&&r(n,t)){return n}this._map.set(e,t);this._changed.emit({type:n?"change":"add",key:e,oldValue:n,newValue:t});return n}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){const e=[];this._map.forEach(((t,n)=>{e.push(n)}));return e}values(){const e=[];this._map.forEach(((t,n)=>{e.push(t)}));return e}delete(e){const t=this._map.get(e);const n=this._map.delete(e);if(n){this._changed.emit({type:"remove",key:e,oldValue:t,newValue:undefined})}return t}clear(){const e=this.keys();for(let t=0;t<e.length;t++){this.delete(e[t])}}dispose(){if(this.isDisposed){return}this._isDisposed=true;i.Signal.clearData(this);this._map.clear()}}var l;(function(e){function t(e,t){return e===t}e.itemCmp=t})(l||(l={}));class c extends a{constructor(e={}){super({itemCmp:r.JSONExt.deepEqual,values:e.values})}toJSON(){const e=Object.create(null);const t=this.keys();for(const n of t){const t=this.get(n);if(t!==undefined){e[n]=r.JSONExt.deepCopy(t)}}return e}}(function(e){class t extends s.Message{constructor(e,t){super(e);this.args=t}}e.ChangeMessage=t})(c||(c={}));class d{constructor(e=""){this._text="";this._isDisposed=false;this._changed=new i.Signal(this);this._text=e}get type(){return"String"}get changed(){return this._changed}set text(e){if(e.length===this._text.length&&e===this._text){return}this._text=e;this._changed.emit({type:"set",start:0,end:e.length,value:e})}get text(){return this._text}insert(e,t){this._text=this._text.slice(0,e)+t+this._text.slice(e);this._changed.emit({type:"insert",start:e,end:e+t.length,value:t})}remove(e,t){const n=this._text.slice(e,t);this._text=this._text.slice(0,e)+this._text.slice(t);this._changed.emit({type:"remove",start:e,end:t,value:n})}clear(){this.text=""}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this);this.clear()}}var u=n(54522);class h{constructor(e={}){this._array=[];this._isDisposed=false;this._changed=new i.Signal(this);if(e.values!==void 0){(0,u.each)(e.values,(e=>{this._array.push(e)}))}this._itemCmp=e.itemCmp||p.itemCmp}get type(){return"List"}get changed(){return this._changed}get length(){return this._array.length}get isDisposed(){return this._isDisposed}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this);this.clear()}iter(){return new u.ArrayIterator(this._array)}get(e){return this._array[e]}set(e,t){const n=this._array[e];if(t===undefined){throw new Error("Cannot set an undefined item")}const r=this._itemCmp;if(r(n,t)){return}this._array[e]=t;this._changed.emit({type:"set",oldIndex:e,newIndex:e,oldValues:[n],newValues:[t]})}push(e){const t=this._array.push(e);this._changed.emit({type:"add",oldIndex:-1,newIndex:this.length-1,oldValues:[],newValues:[e]});return t}insert(e,t){if(e===this._array.length){this._array.push(t)}else{u.ArrayExt.insert(this._array,e,t)}this._changed.emit({type:"add",oldIndex:-2,newIndex:e,oldValues:[],newValues:[t]})}removeValue(e){const t=this._itemCmp;const n=u.ArrayExt.findFirstIndex(this._array,(n=>t(n,e)));this.remove(n);return n}remove(e){const t=u.ArrayExt.removeAt(this._array,e);if(t===undefined){return}this._changed.emit({type:"remove",oldIndex:e,newIndex:-1,newValues:[],oldValues:[t]});return t}clear(){const e=this._array.slice();this._array.length=0;this._changed.emit({type:"remove",oldIndex:0,newIndex:0,newValues:[],oldValues:e})}move(e,t){if(this.length<=1||e===t){return}const n=[this._array[e]];u.ArrayExt.move(this._array,e,t);this._changed.emit({type:"move",oldIndex:e,newIndex:t,oldValues:n,newValues:n})}pushAll(e){const t=this.length;(0,u.each)(e,(e=>{this._array.push(e)}));this._changed.emit({type:"add",oldIndex:-1,newIndex:t,oldValues:[],newValues:(0,u.toArray)(e)});return this.length}insertAll(e,t){const n=e;(0,u.each)(t,(t=>{u.ArrayExt.insert(this._array,e++,t)}));this._changed.emit({type:"add",oldIndex:-2,newIndex:n,oldValues:[],newValues:(0,u.toArray)(t)})}removeRange(e,t){const n=this._array.slice(e,t);for(let r=e;r<t;r++){u.ArrayExt.removeAt(this._array,e)}this._changed.emit({type:"remove",oldIndex:e,newIndex:-1,oldValues:n,newValues:[]});return this.length}}var p;(function(e){function t(e,t){return e===t}e.itemCmp=t})(p||(p={}));class m extends h{constructor(e){super();this._inCompound=false;this._isUndoable=true;this._madeCompoundChange=false;this._index=-1;this._stack=[];this._serializer=e;this.changed.connect(this._onListChanged,this)}get canRedo(){return this._index<this._stack.length-1}get canUndo(){return this._index>=0}beginCompoundOperation(e){this._inCompound=true;this._isUndoable=e!==false;this._madeCompoundChange=false}endCompoundOperation(){this._inCompound=false;this._isUndoable=true;if(this._madeCompoundChange){this._index++}}undo(){if(!this.canUndo){return}const e=this._stack[this._index];this._isUndoable=false;for(const t of e.reverse()){this._undoChange(t)}this._isUndoable=true;this._index--}redo(){if(!this.canRedo){return}this._index++;const e=this._stack[this._index];this._isUndoable=false;for(const t of e){this._redoChange(t)}this._isUndoable=true}clearUndo(){this._index=-1;this._stack=[]}_onListChanged(e,t){if(this.isDisposed||!this._isUndoable){return}if(!this._inCompound||!this._madeCompoundChange){this._stack=this._stack.slice(0,this._index+1)}const n=this._copyChange(t);if(this._stack[this._index+1]){this._stack[this._index+1].push(n)}else{this._stack.push([n])}if(!this._inCompound){this._index++}else{this._madeCompoundChange=true}}_undoChange(e){let t=0;const n=this._serializer;switch(e.type){case"add":(0,u.each)(e.newValues,(()=>{this.remove(e.newIndex)}));break;case"set":t=e.oldIndex;(0,u.each)(e.oldValues,(e=>{this.set(t++,n.fromJSON(e))}));break;case"remove":t=e.oldIndex;(0,u.each)(e.oldValues,(e=>{this.insert(t++,n.fromJSON(e))}));break;case"move":this.move(e.newIndex,e.oldIndex);break;default:return}}_redoChange(e){let t=0;const n=this._serializer;switch(e.type){case"add":t=e.newIndex;(0,u.each)(e.newValues,(e=>{this.insert(t++,n.fromJSON(e))}));break;case"set":t=e.newIndex;(0,u.each)(e.newValues,(t=>{this.set(e.newIndex++,n.fromJSON(t))}));break;case"remove":(0,u.each)(e.oldValues,(()=>{this.remove(e.oldIndex)}));break;case"move":this.move(e.oldIndex,e.newIndex);break;default:return}}_copyChange(e){const t=[];(0,u.each)(e.oldValues,(e=>{t.push(this._serializer.toJSON(e))}));const n=[];(0,u.each)(e.newValues,(e=>{n.push(this._serializer.toJSON(e))}));return{type:e.type,oldIndex:e.oldIndex,newIndex:e.newIndex,oldValues:t,newValues:n}}}(function(e){class t{toJSON(e){return e}fromJSON(e){return e}}e.IdentitySerializer=t})(m||(m={}));class g{constructor(e=null){this._value=null;this._changed=new i.Signal(this);this._isDisposed=false;this._value=e}get type(){return"Value"}get isDisposed(){return this._isDisposed}get changed(){return this._changed}get(){return this._value}set(e){const t=this._value;if(r.JSONExt.deepEqual(t,e)){return}this._value=e;this._changed.emit({oldValue:t,newValue:e})}dispose(){if(this._isDisposed){return}this._isDisposed=true;i.Signal.clearData(this);this._value=null}}(function(e){class t{}e.IChangedArgs=t})(g||(g={}));class f{constructor(e={}){this.isPrepopulated=false;this.isCollaborative=false;this.connected=Promise.resolve(void 0);this._toDispose=false;this._isDisposed=false;this._disposables=new o.DisposableSet;this._basePath=e.basePath||"";if(e.baseDB){this._db=e.baseDB}else{this._db=new a;this._toDispose=true}}get basePath(){return this._basePath}get isDisposed(){return this._isDisposed}get(e){return this._db.get(this._resolvePath(e))}has(e){return this._db.has(this._resolvePath(e))}createString(e){const t=new d;this._disposables.add(t);this.set(e,t);return t}createList(e){const t=new m(new m.IdentitySerializer);this._disposables.add(t);this.set(e,t);return t}createMap(e){const t=new c;this._disposables.add(t);this.set(e,t);return t}createValue(e){const t=new g;this._disposables.add(t);this.set(e,t);return t}getValue(e){const t=this.get(e);if(!t||t.type!=="Value"){throw Error("Can only call getValue for an ObservableValue")}return t.get()}setValue(e,t){const n=this.get(e);if(!n||n.type!=="Value"){throw Error("Can only call setValue on an ObservableValue")}n.set(t)}view(e){const t=new f({basePath:e,baseDB:this});this._disposables.add(t);return t}set(e,t){this._db.set(this._resolvePath(e),t)}dispose(){if(this.isDisposed){return}this._isDisposed=true;if(this._toDispose){this._db.dispose()}this._disposables.dispose()}_resolvePath(e){if(this._basePath){e=this._basePath+"."+e}return e}}},6710:(e,t,n)=>{"use strict";n.r(t);n.d(t,{OutputArea:()=>j,OutputAreaModel:()=>c,OutputPrompt:()=>B,SimplifiedOutputArea:()=>k,Stdin:()=>S});var r=n(23465);var o=n(82714);var i=n(63833);var s=n(54522);var a=n(91100);var l=n(18987);class c{constructor(e={}){this.clearNext=false;this._trusted=false;this._isDisposed=false;this._stateChanged=new l.Signal(this);this._changed=new l.Signal(this);this._trusted=!!e.trusted;this.contentFactory=e.contentFactory||c.defaultContentFactory;this.list=new o.ObservableList;if(e.values){(0,s.each)(e.values,(e=>{this._add(e)}))}this.list.changed.connect(this._onListChanged,this)}get stateChanged(){return this._stateChanged}get changed(){return this._changed}get length(){return this.list?this.list.length:0}get trusted(){return this._trusted}set trusted(e){if(e===this._trusted){return}const t=this._trusted=e;for(let n=0;n<this.list.length;n++){let e=this.list.get(n);const r=e.toJSON();e.dispose();e=this._createItem({value:r,trusted:t});this.list.set(n,e)}}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;this.list.dispose();l.Signal.clearData(this)}get(e){return this.list.get(e)}set(e,t){t=a.JSONExt.deepCopy(t);d.normalize(t);const n=this._createItem({value:t,trusted:this._trusted});this.list.set(e,n)}add(e){if(this.clearNext){this.clear();this.clearNext=false}return this._add(e)}clear(e=false){this._lastStream="";if(e){this.clearNext=true;return}(0,s.each)(this.list,(e=>{e.dispose()}));this.list.clear()}fromJSON(e){this.clear();(0,s.each)(e,(e=>{this._add(e)}))}toJSON(){return(0,s.toArray)((0,s.map)(this.list,(e=>e.toJSON())))}_add(e){const t=this._trusted;e=a.JSONExt.deepCopy(e);d.normalize(e);if(r.isStream(e)&&this._lastStream&&e.name===this._lastName&&this.shouldCombine({value:e,lastModel:this.list.get(this.length-1)})){this._lastStream+=e.text;this._lastStream=d.removeOverwrittenChars(this._lastStream);e.text=this._lastStream;const n=this._createItem({value:e,trusted:t});const r=this.length-1;const o=this.list.get(r);o.dispose();this.list.set(r,n);return r}if(r.isStream(e)){e.text=d.removeOverwrittenChars(e.text)}const n=this._createItem({value:e,trusted:t});if(r.isStream(e)){this._lastStream=e.text;this._lastName=e.name}else{this._lastStream=""}return this.list.push(n)}shouldCombine(e){return true}_createItem(e){const t=this.contentFactory;const n=t.createOutputModel(e);n.changed.connect(this._onGenericChange,this);return n}_onListChanged(e,t){this._changed.emit(t)}_onGenericChange(){this._stateChanged.emit(void 0)}}(function(e){class t{createOutputModel(e){return new i.OutputModel(e)}}e.ContentFactory=t;e.defaultContentFactory=new t})(c||(c={}));var d;(function(e){function t(e){if(r.isStream(e)){if(Array.isArray(e.text)){e.text=e.text.join("\n")}}}e.normalize=t;function n(e){let t=e;do{e=t;t=e.replace(/[^\n]\x08/gm,"")}while(t.length<e.length);return e}function o(e){e=e.replace(/\r+\n/gm,"\n");while(e.search(/\r[^$]/g)>-1){const t=e.match(/^(.*)\r+/m)[1];let n=e.match(/\r+(.*)$/m)[1];n=n+t.slice(n.length,t.length);e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,n)}return e}function i(e){return o(n(e))}e.removeOverwrittenChars=i})(d||(d={}));var u=n(3378);var h=n(22248);var p=n(63577);var m=n(700);var g=n(91033);const f="jp-OutputArea";const A="jp-OutputArea-child";const v="jp-OutputArea-output";const C="jp-OutputArea-prompt";const b="jp-OutputPrompt";const _="jp-OutputArea-executeResult";const y="jp-OutputArea-stdin-item";const E="jp-Stdin";const w="jp-Stdin-prompt";const x="jp-Stdin-input";class j extends m.Widget{constructor(e){var t;super();this.outputLengthChanged=new l.Signal(this);this._onIOPub=e=>{const t=this.model;const n=e.header.msg_type;let r;const o=e.content.transient||{};const i=o["display_id"];let s;switch(n){case"execute_result":case"display_data":case"stream":case"error":r=Object.assign(Object.assign({},e.content),{output_type:n});t.add(r);break;case"clear_output":{const n=e.content.wait;t.clear(n);break}case"update_display_data":r=Object.assign(Object.assign({},e.content),{output_type:"display_data"});s=this._displayIdMap.get(i);if(s){for(const e of s){t.set(e,r)}}break;default:break}if(i&&n==="display_data"){s=this._displayIdMap.get(i)||[];s.push(t.length-1);this._displayIdMap.set(i,s)}};this._onExecuteReply=e=>{const t=this.model;const n=e.content;if(n.status!=="ok"){return}const r=n&&n.payload;if(!r||!r.length){return}const o=r.filter((e=>e.source==="page"));if(!o.length){return}const i=JSON.parse(JSON.stringify(o[0]));const s={output_type:"display_data",data:i.data,metadata:{}};t.add(s)};this._minHeightTimeout=null;this._displayIdMap=new Map;this._outputTracker=new u.WidgetTracker({namespace:a.UUID.uuid4()});this.addClass(f);this.contentFactory=e.contentFactory||j.defaultContentFactory;this.layout=new m.PanelLayout;this.rendermime=e.rendermime;this._maxNumberOutputs=(t=e.maxNumberOutputs)!==null&&t!==void 0?t:Infinity;const n=this.model=e.model;for(let r=0;r<Math.min(n.length,this._maxNumberOutputs+1);r++){const e=n.get(r);this._insertOutput(r,e)}n.changed.connect(this.onModelChanged,this);n.stateChanged.connect(this.onStateChanged,this)}get widgets(){return this.layout.widgets}get future(){return this._future}set future(e){if(this.model.isDisposed){throw Error("Model is disposed")}if(this._future===e){return}if(this._future){this._future.dispose()}this._future=e;this.model.clear();if(this.widgets.length){this._clear();this.outputLengthChanged.emit(this.model.length)}e.onIOPub=this._onIOPub;e.onReply=this._onExecuteReply;e.onStdin=t=>{if(h.KernelMessage.isInputRequestMsg(t)){this.onInputRequest(t,e)}}}get maxNumberOutputs(){return this._maxNumberOutputs}set maxNumberOutputs(e){if(e<=0){console.warn(`OutputArea.maxNumberOutputs must be strictly positive.`);return}const t=this._maxNumberOutputs;this._maxNumberOutputs=e;if(t<e){this._showTrimmedOutputs(t)}}dispose(){if(this._future){this._future.dispose();this._future=null}this._displayIdMap.clear();this._outputTracker.dispose();super.dispose()}onModelChanged(e,t){switch(t.type){case"add":this._insertOutput(t.newIndex,t.newValues[0]);break;case"remove":if(this.widgets.length){if(this.model.length===0){this._clear()}else{const e=t.oldIndex;for(let n=0;n<t.oldValues.length&&e<this.widgets.length;++n){const t=this.widgets[e];t.parent=null;t.dispose()}this._moveDisplayIdIndices(e,t.oldValues.length);this._preventHeightChangeJitter()}}break;case"set":this._setOutput(t.newIndex,t.newValues[0]);break;default:break}this.outputLengthChanged.emit(Math.min(this.model.length,this._maxNumberOutputs))}_moveDisplayIdIndices(e,t){this._displayIdMap.forEach((n=>{const r=e+t;const o=n.length;for(let i=o-1;i>=0;--i){const o=n[i];if(o>=e&&o<r){n.splice(i,1)}else if(o>=r){n[i]-=t}}}))}onStateChanged(e){const t=Math.min(this.model.length,this._maxNumberOutputs);for(let n=0;n<t;n++){this._setOutput(n,this.model.get(n))}this.outputLengthChanged.emit(t)}_clear(){if(!this.widgets.length){return}const e=this.widgets.length;for(let t=0;t<e;t++){const e=this.widgets[0];e.parent=null;e.dispose()}this._displayIdMap.clear();this._preventHeightChangeJitter()}_preventHeightChangeJitter(){const e=this.node.getBoundingClientRect();this.node.style.minHeight=`${e.height}px`;if(this._minHeightTimeout){window.clearTimeout(this._minHeightTimeout)}this._minHeightTimeout=window.setTimeout((()=>{if(this.isDisposed){return}this.node.style.minHeight=""}),50)}onInputRequest(e,t){const n=this.contentFactory;const r=e.content.prompt;const o=e.content.password;const i=new m.Panel;i.addClass(A);i.addClass(y);const s=n.createOutputPrompt();s.addClass(C);i.addWidget(s);const a=n.createStdin({parent_header:e.header,prompt:r,password:o,future:t});a.addClass(v);i.addWidget(a);if(this.model.length>=this.maxNumberOutputs){this.maxNumberOutputs=this.model.length}this.layout.addWidget(i);void a.value.then((e=>{if(this.model.length>=this.maxNumberOutputs){this.maxNumberOutputs=this.model.length+1}this.model.add({output_type:"stream",name:"stdin",text:e+"\n"});i.dispose()}))}_setOutput(e,t){if(e>=this._maxNumberOutputs){return}const n=this.layout.widgets[e];const r=n.widgets?n.widgets[1]:n;const o=this.rendermime.preferredMimeType(t.data,t.trusted?"any":"ensure");if(r.renderModel&&D.currentPreferredMimetype.get(r)===o&&j.isIsolated(o,t.metadata)===r instanceof D.IsolatedRenderer){void r.renderModel(t)}else{this.layout.widgets[e].dispose();this._insertOutput(e,t)}}_insertOutput(e,t){if(e>this._maxNumberOutputs){return}const n=this.layout;if(e===this._maxNumberOutputs){const t=new D.TrimmedOutputs(this._maxNumberOutputs,(()=>{const e=this._maxNumberOutputs;this._maxNumberOutputs=Infinity;this._showTrimmedOutputs(e)}));n.insertWidget(e,this._wrappedOutput(t))}else{let r=this.createOutputItem(t);if(r){r.toggleClass(_,t.executionCount!==null)}else{r=new m.Widget}if(!this._outputTracker.has(r)){void this._outputTracker.add(r)}n.insertWidget(e,r)}}get outputTracker(){return this._outputTracker}_showTrimmedOutputs(e){this.widgets[e].dispose();for(let t=e;t<this.model.length;t++){this._insertOutput(t,this.model.get(t))}this.outputLengthChanged.emit(Math.min(this.model.length,this._maxNumberOutputs))}createOutputItem(e){const t=this.createRenderedMimetype(e);if(!t){return null}return this._wrappedOutput(t,e.executionCount)}createRenderedMimetype(e){const t=this.rendermime.preferredMimeType(e.data,e.trusted?"any":"ensure");if(!t){return null}let n=this.rendermime.createRenderer(t);const r=j.isIsolated(t,e.metadata);if(r===true){n=new D.IsolatedRenderer(n)}D.currentPreferredMimetype.set(n,t);n.renderModel(e).catch((e=>{const t=document.createElement("pre");t.textContent=`Javascript Error: ${e.message}`;n.node.appendChild(t);n.node.className="lm-Widget jp-RenderedText";n.node.setAttribute("data-mime-type","application/vnd.jupyter.stderr")}));return n}_wrappedOutput(e,t=null){const n=new D.OutputPanel;n.addClass(A);const r=this.contentFactory.createOutputPrompt();r.executionCount=t;r.addClass(C);n.addWidget(r);e.addClass(v);n.addWidget(e);return n}}class k extends j{onInputRequest(e,t){return}createOutputItem(e){const t=this.createRenderedMimetype(e);if(t){t.addClass(v)}return t}}(function(e){async function t(e,t,n,r){var o;let i=true;if(r&&Array.isArray(r.tags)&&r.tags.indexOf("raises-exception")!==-1){i=false}const s={code:e,stop_on_error:i};const a=(o=n.session)===null||o===void 0?void 0:o.kernel;if(!a){throw new Error("Session has no kernel.")}const l=a.requestExecute(s,false,r);t.future=l;return l.done}e.execute=t;function n(e,t){const n=t[e];if(n&&n["isolated"]!==undefined){return!!n["isolated"]}else{return!!t["isolated"]}}e.isIsolated=n;class r{createOutputPrompt(){return new B}createStdin(e){return new S(e)}}e.ContentFactory=r;e.defaultContentFactory=new r})(j||(j={}));class B extends m.Widget{constructor(){super();this._executionCount=null;this.addClass(b)}get executionCount(){return this._executionCount}set executionCount(e){this._executionCount=e;if(e===null){this.node.textContent=""}else{this.node.textContent=`[${e}]:`}}}class S extends m.Widget{constructor(e){super({node:D.createInputWidgetNode(e.prompt,e.password)});this._promise=new a.PromiseDelegate;this.addClass(E);this._input=this.node.getElementsByTagName("input")[0];this._input.focus();this._future=e.future;this._parentHeader=e.parent_header;this._value=e.prompt+" "}get value(){return this._promise.promise.then((()=>this._value))}handleEvent(e){const t=this._input;if(e.type==="keydown"){if(e.keyCode===13){this._future.sendInputReply({status:"ok",value:t.value},this._parentHeader);if(t.type==="password"){this._value+=Array(t.value.length+1).join("")}else{this._value+=t.value}this._promise.resolve(void 0)}}}onAfterAttach(e){this._input.addEventListener("keydown",this);this.update()}onUpdateRequest(e){this._input.focus()}onBeforeDetach(e){this._input.removeEventListener("keydown",this)}}var D;(function(e){function t(e,t){const n=document.createElement("div");const r=document.createElement("pre");r.className=w;r.textContent=e;const o=document.createElement("input");o.className=x;if(t){o.type="password"}n.appendChild(r);r.appendChild(o);return n}e.createInputWidgetNode=t;class n extends m.Widget{constructor(e){super({node:document.createElement("iframe")});this.addClass("jp-mod-isolated");this._wrapped=e;const t=this.node;t.frameBorder="0";t.scrolling="auto";t.addEventListener("load",(()=>{t.contentDocument.open();t.contentDocument.write(this._wrapped.node.innerHTML);t.contentDocument.close();const e=t.contentDocument.body;t.style.height=`${e.scrollHeight}px`;t.heightChangeObserver=new g.Z((()=>{t.style.height=`${e.scrollHeight}px`}));t.heightChangeObserver.observe(e)}))}renderModel(e){return this._wrapped.renderModel(e)}}e.IsolatedRenderer=n;e.currentPreferredMimetype=new p.AttachedProperty({name:"preferredMimetype",create:e=>""});class r extends m.Panel{constructor(e){super(e)}_onContext(e){this.node.focus()}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("contextmenu",this._onContext.bind(this))}onBeforeDetach(e){super.onAfterDetach(e);this.node.removeEventListener("contextmenu",this._onContext.bind(this))}}e.OutputPanel=r;class o extends m.Widget{constructor(e,t){const n=document.createElement("div");n.insertAdjacentHTML("afterbegin",`<a>\n          <pre>Output of this cell has been trimmed on the initial display.</pre>\n          <pre>Displaying the first ${e} top outputs.</pre>\n          <pre>Click on this message to get the complete output.</pre>\n        </a>`);super({node:n});this._onClick=t;this.addClass("jp-TrimmedOutputs");this.addClass("jp-RenderedHTMLCommon")}handleEvent(e){if(e.type==="click"){this._onClick(e)}}onAfterAttach(e){super.onAfterAttach(e);this.node.addEventListener("click",this)}onBeforeDetach(e){super.onBeforeDetach(e);this.node.removeEventListener("click",this)}}e.TrimmedOutputs=o})(D||(D={}))},5333:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(98896);var s=n(93379);var a=n.n(s);var l=n(71304);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},60962:(e,t,n)=>{"use strict";n.r(t);n.d(t,{RenderedPDF:()=>d,rendererFactory:()=>u,default:()=>p});var r=n(91100);var o=n.n(r);var i=n(64782);var s=n.n(i);var a=n(700);var l=n.n(a);const c="application/pdf";class d extends a.Widget{constructor(){super();this._base64="";this._disposable=null;this._ready=new r.PromiseDelegate;this.addClass("jp-PDFContainer");const e=document.createElement("iframe");this.node.appendChild(e);e.onload=()=>{const t=e.contentWindow.document.createElement("body");t.style.margin="0px";e.contentWindow.document.body=t;this._object=e.contentWindow.document.createElement("object");if(!window.safari){this._object.type=c}this._object.width="100%";this._object.height="100%";t.appendChild(this._object);this._ready.resolve(void 0)}}async renderModel(e){await this._ready.promise;const t=e.data[c];if(!t||t.length===this._base64.length&&t===this._base64){if(e.metadata.fragment&&this._object.data){const t=this._object.data;this._object.data=`${t.split("#")[0]}${e.metadata.fragment}`}if(m.IS_FIREFOX){this._object.data=this._object.data}return Promise.resolve(void 0)}this._base64=t;const n=m.b64toBlob(t,c);if(this._disposable){this._disposable.dispose()}let r=URL.createObjectURL(n);if(e.metadata.fragment){r+=e.metadata.fragment}this._object.data=r;this._disposable=new i.DisposableDelegate((()=>{try{URL.revokeObjectURL(r)}catch(e){}}));return}onBeforeHide(){if(m.IS_FIREFOX){this._object.data=this._object.data.split("#")[0]}}dispose(){if(this._disposable){this._disposable.dispose()}super.dispose()}}const u={safe:false,mimeTypes:[c],defaultRank:100,createRenderer:e=>new d};const h=[{id:"@jupyterlab/pdf-extension:factory",rendererFactory:u,dataType:"string",documentWidgetFactoryOptions:{name:"PDF",modelName:"base64",primaryFileType:"PDF",fileTypes:["PDF"],defaultFor:["PDF"]}}];const p=h;var m;(function(e){e.IS_FIREFOX=/Firefox/.test(navigator.userAgent);function t(e,t="",n=512){const r=atob(e);const o=[];for(let i=0;i<r.length;i+=n){const e=r.slice(i,i+n);const t=new Array(e.length);for(let n=0;n<e.length;n++){t[n]=e.charCodeAt(n)}const s=new Uint8Array(t);o.push(s)}return new Blob(o,{type:t})}e.b64toBlob=t})(m||(m={}))},32977:(e,t,n)=>{"use strict";var r=n(32902);var o=n(93379);var i=n.n(o);var s=n(18777);var a={};a.insert="head";a.singleton=false;var l=i()(s.Z,a);const c=s.Z.locals||{}},90790:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IPropertyInspectorProvider:()=>l,SideBarPropertyInspectorProvider:()=>d});var r=n(3378);var o=n(59768);var i=n(18987);var s=n(700);var a=n(91100);const l=new a.Token("@jupyterlab/property-inspector:IPropertyInspectorProvider");class c extends s.Widget{constructor(){super();this._tracker=new s.FocusTracker;this._inspectors=new Map;this.addClass("jp-PropertyInspector");this._tracker=new s.FocusTracker;this._tracker.currentChanged.connect(this._onCurrentChanged,this)}register(e){if(this._inspectors.has(e)){throw new Error("Widget is already registered")}const t=new u.PropertyInspector(e);e.disposed.connect(this._onWidgetDisposed,this);this._inspectors.set(e,t);t.onAction.connect(this._onInspectorAction,this);this._tracker.add(e);return t}get currentWidget(){return this._tracker.currentWidget}refresh(){const e=this._tracker.currentWidget;if(!e){this.setContent(null);return}const t=this._inspectors.get(e);if(t){this.setContent(t.content)}}_onWidgetDisposed(e){const t=this._inspectors.get(e);if(t){t.dispose();this._inspectors.delete(e)}}_onInspectorAction(e,t){const n=e.owner;const r=this._tracker.currentWidget;switch(t){case"content":if(r===n){this.setContent(e.content)}break;case"dispose":if(n){this._tracker.remove(n);this._inspectors.delete(n)}break;case"show-panel":if(r===n){this.showPanel()}break;default:throw new Error("Unsupported inspector action")}}_onCurrentChanged(){const e=this._tracker.currentWidget;if(e){const t=this._inspectors.get(e);const n=t.content;this.setContent(n)}else{this.setContent(null)}}}class d extends c{constructor(e,t,n){super();this._labshell=e;this.translator=n||o.nullTranslator;this._trans=this.translator.load("jupyterlab");const r=this.layout=new s.SingletonLayout;if(t){this._placeholder=t}else{const e=document.createElement("div");const t=document.createElement("div");t.textContent=this._trans.__("No properties to inspect.");t.className="jp-PropertyInspector-placeholderContent";e.appendChild(t);this._placeholder=new s.Widget({node:e});this._placeholder.addClass("jp-PropertyInspector-placeholder")}r.widget=this._placeholder;e.currentChanged.connect(this._onShellCurrentChanged,this);this._onShellCurrentChanged()}setContent(e){const t=this.layout;if(t.widget){t.widget.removeClass("jp-PropertyInspector-content");t.removeWidget(t.widget)}if(!e){e=this._placeholder}e.addClass("jp-PropertyInspector-content");t.widget=e}showPanel(){this._labshell.activateById(this.id)}_onShellCurrentChanged(){const e=this.currentWidget;if(!e){this.setContent(null);return}const t=this._labshell.currentWidget;if(t===null||t===void 0?void 0:t.node.contains(e.node)){this.refresh()}else{this.setContent(null)}}}var u;(function(e){class t{constructor(e){this._isDisposed=false;this._content=null;this._owner=null;this._onAction=new i.Signal(this);this._owner=e}get owner(){return this._owner}get content(){return this._content}get isDisposed(){return this._isDisposed}get onAction(){return this._onAction}showPanel(){if(this._isDisposed){return}this._onAction.emit("show-panel")}render(e){if(this._isDisposed){return}if(e instanceof s.Widget){this._content=e}else{this._content=r.ReactWidget.create(e)}this._onAction.emit("content")}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._content=null;this._owner=null;i.Signal.clearData(this)}}e.PropertyInspector=t})(u||(u={}))},9469:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(90516);var s=n(93379);var a=n.n(s);var l=n(10633);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},22793:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>p});var r=n(3378);var o=n.n(r);var i=n(71861);var s=n.n(i);var a=n(63833);var l=n.n(a);var c=n(59768);var d=n.n(c);var u;(function(e){e.handleLink="rendermime:handle-local-link"})(u||(u={}));const h={id:"@jupyterlab/rendermime-extension:plugin",requires:[c.ITranslator],optional:[i.IDocumentManager,a.ILatexTypesetter,r.ISanitizer],provides:a.IRenderMimeRegistry,activate:m,autoStart:true};const p=h;function m(e,t,n,r,o){const i=t.load("jupyterlab");if(n){e.commands.addCommand(u.handleLink,{label:i.__("Handle Local Link"),execute:e=>{const t=e["path"];const r=e["id"];if(!t){return}return n.services.contents.get(t,{content:false}).then((()=>{const e=n.registry.defaultRenderedWidgetFactory(t);const o=n.openOrReveal(t,e.name);if(o&&r){o.setFragment(r)}}))}})}return new a.RenderMimeRegistry({initialFactories:a.standardRendererFactories,linkHandler:!n?undefined:{handleLink:(t,n,r)=>{if(t.tagName==="A"&&t.hasAttribute("download")){return}e.commandLinker.connectNode(t,u.handleLink,{path:n,id:r})}},latexTypesetter:r!==null&&r!==void 0?r:undefined,translator:t,sanitizer:o!==null&&o!==void 0?o:undefined})}},95528:(e,t,n)=>{"use strict";var r=n(79536);var o=n(98896);var i=n(90516);var s=n(82401)},1428:(e,t,n)=>{"use strict";n.r(t)},81845:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var r=n(82714);var o=n.n(r);var i=n(91100);var s=n.n(i);var a=n(18987);var l=n.n(a);class c{constructor(e){this.trusted=false;this._changed=new a.Signal(this);this._raw={};const t=d.getData(e.value);this._data=new r.ObservableJSON({values:t});this._rawData=t;const n=e.value;for(const r in n){switch(r){case"data":break;default:this._raw[r]=d.extract(n,r)}}}get changed(){return this._changed}dispose(){this._data.dispose();a.Signal.clearData(this)}get data(){return this._rawData}get metadata(){return{}}setData(e){if(e.data){this._updateObservable(this._data,e.data);this._rawData=e.data}this._changed.emit(void 0)}toJSON(){const e={};for(const t in this._raw){e[t]=d.extract(this._raw,t)}return e}_updateObservable(e,t){const n=e.keys();const r=Object.keys(t);for(const o of n){if(r.indexOf(o)===-1){e.delete(o)}}for(const o of r){const n=e.get(o);const r=t[o];if(n!==r){e.set(o,r)}}}}(function(e){function t(e){return d.getData(e)}e.getData=t})(c||(c={}));var d;(function(e){function t(e){return o(e)}e.getData=t;function n(e){const n=t(e.value);return{data:n}}e.getBundleOptions=n;function r(e,t){const n=e[t];if(n===undefined||i.JSONExt.isPrimitive(n)){return n}return i.JSONExt.deepCopy(n)}e.extract=r;function o(e){const t=Object.create(null);for(const n in e){t[n]=r(e,n)}return t}})(d||(d={}))},1896:(e,t,n)=>{"use strict";n.d(t,{vy:()=>o,Lz:()=>i,hJ:()=>s,xr:()=>a,F:()=>l,BJ:()=>c,nF:()=>d,Nf:()=>u});var r=n(7848);const o={safe:true,mimeTypes:["text/html"],defaultRank:50,createRenderer:e=>new r.oI(e)};const i={safe:true,mimeTypes:["image/bmp","image/png","image/jpeg","image/gif"],defaultRank:90,createRenderer:e=>new r.UH(e)};const s={safe:true,mimeTypes:["text/latex"],defaultRank:70,createRenderer:e=>new r.FK(e)};const a={safe:true,mimeTypes:["text/markdown"],defaultRank:60,createRenderer:e=>new r.cw(e)};const l={safe:false,mimeTypes:["image/svg+xml"],defaultRank:80,createRenderer:e=>new r.zt(e)};const c={safe:true,mimeTypes:["text/plain","application/vnd.jupyter.stdout","application/vnd.jupyter.stderr"],defaultRank:120,createRenderer:e=>new r.lH(e)};const d={safe:false,mimeTypes:["text/javascript","application/javascript"],defaultRank:110,createRenderer:e=>new r.ND(e)};const u=[o,a,s,l,i,d,c]},20299:(e,t,n)=>{"use strict";n.r(t);n.d(t,{AttachmentModel:()=>s.g,htmlRendererFactory:()=>a.vy,imageRendererFactory:()=>a.Lz,javaScriptRendererFactory:()=>a.nF,latexRendererFactory:()=>a.hJ,markdownRendererFactory:()=>a.xr,standardRendererFactories:()=>a.Nf,svgRendererFactory:()=>a.F,textRendererFactory:()=>a.BJ,removeMath:()=>l.D,replaceMath:()=>l.b,MimeModel:()=>c.a,OutputModel:()=>d.M,RenderMimeRegistry:()=>u.D,renderHTML:()=>h.NN,renderImage:()=>h.co,renderLatex:()=>h.K3,renderMarkdown:()=>h.ap,renderSVG:()=>h.KB,renderText:()=>h.IY,ILatexTypesetter:()=>p._,IRenderMimeRegistry:()=>p.Z,RenderedCommon:()=>m.pY,RenderedHTML:()=>m.oI,RenderedHTMLCommon:()=>m.BP,RenderedImage:()=>m.UH,RenderedJavaScript:()=>m.ND,RenderedLatex:()=>m.FK,RenderedMarkdown:()=>m.cw,RenderedSVG:()=>m.zt,RenderedText:()=>m.lH});var r=n(94810);var o=n.n(r);var i={};for(const g in r)if(g!=="default")i[g]=()=>r[g];n.d(t,i);var s=n(81845);var a=n(1896);var l=n(26408);var c=n(59376);var d=n(2132);var u=n(88960);var h=n(31443);var p=n(30273);var m=n(7848)},26408:(e,t,n)=>{"use strict";n.d(t,{D:()=>i,b:()=>s});const r="$";const o=/(\$\$?|\\(?:begin|end)\{[a-z]*\*?\}|\\[{}$]|[{}]|(?:\n\s*)+|@@\d+@@|\\\\(?:\(|\)|\[|\]))/i;function i(e){const t=[];let n=null;let i=null;let s=null;let l=0;let c;const d=e.includes("`")||e.includes("~~~");if(d){e=e.replace(/~/g,"~T").replace(/^(?<fence>`{3,}|(~T){3,})[^`\n]*\n([\s\S]*?)^\k<fence>`*$/gm,(e=>e.replace(/\$/g,"~D"))).replace(/(^|[^\\])(`+)([^\n]*?[^`\n])\2(?!`)/gm,(e=>e.replace(/\$/g,"~D")));c=e=>e.replace(/~([TD])/g,((e,t)=>t==="T"?"~":r))}else{c=e=>e}let u=e.replace(/\r\n?/g,"\n").split(o);for(let o=1,h=u.length;o<h;o+=2){const e=u[o];if(e.charAt(0)==="@"){u[o]="@@"+t.length+"@@";t.push(e)}else if(n!==null){if(e===i){if(l){s=o}else{u=a(n,o,c,t,u);n=null;i=null;s=null}}else if(e.match(/\n.*\n/)){if(s!==null){o=s;u=a(n,o,c,t,u)}n=null;i=null;s=null;l=0}else if(e==="{"){l++}else if(e==="}"&&l){l--}}else{if(e===r||e==="$$"){n=o;i=e;l=0}else if(e==="\\\\("||e==="\\\\["){n=o;i=e.slice(-1)==="("?"\\\\)":"\\\\]";l=0}else if(e.substr(1,5)==="begin"){n=o;i="\\end"+e.substr(6);l=0}}}if(n!==null&&s!==null){u=a(n,s,c,t,u);n=null;i=null;s=null}return{text:c(u.join("")),math:t}}function s(e,t){const n=(e,n)=>{let r=t[n];if(r.substr(0,3)==="\\\\("&&r.substr(r.length-3)==="\\\\)"){r="\\("+r.substring(3,r.length-3)+"\\)"}else if(r.substr(0,3)==="\\\\["&&r.substr(r.length-3)==="\\\\]"){r="\\["+r.substring(3,r.length-3)+"\\]"}return r};return e.replace(/@@(\d+)@@/g,n)}function a(e,t,n,r,o){let i=o.slice(e,t+1).join("").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(navigator&&navigator.appName==="Microsoft Internet Explorer"){i=i.replace(/(%[^\n]*)\n/g,"$1<br/>\n")}while(t>e){o[t]="";t--}o[e]="@@"+r.length+"@@";if(n){i=n(i)}r.push(i);return o}},59376:(e,t,n)=>{"use strict";n.d(t,{a:()=>r});class r{constructor(e={}){this.trusted=!!e.trusted;this._data=e.data||{};this._metadata=e.metadata||{};this._callback=e.callback||o.noOp}get data(){return this._data}get metadata(){return this._metadata}setData(e){this._data=e.data||this._data;this._metadata=e.metadata||this._metadata;this._callback(e)}}var o;(function(e){function t(){}e.noOp=t})(o||(o={}))},2132:(e,t,n)=>{"use strict";n.d(t,{M:()=>u});var r=n(23465);var o=n.n(r);var i=n(82714);var s=n.n(i);var a=n(91100);var l=n.n(a);var c=n(18987);var d=n.n(c);class u{constructor(e){this._changed=new c.Signal(this);this._raw={};const{data:t,metadata:n,trusted:o}=h.getBundleOptions(e);this._data=new i.ObservableJSON({values:t});this._rawData=t;this._metadata=new i.ObservableJSON({values:n});this._rawMetadata=n;this.trusted=o;const s=e.value;for(const r in s){switch(r){case"data":case"metadata":break;default:this._raw[r]=h.extract(s,r)}}this.type=s.output_type;if(r.isExecuteResult(s)){this.executionCount=s.execution_count}else{this.executionCount=null}}get changed(){return this._changed}dispose(){this._data.dispose();this._metadata.dispose();c.Signal.clearData(this)}get data(){return this._rawData}get metadata(){return this._rawMetadata}setData(e){if(e.data){this._updateObservable(this._data,e.data);this._rawData=e.data}if(e.metadata){this._updateObservable(this._metadata,e.metadata);this._rawMetadata=e.metadata}this._changed.emit(void 0)}toJSON(){const e={};for(const t in this._raw){e[t]=h.extract(this._raw,t)}switch(this.type){case"display_data":case"execute_result":case"update_display_data":e["data"]=this.data;e["metadata"]=this.metadata;break;default:break}delete e["transient"];return e}_updateObservable(e,t){const n=e.keys();const r=Object.keys(t);for(const o of n){if(r.indexOf(o)===-1){e.delete(o)}}for(const o of r){const n=e.get(o);const r=t[o];if(n!==r){e.set(o,r)}}}}(function(e){function t(e){return h.getData(e)}e.getData=t;function n(e){return h.getMetadata(e)}e.getMetadata=n})(u||(u={}));var h;(function(e){function t(e){let t={};if(r.isExecuteResult(e)||r.isDisplayData(e)||r.isDisplayUpdate(e)){t=e.data}else if(r.isStream(e)){if(e.name==="stderr"){t["application/vnd.jupyter.stderr"]=e.text}else{t["application/vnd.jupyter.stdout"]=e.text}}else if(r.isError(e)){t["application/vnd.jupyter.error"]=e;const n=e.traceback.join("\n");t["application/vnd.jupyter.stderr"]=n||`${e.ename}: ${e.evalue}`}return s(t)}e.getData=t;function n(e){const t=Object.create(null);if(r.isExecuteResult(e)||r.isDisplayData(e)){for(const n in e.metadata){t[n]=i(e.metadata,n)}}return t}e.getMetadata=n;function o(e){const r=t(e.value);const o=n(e.value);const i=!!e.trusted;return{data:r,metadata:o,trusted:i}}e.getBundleOptions=o;function i(e,t){const n=e[t];if(n===undefined||a.JSONExt.isPrimitive(n)){return n}return JSON.parse(JSON.stringify(n))}e.extract=i;function s(e){const t=Object.create(null);for(const n in e){t[n]=i(e,n)}return t}})(h||(h={}))},88960:(e,t,n)=>{"use strict";n.d(t,{D:()=>d});var r=n(3378);var o=n.n(r);var i=n(69442);var s=n.n(i);var a=n(59768);var l=n.n(a);var c=n(59376);class d{constructor(e={}){this._id=0;this._ranks={};this._types=null;this._factories={};this.translator=e.translator||a.nullTranslator;this.resolver=e.resolver||null;this.linkHandler=e.linkHandler||null;this.latexTypesetter=e.latexTypesetter||null;this.sanitizer=e.sanitizer||r.defaultSanitizer;if(e.initialFactories){for(const t of e.initialFactories){this.addFactory(t)}}}get mimeTypes(){return this._types||(this._types=u.sortedTypes(this._ranks))}preferredMimeType(e,t="ensure"){if(t==="ensure"||t==="prefer"){for(const t of this.mimeTypes){if(t in e&&this._factories[t].safe){return t}}}if(t!=="ensure"){for(const t of this.mimeTypes){if(t in e){return t}}}return undefined}createRenderer(e){if(!(e in this._factories)){throw new Error(`No factory for mime type: '${e}'`)}return this._factories[e].createRenderer({mimeType:e,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,latexTypesetter:this.latexTypesetter,translator:this.translator})}createModel(e={}){return new c.a(e)}clone(e={}){const t=new d({resolver:e.resolver||this.resolver||undefined,sanitizer:e.sanitizer||this.sanitizer||undefined,linkHandler:e.linkHandler||this.linkHandler||undefined,latexTypesetter:e.latexTypesetter||this.latexTypesetter||undefined,translator:this.translator});t._factories=Object.assign({},this._factories);t._ranks=Object.assign({},this._ranks);t._id=this._id;return t}getFactory(e){return this._factories[e]}addFactory(e,t){if(t===undefined){t=e.defaultRank;if(t===undefined){t=100}}for(const n of e.mimeTypes){this._factories[n]=e;this._ranks[n]={rank:t,id:this._id++}}this._types=null}removeMimeType(e){delete this._factories[e];delete this._ranks[e];this._types=null}getRank(e){const t=this._ranks[e];return t&&t.rank}setRank(e,t){if(!this._ranks[e]){return}const n=this._id++;this._ranks[e]={rank:t,id:n};this._types=null}}(function(e){class t{constructor(e){if(e.path){this._path=e.path}else if(e.session){this._session=e.session}else{throw new Error("Either 'path' or 'session' must be given as a constructor option")}this._contents=e.contents}get path(){var e;return(e=this._path)!==null&&e!==void 0?e:this._session.path}set path(e){this._path=e}async resolveUrl(e){if(this.isLocal(e)){const t=encodeURI(i.PathExt.dirname(this.path));e=i.PathExt.resolve(t,e)}return e}async getDownloadUrl(e){if(this.isLocal(e)){return this._contents.getDownloadUrl(decodeURIComponent(e))}return e}isLocal(e){if(this.isMalformed(e)){return false}return i.URLExt.isLocal(e)||!!this._contents.driveName(decodeURI(e))}isMalformed(e){try{decodeURI(e);return false}catch(t){if(t instanceof URIError){return true}throw t}}}e.UrlResolver=t})(d||(d={}));var u;(function(e){function t(e){return Object.keys(e).sort(((t,n)=>{const r=e[t];const o=e[n];if(r.rank!==o.rank){return r.rank-o.rank}return r.id-o.id}))}e.sortedTypes=t;function n(e){return e.sessionChanged?e.session:e}e.sessionConnection=n})(u||(u={}))},31443:(e,t,n)=>{"use strict";n.d(t,{NN:()=>ae,co:()=>le,K3:()=>ce,ap:()=>de,KB:()=>ue,IY:()=>me});var r=n(41776);var o=n(69442);var i=n(59768);var s=n(54522);var a=n(98686);var l=n.n(a);function c(){return{baseUrl:null,breaks:false,extensions:null,gfm:true,headerIds:true,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:true,pedantic:false,renderer:null,sanitize:false,sanitizer:null,silent:false,smartLists:false,smartypants:false,tokenizer:null,walkTokens:null,xhtml:false}}let d=c();function u(e){d=e}const h=/[&<>"']/;const p=/[&<>"']/g;const m=/[<>"']|&(?!#?\w+;)/;const g=/[<>"']|&(?!#?\w+;)/g;const f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};const A=e=>f[e];function v(e,t){if(t){if(h.test(e)){return e.replace(p,A)}}else{if(m.test(e)){return e.replace(g,A)}}return e}const C=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function b(e){return e.replace(C,((e,t)=>{t=t.toLowerCase();if(t==="colon")return":";if(t.charAt(0)==="#"){return t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1))}return""}))}const _=/(^|[^\[])\^/g;function y(e,t){e=typeof e==="string"?e:e.source;t=t||"";const n={replace:(t,r)=>{r=r.source||r;r=r.replace(_,"$1");e=e.replace(t,r);return n},getRegex:()=>new RegExp(e,t)};return n}const E=/[^\w:]/g;const w=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function x(e,t,n){if(e){let e;try{e=decodeURIComponent(b(n)).replace(E,"").toLowerCase()}catch(r){return null}if(e.indexOf("javascript:")===0||e.indexOf("vbscript:")===0||e.indexOf("data:")===0){return null}}if(t&&!w.test(n)){n=D(t,n)}try{n=encodeURI(n).replace(/%25/g,"%")}catch(r){return null}return n}const j={};const k=/^[^:]+:\/*[^/]*$/;const B=/^([^:]+:)[\s\S]*$/;const S=/^([^:]+:\/*[^/]*)[\s\S]*$/;function D(e,t){if(!j[" "+e]){if(k.test(e)){j[" "+e]=e+"/"}else{j[" "+e]=P(e,"/",true)}}e=j[" "+e];const n=e.indexOf(":")===-1;if(t.substring(0,2)==="//"){if(n){return t}return e.replace(B,"$1")+t}else if(t.charAt(0)==="/"){if(n){return t}return e.replace(S,"$1")+t}else{return e+t}}const M={exec:function e(){}};function T(e){let t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e}function I(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=false,o=t;while(--o>=0&&n[o]==="\\")r=!r;if(r){return"|"}else{return" |"}})),r=n.split(/ \|/);let o=0;if(!r[0].trim()){r.shift()}if(r.length>0&&!r[r.length-1].trim()){r.pop()}if(r.length>t){r.splice(t)}else{while(r.length<t)r.push("")}for(;o<r.length;o++){r[o]=r[o].trim().replace(/\\\|/g,"|")}return r}function P(e,t,n){const r=e.length;if(r===0){return""}let o=0;while(o<r){const i=e.charAt(r-o-1);if(i===t&&!n){o++}else if(i!==t&&n){o++}else{break}}return e.slice(0,r-o)}function R(e,t){if(e.indexOf(t[1])===-1){return-1}const n=e.length;let r=0,o=0;for(;o<n;o++){if(e[o]==="\\"){o++}else if(e[o]===t[0]){r++}else if(e[o]===t[1]){r--;if(r<0){return o}}}return-1}function L(e){if(e&&e.sanitize&&!e.silent){console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}}function O(e,t){if(t<1){return""}let n="";while(t>1){if(t&1){n+=e}t>>=1;e+=e}return n+e}function z(e,t,n,r){const o=t.href;const i=t.title?v(t.title):null;const s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=true;const e={type:"link",raw:n,href:o,title:i,text:s,tokens:r.inlineTokens(s,[])};r.state.inLink=false;return e}return{type:"image",raw:n,href:o,title:i,text:v(s)}}function N(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null){return t}const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(t===null){return e}const[n]=t;if(n.length>=r.length){return e.slice(r.length)}return e})).join("\n")}class F{constructor(e){this.options=e||d}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0){return{type:"space",raw:t[0]}}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:!this.options.pedantic?P(e,"\n"):e}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0];const n=N(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=P(e,"#");if(this.options.pedantic){e=t.trim()}else if(!t||/ $/.test(t)){e=t.trim()}}const n={type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:[]};this.lexer.inline(n.text,n.tokens);return n}}hr(e){const t=this.rules.block.hr.exec(e);if(t){return{type:"hr",raw:t[0]}}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const e=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(e,[]),text:e}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n,r,o,i,s,a,l,c,d,u,h,p;let m=t[1].trim();const g=m.length>1;const f={type:"list",raw:"",ordered:g,start:g?+m.slice(0,-1):"",loose:false,items:[]};m=g?`\\d{1,9}\\${m.slice(-1)}`:`\\${m}`;if(this.options.pedantic){m=g?m:"[*+-]"}const A=new RegExp(`^( {0,3}${m})((?:[\t ][^\\n]*)?(?:\\n|$))`);while(e){p=false;if(!(t=A.exec(e))){break}if(this.rules.block.hr.test(e)){break}n=t[0];e=e.substring(n.length);c=t[2].split("\n",1)[0];d=e.split("\n",1)[0];if(this.options.pedantic){i=2;h=c.trimLeft()}else{i=t[2].search(/[^ ]/);i=i>4?1:i;h=c.slice(i);i+=t[1].length}a=false;if(!c&&/^ *$/.test(d)){n+=d+"\n";e=e.substring(d.length+1);p=true}if(!p){const t=new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`);const r=new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);while(e){u=e.split("\n",1)[0];c=u;if(this.options.pedantic){c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")}if(t.test(c)){break}if(r.test(e)){break}if(c.search(/[^ ]/)>=i||!c.trim()){h+="\n"+c.slice(i)}else if(!a){h+="\n"+c}else{break}if(!a&&!c.trim()){a=true}n+=u+"\n";e=e.substring(u.length+1)}}if(!f.loose){if(l){f.loose=true}else if(/\n *\n *$/.test(n)){l=true}}if(this.options.gfm){r=/^\[[ xX]\] /.exec(h);if(r){o=r[0]!=="[ ] ";h=h.replace(/^\[[ xX]\] +/,"")}}f.items.push({type:"list_item",raw:n,task:!!r,checked:o,loose:false,text:h});f.raw+=n}f.items[f.items.length-1].raw=n.trimRight();f.items[f.items.length-1].text=h.trimRight();f.raw=f.raw.trimRight();const v=f.items.length;for(s=0;s<v;s++){this.lexer.state.top=false;f.items[s].tokens=this.lexer.blockTokens(f.items[s].text,[]);const e=f.items[s].tokens.filter((e=>e.type==="space"));const t=e.every((e=>{const t=e.raw.split("");let n=0;for(const r of t){if(r==="\n"){n+=1}if(n>1){return true}}return false}));if(!f.loose&&e.length&&t){f.loose=true;f.items[s].loose=true}}return f}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};if(this.options.sanitize){e.type="paragraph";e.text=this.options.sanitizer?this.options.sanitizer(t[0]):v(t[0]);e.tokens=[];this.lexer.inline(e.text,e.tokens)}return e}}def(e){const t=this.rules.block.def.exec(e);if(t){if(t[3])t[3]=t[3].substring(1,t[3].length-1);const e=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:e,raw:t[0],href:t[2],title:t[3]}}}table(e){const t=this.rules.block.table.exec(e);if(t){const e={type:"table",header:I(t[1]).map((e=>({text:e}))),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(e.header.length===e.align.length){e.raw=t[0];let n=e.align.length;let r,o,i,s;for(r=0;r<n;r++){if(/^ *-+: *$/.test(e.align[r])){e.align[r]="right"}else if(/^ *:-+: *$/.test(e.align[r])){e.align[r]="center"}else if(/^ *:-+ *$/.test(e.align[r])){e.align[r]="left"}else{e.align[r]=null}}n=e.rows.length;for(r=0;r<n;r++){e.rows[r]=I(e.rows[r],e.header.length).map((e=>({text:e})))}n=e.header.length;for(o=0;o<n;o++){e.header[o].tokens=[];this.lexer.inlineTokens(e.header[o].text,e.header[o].tokens)}n=e.rows.length;for(o=0;o<n;o++){s=e.rows[o];for(i=0;i<s.length;i++){s[i].tokens=[];this.lexer.inlineTokens(s[i].text,s[i].tokens)}}return e}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const e={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};this.lexer.inline(e.text,e.tokens);return e}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)==="\n"?t[1].slice(0,-1):t[1],tokens:[]};this.lexer.inline(e.text,e.tokens);return e}}text(e){const t=this.rules.block.text.exec(e);if(t){const e={type:"text",raw:t[0],text:t[0],tokens:[]};this.lexer.inline(e.text,e.tokens);return e}}escape(e){const t=this.rules.inline.escape.exec(e);if(t){return{type:"escape",raw:t[0],text:v(t[1])}}}tag(e){const t=this.rules.inline.tag.exec(e);if(t){if(!this.lexer.state.inLink&&/^<a /i.test(t[0])){this.lexer.state.inLink=true}else if(this.lexer.state.inLink&&/^<\/a>/i.test(t[0])){this.lexer.state.inLink=false}if(!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])){this.lexer.state.inRawBlock=true}else if(this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])){this.lexer.state.inRawBlock=false}return{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):v(t[0]):t[0]}}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e)){return}const t=P(e.slice(0,-1),"\\");if((e.length-t.length)%2===0){return}}else{const e=R(t[2],"()");if(e>-1){const n=t[0].indexOf("!")===0?5:4;const r=n+t[1].length+e;t[2]=t[2].substring(0,e);t[0]=t[0].substring(0,r).trim();t[3]=""}}let n=t[2];let r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);if(e){n=e[1];r=e[3]}}else{r=t[3]?t[3].slice(1,-1):""}n=n.trim();if(/^</.test(n)){if(this.options.pedantic&&!/>$/.test(e)){n=n.slice(1)}else{n=n.slice(1,-1)}}return z(t,{href:n?n.replace(this.rules.inline._escapes,"$1"):n,title:r?r.replace(this.rules.inline._escapes,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let e=(n[2]||n[1]).replace(/\s+/g," ");e=t[e.toLowerCase()];if(!e||!e.href){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return z(n,e,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const o=r[1]||r[2]||"";if(!o||o&&(n===""||this.rules.inline.punctuation.exec(n))){const n=r[0].length-1;let o,i,s=n,a=0;const l=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;l.lastIndex=0;t=t.slice(-1*e.length+n);while((r=l.exec(t))!=null){o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6];if(!o)continue;i=o.length;if(r[3]||r[4]){s+=i;continue}else if(r[5]||r[6]){if(n%3&&!((n+i)%3)){a+=i;continue}}s-=i;if(s>0)continue;i=Math.min(i,i+s+a);if(Math.min(n,i)%2){const t=e.slice(1,n+r.index+i);return{type:"em",raw:e.slice(0,n+r.index+i+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}const t=e.slice(2,n+r.index+i-1);return{type:"strong",raw:e.slice(0,n+r.index+i+1),text:t,tokens:this.lexer.inlineTokens(t,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e);const r=/^ /.test(e)&&/ $/.test(e);if(n&&r){e=e.substring(1,e.length-1)}e=v(e,true);return{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t){return{type:"br",raw:t[0]}}}del(e){const t=this.rules.inline.del.exec(e);if(t){return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let e,r;if(n[2]==="@"){e=v(this.options.mangle?t(n[1]):n[1]);r="mailto:"+e}else{e=v(n[1]);r=e}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let e,r;if(n[2]==="@"){e=v(this.options.mangle?t(n[0]):n[0]);r="mailto:"+e}else{let t;do{t=n[0];n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(t!==n[0]);e=v(n[0]);if(n[1]==="www."){r="http://"+e}else{r=e}}return{type:"link",raw:n[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e,t){const n=this.rules.inline.text.exec(e);if(n){let e;if(this.lexer.state.inRawBlock){e=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):v(n[0]):n[0]}else{e=v(this.options.smartypants?t(n[0]):n[0])}return{type:"text",raw:n[0],text:e}}}}const H={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:"+"<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)"+"|comment[^\\n]*(\\n+|$)"+"|<\\?[\\s\\S]*?(?:\\?>\\n*|$)"+"|<![A-Z][\\s\\S]*?(?:>\\n*|$)"+"|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)"+"|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)"+"|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)"+"|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)"+")",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:M,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};H._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;H._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;H.def=y(H.def).replace("label",H._label).replace("title",H._title).getRegex();H.bullet=/(?:[*+-]|\d{1,9}[.)])/;H.listItemStart=y(/^( *)(bull) */).replace("bull",H.bullet).getRegex();H.list=y(H.list).replace(/bull/g,H.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+H.def.source+")").getRegex();H._tag="address|article|aside|base|basefont|blockquote|body|caption"+"|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption"+"|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe"+"|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option"+"|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr"+"|track|ul";H._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;H.html=y(H.html,"i").replace("comment",H._comment).replace("tag",H._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();H.paragraph=y(H._paragraph).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex();H.blockquote=y(H.blockquote).replace("paragraph",H.paragraph).getRegex();H.normal=T({},H);H.gfm=T({},H.normal,{table:"^ *([^\\n ].*\\|.*)\\n"+" {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?"+"(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});H.gfm.table=y(H.gfm.table).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex();H.gfm.paragraph=y(H._paragraph).replace("hr",H.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",H.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",H._tag).getRegex();H.pedantic=T({},H.normal,{html:y("^ *(?:comment *(?:\\n|\\s*$)"+"|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)"+"|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",H._comment).replace(/tag/g,"(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub"+"|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)"+"\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:M,paragraph:y(H.normal._paragraph).replace("hr",H.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",H.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const W={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:M,tag:"^comment"+"|^</[a-zA-Z][\\w:-]*\\s*>"+"|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>"+"|^<\\?[\\s\\S]*?\\?>"+"|^<![a-zA-Z]+\\s[\\s\\S]*?>"+"|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:M,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};W._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";W.punctuation=y(W.punctuation).replace(/punctuation/g,W._punctuation).getRegex();W.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;W.escapedEmSt=/\\\*|\\_/g;W._comment=y(H._comment).replace("(?:--\x3e|$)","--\x3e").getRegex();W.emStrong.lDelim=y(W.emStrong.lDelim).replace(/punct/g,W._punctuation).getRegex();W.emStrong.rDelimAst=y(W.emStrong.rDelimAst,"g").replace(/punct/g,W._punctuation).getRegex();W.emStrong.rDelimUnd=y(W.emStrong.rDelimUnd,"g").replace(/punct/g,W._punctuation).getRegex();W._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;W._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;W._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;W.autolink=y(W.autolink).replace("scheme",W._scheme).replace("email",W._email).getRegex();W._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;W.tag=y(W.tag).replace("comment",W._comment).replace("attribute",W._attribute).getRegex();W._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;W._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;W._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;W.link=y(W.link).replace("label",W._label).replace("href",W._href).replace("title",W._title).getRegex();W.reflink=y(W.reflink).replace("label",W._label).replace("ref",H._label).getRegex();W.nolink=y(W.nolink).replace("ref",H._label).getRegex();W.reflinkSearch=y(W.reflinkSearch,"g").replace("reflink",W.reflink).replace("nolink",W.nolink).getRegex();W.normal=T({},W);W.pedantic=T({},W.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:y(/^!?\[(label)\]\((.*?)\)/).replace("label",W._label).getRegex(),reflink:y(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",W._label).getRegex()});W.gfm=T({},W.normal,{escape:y(W.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});W.gfm.url=y(W.gfm.url,"i").replace("email",W.gfm._extended_email).getRegex();W.breaks=T({},W.gfm,{br:y(W.br).replace("{2,}","*").getRegex(),text:y(W.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function V(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function q(e){let t="",n,r;const o=e.length;for(n=0;n<o;n++){r=e.charCodeAt(n);if(Math.random()>.5){r="x"+r.toString(16)}t+="&#"+r+";"}return t}class U{constructor(e){this.tokens=[];this.tokens.links=Object.create(null);this.options=e||d;this.options.tokenizer=this.options.tokenizer||new F;this.tokenizer=this.options.tokenizer;this.tokenizer.options=this.options;this.tokenizer.lexer=this;this.inlineQueue=[];this.state={inLink:false,inRawBlock:false,top:true};const t={block:H.normal,inline:W.normal};if(this.options.pedantic){t.block=H.pedantic;t.inline=W.pedantic}else if(this.options.gfm){t.block=H.gfm;if(this.options.breaks){t.inline=W.breaks}else{t.inline=W.gfm}}this.tokenizer.rules=t}static get rules(){return{block:H,inline:W}}static lex(e,t){const n=new U(t);return n.lex(e)}static lexInline(e,t){const n=new U(t);return n.inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n");this.blockTokens(e,this.tokens);let t;while(t=this.inlineQueue.shift()){this.inlineTokens(t.src,t.tokens)}return this.tokens}blockTokens(e,t=[]){if(this.options.pedantic){e=e.replace(/\t/g,"    ").replace(/^ +$/gm,"")}else{e=e.replace(/^( *)(\t+)/gm,((e,t,n)=>t+"    ".repeat(n.length)))}let n,r,o,i;while(e){if(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((r=>{if(n=r.call({lexer:this},e,t)){e=e.substring(n.raw.length);t.push(n);return true}return false}))){continue}if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);if(n.raw.length===1&&t.length>0){t[t.length-1].raw+="\n"}else{t.push(n)}continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&(r.type==="paragraph"||r.type==="text")){r.raw+="\n"+n.raw;r.text+="\n"+n.text;this.inlineQueue[this.inlineQueue.length-1].src=r.text}else{t.push(n)}continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&(r.type==="paragraph"||r.type==="text")){r.raw+="\n"+n.raw;r.text+="\n"+n.raw;this.inlineQueue[this.inlineQueue.length-1].src=r.text}else if(!this.tokens.links[n.tag]){this.tokens.links[n.tag]={href:n.href,title:n.title}}continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length);t.push(n);continue}o=e;if(this.options.extensions&&this.options.extensions.startBlock){let t=Infinity;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((function(e){r=e.call({lexer:this},n);if(typeof r==="number"&&r>=0){t=Math.min(t,r)}}));if(t<Infinity&&t>=0){o=e.substring(0,t+1)}}if(this.state.top&&(n=this.tokenizer.paragraph(o))){r=t[t.length-1];if(i&&r.type==="paragraph"){r.raw+="\n"+n.raw;r.text+="\n"+n.text;this.inlineQueue.pop();this.inlineQueue[this.inlineQueue.length-1].src=r.text}else{t.push(n)}i=o.length!==e.length;e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&r.type==="text"){r.raw+="\n"+n.raw;r.text+="\n"+n.text;this.inlineQueue.pop();this.inlineQueue[this.inlineQueue.length-1].src=r.text}else{t.push(n)}continue}if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}else{throw new Error(t)}}}this.state.top=true;return t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let n,r,o;let i=e;let s;let a,l;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0){while((s=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null){if(e.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))){i=i.slice(0,s.index)+"["+O("a",s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex)}}}}while((s=this.tokenizer.rules.inline.blockSkip.exec(i))!=null){i=i.slice(0,s.index)+"["+O("a",s[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex)}while((s=this.tokenizer.rules.inline.escapedEmSt.exec(i))!=null){i=i.slice(0,s.index)+"++"+i.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex)}while(e){if(!a){l=""}a=false;if(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>{if(n=r.call({lexer:this},e,t)){e=e.substring(n.raw.length);t.push(n);return true}return false}))){continue}if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&n.type==="text"&&r.type==="text"){r.raw+=n.raw;r.text+=n.text}else{t.push(n)}continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length);r=t[t.length-1];if(r&&n.type==="text"&&r.type==="text"){r.raw+=n.raw;r.text+=n.text}else{t.push(n)}continue}if(n=this.tokenizer.emStrong(e,i,l)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length);t.push(n);continue}if(n=this.tokenizer.autolink(e,q)){e=e.substring(n.raw.length);t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,q))){e=e.substring(n.raw.length);t.push(n);continue}o=e;if(this.options.extensions&&this.options.extensions.startInline){let t=Infinity;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((function(e){r=e.call({lexer:this},n);if(typeof r==="number"&&r>=0){t=Math.min(t,r)}}));if(t<Infinity&&t>=0){o=e.substring(0,t+1)}}if(n=this.tokenizer.inlineText(o,V)){e=e.substring(n.raw.length);if(n.raw.slice(-1)!=="_"){l=n.raw.slice(-1)}a=true;r=t[t.length-1];if(r&&r.type==="text"){r.raw+=n.raw;r.text+=n.text}else{t.push(n)}continue}if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}else{throw new Error(t)}}}return t}}class ${constructor(e){this.options=e||d}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);if(t!=null&&t!==e){n=true;e=t}}e=e.replace(/\n$/,"")+"\n";if(!r){return"<pre><code>"+(n?e:v(e,true))+"</code></pre>\n"}return'<pre><code class="'+this.options.langPrefix+v(r,true)+'">'+(n?e:v(e,true))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e){return e}heading(e,t,n,r){if(this.options.headerIds){const o=this.options.headerPrefix+r.slug(n);return`<h${t} id="${o}">${e}</h${t}>\n`}return`<h${t}>${e}</h${t}>\n`}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,n){const r=t?"ol":"ul",o=t&&n!==1?' start="'+n+'"':"";return"<"+r+o+">\n"+e+"</"+r+">\n"}listitem(e){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>\n`}table(e,t){if(t)t=`<tbody>${t}</tbody>`;return"<table>\n"+"<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const n=t.header?"th":"td";const r=t.align?`<${n} align="${t.align}">`:`<${n}>`;return r+e+`</${n}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,t,n){e=x(this.options.sanitize,this.options.baseUrl,e);if(e===null){return n}let r='<a href="'+v(e)+'"';if(t){r+=' title="'+t+'"'}r+=">"+n+"</a>";return r}image(e,t,n){e=x(this.options.sanitize,this.options.baseUrl,e);if(e===null){return n}let r=`<img src="${e}" alt="${n}"`;if(t){r+=` title="${t}"`}r+=this.options.xhtml?"/>":">";return r}text(e){return e}}class K{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}}class Y{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e;let r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do{r++;n=e+"-"+r}while(this.seen.hasOwnProperty(n))}if(!t){this.seen[e]=r;this.seen[n]=0}return n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}}class G{constructor(e){this.options=e||d;this.options.renderer=this.options.renderer||new $;this.renderer=this.options.renderer;this.renderer.options=this.options;this.textRenderer=new K;this.slugger=new Y}static parse(e,t){const n=new G(t);return n.parse(e)}static parseInline(e,t){const n=new G(t);return n.parseInline(e)}parse(e,t=true){let n="",r,o,i,s,a,l,c,d,u,h,p,m,g,f,A,v,C,_,y;const E=e.length;for(r=0;r<E;r++){h=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]){y=this.options.extensions.renderers[h.type].call({parser:this},h);if(y!==false||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){n+=y||"";continue}}switch(h.type){case"space":{continue}case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(h.tokens),h.depth,b(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{d="";c="";s=h.header.length;for(o=0;o<s;o++){c+=this.renderer.tablecell(this.parseInline(h.header[o].tokens),{header:true,align:h.align[o]})}d+=this.renderer.tablerow(c);u="";s=h.rows.length;for(o=0;o<s;o++){l=h.rows[o];c="";a=l.length;for(i=0;i<a;i++){c+=this.renderer.tablecell(this.parseInline(l[i].tokens),{header:false,align:h.align[i]})}u+=this.renderer.tablerow(c)}n+=this.renderer.table(d,u);continue}case"blockquote":{u=this.parse(h.tokens);n+=this.renderer.blockquote(u);continue}case"list":{p=h.ordered;m=h.start;g=h.loose;s=h.items.length;u="";for(o=0;o<s;o++){A=h.items[o];v=A.checked;C=A.task;f="";if(A.task){_=this.renderer.checkbox(v);if(g){if(A.tokens.length>0&&A.tokens[0].type==="paragraph"){A.tokens[0].text=_+" "+A.tokens[0].text;if(A.tokens[0].tokens&&A.tokens[0].tokens.length>0&&A.tokens[0].tokens[0].type==="text"){A.tokens[0].tokens[0].text=_+" "+A.tokens[0].tokens[0].text}}else{A.tokens.unshift({type:"text",text:_})}}else{f+=_}}f+=this.parse(A.tokens,g);u+=this.renderer.listitem(f,C,v)}n+=this.renderer.list(u,p,m);continue}case"html":{n+=this.renderer.html(h.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{u=h.tokens?this.parseInline(h.tokens):h.text;while(r+1<E&&e[r+1].type==="text"){h=e[++r];u+="\n"+(h.tokens?this.parseInline(h.tokens):h.text)}n+=t?this.renderer.paragraph(u):u;continue}default:{const e='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(e);return}else{throw new Error(e)}}}}return n}parseInline(e,t){t=t||this.renderer;let n="",r,o,i;const s=e.length;for(r=0;r<s;r++){o=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]){i=this.options.extensions.renderers[o.type].call({parser:this},o);if(i!==false||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=i||"";continue}}switch(o.type){case"escape":{n+=t.text(o.text);break}case"html":{n+=t.html(o.text);break}case"link":{n+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{n+=t.image(o.href,o.title,o.text);break}case"strong":{n+=t.strong(this.parseInline(o.tokens,t));break}case"em":{n+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{n+=t.codespan(o.text);break}case"br":{n+=t.br();break}case"del":{n+=t.del(this.parseInline(o.tokens,t));break}case"text":{n+=t.text(o.text);break}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(e);return}else{throw new Error(e)}}}}return n}}function Z(e,t,n){if(typeof e==="undefined"||e===null){throw new Error("marked(): input parameter is undefined or null")}if(typeof e!=="string"){throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected")}if(typeof t==="function"){n=t;t=null}t=T({},Z.defaults,t||{});L(t);if(n){const o=t.highlight;let i;try{i=U.lex(e,t)}catch(r){return n(r)}const s=function(e){let s;if(!e){try{if(t.walkTokens){Z.walkTokens(i,t.walkTokens)}s=G.parse(i,t)}catch(r){e=r}}t.highlight=o;return e?n(e):n(null,s)};if(!o||o.length<3){return s()}delete t.highlight;if(!i.length)return s();let a=0;Z.walkTokens(i,(function(e){if(e.type==="code"){a++;setTimeout((()=>{o(e.text,e.lang,(function(t,n){if(t){return s(t)}if(n!=null&&n!==e.text){e.text=n;e.escaped=true}a--;if(a===0){s()}}))}),0)}}));if(a===0){s()}return}try{const n=U.lex(e,t);if(t.walkTokens){Z.walkTokens(n,t.walkTokens)}return G.parse(n,t)}catch(r){r.message+="\nPlease report this to https://github.com/markedjs/marked.";if(t.silent){return"<p>An error occurred:</p><pre>"+v(r.message+"",true)+"</pre>"}throw r}}Z.options=Z.setOptions=function(e){T(Z.defaults,e);u(Z.defaults);return Z};Z.getDefaults=c;Z.defaults=d;Z.use=function(...e){const t=T({},...e);const n=Z.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach((e=>{if(e.extensions){r=true;e.extensions.forEach((e=>{if(!e.name){throw new Error("extension name required")}if(e.renderer){const t=n.renderers?n.renderers[e.name]:null;if(t){n.renderers[e.name]=function(...n){let r=e.renderer.apply(this,n);if(r===false){r=t.apply(this,n)}return r}}else{n.renderers[e.name]=e.renderer}}if(e.tokenizer){if(!e.level||e.level!=="block"&&e.level!=="inline"){throw new Error("extension level must be 'block' or 'inline'")}if(n[e.level]){n[e.level].unshift(e.tokenizer)}else{n[e.level]=[e.tokenizer]}if(e.start){if(e.level==="block"){if(n.startBlock){n.startBlock.push(e.start)}else{n.startBlock=[e.start]}}else if(e.level==="inline"){if(n.startInline){n.startInline.push(e.start)}else{n.startInline=[e.start]}}}}if(e.childTokens){n.childTokens[e.name]=e.childTokens}}))}if(e.renderer){const n=Z.defaults.renderer||new $;for(const t in e.renderer){const r=n[t];n[t]=(...o)=>{let i=e.renderer[t].apply(n,o);if(i===false){i=r.apply(n,o)}return i}}t.renderer=n}if(e.tokenizer){const n=Z.defaults.tokenizer||new F;for(const t in e.tokenizer){const r=n[t];n[t]=(...o)=>{let i=e.tokenizer[t].apply(n,o);if(i===false){i=r.apply(n,o)}return i}}t.tokenizer=n}if(e.walkTokens){const n=Z.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens.call(this,t);if(n){n.call(this,t)}}}if(r){t.extensions=n}Z.setOptions(t)}))};Z.walkTokens=function(e,t){for(const n of e){t.call(Z,n);switch(n.type){case"table":{for(const e of n.header){Z.walkTokens(e.tokens,t)}for(const e of n.rows){for(const n of e){Z.walkTokens(n.tokens,t)}}break}case"list":{Z.walkTokens(n.items,t);break}default:{if(Z.defaults.extensions&&Z.defaults.extensions.childTokens&&Z.defaults.extensions.childTokens[n.type]){Z.defaults.extensions.childTokens[n.type].forEach((function(e){Z.walkTokens(n[e],t)}))}else if(n.tokens){Z.walkTokens(n.tokens,t)}}}}};Z.parseInline=function(e,t){if(typeof e==="undefined"||e===null){throw new Error("marked.parseInline(): input parameter is undefined or null")}if(typeof e!=="string"){throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected")}t=T({},Z.defaults,t||{});L(t);try{const n=U.lexInline(e,t);if(t.walkTokens){Z.walkTokens(n,t.walkTokens)}return G.parseInline(n,t)}catch(n){n.message+="\nPlease report this to https://github.com/markedjs/marked.";if(t.silent){return"<p>An error occurred:</p><pre>"+v(n.message+"",true)+"</pre>"}throw n}};Z.Parser=G;Z.parser=G.parse;Z.Renderer=$;Z.TextRenderer=K;Z.Lexer=U;Z.lexer=U.lex;Z.Tokenizer=F;Z.Slugger=Y;Z.parse=Z;const J=Z.options;const X=Z.setOptions;const Q=Z.use;const ee=Z.walkTokens;const te=Z.parseInline;const ne=null&&Z;const re=G.parse;const oe=U.lex;var ie=n(26408);var se=undefined&&undefined.__rest||function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++){if(t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o]))n[r[o]]=e[r[o]]}return n};function ae(e){let{host:t,source:n,trusted:r,sanitizer:o,resolver:s,linkHandler:a,shouldTypeset:l,latexTypesetter:c,translator:d}=e;d=d||i.nullTranslator;const u=d===null||d===void 0?void 0:d.load("jupyterlab");let h=n;if(!n){t.textContent="";return Promise.resolve(undefined)}if(!r){h=`${n}`;n=o.sanitize(n)}t.innerHTML=n;if(t.getElementsByTagName("script").length>0){if(r){ge.evalInnerHTMLScriptTags(t)}else{const e=document.createElement("div");const n=document.createElement("pre");n.textContent=u.__("This HTML output contains inline scripts. Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const r=document.createElement("button");r.textContent=u.__("Run");r.onclick=e=>{t.innerHTML=h;ge.evalInnerHTMLScriptTags(t);if(t.firstChild){t.removeChild(t.firstChild)}};e.appendChild(n);e.appendChild(r);t.insertBefore(e,t.firstChild)}}ge.handleDefaults(t,s);let p;if(s){p=ge.handleUrls(t,s,a)}else{p=Promise.resolve(undefined)}return p.then((()=>{if(l&&c){c.typeset(t)}}))}function le(e){const{host:t,mimeType:n,source:r,width:o,height:i,needsBackground:s,unconfined:a}=e;t.textContent="";const l=document.createElement("img");l.src=`data:${n};base64,${r}`;if(typeof i==="number"){l.height=i}if(typeof o==="number"){l.width=o}if(s==="light"){l.classList.add("jp-needs-light-background")}else if(s==="dark"){l.classList.add("jp-needs-dark-background")}if(a===true){l.classList.add("jp-mod-unconfined")}t.appendChild(l);return Promise.resolve(undefined)}function ce(e){const{host:t,source:n,shouldTypeset:r,latexTypesetter:o}=e;t.textContent=n;if(r&&o){o.typeset(t)}return Promise.resolve(undefined)}async function de(e){const{host:t,source:n}=e,r=se(e,["host","source"]);if(!n){t.textContent="";return}const o=(0,ie.D)(n);let i=await ge.renderMarked(o["text"]);i=(0,ie.b)(i,o["math"]);await ae(Object.assign({host:t,source:i},r));ge.headerAnchors(t)}function ue(e){let{host:t,source:n,trusted:r,unconfined:o}=e;if(!n){t.textContent="";return Promise.resolve(undefined)}if(!r){t.textContent="Cannot display an untrusted SVG. Maybe you need to run the cell?";return Promise.resolve(undefined)}const i="<svg[^>]+xmlns=[^>]+svg";if(n.search(i)<0){n=n.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"')}const s=new Image;s.src=`data:image/svg+xml,${encodeURIComponent(n)}`;t.appendChild(s);if(o===true){t.classList.add("jp-mod-unconfined")}return Promise.resolve()}function he(e){const t="\\u0000-\\u0020\\u007f-\\u009f";const n=new RegExp("(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\\/\\/|data:|www\\.)[^\\s"+t+'"]{2,}[^\\s'+t+"\"'(){}\\[\\],:;.!?]","ug");const r=[];let o=0;let i;while(null!=(i=n.exec(e))){if(i.index!==o){r.push(document.createTextNode(e.slice(o,i.index)))}let t=i[0];const n=t.slice(-1);const s=[">","<"].indexOf(n)!==-1;const a=s?t.length-1:t.length;const l=document.createElement("a");t=t.slice(0,a);l.href=t.startsWith("www.")?"https://"+t:t;l.rel="noopener";l.target="_blank";l.appendChild(document.createTextNode(t.slice(0,a)));r.push(l);o=i.index+a}if(o!==e.length){r.push(document.createTextNode(e.slice(o,e.length)))}return r}function pe(e,t){var n,r;const o=e.cloneNode();o.textContent=(n=e.textContent)===null||n===void 0?void 0:n.substr(0,t);const i=e.cloneNode();i.textContent=(r=e.textContent)===null||r===void 0?void 0:r.substr(t);return{pre:o,post:i}}function me(e){var t,n;const{host:r,sanitizer:o,source:i}=e;const s=o.sanitize(ge.ansiSpan(i),{allowedTags:["span"]});const a=document.createElement("pre");a.innerHTML=s;const l=a.textContent;if(l){const e=he(l);let r=false;const o=[];const i=Array.from(a.childNodes);while(i.length&&e.length){let s=i.shift();let a=e.shift();if(typeof s==="undefined"){o.push(a);break}if(typeof a==="undefined"){o.push(s);break}let l=(t=s.textContent)===null||t===void 0?void 0:t.length;let c=(n=a.textContent)===null||n===void 0?void 0:n.length;if(l&&c){if(l>c){let{pre:e,post:t}=pe(s,c);i.unshift(t);s=e}else if(c>l){let{pre:t,post:n}=pe(a,l);e.unshift(n);a=t}}const d=o[o.length-1];if(r&&a.href===d.href){d.appendChild(s)}else{const e=a.nodeType!==Node.TEXT_NODE;if(!e){o.push(s);r=false}else{a.textContent="";a.appendChild(s);o.push(a);r=true}}}a.innerHTML="";for(const t of o){a.appendChild(t)}}r.appendChild(a);return Promise.resolve(undefined)}var ge;(function(e){function t(e){const t=(0,s.toArray)(e.getElementsByTagName("script"));for(const n of t){if(!n.parentNode){continue}const e=document.createElement("script");const t=n.attributes;for(let n=0,r=t.length;n<r;++n){const{name:r,value:o}=t[n];e.setAttribute(r,o)}e.textContent=n.textContent;n.parentNode.replaceChild(e,n)}}e.evalInnerHTMLScriptTags=t;function n(e){p();return new Promise(((t,n)=>{Z(e,((e,r)=>{if(e){n(e)}else{t(r)}}))}))}e.renderMarked=n;function i(e,t){const n=e.getElementsByTagName("a");for(let i=0;i<n.length;i++){const e=n[i];if(!(e instanceof HTMLAnchorElement)){continue}const r=e.href;const s=t&&t.isLocal?t.isLocal(r):o.URLExt.isLocal(r);if(!e.target){e.target=s?"_self":"_blank"}if(!s){e.rel="noopener"}}const r=e.getElementsByTagName("img");for(let o=0;o<r.length;o++){if(!r[o].alt){r[o].alt="Image"}}}e.handleDefaults=i;function a(e,t,n){const r=[];const o=e.querySelectorAll("*[src]");for(let a=0;a<o.length;a++){r.push(d(o[a],"src",t))}const i=e.getElementsByTagName("a");for(let a=0;a<i.length;a++){r.push(u(i[a],t,n))}const s=e.getElementsByTagName("link");for(let a=0;a<s.length;a++){r.push(d(s[a],"href",t))}return Promise.all(r).then((()=>undefined))}e.handleUrls=a;function c(e){var t;const n=["h1","h2","h3","h4","h5","h6"];for(const r of n){const n=e.getElementsByTagName(r);for(let e=0;e<n.length;e++){const r=n[e];r.id=((t=r.textContent)!==null&&t!==void 0?t:"").replace(/ /g,"-");const o=document.createElement("a");o.target="_self";o.textContent="";o.href="#"+r.id;o.classList.add("jp-InternalAnchorLink");r.appendChild(o)}}}e.headerAnchors=c;async function d(e,t,n){const r=e.getAttribute(t)||"";const i=n.isLocal?n.isLocal(r):o.URLExt.isLocal(r);if(!r||!i){return}try{const i=await n.resolveUrl(r);let s=await n.getDownloadUrl(i);if(o.URLExt.parse(s).protocol!=="data:"){s+=(/\?/.test(s)?"&":"?")+(new Date).getTime()}e.setAttribute(t,s)}catch(s){e.setAttribute(t,"");throw s}}function u(e,t,n){let r=e.getAttribute("href")||"";const i=t.isLocal?t.isLocal(r):o.URLExt.isLocal(r);if(!r||!i){return Promise.resolve(undefined)}const s=e.hash;if(s){if(s===r){e.target="_self";return Promise.resolve(undefined)}r=r.replace(s,"")}return t.resolveUrl(r).then((r=>{const o=decodeURIComponent(r);if(n){n.handleLink(e,o,s)}return t.getDownloadUrl(r)})).then((t=>{e.href=t+s})).catch((t=>{e.href=""}))}let h=false;function p(){if(h){return}h=true;Z.setOptions({gfm:true,sanitize:false,langPrefix:`cm-s-${r.CodeMirrorEditor.defaultConfig.theme} language-`,highlight:(e,t,n)=>{const o=(e,t)=>{if(n){n(e,t)}return t};if(!t){return o(null,e)}r.Mode.ensure(t).then((n=>{const i=document.createElement("div");if(!n){console.error(`No CodeMirror mode: ${t}`);return o(null,e)}try{r.Mode.run(e,n.mime,i);return o(null,i.innerHTML)}catch(s){console.error(`Failed to highlight ${t} code`,s);return o(s,e)}})).catch((n=>{console.error(`No CodeMirror mode: ${t}`);console.error(`Require CodeMirror mode error: ${n}`);return o(null,e)}));return e}})}const m=["ansi-black","ansi-red","ansi-green","ansi-yellow","ansi-blue","ansi-magenta","ansi-cyan","ansi-white","ansi-black-intense","ansi-red-intense","ansi-green-intense","ansi-yellow-intense","ansi-blue-intense","ansi-magenta-intense","ansi-cyan-intense","ansi-white-intense"];function g(e,t,n,r,o,i,s){if(e){const a=[];const l=[];if(r&&typeof t==="number"&&0<=t&&t<8){t+=8}if(i){[t,n]=[n,t]}if(typeof t==="number"){a.push(m[t]+"-fg")}else if(t.length){l.push(`color: rgb(${t})`)}else if(i){a.push("ansi-default-inverse-fg")}if(typeof n==="number"){a.push(m[n]+"-bg")}else if(n.length){l.push(`background-color: rgb(${n})`)}else if(i){a.push("ansi-default-inverse-bg")}if(r){a.push("ansi-bold")}if(o){a.push("ansi-underline")}if(a.length||l.length){s.push("<span");if(a.length){s.push(` class="${a.join(" ")}"`)}if(l.length){s.push(` style="${l.join("; ")}"`)}s.push(">");s.push(e);s.push("</span>")}else{s.push(e)}}}function f(e){let t;let n;let r;const o=e.shift();if(o===2&&e.length>=3){t=e.shift();n=e.shift();r=e.shift();if([t,n,r].some((e=>e<0||255<e))){throw new RangeError("Invalid range for RGB colors")}}else if(o===5&&e.length>=1){const o=e.shift();if(o<0){throw new RangeError("Color index must be >= 0")}else if(o<16){return o}else if(o<232){t=Math.floor((o-16)/36);t=t>0?55+t*40:0;n=Math.floor((o-16)%36/6);n=n>0?55+n*40:0;r=(o-16)%6;r=r>0?55+r*40:0}else if(o<256){t=n=r=(o-232)*10+8}else{throw new RangeError("Color index must be < 256")}}else{throw new RangeError("Invalid extended color specification")}return[t,n,r]}function A(e){const t=/\x1b\[(.*?)([@-~])/g;let n=[];let r=[];let o=false;let i=false;let s=false;let a;const c=[];const d=[];let u=0;e=l()(e);e+="[m";while(a=t.exec(e)){if(a[2]==="m"){const e=a[1].split(";");for(let t=0;t<e.length;t++){const n=e[t];if(n===""){d.push(0)}else if(n.search(/^\d+$/)!==-1){d.push(parseInt(n,10))}else{d.length=0;break}}}else{}const l=e.substring(u,a.index);g(l,n,r,o,i,s,c);u=t.lastIndex;while(d.length){const e=d.shift();switch(e){case 0:n=r=[];o=false;i=false;s=false;break;case 1:case 5:o=true;break;case 4:i=true;break;case 7:s=true;break;case 21:case 22:o=false;break;case 24:i=false;break;case 27:s=false;break;case 30:case 31:case 32:case 33:case 34:case 35:case 36:case 37:n=e-30;break;case 38:try{n=f(d)}catch(h){d.length=0}break;case 39:n=[];break;case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:r=e-40;break;case 48:try{r=f(d)}catch(h){d.length=0}break;case 49:r=[];break;case 90:case 91:case 92:case 93:case 94:case 95:case 96:case 97:n=e-90+8;break;case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:r=e-100+8;break;default:}}}return c.join("")}e.ansiSpan=A})(ge||(ge={}))},30273:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,_:()=>s});var r=n(91100);var o=n.n(r);const i=new r.Token("@jupyterlab/rendermime:IRenderMimeRegistry");const s=new r.Token("@jupyterlab/rendermime:ILatexTypesetter")},7848:(e,t,n)=>{"use strict";n.d(t,{pY:()=>l,BP:()=>c,oI:()=>d,FK:()=>u,UH:()=>h,cw:()=>p,zt:()=>m,lH:()=>g,ND:()=>f});var r=n(59768);var o=n.n(r);var i=n(700);var s=n.n(i);var a=n(31443);class l extends i.Widget{constructor(e){super();this.mimeType=e.mimeType;this.sanitizer=e.sanitizer;this.resolver=e.resolver;this.linkHandler=e.linkHandler;this.translator=e.translator||r.nullTranslator;this.latexTypesetter=e.latexTypesetter;this.node.dataset["mimeType"]=this.mimeType}async renderModel(e){while(this.node.firstChild){this.node.removeChild(this.node.firstChild)}this.toggleClass("jp-mod-trusted",e.trusted);await this.render(e);const{fragment:t}=e.metadata;if(t){this.setFragment(t)}}setFragment(e){}}class c extends l{constructor(e){super(e);this.addClass("jp-RenderedHTMLCommon")}setFragment(e){let t;try{t=this.node.querySelector(e.startsWith("#")?`#${CSS.escape(e.slice(1))}`:e)}catch(n){console.warn("Unable to set URI fragment identifier.",n)}if(t){t.scrollIntoView()}}}class d extends c{constructor(e){super(e);this.addClass("jp-RenderedHTML")}render(e){return a.NN({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,translator:this.translator})}onAfterAttach(e){if(this.latexTypesetter){this.latexTypesetter.typeset(this.node)}}}class u extends l{constructor(e){super(e);this.addClass("jp-RenderedLatex")}render(e){return a.K3({host:this.node,source:String(e.data[this.mimeType]),shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter})}onAfterAttach(e){if(this.latexTypesetter){this.latexTypesetter.typeset(this.node)}}}class h extends l{constructor(e){super(e);this.addClass("jp-RenderedImage")}render(e){const t=e.metadata[this.mimeType];return a.co({host:this.node,mimeType:this.mimeType,source:String(e.data[this.mimeType]),width:t&&t.width,height:t&&t.height,needsBackground:e.metadata["needs_background"],unconfined:t&&t.unconfined})}}class p extends c{constructor(e){super(e);this.addClass("jp-RenderedMarkdown")}render(e){return a.ap({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,resolver:this.resolver,sanitizer:this.sanitizer,linkHandler:this.linkHandler,shouldTypeset:this.isAttached,latexTypesetter:this.latexTypesetter,translator:this.translator})}onAfterAttach(e){if(this.latexTypesetter){this.latexTypesetter.typeset(this.node)}}}class m extends l{constructor(e){super(e);this.addClass("jp-RenderedSVG")}render(e){const t=e.metadata[this.mimeType];return a.KB({host:this.node,source:String(e.data[this.mimeType]),trusted:e.trusted,unconfined:t&&t.unconfined,translator:this.translator})}onAfterAttach(e){if(this.latexTypesetter){this.latexTypesetter.typeset(this.node)}}}class g extends l{constructor(e){super(e);this.addClass("jp-RenderedText")}render(e){return a.IY({host:this.node,sanitizer:this.sanitizer,source:String(e.data[this.mimeType]),translator:this.translator})}}class f extends l{constructor(e){super(e);this.addClass("jp-RenderedJavaScript")}render(e){const t=this.translator.load("jupyterlab");return a.IY({host:this.node,sanitizer:this.sanitizer,source:t.__("JavaScript output is disabled in JupyterLab"),translator:this.translator})}}},98896:(e,t,n)=>{"use strict";var r=n(32902);var o=n(79536);var i=n(37935);var s=n(93379);var a=n.n(s);var l=n(60658);var c={};c.insert="head";c.singleton=false;var d=a()(l.Z,c);const u=l.Z.locals||{}},39914:(e,t,n)=>{"use strict";n.r(t);n.d(t,{default:()=>g});var r=n(97577);var o=n(1379);var i=n(59768);var s=n(25903);var a=n(69442);var l=n(54522);function c(e,t,n){const r=t.load("jupyterlab");const o=n.serviceManager.sessions;const i=n.serviceManager.kernelspecs;function c(e){return!!((e.name||a.PathExt.basename(e.path)).indexOf(".")!==-1||e.name)}e.add({name:r.__("Kernels"),running:()=>(0,l.toArray)(o.running()).filter(c).map((e=>new d(e))),shutdownAll:()=>o.shutdownAll(),refreshRunning:()=>o.refreshRunning(),runningChanged:o.runningChanged,shutdownLabel:r.__("Shut Down"),shutdownAllLabel:r.__("Shut Down All"),shutdownAllConfirmationText:r.__("Are you sure you want to permanently shut down all running kernels?")});class d{constructor(e){this._model=e}open(){const{path:e,type:t}=this._model;if(t.toLowerCase()==="console"){void n.commands.execute("console:open",{path:e})}else{void n.commands.execute("docmanager:open",{path:e})}}shutdown(){return o.shutdown(this._model.id)}icon(){const{name:e,path:t,type:n}=this._model;if((e||a.PathExt.basename(t)).indexOf(".ipynb")!==-1){return s.notebookIcon}else if(n.toLowerCase()==="console"){return s.consoleIcon}return s.fileIcon}label(){return this._model.name||a.PathExt.basename(this._model.path)}labelTitle(){const{kernel:e,path:t}=this._model;let n=e===null||e===void 0?void 0:e.name;if(n&&i.specs){const e=i.specs.kernelspecs[n];n=e?e.display_name:"unknown"}return r.__("Path: %1\nKernel: %2",t,n)}}}var d=n(34576);var u=n(18987);class h{constructor(e){this._tabsChanged=new u.Signal(this);this._widgets=[];this._labShell=e;this._labShell.layoutModified.connect(this._emitTabsChanged,this)}get tabsChanged(){return this._tabsChanged}addWidget(e){e.title.changed.connect(this._emitTabsChanged,this);this._widgets.push(e)}_emitTabsChanged(){this._widgets.forEach((e=>{e.title.changed.disconnect(this._emitTabsChanged,this)}));this._widgets=[];this._tabsChanged.emit(void 0)}}function p(e,t,n){const r=new h(n);const o=t.load("jupyterlab");e.add({name:o.__("Open Tabs"),running:()=>(0,l.toArray)(n.widgets("main")).map((e=>{r.addWidget(e);return new i(e)})),shutdownAll:()=>{(0,l.toArray)(n.widgets("main")).forEach((e=>{e.close()}))},refreshRunning:()=>void 0,runningChanged:r.tabsChanged,shutdownLabel:o.__("Close"),shutdownAllLabel:o.__("Close All"),shutdownAllConfirmationText:o.__("Are you sure you want to close all open tabs?")});class i{constructor(e){this._widget=e}open(){n.activateById(this._widget.id)}shutdown(){this._widget.close()}icon(){const e=this._widget.title.icon;return e instanceof s.LabIcon?e:s.fileIcon}label(){return this._widget.title.label}labelTitle(){let e;if(this._widget instanceof d.DocumentWidget){e=this._widget.context.path}else{e=this._widget.title.label}return e}}}const m={activate:f,id:"@jupyterlab/running-extension:plugin",provides:o.IRunningSessionManagers,requires:[i.ITranslator],optional:[r.ILayoutRestorer,r.ILabShell],autoStart:true};const g=m;function f(e,t,n,r){const i=t.load("jupyterlab");const a=new o.RunningSessionManagers;const l=new o.RunningSessions(a,t);l.id="jp-running-sessions";l.title.caption=i.__("Running Terminals and Kernels");l.title.icon=s.runningIcon;l.node.setAttribute("role","region");l.node.setAttribute("aria-label",i.__("Running Sessions section"));if(n){n.add(l,"running-sessions")}if(r){p(a,t,r)}c(a,t,e);e.shell.add(l,"left",{rank:200});return a}},3268:(e,t,n)=>{"use strict";var r=n(32902);var o=n(34849);var i=n(94683);var s=n(90516);var a=n(90088)},18981:(e,t,n)=>{"use strict";n.r(t);n.d(t,{IRunningSessionManagers:()=>j,RunningSessionManagers:()=>k,RunningSessions:()=>I});var r=n(3378);var o=n.n(r);var i=n(59768);var s=n.n(i);var a=n(25903);var l=n.n(a);var c=n(91100);var d=n.n(c);var u=n(64782);var h=n.n(u);var p=n(77865);var m=n.n(p);const g="jp-RunningSessions";const f="jp-RunningSessions-header";const A="jp-RunningSessions-section";const v="jp-RunningSessions-sectionHeader";const C="jp-RunningSessions-sectionContainer";const b="jp-RunningSessions-sectionList";const _="jp-RunningSessions-item";const y="jp-RunningSessions-itemLabel";const E="jp-RunningSessions-itemDetail";const w="jp-RunningSessions-itemShutdown";const x="jp-RunningSessions-shutdownAll";const j=new c.Token("@jupyterlab/running:IRunningSessionManagers");class k{constructor(){this._managers=[]}add(e){this._managers.push(e);return new u.DisposableDelegate((()=>{const t=this._managers.indexOf(e);if(t>-1){this._managers.splice(t,1)}}))}items(){return this._managers}}function B(e){var t;const{runningItem:n}=e;const o=n.icon();const s=(t=n.detail)===null||t===void 0?void 0:t.call(n);const l=e.translator||i.nullTranslator;const c=l.load("jupyterlab");const d=e.shutdownLabel||c.__("Shut Down");const u=e.shutdownItemIcon||a.closeIcon;return p.createElement("li",{className:_},p.createElement(o.react,{tag:"span",stylesheet:"runningItem"}),p.createElement("span",{className:y,title:n.labelTitle?n.labelTitle():"",onClick:()=>n.open()},n.label()),s&&p.createElement("span",{className:E},s),p.createElement(r.ToolbarButtonComponent,{className:w,icon:u,onClick:()=>n.shutdown(),tooltip:d}))}function S(e){return p.createElement("ul",{className:b},e.runningItems.map(((t,n)=>p.createElement(B,{key:n,runningItem:t,shutdownLabel:e.shutdownLabel,shutdownItemIcon:e.shutdownItemIcon,translator:e.translator}))))}function D(e){return p.createElement(r.UseSignal,{signal:e.manager.runningChanged},(()=>p.createElement(S,{runningItems:e.manager.running(),shutdownLabel:e.shutdownLabel,shutdownAllLabel:e.shutdownAllLabel,shutdownItemIcon:e.manager.shutdownItemIcon,translator:e.translator})))}function M(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");const o=e.manager.shutdownAllLabel||n.__("Shut Down All");const s=`${o}?`;const a=e.manager.shutdownAllConfirmationText||`${o} ${e.manager.name}`;function l(){void(0,r.showDialog)({title:s,body:a,buttons:[r.Dialog.cancelButton({label:n.__("Cancel")}),r.Dialog.warnButton({label:o})]}).then((t=>{if(t.button.accept){e.manager.shutdownAll()}}))}return p.createElement("div",{className:A},p.createElement(p.Fragment,null,p.createElement("div",{className:`${v} jp-stack-panel-header`},p.createElement("h2",null,e.manager.name),p.createElement(r.UseSignal,{signal:e.manager.runningChanged},(()=>{const t=e.manager.running().length===0;return p.createElement("button",{className:`${x} jp-mod-styled ${t&&"jp-mod-disabled"}`,disabled:t,onClick:l},o)}))),p.createElement("div",{className:C},p.createElement(D,{manager:e.manager,shutdownLabel:e.manager.shutdownLabel,shutdownAllLabel:o,translator:e.translator}))))}function T(e){const t=e.translator||i.nullTranslator;const n=t.load("jupyterlab");return p.createElement(p.Fragment,null,p.createElement("div",{className:f},p.createElement(r.ToolbarButtonComponent,{tooltip:n.__("Refresh List"),icon:a.refreshIcon,onClick:()=>e.managers.items().forEach((e=>e.refreshRunning()))})),e.managers.items().map((t=>p.createElement(M,{key:t.name,manager:t,translator:e.translator}))))}class I extends r.ReactWidget{constructor(e,t){super();this.managers=e;this.translator=t||i.nullTranslator;this.addClass(g)}render(){return p.createElement(T,{managers:this.managers,translator:this.translator})}}},90088:(e,t,n)=>{"use strict";var r=n(34849);var o=n(79536);var i=n(93379);var s=n.n(i);var a=n(53693);var l={};l.insert="head";l.singleton=false;var c=s()(a.Z,l);const d=a.Z.locals||{}},50591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseManager=void 0;const r=n(18987);const o=n(28477);class i{constructor(e){var t;this._isDisposed=false;this._disposed=new r.Signal(this);this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:o.ServerConnection.makeSettings()}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._disposed.emit(undefined);r.Signal.clearData(this)}}t.BaseManager=i},33227:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BuildManager=void 0;const r=n(69442);const o=n(28477);const i="api/build";class s{constructor(e={}){var t;this._url="";this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:o.ServerConnection.makeSettings();const{baseUrl:n,appUrl:s}=this.serverSettings;this._url=r.URLExt.join(n,s,i)}get isAvailable(){return r.PageConfig.getOption("buildAvailable").toLowerCase()==="true"}get shouldCheck(){return r.PageConfig.getOption("buildCheck").toLowerCase()==="true"}getStatus(){const{_url:e,serverSettings:t}=this;const n=o.ServerConnection.makeRequest(e,{},t);return n.then((e=>{if(e.status!==200){throw new o.ServerConnection.ResponseError(e)}return e.json()})).then((e=>{if(typeof e.status!=="string"){throw new Error("Invalid data")}if(typeof e.message!=="string"){throw new Error("Invalid data")}return e}))}build(){const{_url:e,serverSettings:t}=this;const n={method:"POST"};const r=o.ServerConnection.makeRequest(e,n,t);return r.then((e=>{if(e.status===400){throw new o.ServerConnection.ResponseError(e,"Build aborted")}if(e.status!==200){const t=`Build failed with ${e.status}.\n\n        If you are experiencing the build failure after installing an extension (or trying to include previously installed extension after updating JupyterLab) please check the extension repository for new installation instructions as many extensions migrated to the prebuilt extensions system which no longer requires rebuilding JupyterLab (but uses a different installation procedure, typically involving a package manager such as 'pip' or 'conda').\n\n        If you specifically intended to install a source extension, please run 'jupyter lab build' on the server for full output.`;throw new o.ServerConnection.ResponseError(e,t)}}))}cancel(){const{_url:e,serverSettings:t}=this;const n={method:"DELETE"};const r=o.ServerConnection.makeRequest(e,n,t);return r.then((e=>{if(e.status!==204){throw new o.ServerConnection.ResponseError(e)}}))}}t.BuildManager=s},95077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConfigWithDefaults=t.ConfigSection=void 0;const r=n(69442);const o=n(76240);const i="api/config";var s;(function(e){function t(e){const t=new a(e);return t.load().then((()=>t))}e.create=t})(s=t.ConfigSection||(t.ConfigSection={}));class a{constructor(e){var t;this._url="unknown";const n=this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:o.ServerConnection.makeSettings();this._url=r.URLExt.join(n.baseUrl,i,encodeURIComponent(e.name))}get data(){return this._data}async load(){const e=await o.ServerConnection.makeRequest(this._url,{},this.serverSettings);if(e.status!==200){const t=await o.ServerConnection.ResponseError.create(e);throw t}this._data=await e.json()}async update(e){this._data=Object.assign(Object.assign({},this._data),e);const t={method:"PATCH",body:JSON.stringify(e)};const n=await o.ServerConnection.makeRequest(this._url,t,this.serverSettings);if(n.status!==200){const e=await o.ServerConnection.ResponseError.create(n);throw e}this._data=await n.json();return this._data}}class l{constructor(e){var t,n;this._className="";this._section=e.section;this._defaults=(t=e.defaults)!==null&&t!==void 0?t:{};this._className=(n=e.className)!==null&&n!==void 0?n:""}get(e){const t=this._classData();return e in t?t[e]:this._defaults[e]}set(e,t){const n={};n[e]=t;if(this._className){const e={};e[this._className]=n;return this._section.update(e)}else{return this._section.update(n)}}_classData(){const e=this._section.data;if(this._className&&this._className in e){return e[this._className]}return e}}t.ConfigWithDefaults=l},63644:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;Object.defineProperty(e,r,{enumerable:true,get:function(){return t[n]}})}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);o(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.Drive=t.ContentsManager=t.Contents=void 0;const s=n(69442);const a=n(54522);const l=n(18987);const c=n(76240);const d=i(n(65460));const u="api/contents";const h="files";var p;(function(e){function t(e){d.validateContentsModel(e)}e.validateContentsModel=t;function n(e){d.validateCheckpointModel(e)}e.validateCheckpointModel=n})(p=t.Contents||(t.Contents={}));class m{constructor(e={}){var t,n;this._isDisposed=false;this._additionalDrives=new Map;this._fileChanged=new l.Signal(this);const r=this.serverSettings=(t=e.serverSettings)!==null&&t!==void 0?t:c.ServerConnection.makeSettings();this._defaultDrive=(n=e.defaultDrive)!==null&&n!==void 0?n:new g({serverSettings:r});this._defaultDrive.fileChanged.connect(this._onFileChanged,this)}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;l.Signal.clearData(this)}addDrive(e){this._additionalDrives.set(e.name,e);e.fileChanged.connect(this._onFileChanged,this)}getModelDBFactory(e){var t;const[n]=this._driveForPath(e);return(t=n===null||n===void 0?void 0:n.modelDBFactory)!==null&&t!==void 0?t:null}localPath(e){const t=e.split("/");const n=t[0].split(":");if(n.length===1||!this._additionalDrives.has(n[0])){return s.PathExt.removeSlash(e)}return s.PathExt.join(n.slice(1).join(":"),...t.slice(1))}normalize(e){const t=e.split(":");if(t.length===1){return s.PathExt.normalize(e)}return`${t[0]}:${s.PathExt.normalize(t.slice(1).join(":"))}`}resolvePath(e,t){const n=this.driveName(e);const r=this.localPath(e);const o=s.PathExt.resolve("/",r,t);return n?`${n}:${o}`:o}driveName(e){const t=e.split("/");const n=t[0].split(":");if(n.length===1){return""}if(this._additionalDrives.has(n[0])){return n[0]}return""}get(e,t){const[n,r]=this._driveForPath(e);return n.get(r,t).then((e=>{const t=[];if(e.type==="directory"&&e.content){a.each(e.content,(e=>{t.push(Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)}))}));return Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r),content:t})}else{return Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,r)})}}))}getDownloadUrl(e){const[t,n]=this._driveForPath(e);return t.getDownloadUrl(n)}newUntitled(e={}){if(e.path){const t=this.normalize(e.path);const[n,r]=this._driveForPath(t);return n.newUntitled(Object.assign(Object.assign({},e),{path:r})).then((e=>Object.assign(Object.assign({},e),{path:s.PathExt.join(t,e.name)})))}else{return this._defaultDrive.newUntitled(e)}}delete(e){const[t,n]=this._driveForPath(e);return t.delete(n)}rename(e,t){const[n,r]=this._driveForPath(e);const[o,i]=this._driveForPath(t);if(n!==o){throw Error("ContentsManager: renaming files must occur within a Drive")}return n.rename(r,i).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,i)})))}save(e,t={}){const n=this.normalize(e);const[r,o]=this._driveForPath(e);return r.save(o,Object.assign(Object.assign({},t),{path:o})).then((e=>Object.assign(Object.assign({},e),{path:n})))}copy(e,t){const[n,r]=this._driveForPath(e);const[o,i]=this._driveForPath(t);if(n===o){return n.copy(r,i).then((e=>Object.assign(Object.assign({},e),{path:this._toGlobalPath(n,e.path)})))}else{throw Error("Copying files between drives is not currently implemented")}}createCheckpoint(e){const[t,n]=this._driveForPath(e);return t.createCheckpoint(n)}listCheckpoints(e){const[t,n]=this._driveForPath(e);return t.listCheckpoints(n)}restoreCheckpoint(e,t){const[n,r]=this._driveForPath(e);return n.restoreCheckpoint(r,t)}deleteCheckpoint(e,t){const[n,r]=this._driveForPath(e);return n.deleteCheckpoint(r,t)}_toGlobalPath(e,t){if(e===this._defaultDrive){return s.PathExt.removeSlash(t)}else{return`${e.name}:${s.PathExt.removeSlash(t)}`}}_driveForPath(e){const t=this.driveName(e);const n=this.localPath(e);if(t){return[this._additionalDrives.get(t),n]}else{return[this._defaultDrive,n]}}_onFileChanged(e,t){var n,r;if(e===this._defaultDrive){this._fileChanged.emit(t)}else{let o=null;let i=null;if((n=t.newValue)===null||n===void 0?void 0:n.path){o=Object.assign(Object.assign({},t.newValue),{path:this._toGlobalPath(e,t.newValue.path)})}if((r=t.oldValue)===null||r===void 0?void 0:r.path){i=Object.assign(Object.assign({},t.oldValue),{path:this._toGlobalPath(e,t.oldValue.path)})}this._fileChanged.emit({type:t.type,newValue:o,oldValue:i})}}}t.ContentsManager=m;class g{constructor(e={}){var t,n,r;this._isDisposed=false;this._fileChanged=new l.Signal(this);this.name=(t=e.name)!==null&&t!==void 0?t:"Default";this._apiEndpoint=(n=e.apiEndpoint)!==null&&n!==void 0?n:u;this.serverSettings=(r=e.serverSettings)!==null&&r!==void 0?r:c.ServerConnection.makeSettings()}get fileChanged(){return this._fileChanged}get isDisposed(){return this._isDisposed}dispose(){if(this.isDisposed){return}this._isDisposed=true;l.Signal.clearData(this)}async get(e,t){let n=this._getUrl(e);if(t){if(t.type==="notebook"){delete t["format"]}const e=t.content?"1":"0";const r=Object.assign(Object.assign({},t),{content:e});n+=s.URLExt.objectToQueryString(r)}const r=this.serverSettings;const o=await c.ServerConnection.makeRequest(n,{},r);if(o.status!==200){const e=await c.ServerConnection.ResponseError.create(o);throw e}const i=await o.json();d.validateContentsModel(i);return i}getDownloadUrl(e){const t=this.serverSettings.baseUrl;let n=s.URLExt.join(t,h,s.URLExt.encodeParts(e));const r=document.cookie.match("\\b_xsrf=([^;]*)\\b");if(r){const e=new URL(n);e.searchParams.append("_xsrf",r[1]);n=e.toString()}return Promise.resolve(n)}async newUntitled(e={}){var t;let n="{}";if(e){if(e.ext){e.ext=f.normalizeExtension(e.ext)}n=JSON.stringify(e)}const r=this.serverSettings;const o=this._getUrl((t=e.path)!==null&&t!==void 0?t:"");const i={method:"POST",body:n};const s=await c.ServerConnection.makeRequest(o,i,r);if(s.status!==201){const e=await c.ServerConnection.ResponseError.create(s);throw e}const a=await s.json();d.validateContentsModel(a);t